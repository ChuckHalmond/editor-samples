{"version":3,"file":"main.js","mappings":"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","sources":["webpack://main/webpack/bootstrap","webpack://main/webpack/runtime/define property getters","webpack://main/webpack/runtime/global","webpack://main/webpack/runtime/hasOwnProperty shorthand","webpack://main/webpack/runtime/make namespace object","webpack://main/webpack/runtime/publicPath","webpack://main/../editor/lib/models/Model.js","webpack://main/../editor/lib/elements/Snippets.js","webpack://main/../editor/lib/elements/Element.js","webpack://main/../editor/lib/views/View.js","webpack://main/../editor/lib/stylesheets/Theme.js","webpack://main/../editor/lib/stylesheets/Reset.js","webpack://main/../editor/lib/elements/controls/sashes/HeightSash.js","webpack://main/../editor/lib/elements/controls/sashes/WidthSash.js","webpack://main/../editor/lib/elements/containers/grid/GridCell.js","webpack://main/../editor/lib/elements/containers/grid/GridRow.js","webpack://main/../editor/lib/elements/containers/grid/GridBody.js","webpack://main/../editor/lib/elements/containers/grid/GridHead.js","webpack://main/../editor/lib/elements/containers/grid/GridRowGroup.js","webpack://main/../editor/lib/elements/containers/grid/Grid.js","webpack://main/../editor/lib/elements/containers/menus/MenuItem.js","webpack://main/../editor/lib/elements/containers/menus/MenuItemGroup.js","webpack://main/../editor/lib/elements/containers/menus/Menu.js","webpack://main/../editor/lib/elements/containers/menus/MenuBar.js","webpack://main/../editor/lib/elements/containers/menus/MenuButton.js","webpack://main/../editor/lib/views/GridView.js","webpack://main/../editor/lib/elements/containers/trees/TreeItem.js","webpack://main/../editor/lib/elements/containers/trees/TreeItemGroup.js","webpack://main/../editor/lib/elements/containers/trees/Tree.js","webpack://main/../editor/lib/views/TreeView.js","webpack://main/./src/MyTreeView.ts","webpack://main/./src/MyGridView.ts","webpack://main/../editor/lib/elements/containers/toolbars/ToolBarItem.js","webpack://main/../editor/lib/elements/containers/toolbars/ToolBarItemGroup.js","webpack://main/../editor/lib/elements/containers/toolbars/ToolBar.js","webpack://main/../editor/lib/elements/containers/lists/ListItem.js","webpack://main/../editor/lib/elements/containers/lists/ListItemGroup.js","webpack://main/../editor/lib/elements/containers/lists/List.js","webpack://main/../editor/lib/elements/containers/tabs/TabPanel.js","webpack://main/../editor/lib/elements/containers/tabs/Tab.js","webpack://main/../editor/lib/elements/containers/tabs/TabList.js","webpack://main/../editor/lib/elements/containers/status/StatusItem.js","webpack://main/../editor/lib/elements/containers/status/StatusItemGroup.js","webpack://main/../editor/lib/elements/containers/status/StatusBar.js","webpack://main/../editor/lib/elements/misc/Handle.js","webpack://main/../editor/lib/elements/misc/Import.js","webpack://main/../editor/lib/elements/misc/Loader.js","webpack://main/../editor/lib/elements/misc/Separator.js","webpack://main/../editor/lib/elements/misc/ToolTip.js","webpack://main/./main.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","export { ModelChangeRecord };\r\nexport { ModelEvent };\r\nexport { ModelNode };\r\nexport { ModelObject };\r\nexport { ReactiveProperty };\r\nexport { ModelList };\r\nexport { ModelChangeObserver };\r\nclass ModelChangeRecordBase {\r\n    target;\r\n    changeType;\r\n    propertyName;\r\n    oldValue;\r\n    newValue;\r\n    removedIndex;\r\n    removedItems;\r\n    insertedIndex;\r\n    insertedItems;\r\n    sortedIndices;\r\n    constructor(init) {\r\n        this.target = init.target;\r\n        this.changeType = init.changeType;\r\n        this.propertyName = init.propertyName ?? null;\r\n        this.oldValue = init.oldValue ?? undefined;\r\n        this.newValue = init.newValue ?? undefined;\r\n        this.removedIndex = init.removedIndex ?? 0;\r\n        this.removedItems = new ModelNodesList(init.removedItems ?? []);\r\n        this.insertedIndex = init.insertedIndex ?? 0;\r\n        this.insertedItems = new ModelNodesList(init.insertedItems ?? []);\r\n        this.sortedIndices = init.sortedIndices ?? [];\r\n    }\r\n    static get PROPERTY_CHANGE() {\r\n        return 1;\r\n    }\r\n    static get LIST_REMOVE() {\r\n        return 2;\r\n    }\r\n    static get LIST_INSERT() {\r\n        return 3;\r\n    }\r\n    static get LIST_SORT() {\r\n        return 4;\r\n    }\r\n    get PROPERTY_CHANGE() {\r\n        return ModelChangeRecordBase.PROPERTY_CHANGE;\r\n    }\r\n    get LIST_REMOVE() {\r\n        return ModelChangeRecordBase.LIST_REMOVE;\r\n    }\r\n    get LIST_INSERT() {\r\n        return ModelChangeRecordBase.LIST_INSERT;\r\n    }\r\n    get LIST_SORT() {\r\n        return ModelChangeRecordBase.LIST_SORT;\r\n    }\r\n}\r\nvar ModelChangeRecord = ModelChangeRecordBase;\r\nclass ModelNodesListBase {\r\n    #items;\r\n    constructor(items) {\r\n        this.#items = items.slice();\r\n    }\r\n    get length() {\r\n        return this.#items.length;\r\n    }\r\n    item(index) {\r\n        return this.#items[index] ?? null;\r\n    }\r\n    values() {\r\n        return this.#items.values();\r\n    }\r\n}\r\nvar ModelNodesList = ModelNodesListBase;\r\nclass ModelEventBase {\r\n    type;\r\n    #currentTarget;\r\n    #target;\r\n    constructor(type) {\r\n        this.type = type;\r\n        this.#currentTarget = null;\r\n        this.#target = null;\r\n    }\r\n    get currentTarget() {\r\n        return this.#currentTarget;\r\n    }\r\n    get target() {\r\n        return this.#target;\r\n    }\r\n    static ModelEventTargetAccessor = new class ModelEventTargetAccessor {\r\n        setCurrentTarget(event, currentTarget) {\r\n            if (event instanceof ModelEventBase) {\r\n                event.#currentTarget = currentTarget;\r\n            }\r\n        }\r\n        setTarget(event, target) {\r\n            if (event instanceof ModelEventBase) {\r\n                event.#target = target;\r\n            }\r\n        }\r\n    };\r\n}\r\nvar ModelEventTargetAccessor = ModelEventBase.ModelEventTargetAccessor;\r\ndelete ModelEventBase.ModelEventTargetAccessor;\r\nvar ModelEvent = ModelEventBase;\r\nclass ModelEventTargetBase {\r\n    #callbacks;\r\n    constructor() {\r\n        this.#callbacks = new Map();\r\n    }\r\n    receiveEvent(event) {\r\n        const { type } = event;\r\n        const callbacks = this.#callbacks.get(type);\r\n        ModelEventTargetAccessor.setCurrentTarget(event, this);\r\n        if (callbacks) {\r\n            callbacks.forEach((callback_i) => {\r\n                callback_i(event);\r\n            });\r\n        }\r\n    }\r\n    addEventListener(type, callback) {\r\n        const callbacks = this.#callbacks.get(type);\r\n        if (callbacks) {\r\n            callbacks.push(callback);\r\n        }\r\n        else {\r\n            this.#callbacks.set(type, [callback]);\r\n        }\r\n    }\r\n    removeEventListener(type, callback) {\r\n        const callbacks = this.#callbacks.get(type);\r\n        if (callbacks) {\r\n            const callbackIndex = callbacks.findIndex(callback_i => callback_i == callback);\r\n            if (callbackIndex > -1) {\r\n                callbacks.splice(callbackIndex, 1);\r\n            }\r\n            if (callbacks.length == 0) {\r\n                this.#callbacks.delete(type);\r\n            }\r\n        }\r\n    }\r\n    dispatchEvent(event) {\r\n        ModelEventTargetAccessor.setTarget(event, this);\r\n        this.receiveEvent(event);\r\n    }\r\n}\r\nvar ModelEventTarget = ModelEventTargetBase;\r\nclass ModelNodeBase extends ModelEventTargetBase {\r\n    #parentNode;\r\n    #records;\r\n    #isRecording;\r\n    constructor() {\r\n        super();\r\n        this.#parentNode = null;\r\n        this.#records = [];\r\n        this.#isRecording = false;\r\n    }\r\n    get parentNode() {\r\n        return this.#parentNode;\r\n    }\r\n    setParent(parentNode) {\r\n        if (parentNode !== null) {\r\n            let isCyclicReference = parentNode == this;\r\n            let { parentNode: ancestorNode } = parentNode;\r\n            while (!isCyclicReference && ancestorNode !== null) {\r\n                ({ parentNode: ancestorNode } = ancestorNode);\r\n                isCyclicReference = ancestorNode == this;\r\n            }\r\n            if (!isCyclicReference) {\r\n                this.#parentNode = parentNode;\r\n            }\r\n            else {\r\n                throw new TypeError(\"Failed to set parent on ModelNode: circular reference detected in the hierarchy.\");\r\n            }\r\n        }\r\n        else {\r\n            this.#parentNode = null;\r\n        }\r\n    }\r\n    beginChanges() {\r\n        this.#isRecording = true;\r\n    }\r\n    endChanges() {\r\n        this.dispatchEvent(new ModelEvent(\"modelchange\"));\r\n        this.#records.splice(0);\r\n        this.#isRecording = false;\r\n    }\r\n    getRecords() {\r\n        return this.#records.slice();\r\n    }\r\n    receiveEvent(event) {\r\n        super.receiveEvent(event);\r\n        const { parentNode } = this;\r\n        if (parentNode) {\r\n            parentNode.receiveEvent(event);\r\n        }\r\n    }\r\n    #triggerChange(property, oldValue, newValue) {\r\n        const records = this.#records;\r\n        const record = new ModelChangeRecord({\r\n            target: this,\r\n            changeType: ModelChangeRecord.PROPERTY_CHANGE,\r\n            propertyName: property,\r\n            oldValue, newValue\r\n        });\r\n        records.push(record);\r\n        if (!this.#isRecording) {\r\n            this.dispatchEvent(new ModelEvent(\"modelchange\"));\r\n            records.splice(0);\r\n        }\r\n    }\r\n    #handleRecord(record) {\r\n        this.#records.push(record);\r\n        if (!this.#isRecording) {\r\n            this.dispatchEvent(new ModelEvent(\"modelchange\"));\r\n            this.#records.splice(0);\r\n        }\r\n    }\r\n    static ModelNodeRecordsAccessor = new class ModelNodeRecordsAccessor {\r\n        triggerChange(node, property, oldValue, newValue) {\r\n            if (node instanceof ModelNodeBase) {\r\n                node.#triggerChange(property, oldValue, newValue);\r\n            }\r\n        }\r\n        handleRecord(node, record) {\r\n            if (node instanceof ModelNodeBase) {\r\n                node.#handleRecord(record);\r\n            }\r\n        }\r\n    };\r\n}\r\nvar ModelNodeRecordsAccessor = ModelNodeBase.ModelNodeRecordsAccessor;\r\ndelete ModelNodeBase.ModelNodeRecordsAccessor;\r\nvar ModelNode = ModelNodeBase;\r\nconst ReactiveProperty = function () {\r\n    return (target, property) => {\r\n        const { constructor } = target;\r\n        const { prototype } = constructor;\r\n        const setter = function (value) {\r\n            const oldValue = ModelReactivePropertiesAccessor.getProperty(this, property);\r\n            ModelReactivePropertiesAccessor.setProperty(this, property, value);\r\n            if (value !== oldValue) {\r\n                ModelNodeRecordsAccessor.triggerChange(this, property, oldValue, value);\r\n            }\r\n            return true;\r\n        };\r\n        const getter = function () {\r\n            return ModelReactivePropertiesAccessor.getProperty(this, property);\r\n        };\r\n        Object.defineProperty(prototype, property, {\r\n            set: setter,\r\n            get: getter,\r\n            enumerable: true\r\n        });\r\n    };\r\n};\r\nclass ModelObjectBase extends ModelNodeBase {\r\n    #properties;\r\n    constructor() {\r\n        super();\r\n        this.#properties = new Map();\r\n    }\r\n    static ModelReactivePropertiesAccessor = new class ModelReactivePropertiesAccessor {\r\n        setProperty(node, property, value) {\r\n            if (node instanceof ModelObjectBase) {\r\n                node.#properties.set(property, value);\r\n            }\r\n        }\r\n        getProperty(node, property) {\r\n            if (node instanceof ModelObjectBase) {\r\n                return node.#properties.get(property);\r\n            }\r\n        }\r\n    };\r\n}\r\nvar ModelReactivePropertiesAccessor = ModelObjectBase.ModelReactivePropertiesAccessor;\r\ndelete ModelObjectBase.ModelReactivePropertiesAccessor;\r\nvar ModelObject = ModelObjectBase;\r\nclass ModelListBase extends ModelNodeBase {\r\n    #items;\r\n    constructor(items) {\r\n        super();\r\n        this.#items = items?.slice() ?? [];\r\n    }\r\n    setParent(parentNode) {\r\n        super.setParent(parentNode);\r\n        this.#items.forEach((item_i) => {\r\n            item_i.setParent(parentNode);\r\n        });\r\n    }\r\n    get length() {\r\n        return this.#items.length;\r\n    }\r\n    get(index) {\r\n        return this.#items[index] ?? null;\r\n    }\r\n    index(item) {\r\n        return this.#items.indexOf(item);\r\n    }\r\n    values() {\r\n        return this.#items.values();\r\n    }\r\n    sort(compareFunction) {\r\n        const items = this.#items;\r\n        const indexedItems = items.map((item_i, i) => {\r\n            return {\r\n                item: item_i,\r\n                index: i\r\n            };\r\n        });\r\n        indexedItems.sort((indexedItem_a, indexedItem_b) => {\r\n            return compareFunction(indexedItem_a.item, indexedItem_b.item);\r\n        });\r\n        this.#items = indexedItems.map(indexedItem_i => indexedItem_i.item);\r\n        const record = new ModelChangeRecord({\r\n            target: this,\r\n            changeType: ModelChangeRecord.LIST_SORT,\r\n            sortedIndices: indexedItems.map(indexedItem_i => indexedItem_i.index)\r\n        });\r\n        ModelNodeRecordsAccessor.handleRecord(this, record);\r\n    }\r\n    prepend(...items) {\r\n        const _items = this.#items;\r\n        const { parentNode } = this;\r\n        if (parentNode) {\r\n            items.forEach(item_i => {\r\n                item_i.setParent(parentNode);\r\n            });\r\n        }\r\n        _items.splice(0, 0, ...items);\r\n        const record = new ModelChangeRecord({\r\n            target: this,\r\n            changeType: ModelChangeRecord.LIST_INSERT,\r\n            insertedIndex: 0,\r\n            insertedItems: items\r\n        });\r\n        ModelNodeRecordsAccessor.handleRecord(this, record);\r\n    }\r\n    append(...items) {\r\n        const _items = this.#items;\r\n        const { length } = _items;\r\n        const { parentNode } = this;\r\n        if (parentNode) {\r\n            items.forEach(item_i => {\r\n                item_i.setParent(parentNode);\r\n            });\r\n        }\r\n        _items.push(...items);\r\n        const record = new ModelChangeRecord({\r\n            target: this,\r\n            changeType: ModelChangeRecord.LIST_INSERT,\r\n            insertedIndex: length,\r\n            insertedItems: items\r\n        });\r\n        ModelNodeRecordsAccessor.handleRecord(this, record);\r\n    }\r\n    insert(index, ...items) {\r\n        const _items = this.#items;\r\n        const { length } = _items;\r\n        const positiveIndex = Math.abs(index);\r\n        if (positiveIndex <= length) {\r\n            if (index >= 0) {\r\n                const { parentNode } = this;\r\n                items.forEach(item_i => {\r\n                    item_i.setParent(parentNode);\r\n                });\r\n                if (index < length) {\r\n                    _items.splice(index, 0, ...items);\r\n                }\r\n                else {\r\n                    _items.push(...items);\r\n                }\r\n            }\r\n            else if (index < 0) {\r\n                index = length - index;\r\n                const { parentNode } = this;\r\n                if (parentNode) {\r\n                    items.forEach(item_i => {\r\n                        item_i.setParent(parentNode);\r\n                    });\r\n                }\r\n                _items.splice(index, 0, ...items);\r\n            }\r\n            const record = new ModelChangeRecord({\r\n                target: this,\r\n                changeType: ModelChangeRecord.LIST_INSERT,\r\n                insertedIndex: index,\r\n                insertedItems: items.slice()\r\n            });\r\n            ModelNodeRecordsAccessor.handleRecord(this, record);\r\n        }\r\n    }\r\n    remove(item) {\r\n        const _items = this.#items;\r\n        const index = _items.indexOf(item);\r\n        if (index > -1) {\r\n            const item = _items.splice(index, 1)[0];\r\n            const { parentNode } = this;\r\n            if (parentNode) {\r\n                item.setParent(null);\r\n            }\r\n            const record = new ModelChangeRecord({\r\n                target: this,\r\n                changeType: ModelChangeRecord.LIST_REMOVE,\r\n                removedIndex: index,\r\n                removedItems: [item]\r\n            });\r\n            ModelNodeRecordsAccessor.handleRecord(this, record);\r\n        }\r\n    }\r\n    clear() {\r\n        const items = this.#items;\r\n        const { length } = items;\r\n        if (length > 0) {\r\n            const removedItems = items.splice(0);\r\n            const { parentNode } = this;\r\n            if (parentNode) {\r\n                removedItems.forEach((removedItem_i) => {\r\n                    removedItem_i.setParent(null);\r\n                });\r\n            }\r\n            const record = new ModelChangeRecord({\r\n                target: this,\r\n                changeType: ModelChangeRecord.LIST_REMOVE,\r\n                removedIndex: 0,\r\n                removedItems: removedItems\r\n            });\r\n            ModelNodeRecordsAccessor.handleRecord(this, record);\r\n        }\r\n    }\r\n}\r\n;\r\nvar ModelList = ModelListBase;\r\nclass ModelChangeObserverBase {\r\n    #callback;\r\n    #records;\r\n    #disconnected;\r\n    #references;\r\n    constructor(callback) {\r\n        this.#callback = callback;\r\n        this.#records = [];\r\n        this.#disconnected = false;\r\n        this.#references = new WeakMap();\r\n    }\r\n    observe(node, options) {\r\n        this.#disconnected = false;\r\n        const references = this.#references;\r\n        let reference = references.get(node);\r\n        if (!reference) {\r\n            const listener = this.#handleModelEvent.bind(this);\r\n            node.addEventListener(\"modelchange\", listener);\r\n            reference = { listener, options };\r\n            references.set(node, reference);\r\n        }\r\n        else {\r\n            references.set(node, reference);\r\n        }\r\n    }\r\n    unobserve(node) {\r\n        const references = this.#references;\r\n        let reference = references.get(node);\r\n        if (reference) {\r\n            const { listener } = reference;\r\n            node.removeEventListener(\"modelchange\", listener);\r\n        }\r\n    }\r\n    disconnect() {\r\n        this.#records.splice(0);\r\n        this.#disconnected = true;\r\n    }\r\n    #trigger() {\r\n        const records = this.#records.splice(0);\r\n        if (records.length > 0) {\r\n            this.#callback(records);\r\n        }\r\n    }\r\n    #handleModelEvent(event) {\r\n        if (!this.#disconnected) {\r\n            const { target, currentTarget } = event;\r\n            const reference = this.#references.get(currentTarget);\r\n            if (reference) {\r\n                const { options } = reference;\r\n                const { properties, propertiesFilter, childList, subtree } = options;\r\n                if (subtree) {\r\n                    if (properties && target instanceof ModelNode) {\r\n                        if (propertiesFilter) {\r\n                            this.#records.push(...target.getRecords()\r\n                                .filter(record_i => {\r\n                                const { propertyName } = record_i;\r\n                                return propertiesFilter.includes(propertyName);\r\n                            }));\r\n                        }\r\n                        else {\r\n                            this.#records.push(...target.getRecords());\r\n                        }\r\n                        this.#trigger();\r\n                    }\r\n                    else if (childList && target instanceof ModelList) {\r\n                        this.#records.push(...target.getRecords());\r\n                        this.#trigger();\r\n                    }\r\n                }\r\n                else if (target == currentTarget) {\r\n                    if (properties && target instanceof ModelNode) {\r\n                        if (propertiesFilter) {\r\n                            this.#records.push(...target.getRecords()\r\n                                .filter(record_i => {\r\n                                const { propertyName } = record_i;\r\n                                return propertiesFilter.includes(propertyName);\r\n                            }));\r\n                        }\r\n                        else {\r\n                            this.#records.push(...target.getRecords());\r\n                        }\r\n                        this.#trigger();\r\n                    }\r\n                    else if (childList && target instanceof ModelList) {\r\n                        this.#records.push(...target.getRecords());\r\n                        this.#trigger();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nvar ModelChangeObserver = ModelChangeObserverBase;\r\n//# sourceMappingURL=Model.js.map","export { snakeToCamel };\r\nexport { camelToSnake };\r\nexport { trainToCamel };\r\nexport { camelToTrain };\r\nfunction snakeToCamel(str) {\r\n    return str.split('_').map(str => str.charAt(0).toUpperCase() + str.substring(1).toLowerCase()).join(\"\");\r\n}\r\nfunction camelToSnake(str) {\r\n    return str.replace(/(?<!^)(?=[A-Z])/g, '_').toLowerCase();\r\n}\r\nfunction trainToCamel(str) {\r\n    return str.split('-').map(str => str.charAt(0).toUpperCase() + str.substring(1).toLowerCase()).join(\"\");\r\n}\r\nfunction camelToTrain(str) {\r\n    return str.replace(/(?<!^)(?=[A-Z])/g, '-').toLowerCase();\r\n}\r\n//# sourceMappingURL=Snippets.js.map","import { ModelChangeObserver } from \"../models/Model\";\r\nimport { camelToTrain } from \"./Snippets\";\r\nexport { CustomElement };\r\nexport { QueryProperty };\r\nexport { QueryAllProperty };\r\nexport { AttributeProperty };\r\nexport { reactiveElement };\r\nexport { revokeReactiveElement };\r\nexport { reactiveChildElements };\r\nexport { revokeReactiveChildElements };\r\nexport { element };\r\nexport { fragment };\r\nexport { textNode };\r\nexport { areAttributesMatching };\r\nexport { AttributeMutationMixinBase };\r\nexport { trimMultilineIndent };\r\nexport { Stylesheet };\r\nexport { reactiveElementsMap };\r\nconst AttributeProperty = function (init) {\r\n    return (target, property) => {\r\n        const { constructor } = target;\r\n        const { prototype } = constructor;\r\n        const propertyName = String(property);\r\n        const { defaultValue = null, observed = false, name = camelToTrain(propertyName) } = init;\r\n        if (observed) {\r\n            const observedAttributes = Reflect.get(constructor, \"observedAttributes\", constructor);\r\n            if (Array.isArray(observedAttributes)) {\r\n                observedAttributes.push(name);\r\n            }\r\n            else {\r\n                Object.defineProperty(constructor, \"observedAttributes\", {\r\n                    value: [name],\r\n                    writable: false\r\n                });\r\n            }\r\n        }\r\n        const { type } = init;\r\n        switch (type) {\r\n            case Boolean: {\r\n                Object.defineProperty(prototype, propertyName, {\r\n                    get: function () {\r\n                        return this.hasAttribute(name);\r\n                    },\r\n                    set: function (value) {\r\n                        if (value) {\r\n                            this.setAttribute(name, \"\");\r\n                        }\r\n                        else {\r\n                            this.removeAttribute(name);\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            }\r\n            case Object: {\r\n                Object.defineProperty(prototype, propertyName, {\r\n                    get: function () {\r\n                        const val = this.getAttribute(name);\r\n                        return (val !== null) ? JSON.parse(val) : defaultValue;\r\n                    },\r\n                    set: function (value) {\r\n                        if (value !== null) {\r\n                            this.setAttribute(name, JSON.stringify(value));\r\n                        }\r\n                        else {\r\n                            this.removeAttribute(name);\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            }\r\n            case Number: {\r\n                Object.defineProperty(prototype, propertyName, {\r\n                    get: function () {\r\n                        const val = this.getAttribute(name);\r\n                        return (val !== null) ? parseFloat(val) : defaultValue;\r\n                    },\r\n                    set: function (value) {\r\n                        if (value !== null) {\r\n                            this.setAttribute(name, value);\r\n                        }\r\n                        else {\r\n                            this.removeAttribute(name);\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            }\r\n            case String:\r\n            default: {\r\n                Object.defineProperty(prototype, propertyName, {\r\n                    get: function () {\r\n                        const val = this.getAttribute(name);\r\n                        return (val !== null) ? val : defaultValue;\r\n                    },\r\n                    set: function (value) {\r\n                        if (value !== null) {\r\n                            this.setAttribute(name, value);\r\n                        }\r\n                        else {\r\n                            this.removeAttribute(name);\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            }\r\n        }\r\n    };\r\n};\r\nfunction Stylesheet(text) {\r\n    const stylesheet = new CSSStyleSheet();\r\n    stylesheet.replaceSync(text);\r\n    return stylesheet;\r\n}\r\nfunction trimMultilineIndent(text) {\r\n    const newlineIndex = text.indexOf(\"\\n\");\r\n    text = text.substring(newlineIndex + 1);\r\n    const indentMatch = text.match(/^[\\s]*/);\r\n    if (indentMatch) {\r\n        const indent = text.substring(0, indentMatch[0].length);\r\n        text = text.replaceAll(indent, \"\").trimEnd();\r\n    }\r\n    return text;\r\n}\r\nconst CustomElement = function (init) {\r\n    return (elementCtor) => {\r\n        const { name, options } = init;\r\n        if (!customElements.get(name)) {\r\n            customElements.define(name, elementCtor, options);\r\n        }\r\n        return elementCtor;\r\n    };\r\n};\r\nconst QueryProperty = function (init) {\r\n    return (target, propertyKey) => {\r\n        const { constructor } = target;\r\n        const { prototype } = constructor;\r\n        const propertyName = String(propertyKey);\r\n        const { selector } = init;\r\n        const withinShadowRoot = init.withinShadowRoot ?? false;\r\n        const getter = withinShadowRoot ? function () {\r\n            return this.shadowRoot.querySelector(selector);\r\n        } : function () {\r\n            return this.querySelector(selector);\r\n        };\r\n        Object.defineProperty(prototype, propertyName, {\r\n            get: getter\r\n        });\r\n    };\r\n};\r\nconst QueryAllProperty = function (init) {\r\n    return (target, propertyKey) => {\r\n        const { constructor } = target;\r\n        const { prototype } = constructor;\r\n        const propertyName = String(propertyKey);\r\n        const { selector } = init;\r\n        const withinShadowRoot = init.withinShadowRoot ?? false;\r\n        const getter = withinShadowRoot ? function () {\r\n            return Array.from(this.shadowRoot.querySelectorAll(selector));\r\n        } : function () {\r\n            return Array.from(this.querySelectorAll(selector));\r\n        };\r\n        Object.defineProperty(prototype, propertyName, {\r\n            get: getter\r\n        });\r\n    };\r\n};\r\nfunction fragment(...nodes) {\r\n    const fragment = document.createDocumentFragment();\r\n    fragment.append(...nodes);\r\n    return fragment;\r\n}\r\nfunction textNode(text) {\r\n    return document.createTextNode(text);\r\n}\r\nfunction element(tagName, init) {\r\n    if (init) {\r\n        const { options, attributes, dataset, children, listeners } = init;\r\n        const element = document.createElement(tagName, options);\r\n        if (attributes) {\r\n            Object.entries(attributes).forEach(([attributeName, attributeValue]) => {\r\n                if (attributeValue !== undefined) {\r\n                    if (typeof attributeValue === \"boolean\") {\r\n                        element.toggleAttribute(camelToTrain(attributeName), attributeValue);\r\n                    }\r\n                    else {\r\n                        element.setAttribute(camelToTrain(attributeName), String(attributeValue));\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (dataset) {\r\n            const { dataset: elementDataset } = element;\r\n            Object.entries(dataset).forEach(([attributeName, attributeValue]) => {\r\n                if (typeof attributeValue === \"boolean\") {\r\n                    if (attributeValue) {\r\n                        elementDataset[camelToTrain(attributeName)] = \"\";\r\n                    }\r\n                    else {\r\n                        delete elementDataset[camelToTrain(attributeName)];\r\n                    }\r\n                }\r\n                else {\r\n                    elementDataset[camelToTrain(attributeName)] = String(attributeValue);\r\n                }\r\n            });\r\n        }\r\n        if (children) {\r\n            if (typeof children === \"function\") {\r\n                children(element);\r\n            }\r\n            else if (typeof children === \"object\" && \"length\" in children) {\r\n                element.append(...Array.from(children));\r\n            }\r\n            else {\r\n                element.append(children);\r\n            }\r\n        }\r\n        if (listeners) {\r\n            Object.entries(listeners).forEach(([name_i, listener_i]) => {\r\n                if (Array.isArray(listener_i)) {\r\n                    element.addEventListener(name_i, listener_i[0], listener_i[1]);\r\n                }\r\n                else {\r\n                    element.addEventListener(name_i, listener_i);\r\n                }\r\n            });\r\n        }\r\n        return element;\r\n    }\r\n    return document.createElement(tagName);\r\n}\r\nconst reactiveElementsMap = new WeakMap();\r\nconst reactiveElementsFinalizationRegistry = new FinalizationRegistry((heldValue) => {\r\n    const { model, reactiveElement } = heldValue;\r\n    const reactiveElementsMapEntry = reactiveElementsMap.get(model);\r\n    if (reactiveElementsMapEntry !== undefined) {\r\n        const { reactiveElementsArray } = reactiveElementsMapEntry;\r\n        reactiveElementsArray.splice(reactiveElementsArray.indexOf(reactiveElement), 1);\r\n    }\r\n});\r\nconst reactiveElementsPropertyObserver = new ModelChangeObserver((records) => {\r\n    records.forEach((record_i) => {\r\n        const { target, propertyName, oldValue, newValue } = record_i;\r\n        const { reactiveElementsArray } = reactiveElementsMap.get(target);\r\n        reactiveElementsArray.forEach(reactiveElement_i => {\r\n            const { elementRef, react, properties } = reactiveElement_i;\r\n            const element = elementRef.deref();\r\n            if (element) {\r\n                if (properties.includes(propertyName)) {\r\n                    react(element, propertyName, oldValue, newValue);\r\n                }\r\n            }\r\n        });\r\n    });\r\n});\r\nfunction reactiveElement(model, element, properties, react) {\r\n    const elementRef = new WeakRef(element);\r\n    const reactiveElement = { elementRef, react, properties };\r\n    const reactiveElementsMapEntry = reactiveElementsMap.get(model);\r\n    reactiveElementsFinalizationRegistry.register(element, { model, reactiveElement });\r\n    if (!reactiveElementsMapEntry) {\r\n        const observerOptions = {\r\n            properties: true,\r\n            propertiesFilter: properties\r\n        };\r\n        const reactiveElementsArray = [reactiveElement];\r\n        reactiveElementsMap.set(model, { observerOptions, reactiveElementsArray });\r\n        reactiveElementsPropertyObserver.observe(model, observerOptions);\r\n    }\r\n    else {\r\n        const { reactiveElementsArray, observerOptions } = reactiveElementsMapEntry;\r\n        const { propertiesFilter } = observerOptions;\r\n        reactiveElementsArray.push(reactiveElement);\r\n        observerOptions.propertiesFilter = propertiesFilter ?\r\n            propertiesFilter.concat(properties.filter(property_i => !propertiesFilter.includes(property_i))) : properties.filter((property_i, i, properties) => properties.indexOf(property_i) === i);\r\n    }\r\n    properties.forEach((property_i) => {\r\n        if (property_i in model) {\r\n            const value = Reflect.get(model, property_i, model);\r\n            react(element, property_i, undefined, value);\r\n        }\r\n    });\r\n    return element;\r\n}\r\nfunction revokeReactiveElement(model, element) {\r\n    const reactiveElementsMapEntry = reactiveElementsMap.get(model);\r\n    if (reactiveElementsMapEntry) {\r\n        const { reactiveElementsArray } = reactiveElementsMapEntry;\r\n        const reactiveElementIndex = reactiveElementsArray.findIndex(reactiveElement => reactiveElement.elementRef.deref() === element);\r\n        if (reactiveElementIndex > -1) {\r\n            reactiveElementsArray.splice(reactiveElementIndex, 1);\r\n        }\r\n        if (reactiveElementsArray.length === 0) {\r\n            reactiveElementsMap.delete(model);\r\n        }\r\n    }\r\n}\r\nconst reactiveChildElementsMap = new WeakMap();\r\nconst reactiveChildElementsFinalizationRegistry = new FinalizationRegistry((heldValue) => {\r\n    const { list, reactiveChildElement } = heldValue;\r\n    const reactiveChildrenElementsMapEntry = reactiveChildElementsMap.get(list);\r\n    if (reactiveChildrenElementsMapEntry) {\r\n        const { reactiveChildElementsArray } = reactiveChildrenElementsMapEntry;\r\n        reactiveChildElementsArray.splice(reactiveChildElementsArray.indexOf(reactiveChildElement), 1);\r\n    }\r\n});\r\nconst reactiveChildElementsObserver = new ModelChangeObserver((records) => {\r\n    let range = null;\r\n    Array.from(records.values()).forEach((record_i) => {\r\n        const { target } = record_i;\r\n        const list = target;\r\n        const { length: listLength } = list;\r\n        const { reactiveChildElementsArray } = reactiveChildElementsMap.get(list);\r\n        reactiveChildElementsArray.forEach((reactiveChildElements_i) => {\r\n            const { parentRef, mapping, placeholder } = reactiveChildElements_i;\r\n            const parent = parentRef.deref();\r\n            if (parent) {\r\n                const { firstChild, children } = parent;\r\n                const { length: childrenCount } = children;\r\n                if (placeholder && listLength > 0 && firstChild == placeholder) {\r\n                    parent.removeChild(placeholder);\r\n                }\r\n                const { changeType, LIST_INSERT, LIST_REMOVE, LIST_SORT } = record_i;\r\n                switch (changeType) {\r\n                    case LIST_INSERT: {\r\n                        const { insertedIndex, insertedItems } = record_i;\r\n                        const insertedItemsArray = Array.from(insertedItems.values()).map(mapping);\r\n                        const { length: childrenCount } = children;\r\n                        if (insertedIndex < childrenCount) {\r\n                            children[insertedIndex].before(...insertedItemsArray);\r\n                        }\r\n                        else {\r\n                            parent.append(...insertedItemsArray);\r\n                        }\r\n                        break;\r\n                    }\r\n                    case LIST_REMOVE: {\r\n                        const { removedIndex, removedItems } = record_i;\r\n                        const { length: removedCount } = removedItems;\r\n                        range = range ?? document.createRange();\r\n                        const removeEndIndex = removedIndex + (removedCount - 1);\r\n                        if (removeEndIndex < childrenCount) {\r\n                            range.setStartBefore(children[removedIndex]);\r\n                            range.setEndAfter(children[removeEndIndex]);\r\n                            range.deleteContents();\r\n                        }\r\n                        break;\r\n                    }\r\n                    case LIST_SORT: {\r\n                        const { sortedIndices } = record_i;\r\n                        const childrenArray = Array.from(children);\r\n                        parent.append(...sortedIndices.filter(index_i => index_i < childrenCount).map(index_i => childrenArray[index_i]));\r\n                        break;\r\n                    }\r\n                }\r\n                if (listLength == 0 && placeholder) {\r\n                    parent.append(placeholder);\r\n                }\r\n            }\r\n        });\r\n    });\r\n});\r\nfunction reactiveChildElements(list, mapping, placeholder) {\r\n    return (parent) => {\r\n        const parentRef = new WeakRef(parent);\r\n        const reactiveChildElementsMapEntry = reactiveChildElementsMap.get(list);\r\n        const reactiveChildElement = { parentRef, mapping, placeholder };\r\n        reactiveChildElementsFinalizationRegistry.register(parent, { list, reactiveChildElement });\r\n        if (!reactiveChildElementsMapEntry) {\r\n            const reactiveChildElementsArray = [reactiveChildElement];\r\n            reactiveChildElementsMap.set(list, { reactiveChildElementsArray });\r\n            reactiveChildElementsObserver.observe(list, {\r\n                childList: true\r\n            });\r\n        }\r\n        else {\r\n            const { reactiveChildElementsArray } = reactiveChildElementsMapEntry;\r\n            reactiveChildElementsArray.push(reactiveChildElement);\r\n        }\r\n        const children = list.length == 0 && placeholder ?\r\n            [placeholder] : Array.from(list.values()).map(mapping);\r\n        parent.replaceChildren(...children);\r\n    };\r\n}\r\nfunction revokeReactiveChildElements(list, parent) {\r\n    const reactiveChildElementsMapEntry = reactiveChildElementsMap.get(list);\r\n    if (reactiveChildElementsMapEntry) {\r\n        const { reactiveChildElementsArray } = reactiveChildElementsMapEntry;\r\n        const reactiveChildElementsIndex = reactiveChildElementsArray.findIndex(reactiveChildElement => reactiveChildElement.parentRef.deref() === parent);\r\n        if (reactiveChildElementsIndex > -1) {\r\n            reactiveChildElementsArray.splice(reactiveChildElementsIndex, 1);\r\n        }\r\n        if (reactiveChildElementsArray.length === 0) {\r\n            reactiveChildElementsMap.delete(list);\r\n        }\r\n    }\r\n}\r\nfunction areAttributesMatching(referenceAttributeType, referenceAttributeName, referenceAttributeValue, attributeName, attributeValue) {\r\n    if (referenceAttributeName == attributeName) {\r\n        switch (referenceAttributeType) {\r\n            case \"boolean\":\r\n                return referenceAttributeValue == \"\" && attributeValue == \"\";\r\n            case \"string\":\r\n                return referenceAttributeValue !== \"\" && (referenceAttributeValue == attributeValue);\r\n            case \"list\":\r\n                return (referenceAttributeValue !== \"\" && attributeValue !== null) && new RegExp(`${referenceAttributeValue}\\s*?`, \"g\").test(attributeValue);\r\n        }\r\n    }\r\n    return false;\r\n}\r\nclass AttributeMutationMixinBase {\r\n    attributeName;\r\n    attributeValue;\r\n    attributeType;\r\n    constructor(attributeName, attributeType = \"boolean\", attributeValue = \"\") {\r\n        this.attributeName = attributeName;\r\n        this.attributeType = attributeType;\r\n        this.attributeValue = attributeValue;\r\n    }\r\n    attach() {\r\n        throw new TypeError(\"Not implemented method.\");\r\n    }\r\n    detach() {\r\n        throw new TypeError(\"Not implemented method.\");\r\n    }\r\n}\r\n//# sourceMappingURL=Element.js.map","export { View };\r\nclass ViewBase extends HTMLElement {\r\n    #model;\r\n    constructor() {\r\n        super();\r\n        this.#model = null;\r\n    }\r\n    get model() {\r\n        return this.#model;\r\n    }\r\n    setModel(model) {\r\n        if (model !== this.#model) {\r\n            this.#model = model;\r\n        }\r\n    }\r\n    renderLight() {\r\n        return;\r\n    }\r\n    renderShadow() {\r\n        return;\r\n    }\r\n    render() {\r\n        const { shadowRoot } = this;\r\n        if (shadowRoot !== null) {\r\n            const shadow = this.renderShadow();\r\n            if (shadow) {\r\n                shadowRoot.replaceChildren(shadow);\r\n            }\r\n        }\r\n        const light = this.renderLight();\r\n        if (light) {\r\n            this.replaceChildren(light);\r\n        }\r\n    }\r\n}\r\nvar View = ViewBase;\r\n//# sourceMappingURL=View.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport DEFAULT_THEME_ARROW_RIGHT_IMAGE from \"../../assets/arrow_right_FILL0_wght400_GRAD0_opsz48.svg\";\r\nimport DEFAULT_THEME_ARROW_DROPDOWN_IMAGE from \"../../assets/arrow_drop_down_FILL0_wght400_GRAD0_opsz48.svg\";\r\nimport DEFAULT_THEME_ARROW_DROPUP_IMAGE from \"../../assets/arrow_drop_up_FILL0_wght400_GRAD0_opsz48.svg\";\r\nimport DEFAULT_THEME_CHECKED_IMAGE from \"../../assets/done_FILL0_wght400_GRAD0_opsz48.svg\";\r\nimport openSansTtf from \"../../assets/fonts/Open_Sans/OpenSans-VariableFont_wdth,wght.ttf\";\r\nimport { ModelObject, ReactiveProperty } from \"../models/Model\";\r\nexport { theme };\r\nexport { DEFAULT_THEME_HOVERED_ITEM_COLOR };\r\nexport { DEFAULT_THEME_FOCUSED_ITEM_COLOR };\r\nexport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR };\r\nexport { DEFAULT_THEME_SELECTED_ITEM_COLOR };\r\nexport { DEFAULT_THEME_ACTIVATED_ITEM_COLOR };\r\nexport { DEFAULT_THEME_DROPTARGET_ITEM_COLOR };\r\nexport { DEFAULT_THEME_ARROW_RIGHT_IMAGE };\r\nexport { DEFAULT_THEME_ARROW_DROPDOWN_IMAGE };\r\nexport { DEFAULT_THEME_ARROW_DROPUP_IMAGE };\r\nexport { DEFAULT_THEME_CHECKED_IMAGE };\r\nconst DEFAULT_THEME_TINT = 203;\r\nconst DEFAULT_THEME_ACCENT_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%, 50%)`;\r\nconst DEFAULT_THEME_HOVERED_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 80%, 50%)`;\r\nconst DEFAULT_THEME_FOCUSED_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%, 50%)`;\r\nconst DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%)`;\r\nconst DEFAULT_THEME_SELECTED_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 75%, 75%)`;\r\nconst DEFAULT_THEME_ACTIVATED_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%, 50%)`;\r\nconst DEFAULT_THEME_DROPTARGET_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%, 50%)`;\r\nclass Theme extends ModelObject {\r\n    stylesheet;\r\n    images() {\r\n        return new Map([\r\n            [\"checkedImage\", this.checkedImage],\r\n            [\"arrowRightImage\", this.arrowRightImage],\r\n            [\"arrowDropDownImage\", this.arrowDropDownImage],\r\n            [\"arrowDropUpImage\", this.arrowDropUpImage],\r\n        ]);\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.stylesheet = new CSSStyleSheet();\r\n        this.stylesheet.replace(/*css*/ `\r\n            :root {\r\n                --theme-accent-color: ${DEFAULT_THEME_ACCENT_COLOR};\r\n                --theme-hovered-item-color: ${DEFAULT_THEME_HOVERED_ITEM_COLOR};\r\n                --theme-focused-item-color: ${DEFAULT_THEME_FOCUSED_ITEM_COLOR};\r\n                --theme-focused-item-outline-color: ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR};\r\n                --theme-selected-item-color: ${DEFAULT_THEME_SELECTED_ITEM_COLOR};\r\n                --theme-activated-item-color: ${DEFAULT_THEME_ACTIVATED_ITEM_COLOR};\r\n                --theme-droptarget-item-color: ${DEFAULT_THEME_DROPTARGET_ITEM_COLOR};\r\n\r\n                --theme-arrow-color: var(--font-color);\r\n                --theme-arrow-icon-collapsed: var(--arrow-right);\r\n                --theme-arrow-icon-expanded: var(--arrow-dropdown);\r\n\r\n                --theme-sortorder-indicator-color: var(--font-color);\r\n                --theme-sortorder-indicator-ascending: var(--arrow-dropup);\r\n                --theme-sortorder-indicator-descending: var(--arrow-dropdown);\r\n            }\r\n            \r\n            @font-face {\r\n                font-family: \"Open Sans\";\r\n                src: url(${openSansTtf}) format(\"truetype\")\r\n            }\r\n\r\n            :root {\r\n                font-size: 10px;\r\n                font-family: \"Open Sans\";\r\n                accent-color: var(--theme-accent-color);\r\n            }\r\n\r\n            ::selection {\r\n                background-color: var(--theme-selected-item-color);\r\n            }\r\n        `);\r\n        this.addEventListener(\"modelchange\", this.#handleModelChangeEvent.bind(this));\r\n        this.tint = DEFAULT_THEME_TINT;\r\n        this.arrowRightImage = DEFAULT_THEME_ARROW_RIGHT_IMAGE;\r\n        this.arrowDropDownImage = DEFAULT_THEME_ARROW_DROPDOWN_IMAGE;\r\n        this.arrowDropUpImage = DEFAULT_THEME_ARROW_DROPUP_IMAGE;\r\n        this.checkedImage = DEFAULT_THEME_ARROW_DROPDOWN_IMAGE;\r\n    }\r\n    #handleModelChangeEvent() {\r\n        const { stylesheet } = this;\r\n        const variablesMap = stylesheet.cssRules[0].styleMap;\r\n        const records = this.getRecords();\r\n        records.forEach((record) => {\r\n            const { propertyName, newValue } = record;\r\n            switch (propertyName) {\r\n                case \"tint\": {\r\n                    variablesMap.set(\"--theme-tint\", String(newValue));\r\n                    break;\r\n                }\r\n                case \"checkedImage\": {\r\n                    variablesMap.set(\"--theme-checked-image\", `url(${String(newValue)})`);\r\n                    break;\r\n                }\r\n                case \"arrowRightImage\": {\r\n                    variablesMap.set(\"--theme-arrow-right-image\", `url(${String(newValue)})`);\r\n                    break;\r\n                }\r\n                case \"arrowDropDown\": {\r\n                    variablesMap.set(\"--theme-arrow-dropdown-image\", `url(${String(newValue)})`);\r\n                    break;\r\n                }\r\n                case \"arrowDropUp\": {\r\n                    variablesMap.set(\"--theme-arrow-dropup-image\", `url(${String(newValue)})`);\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n__decorate([\r\n    ReactiveProperty()\r\n], Theme.prototype, \"tint\", void 0);\r\n__decorate([\r\n    ReactiveProperty()\r\n], Theme.prototype, \"checkedImage\", void 0);\r\n__decorate([\r\n    ReactiveProperty()\r\n], Theme.prototype, \"arrowRightImage\", void 0);\r\n__decorate([\r\n    ReactiveProperty()\r\n], Theme.prototype, \"arrowDropDownImage\", void 0);\r\n__decorate([\r\n    ReactiveProperty()\r\n], Theme.prototype, \"arrowDropUpImage\", void 0);\r\nconst theme = new Theme();\r\n//# sourceMappingURL=Theme.js.map","import { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR, DEFAULT_THEME_SELECTED_ITEM_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_COLOR } from \"./Theme\";\r\nexport { resetStylesheet };\r\nconst resetStylesheet = new CSSStyleSheet();\r\nresetStylesheet.replace(/*css*/ `\r\n    \r\n    html.fullscreen,\r\n    html.fullscreen > body {\r\n        height: 100%;\r\n    }\r\n\r\n    dialog {\r\n        overflow: visible;\r\n    }\r\n\r\n    body {\r\n        font-size: 13px;\r\n        margin: 0;\r\n    }\r\n\r\n    ::backdrop {\r\n        background-color: rgba(120, 120, 120, 0.2);\r\n    }\r\n\r\n    ::selection {\r\n        background-color: ${DEFAULT_THEME_SELECTED_ITEM_COLOR};\r\n    }\r\n    \r\n    input,\r\n    output,\r\n    button,\r\n    select,\r\n    textarea {\r\n        margin: 0;\r\n        font-family: inherit;\r\n        font-size: inherit;\r\n        box-sizing: content-box;\r\n    }\r\n\r\n    dialog {\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    input {\r\n        border: 1px solid grey;\r\n    }\r\n\r\n    legend {\r\n        padding: 0 6px;\r\n    }\r\n\r\n    select,\r\n    progress {\r\n        height: 22px;\r\n    }\r\n\r\n    input {\r\n        height: 18px;\r\n    }\r\n\r\n    input:is([type=\"radio\"], [type=\"checkbox\"]) {\r\n        width: 18px; \r\n    }\r\n\r\n    input[type=\"color\" i] {\r\n        border: none;\r\n        padding: 0;\r\n    }\r\n\r\n    ::-webkit-color-swatch {\r\n        border: none;\r\n    }\r\n\r\n    ::-webkit-color-swatch-wrapper {\r\n        padding: 0;\r\n    }\r\n\r\n    ::-webkit-search-cancel-button {\r\n        appearance: none;\r\n    }\r\n\r\n    dialog,\r\n    fieldset {\r\n        padding: 8px;\r\n        border: 1px solid lightgrey;\r\n    }\r\n\r\n    button[type=\"submit\"] {\r\n        border-width: 2px;\r\n    }\r\n\r\n    button:hover {\r\n        background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n    }\r\n\r\n    button:not([aria-pressed]):focus,\r\n    button[aria-pressed=\"true\"] {\r\n        background-color: var(--theme-focused-item-color, ${DEFAULT_THEME_FOCUSED_ITEM_COLOR});\r\n    }\r\n\r\n    button {\r\n        height: 18px;\r\n        appearance: none;\r\n        background: none;\r\n        border: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n    }\r\n\r\n    table {\r\n        border-spacing: 0;\r\n    }\r\n\r\n    ul {\r\n        padding: 0;\r\n        margin: 0;\r\n    }\r\n`);\r\n//# sourceMappingURL=Reset.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { AttributeProperty, CustomElement } from \"../../Element\";\r\nexport { HTMLEHeightSashElement };\r\nvar style;\r\nlet HTMLEHeightSashElementBase = class HTMLEHeightSashElementBase extends HTMLElement {\r\n    get target() {\r\n        return this.#target;\r\n    }\r\n    static {\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n                background-color: var(--theme-selected-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n                transition-property: opacity;\r\n                transition-delay: 0.2s;\r\n                transition-duration: 0.2s;\r\n                transition-timing-function: ease-out;\r\n                \r\n                height: 2px;\r\n                cursor: ns-resize;\r\n            }\r\n        `;\r\n    }\r\n    #target;\r\n    #onCapture;\r\n    #queuedPointerCallback;\r\n    #pointerMovement;\r\n    constructor() {\r\n        super();\r\n        this.#target = null;\r\n        this.#queuedPointerCallback = null;\r\n        this.#pointerMovement = 0;\r\n        this.#onCapture = false;\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        this.addEventListener(\"pointerdown\", this.#handlePointerDownEvent.bind(this));\r\n        this.addEventListener(\"pointermove\", this.#handlePointerMoveEvent.bind(this));\r\n        this.addEventListener(\"pointerup\", this.#handlePointerUpEvent.bind(this));\r\n    }\r\n    #pointerMoveCallback() {\r\n        const target = this.#target;\r\n        if (target !== null) {\r\n            const targetComputedStyle = window.getComputedStyle(target);\r\n            const { style } = target;\r\n            const { growdir } = this;\r\n            const movementY = this.#pointerMovement;\r\n            const height = parseFloat(targetComputedStyle.getPropertyValue(\"height\"));\r\n            const newHeight = Math.trunc(height + (growdir == \"top\" ? -1 : 1) * movementY);\r\n            style.setProperty(\"height\", `${newHeight}px`);\r\n            const computedNewHeight = parseFloat(targetComputedStyle.getPropertyValue(\"height\"));\r\n            style.setProperty(\"height\", `${computedNewHeight}px`);\r\n            this.dispatchEvent(new Event(\"resize\"));\r\n        }\r\n        this.#queuedPointerCallback = null;\r\n    }\r\n    #handlePointerDownEvent(event) {\r\n        const { pointerId } = event;\r\n        const { controls } = this;\r\n        const rootNode = this.getRootNode();\r\n        this.#target = rootNode.getElementById(controls);\r\n        this.setPointerCapture(pointerId);\r\n        this.#onCapture = true;\r\n    }\r\n    #handlePointerMoveEvent(event) {\r\n        if (this.#onCapture) {\r\n            if (this.#queuedPointerCallback == null) {\r\n                this.#pointerMovement = event.movementY;\r\n                this.#queuedPointerCallback = this.#pointerMoveCallback.bind(this);\r\n                requestAnimationFrame(this.#queuedPointerCallback);\r\n            }\r\n            else {\r\n                this.#pointerMovement += event.movementY;\r\n            }\r\n        }\r\n    }\r\n    #handlePointerUpEvent(event) {\r\n        const { pointerId } = event;\r\n        this.releasePointerCapture(pointerId);\r\n        this.#onCapture = false;\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEHeightSashElementBase.prototype, \"controls\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, defaultValue: \"top\" })\r\n], HTMLEHeightSashElementBase.prototype, \"growdir\", void 0);\r\nHTMLEHeightSashElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-hsash\"\r\n    })\r\n], HTMLEHeightSashElementBase);\r\nvar HTMLEHeightSashElement = HTMLEHeightSashElementBase;\r\n//# sourceMappingURL=HeightSash.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty } from \"../../Element\";\r\nexport { HTMLEWidthSashElement };\r\nvar style;\r\nlet HTMLEWidthSashElementBase = class HTMLEWidthSashElementBase extends HTMLElement {\r\n    get target() {\r\n        return this.#target;\r\n    }\r\n    #target;\r\n    #onCapture;\r\n    #queuedPointerCallback;\r\n    #pointerMovement;\r\n    static {\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n                background-color: var(--theme-selected-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n                transition-property: opacity;\r\n                transition-delay: 0.2s;\r\n                transition-duration: 0.2s;\r\n                transition-timing-function: ease-out;\r\n                \r\n                width: 2px;\r\n                cursor: ew-resize;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#target = null;\r\n        this.#queuedPointerCallback = null;\r\n        this.#pointerMovement = 0;\r\n        this.#onCapture = false;\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        this.addEventListener(\"pointerdown\", this.#handlePointerDownEvent.bind(this));\r\n        this.addEventListener(\"pointermove\", this.#handlePointerMoveEvent.bind(this));\r\n        this.addEventListener(\"pointerup\", this.#handlePointerUpEvent.bind(this));\r\n    }\r\n    setWidth(width) {\r\n        const target = this.#target;\r\n        if (target !== null) {\r\n            const { max } = this;\r\n            const { style } = target;\r\n            style.setProperty(\"width\", `${width}px`);\r\n            if (max) {\r\n                style.setProperty(\"max-width\", `${width}px`);\r\n            }\r\n        }\r\n    }\r\n    #pointerMoveCallback() {\r\n        const target = this.#target;\r\n        if (target !== null) {\r\n            const targetComputedStyle = window.getComputedStyle(target);\r\n            const { growdir } = this;\r\n            const movementX = this.#pointerMovement;\r\n            const width = parseFloat(targetComputedStyle.getPropertyValue(\"width\"));\r\n            const newWidth = width + (growdir == \"right\" ? 1 : -1) * movementX;\r\n            this.setWidth(newWidth);\r\n            this.dispatchEvent(new Event(\"resize\"));\r\n        }\r\n        this.#pointerMovement = 0;\r\n        this.#queuedPointerCallback = null;\r\n    }\r\n    #handlePointerDownEvent(event) {\r\n        const { pointerId } = event;\r\n        const { controls } = this;\r\n        const rootNode = this.getRootNode();\r\n        this.#target = rootNode.getElementById(controls);\r\n        this.setPointerCapture(pointerId);\r\n        this.#onCapture = true;\r\n    }\r\n    #handlePointerMoveEvent(event) {\r\n        if (this.#onCapture) {\r\n            if (this.#queuedPointerCallback == null) {\r\n                this.#queuedPointerCallback = this.#pointerMoveCallback.bind(this);\r\n                requestAnimationFrame(this.#queuedPointerCallback);\r\n            }\r\n            this.#pointerMovement += event.movementX;\r\n        }\r\n    }\r\n    #handlePointerUpEvent(event) {\r\n        const { pointerId } = event;\r\n        this.releasePointerCapture(pointerId);\r\n        this.#onCapture = false;\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEWidthSashElementBase.prototype, \"controls\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, defaultValue: \"right\" })\r\n], HTMLEWidthSashElementBase.prototype, \"growdir\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEWidthSashElementBase.prototype, \"max\", void 0);\r\nHTMLEWidthSashElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-wsash\"\r\n    })\r\n], HTMLEWidthSashElementBase);\r\nvar HTMLEWidthSashElement = HTMLEWidthSashElementBase;\r\n//# sourceMappingURL=WidthSash.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR, DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, element, AttributeProperty } from \"../../Element\";\r\nexport { HTMLEGridCellElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEGridCellElementBase = class HTMLEGridCellElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: table-cell;\r\n                text-align: left;\r\n            }\r\n            \r\n            :host([type=\"columnheader\"]:hover) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host(:hover):host-context(e-grid:is(:not([selectby]), [selectby=\"cell\"])) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([type=\"columnheader\"][active]) {\r\n                background-color: var(--theme-focused-item-color, ${DEFAULT_THEME_FOCUSED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([active]):host-context(e-grid:focus-within:is(:not([selectby]), [selectby=\"cell\"])) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            :host([selected]):host-context(e-grid:is(:not([selectby]), [selectby=\"cell\"])) {\r\n                background-color: var(--theme-selected-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"selected\": {\r\n                this.dispatchEvent(new Event(\"select\", { bubbles: true }));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEGridCellElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEGridCellElementBase.prototype, \"headers\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEGridCellElementBase.prototype, \"type\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Number })\r\n], HTMLEGridCellElementBase.prototype, \"posinset\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEGridCellElementBase.prototype, \"droptarget\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEGridCellElementBase.prototype, \"active\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLEGridCellElementBase.prototype, \"selected\", void 0);\r\nHTMLEGridCellElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-gridcell\"\r\n    })\r\n], HTMLEGridCellElementBase);\r\nvar HTMLEGridCellElement = HTMLEGridCellElementBase;\r\n//# sourceMappingURL=GridCell.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR, DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { AttributeProperty, CustomElement, element } from \"../../Element\";\r\nimport { HTMLEGridCellElement } from \"./GridCell\";\r\nimport \"./GridCell\";\r\nexport { HTMLEGridRowElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEGridRowElementBase = class HTMLEGridRowElementBase extends HTMLElement {\r\n    cells() {\r\n        return Array.from(this.querySelectorAll(\"e-gridcell\"));\r\n    }\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: table-row;\r\n            }\r\n            \r\n            :host(:hover):host-context(e-grid:is([selectby=\"row\"])) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([active]):host-context(e-grid:focus-within:is([selectby=\"row\"])) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            :host([selected]):host-context(e-grid:is([selectby=\"row\"])) {\r\n                background-color: var(--theme-selected-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"selected\": {\r\n                this.dispatchEvent(new Event(\"select\", { bubbles: true }));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const assignedCells = target\r\n            .assignedElements()\r\n            .filter(element_i => element_i instanceof HTMLEGridCellElement);\r\n        assignedCells.forEach((cell_i, i) => {\r\n            cell_i.posinset = i;\r\n        });\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEGridRowElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEGridRowElementBase.prototype, \"active\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEGridRowElementBase.prototype, \"selected\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Number })\r\n], HTMLEGridRowElementBase.prototype, \"posinset\", void 0);\r\nHTMLEGridRowElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-gridrow\"\r\n    })\r\n], HTMLEGridRowElementBase);\r\nvar HTMLEGridRowElement = HTMLEGridRowElementBase;\r\n//# sourceMappingURL=GridRow.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, element } from \"../../Element\";\r\nimport { HTMLEGridCellElement } from \"./GridCell\";\r\nimport \"./GridRow\";\r\nimport \"./GridCell\";\r\nexport { HTMLEGridBodyElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEGridBodyElementBase = class HTMLEGridBodyElementBase extends HTMLElement {\r\n    cells() {\r\n        return Array.from(this.querySelectorAll(\"e-gridcell\"));\r\n    }\r\n    rows() {\r\n        return Array.from(this.querySelectorAll(\"e-gridrow\"));\r\n    }\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: table-row-group;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const assignedItems = target\r\n            .assignedElements()\r\n            .filter(element_i => element_i instanceof HTMLEGridCellElement);\r\n        assignedItems.forEach((item_i, i) => {\r\n            item_i.posinset = i;\r\n        });\r\n    }\r\n};\r\nHTMLEGridBodyElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-gridbody\"\r\n    })\r\n], HTMLEGridBodyElementBase);\r\nvar HTMLEGridBodyElement = HTMLEGridBodyElementBase;\r\n//# sourceMappingURL=GridBody.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, element } from \"../../Element\";\r\nimport { HTMLEGridCellElement } from \"./GridCell\";\r\nimport \"./GridRow\";\r\nimport \"./GridCell\";\r\nexport { HTMLEGridHeadElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEGridHeadElementBase = class HTMLEGridHeadElementBase extends HTMLElement {\r\n    cells() {\r\n        return Array.from(this.querySelectorAll(\"e-gridcell\"));\r\n    }\r\n    rows() {\r\n        return Array.from(this.querySelectorAll(\"e-gridrow\"));\r\n    }\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: table-header-group;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const assignedItems = target\r\n            .assignedElements()\r\n            .filter(element_i => element_i instanceof HTMLEGridCellElement);\r\n        assignedItems.forEach((item_i, i) => {\r\n            item_i.posinset = i;\r\n        });\r\n    }\r\n};\r\nHTMLEGridHeadElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-gridhead\"\r\n    })\r\n], HTMLEGridHeadElementBase);\r\nvar HTMLEGridHeadElement = HTMLEGridHeadElementBase;\r\n//# sourceMappingURL=GridHead.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, element } from \"../../Element\";\r\nimport { HTMLEGridRowElement } from \"./GridRow\";\r\nimport \"./GridRow\";\r\nexport { HTMLEGridRowGroupElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEGridRowGroupElementBase = class HTMLEGridRowGroupElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: table-row-group;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const assignedItems = target\r\n            .assignedElements()\r\n            .filter(element_i => element_i instanceof HTMLEGridRowElement);\r\n        assignedItems.forEach((item_i, i) => {\r\n            item_i.posinset = i;\r\n        });\r\n    }\r\n};\r\nHTMLEGridRowGroupElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-gridrowgroup\"\r\n    })\r\n], HTMLEGridRowGroupElementBase);\r\nvar HTMLEGridRowGroupElement = HTMLEGridRowGroupElementBase;\r\n//# sourceMappingURL=GridRowGroup.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLEGridBodyElement } from \"./GridBody\";\r\nimport { HTMLEGridCellElement } from \"./GridCell\";\r\nimport { HTMLEGridHeadElement } from \"./GridHead\";\r\nimport { HTMLEGridRowElement } from \"./GridRow\";\r\nimport { HTMLEGridRowGroupElement } from \"./GridRowGroup\";\r\nimport \"./GridBody\";\r\nimport \"./GridHead\";\r\nimport \"./GridRowGroup\";\r\nimport \"./GridRow\";\r\nimport \"./GridCell\";\r\nexport { HTMLEGridElement };\r\nHTMLEGridHeadElement;\r\nHTMLEGridBodyElement;\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEGridElementBase = class HTMLEGridElementBase extends HTMLElement {\r\n    cells() {\r\n        return Array.from(this.querySelectorAll(\"e-gridcell\"));\r\n    }\r\n    rows() {\r\n        return Array.from(this.querySelectorAll(\"e-gridrow\"));\r\n    }\r\n    get activeCell() {\r\n        return this.querySelector(\"e-gridcell[active]\");\r\n    }\r\n    get activeRow() {\r\n        return this.querySelector(\"e-gridrow[active]\");\r\n    }\r\n    get body() {\r\n        return this.querySelector(\":scope > e-gridbody\");\r\n    }\r\n    get head() {\r\n        return this.querySelector(\":scope > e-gridhead\");\r\n    }\r\n    #onSelection;\r\n    #hasSelectionChanged;\r\n    #cellsWalker;\r\n    #rowsWalker;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: table;\r\n                user-select: none;\r\n                line-height: 22px;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#cellsWalker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#cellsWalkerNodeFilter.bind(this));\r\n        this.#rowsWalker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#rowsWalkerNodeFilter.bind(this));\r\n        this.#onSelection = false;\r\n        this.#hasSelectionChanged = false;\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"contextmenu\", this.#handleContextMenuEvent.bind(this));\r\n        this.addEventListener(\"dblclick\", this.#handleDblClickEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n        this.addEventListener(\"select\", this.#handleSelectEvent.bind(this));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    beginSelection() {\r\n        this.#onSelection = true;\r\n    }\r\n    endSelection() {\r\n        this.#onSelection = false;\r\n        if (this.#hasSelectionChanged) {\r\n            this.dispatchEvent(new Event(\"selectionchange\", { bubbles: true }));\r\n            this.#hasSelectionChanged = false;\r\n        }\r\n    }\r\n    clearSelection() {\r\n        this.#clearCellsSelection();\r\n        this.#clearRowsSelection();\r\n    }\r\n    selectedCells() {\r\n        return Array.from(this.querySelectorAll(\"e-gridcell[selected]\"));\r\n    }\r\n    selectedRows() {\r\n        return Array.from(this.querySelectorAll(\"e-gridrow[selected]\"));\r\n    }\r\n    #cellsWalkerNodeFilter(node) {\r\n        if (node instanceof HTMLEGridCellElement && !node.hidden) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEGridBodyElement || node instanceof HTMLEGridRowGroupElement || node instanceof HTMLEGridRowElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    #rowsWalkerNodeFilter(node) {\r\n        if (node instanceof HTMLEGridRowElement && !node.hidden) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEGridBodyElement || node instanceof HTMLEGridRowGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    #getCellsRange(from, to) {\r\n        const cells = Array.from(this.cells());\r\n        const fromIndex = cells.indexOf(from);\r\n        const toIndex = cells.indexOf(to);\r\n        if (fromIndex > -1 && toIndex > -1) {\r\n            if (from == to) {\r\n                return [from];\r\n            }\r\n            return cells.slice(Math.min(fromIndex, toIndex), Math.max(fromIndex, toIndex) + 1);\r\n        }\r\n        return [];\r\n    }\r\n    #getRowsRange(from, to) {\r\n        if (from == to) {\r\n            return [from];\r\n        }\r\n        const position = from.compareDocumentPosition(to);\r\n        if (position & Node.DOCUMENT_POSITION_FOLLOWING) {\r\n            const range = [from];\r\n            let nextVisibleRow = this.#nextRow(from);\r\n            while (nextVisibleRow && nextVisibleRow !== to) {\r\n                range.push(nextVisibleRow);\r\n                nextVisibleRow = this.#nextRow(nextVisibleRow);\r\n            }\r\n            range.push(to);\r\n            return range;\r\n        }\r\n        else if (position & Node.DOCUMENT_POSITION_PRECEDING) {\r\n            const range = [from];\r\n            let previousVisibleRow = this.#previousRow(from);\r\n            while (previousVisibleRow && previousVisibleRow !== to) {\r\n                range.push(previousVisibleRow);\r\n                previousVisibleRow = this.#previousRow(previousVisibleRow);\r\n            }\r\n            range.push(to);\r\n            return range;\r\n        }\r\n        return [];\r\n    }\r\n    #setCellsSelection(...cells) {\r\n        this.beginSelection();\r\n        const selectedCells = this.selectedCells();\r\n        selectedCells.forEach((selectedCell_i) => {\r\n            if (!cells.includes(selectedCell_i)) {\r\n                selectedCell_i.selected = false;\r\n            }\r\n        });\r\n        cells.forEach((cell_i) => {\r\n            if (!cell_i.selected) {\r\n                cell_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #setRowsSelection(...rows) {\r\n        this.beginSelection();\r\n        const selectedRows = this.selectedRows();\r\n        selectedRows.forEach((selectedRow_i) => {\r\n            if (!rows.includes(selectedRow_i)) {\r\n                selectedRow_i.selected = false;\r\n            }\r\n        });\r\n        rows.forEach((row_i) => {\r\n            if (!row_i.selected) {\r\n                row_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #addCellsToSelection(...cells) {\r\n        this.beginSelection();\r\n        cells.forEach((cell_i) => {\r\n            if (!cell_i.selected) {\r\n                cell_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #addRowsToSelection(...rows) {\r\n        this.beginSelection();\r\n        rows.forEach((row_i) => {\r\n            if (!row_i.selected) {\r\n                row_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #removeCellsFromSelection(...cells) {\r\n        this.beginSelection();\r\n        const selectedCells = this.selectedCells();\r\n        cells.forEach((cell_i) => {\r\n            if (selectedCells.includes(cell_i)) {\r\n                cell_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #removeRowsFromSelection(...rows) {\r\n        this.beginSelection();\r\n        const selectedRows = this.selectedRows();\r\n        rows.forEach((row_i) => {\r\n            if (selectedRows.includes(row_i)) {\r\n                row_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #clearCellsSelection() {\r\n        this.beginSelection();\r\n        const selectedCells = this.selectedCells();\r\n        selectedCells.forEach((cell_i) => {\r\n            if (cell_i.selected) {\r\n                cell_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #clearRowsSelection() {\r\n        this.beginSelection();\r\n        const selectedRows = this.selectedRows();\r\n        selectedRows.forEach((row_i) => {\r\n            if (row_i.selected) {\r\n                row_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #setActiveCell(cell) {\r\n        const { activeCell } = this;\r\n        if (activeCell !== null && activeCell !== cell) {\r\n            activeCell.active = false;\r\n            activeCell.tabIndex = -1;\r\n        }\r\n        if (cell !== null) {\r\n            const cellsWalker = this.#cellsWalker;\r\n            cellsWalker.currentNode = cell;\r\n            cell.active = true;\r\n            cell.tabIndex = 0;\r\n        }\r\n    }\r\n    #setActiveRow(row) {\r\n        const { activeRow } = this;\r\n        if (activeRow !== null && activeRow !== row) {\r\n            activeRow.active = false;\r\n            activeRow.tabIndex = -1;\r\n        }\r\n        if (row !== null) {\r\n            const rowsWalker = this.#rowsWalker;\r\n            rowsWalker.currentNode = row;\r\n            row.active = true;\r\n            row.tabIndex = 0;\r\n        }\r\n    }\r\n    #firstCell(row) {\r\n        const cellsWalker = this.#cellsWalker;\r\n        cellsWalker.currentNode = row;\r\n        return cellsWalker.firstChild();\r\n    }\r\n    #lastCell(row) {\r\n        const cellsWalker = this.#cellsWalker;\r\n        cellsWalker.currentNode = row;\r\n        return cellsWalker.lastChild();\r\n    }\r\n    #previousCell(cell) {\r\n        const cellsWalker = this.#cellsWalker;\r\n        cellsWalker.currentNode = cell;\r\n        return cellsWalker.previousNode();\r\n    }\r\n    #nextCell(cell) {\r\n        const cellsWalker = this.#cellsWalker;\r\n        cellsWalker.currentNode = cell;\r\n        return cellsWalker.nextNode();\r\n    }\r\n    #closestRow(cell) {\r\n        const rowsWalker = this.#rowsWalker;\r\n        rowsWalker.currentNode = cell;\r\n        return rowsWalker.parentNode();\r\n    }\r\n    #firstRow() {\r\n        const rowsWalker = this.#rowsWalker;\r\n        const { root } = rowsWalker;\r\n        rowsWalker.currentNode = root;\r\n        return rowsWalker.firstChild();\r\n    }\r\n    #lastRow() {\r\n        const rowsWalker = this.#rowsWalker;\r\n        const { root } = rowsWalker;\r\n        rowsWalker.currentNode = root;\r\n        return rowsWalker.lastChild();\r\n    }\r\n    #previousRow(row) {\r\n        const rowsWalker = this.#rowsWalker;\r\n        rowsWalker.currentNode = row;\r\n        return rowsWalker.previousNode();\r\n    }\r\n    #nextRow(row) {\r\n        const rowsWalker = this.#rowsWalker;\r\n        rowsWalker.currentNode = row;\r\n        return rowsWalker.nextNode();\r\n    }\r\n    #topCell(cell) {\r\n        const closestRow = this.#closestRow(cell);\r\n        if (closestRow) {\r\n            const closestRowCells = closestRow.cells();\r\n            const cellIndex = closestRowCells.indexOf(cell);\r\n            const previousRow = this.#previousRow(closestRow);\r\n            if (previousRow) {\r\n                const previousRowCells = previousRow.cells();\r\n                return previousRowCells[Math.min(cellIndex, previousRowCells.length)];\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    #bottomCell(cell) {\r\n        const closestRow = this.#closestRow(cell);\r\n        if (closestRow) {\r\n            const closestRowCells = closestRow.cells();\r\n            const cellIndex = closestRowCells.indexOf(cell);\r\n            const nextRow = this.#nextRow(closestRow);\r\n            if (nextRow) {\r\n                const nextRowCells = nextRow.cells();\r\n                return nextRowCells[Math.min(cellIndex, nextRowCells.length)];\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    #handleClickEvent(event) {\r\n        const { ctrlKey, shiftKey } = event;\r\n        const { selectby } = this;\r\n        switch (selectby) {\r\n            case \"cell\": {\r\n                const composedPath = event.composedPath();\r\n                const targetCell = composedPath.find(target_i => target_i instanceof HTMLEGridBodyElement) ? composedPath.find(target_i => target_i instanceof HTMLEGridCellElement) : null;\r\n                const selectedCells = this.selectedCells();\r\n                if (targetCell instanceof HTMLEGridCellElement) {\r\n                    if (!shiftKey && !ctrlKey) {\r\n                        this.#setCellsSelection(targetCell);\r\n                    }\r\n                    else if (ctrlKey) {\r\n                        !targetCell.selected ?\r\n                            this.#addCellsToSelection(targetCell) :\r\n                            this.#removeCellsFromSelection(targetCell);\r\n                    }\r\n                    else if (shiftKey) {\r\n                        const lastSelectedCell = selectedCells[selectedCells.length - 1];\r\n                        if (lastSelectedCell) {\r\n                            const range = this.#getCellsRange(lastSelectedCell, targetCell);\r\n                            if (range) {\r\n                                selectedCells.includes(targetCell) ?\r\n                                    this.#removeCellsFromSelection(...range) :\r\n                                    this.#addCellsToSelection(...range);\r\n                            }\r\n                        }\r\n                        else {\r\n                            this.#setCellsSelection(targetCell);\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"row\": {\r\n                const selectedRows = this.selectedRows();\r\n                const composedPath = event.composedPath();\r\n                const targetRow = composedPath.find(target_i => target_i instanceof HTMLEGridBodyElement) ? composedPath.find(target_i => target_i instanceof HTMLEGridRowElement) : null;\r\n                if (targetRow instanceof HTMLEGridRowElement) {\r\n                    if (!shiftKey && !ctrlKey) {\r\n                        this.#setRowsSelection(targetRow);\r\n                    }\r\n                    else if (ctrlKey) {\r\n                        !targetRow.selected ?\r\n                            this.#addRowsToSelection(targetRow) :\r\n                            this.#removeRowsFromSelection(targetRow);\r\n                    }\r\n                    else if (shiftKey) {\r\n                        const lastSelectedRow = selectedRows[selectedRows.length - 1];\r\n                        if (lastSelectedRow) {\r\n                            const range = this.#getRowsRange(lastSelectedRow, targetRow);\r\n                            if (range) {\r\n                                selectedRows.includes(targetRow) ?\r\n                                    this.#removeRowsFromSelection(...range) :\r\n                                    this.#addRowsToSelection(...range);\r\n                            }\r\n                        }\r\n                        else {\r\n                            this.#setRowsSelection(targetRow);\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n    #handleContextMenuEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleDblClickEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { selectby, activeCell, activeRow } = this;\r\n        switch (key) {\r\n            case \"a\": {\r\n                const { ctrlKey } = event;\r\n                if (ctrlKey) {\r\n                    switch (selectby) {\r\n                        case \"cell\": {\r\n                            const firstRow = this.#firstRow();\r\n                            const firstCell = firstRow ? this.#firstCell(firstRow) : null;\r\n                            const lastRow = this.#lastRow();\r\n                            const lastCell = lastRow ? this.#lastCell(lastRow) : null;\r\n                            if (firstCell && lastCell) {\r\n                                const range = this.#getCellsRange(firstCell, lastCell);\r\n                                if (range) {\r\n                                    this.#setCellsSelection(...range);\r\n                                }\r\n                            }\r\n                            break;\r\n                        }\r\n                        case \"row\": {\r\n                            const firstRow = this.#firstRow();\r\n                            const lastRow = this.#lastRow();\r\n                            if (firstRow && lastRow) {\r\n                                const range = this.#getRowsRange(firstRow, lastRow);\r\n                                if (range) {\r\n                                    this.#setRowsSelection(...range);\r\n                                }\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case \"ArrowLeft\": {\r\n                if (selectby == \"cell\") {\r\n                    if (activeCell) {\r\n                        const previousCell = this.#previousCell(activeCell);\r\n                        if (previousCell) {\r\n                            previousCell.focus({ preventScroll: true });\r\n                            const { shiftKey } = event;\r\n                            if (shiftKey) {\r\n                                previousCell.selected ?\r\n                                    this.#removeCellsFromSelection(previousCell) :\r\n                                    this.#addCellsToSelection(previousCell);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                if (selectby == \"cell\") {\r\n                    if (activeCell) {\r\n                        const nextCell = this.#nextCell(activeCell);\r\n                        if (nextCell) {\r\n                            nextCell.focus({ preventScroll: true });\r\n                            const { shiftKey } = event;\r\n                            if (shiftKey) {\r\n                                nextCell.selected ?\r\n                                    this.#removeCellsFromSelection(nextCell) :\r\n                                    this.#addCellsToSelection(nextCell);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowUp\": {\r\n                switch (selectby) {\r\n                    case \"cell\": {\r\n                        const firstRow = activeRow ?? this.#firstRow();\r\n                        const topCell = activeCell ?\r\n                            this.#topCell(activeCell) :\r\n                            firstRow ?\r\n                                this.#firstCell(firstRow) :\r\n                                null;\r\n                        if (topCell) {\r\n                            topCell.focus({ preventScroll: true });\r\n                            const { shiftKey } = event;\r\n                            if (shiftKey) {\r\n                                topCell.selected ?\r\n                                    this.#removeCellsFromSelection(topCell) :\r\n                                    this.#addCellsToSelection(topCell);\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    case \"row\": {\r\n                        const previousRow = activeRow ?\r\n                            this.#previousRow(activeRow) :\r\n                            this.#firstRow();\r\n                        if (previousRow) {\r\n                            previousRow.focus({ preventScroll: true });\r\n                            const { shiftKey } = event;\r\n                            if (shiftKey) {\r\n                                previousRow.selected ?\r\n                                    this.#removeRowsFromSelection(previousRow) :\r\n                                    this.#addRowsToSelection(previousRow);\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowDown\": {\r\n                switch (selectby) {\r\n                    case \"cell\":\r\n                        {\r\n                            const lastRow = activeRow ?? this.#lastRow();\r\n                            const bottomCell = activeCell ?\r\n                                this.#bottomCell(activeCell) :\r\n                                lastRow ?\r\n                                    this.#lastCell(lastRow) :\r\n                                    null;\r\n                            if (bottomCell) {\r\n                                bottomCell.focus({ preventScroll: true });\r\n                                const { shiftKey } = event;\r\n                                if (shiftKey) {\r\n                                    bottomCell.selected ?\r\n                                        this.#removeCellsFromSelection(bottomCell) :\r\n                                        this.#addCellsToSelection(bottomCell);\r\n                                }\r\n                            }\r\n                        }\r\n                        break;\r\n                    case \"row\": {\r\n                        const nextRow = activeRow ?\r\n                            this.#nextRow(activeRow) :\r\n                            this.#lastRow();\r\n                        if (nextRow) {\r\n                            nextRow.focus({ preventScroll: true });\r\n                            const { shiftKey } = event;\r\n                            if (shiftKey) {\r\n                                nextRow.selected ?\r\n                                    this.#removeRowsFromSelection(nextRow) :\r\n                                    this.#addRowsToSelection(nextRow);\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                switch (selectby) {\r\n                    case \"cell\": {\r\n                        if (activeRow) {\r\n                            const firstCell = this.#firstCell(activeRow);\r\n                            if (firstCell) {\r\n                                firstCell.focus({ preventScroll: true });\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    case \"row\": {\r\n                        const firstRow = this.#firstRow();\r\n                        if (firstRow) {\r\n                            firstRow.focus({ preventScroll: true });\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                switch (selectby) {\r\n                    case \"cell\": {\r\n                        if (activeRow) {\r\n                            const lastCell = this.#lastCell(activeRow);\r\n                            if (lastCell) {\r\n                                lastCell.focus({ preventScroll: true });\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    case \"row\": {\r\n                        const lastRow = this.#lastRow();\r\n                        if (lastRow) {\r\n                            lastRow.focus({ preventScroll: true });\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Enter\": {\r\n                switch (selectby) {\r\n                    case \"cell\": {\r\n                        if (activeCell) {\r\n                            this.#setCellsSelection(activeCell);\r\n                            activeCell.click();\r\n                        }\r\n                        break;\r\n                    }\r\n                    case \"row\": {\r\n                        if (activeRow) {\r\n                            this.#setRowsSelection(activeRow);\r\n                            activeRow.click();\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Escape\": {\r\n                switch (selectby) {\r\n                    case \"cell\": {\r\n                        this.#clearCellsSelection();\r\n                        this.#setActiveCell(null);\r\n                        break;\r\n                    }\r\n                    case \"row\": {\r\n                        this.#clearRowsSelection();\r\n                        this.#setActiveRow(null);\r\n                        break;\r\n                    }\r\n                }\r\n                this.focus();\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const { selectby } = this;\r\n        switch (selectby) {\r\n            case \"cell\": {\r\n                const { activeCell } = this;\r\n                if (activeCell && relatedTarget !== activeCell) {\r\n                    activeCell.focus();\r\n                }\r\n                break;\r\n            }\r\n            case \"row\": {\r\n                const { activeRow } = this;\r\n                if (activeRow && relatedTarget !== activeRow) {\r\n                    activeRow.focus();\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        const { selectby } = this;\r\n        switch (selectby) {\r\n            case \"cell\": {\r\n                const targetCell = target.closest(\"e-gridcell\");\r\n                if (targetCell) {\r\n                    this.#setActiveCell(targetCell);\r\n                }\r\n                break;\r\n            }\r\n            case \"row\": {\r\n                const targetRow = target.closest(\"e-gridrow\");\r\n                if (targetRow) {\r\n                    this.#setActiveRow(targetRow);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleSelectEvent() {\r\n        if (this.#onSelection) {\r\n            this.#hasSelectionChanged = true;\r\n        }\r\n        else {\r\n            this.dispatchEvent(new Event(\"selectionchange\", { bubbles: true }));\r\n        }\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const assignedRows = target\r\n            .assignedElements()\r\n            .filter(element_i => element_i instanceof HTMLEGridRowElement);\r\n        assignedRows.forEach((row_i, i) => {\r\n            row_i.posinset = i;\r\n        });\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEGridElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, defaultValue: \"cell\" })\r\n], HTMLEGridElementBase.prototype, \"selectby\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEGridElementBase.prototype, \"multiselectable\", void 0);\r\nHTMLEGridElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-grid\"\r\n    })\r\n], HTMLEGridElementBase);\r\nvar HTMLEGridElement = HTMLEGridElementBase;\r\n//# sourceMappingURL=Grid.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_CHECKED_IMAGE, DEFAULT_THEME_ACTIVATED_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR, DEFAULT_THEME_ARROW_RIGHT_IMAGE } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, QueryProperty, element } from \"../../Element\";\r\nexport { HTMLEMenuItemElement };\r\nexport { EMenuItem };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEMenuItemElementBase = class HTMLEMenuItemElementBase extends HTMLElement {\r\n    internals;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"span\", {\r\n            attributes: {\r\n                part: \"icon\"\r\n            }\r\n        }), element(\"span\", {\r\n            attributes: {\r\n                part: \"label\"\r\n            },\r\n            children: [\r\n                element(\"slot\")\r\n            ]\r\n        }), element(\"span\", {\r\n            attributes: {\r\n                part: \"arrow\"\r\n            }\r\n        }), element(\"slot\", {\r\n            attributes: {\r\n                name: \"menu\"\r\n            }\r\n        }));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                user-select: none;\r\n                white-space: nowrap;\r\n                box-sizing: border-box;\r\n            }\r\n            \r\n            :host([disabled]) {\r\n                opacity: 0.38;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host(:focus-within) {\r\n                background-color: ${DEFAULT_THEME_FOCUSED_ITEM_COLOR};\r\n            }\r\n            \r\n            :host(:is([type=\"menu\"], [type=\"submenu\"])) ::slotted([slot=\"menu\"]) {\r\n                z-index: 1;\r\n                position: absolute;\r\n            }\r\n            \r\n            :host(:is([type=\"menu\"], [type=\"submenu\"]):not([expanded])) ::slotted([slot=\"menu\"]) {\r\n                width: 0;\r\n                height: 0;\r\n                padding: 0;\r\n                opacity: 0;\r\n                pointer-events: none;\r\n                overflow: hidden;\r\n            }\r\n            \r\n            :host([type=\"submenu\"]) [part=\"icon\"] {\r\n                visibility: hidden;\r\n            }\r\n            \r\n            :host([type=\"menu\"]) [part=\"icon\"],\r\n            :host(:not([type=\"submenu\"])) [part=\"arrow\"] {\r\n                display: none;\r\n            }\r\n            \r\n            :host(:is([type=\"checkbox\"], [type=\"radio\"])[checked]) [part=\"icon\"]::before {\r\n                -webkit-mask-image: var(--theme-arrow-done-image, url(${DEFAULT_THEME_CHECKED_IMAGE}));\r\n                mask-image: var(--theme-arrow-done-image, url(${DEFAULT_THEME_CHECKED_IMAGE}));\r\n                background-color: black;\r\n            }\r\n            \r\n            :host([type=\"submenu\"]) [part=\"arrow\"]::after {\r\n                -webkit-mask-image: var(--theme-arrow-right-image, url(${DEFAULT_THEME_ARROW_RIGHT_IMAGE}));\r\n                mask-image: var(--theme-arrow-right-image, url(${DEFAULT_THEME_ARROW_RIGHT_IMAGE}));\r\n                background-color: black;\r\n            }\r\n            \r\n            [part=\"icon\"],\r\n            [part=\"label\"],\r\n            [part=\"arrow\"] {\r\n                pointer-events: none;\r\n            }\r\n            \r\n            [part=\"icon\"] {\r\n                flex: none;\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                padding: 2px;\r\n                overflow: hidden;\r\n                margin-right: 4px;\r\n            }\r\n            \r\n            [part=\"label\"] {\r\n                flex: auto;\r\n                line-height: 18px;\r\n                padding: 2px;\r\n                margin-left: 8px;\r\n                margin-right: 8px;\r\n            }\r\n            \r\n            :host(:is(:not([type]), [type=\"button\"], [type=\"radio\"], [type=\"checkbox\"])[checked]) [part=\"icon\"] {\r\n                background-color: var(--theme-activated-item-color, ${DEFAULT_THEME_ACTIVATED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host(:is(:not([type]), [type=\"button\"], [type=\"radio\"], [type=\"checkbox\"])) [part=\"icon\"]::before {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                content: \"\";\r\n                mask-size: 18px 18px;\r\n                -webkit-mask-size: 18px 18px;\r\n\r\n                mask-image: none;\r\n                -webkit-mask-image: none;\r\n                background-color: none;\r\n            }\r\n            \r\n            [part=\"arrow\"] {\r\n                flex: none;\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                margin: 1px 4px 1px 1px;\r\n            }\r\n            \r\n            [part=\"arrow\"]::after {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                margin: 1px;\r\n                content: \"\";\r\n                mask-size: 18px 18px;\r\n                -webkit-mask-size: 18px 18px;\r\n\r\n                mask-image: none;\r\n                -webkit-mask-image: none;\r\n                background-color: none;\r\n            }\r\n\r\n            :host(:hover):host-context(e-menubar:focus),\r\n            :host(:hover):host-context(e-menubar:not(:focus-within)) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const internals = this.attachInternals();\r\n        this.internals = internals;\r\n        internals.role = \"menuitem\";\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    attributeChangedCallback(attributeName, oldValue, newValue) {\r\n        const { internals } = this;\r\n        switch (attributeName) {\r\n            case \"type\": {\r\n                switch (newValue) {\r\n                    case \"checkbox\":\r\n                    case \"radio\": {\r\n                        internals.role = `menuitem${newValue}`;\r\n                        break;\r\n                    }\r\n                    default: {\r\n                        internals.role = \"menuitem\";\r\n                        break;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"checked\": {\r\n                internals.ariaChecked = String(newValue !== null);\r\n                break;\r\n            }\r\n            case \"disabled\": {\r\n                internals.ariaDisabled = String(newValue !== null);\r\n                break;\r\n            }\r\n            case \"expanded\": {\r\n                internals.ariaExpanded = String(newValue !== null);\r\n                break;\r\n            }\r\n            case \"label\": {\r\n                internals.ariaLabel = newValue;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    toggle(force) {\r\n        const { type, expanded } = this;\r\n        switch (type) {\r\n            case \"menu\":\r\n            case \"submenu\": {\r\n                const expand = force ?? !expanded;\r\n                this.expanded = expand;\r\n                if (expand) {\r\n                    this.#positionMenu();\r\n                }\r\n                this.dispatchEvent(new Event(\"toggle\", { bubbles: true }));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    expand() {\r\n        const { type, expanded } = this;\r\n        switch (type) {\r\n            case \"menu\":\r\n            case \"submenu\": {\r\n                if (!expanded) {\r\n                    this.expanded = true;\r\n                    this.#positionMenu();\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    collapse() {\r\n        const { type, expanded } = this;\r\n        switch (type) {\r\n            case \"menu\":\r\n            case \"submenu\": {\r\n                if (expanded) {\r\n                    this.expanded = false;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #positionMenu() {\r\n        const { menu } = this;\r\n        if (menu !== null) {\r\n            const { width, height } = this.getBoundingClientRect();\r\n            const { style: menuStyle } = menu;\r\n            const { width: menuWidth, height: menuHeight } = menu.getBoundingClientRect();\r\n            const { clientWidth, clientHeight } = document.body;\r\n            const { type, offsetLeft, offsetTop } = this;\r\n            const overflowX = offsetLeft + width + menuWidth - clientWidth;\r\n            const overflowY = offsetTop + menuHeight - clientHeight;\r\n            if (type === \"menu\") {\r\n                menuStyle.setProperty(\"left\", `${overflowX > 0 ?\r\n                    offsetLeft + width - menuWidth :\r\n                    offsetLeft}px`);\r\n                menuStyle.setProperty(\"top\", `${overflowY > 0 ?\r\n                    offsetTop - menuHeight :\r\n                    offsetTop + height}px`);\r\n            }\r\n            else {\r\n                menuStyle.setProperty(\"left\", `${overflowX > 0 ?\r\n                    offsetLeft - menuWidth :\r\n                    offsetLeft + width}px`);\r\n                menuStyle.setProperty(\"top\", `${overflowY > 0 ?\r\n                    offsetTop + height - menuHeight :\r\n                    offsetTop}px`);\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    QueryProperty({ selector: \":scope > e-menu[slot=menu]\" })\r\n], HTMLEMenuItemElementBase.prototype, \"menu\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEMenuItemElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEMenuItemElementBase.prototype, \"label\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEMenuItemElementBase.prototype, \"value\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEMenuItemElementBase.prototype, \"hotkey\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLEMenuItemElementBase.prototype, \"disabled\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLEMenuItemElementBase.prototype, \"checked\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLEMenuItemElementBase.prototype, \"expanded\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEMenuItemElementBase.prototype, \"overflown\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, defaultValue: \"button\", observed: true })\r\n], HTMLEMenuItemElementBase.prototype, \"type\", void 0);\r\nHTMLEMenuItemElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-menuitem\"\r\n    })\r\n], HTMLEMenuItemElementBase);\r\nvar HTMLEMenuItemElement = HTMLEMenuItemElementBase;\r\nvar EMenuItem = Object.assign(function (init) {\r\n    const { label, name, type, value, trigger, menu } = init;\r\n    if (menu) {\r\n        menu.slot = \"menu\";\r\n    }\r\n    return element(\"e-menuitem\", {\r\n        attributes: {\r\n            tabindex: -1,\r\n            title: label,\r\n            name: name,\r\n            value: value,\r\n            type: type\r\n        },\r\n        children: menu ? [\r\n            label,\r\n            menu\r\n        ] : [\r\n            label\r\n        ],\r\n        listeners: {\r\n            click: trigger\r\n        }\r\n    });\r\n}, {\r\n    prototype: HTMLEMenuItemElement.prototype,\r\n    button(init) {\r\n        return new EMenuItem({\r\n            ...init, type: \"button\"\r\n        });\r\n    },\r\n    checkbox(init) {\r\n        return new EMenuItem({\r\n            ...init, type: \"checkbox\"\r\n        });\r\n    },\r\n    radio(init) {\r\n        return new EMenuItem({\r\n            ...init, type: \"radio\"\r\n        });\r\n    },\r\n    menu(init) {\r\n        return new EMenuItem({\r\n            ...init, type: \"menu\"\r\n        });\r\n    },\r\n    submenu(init) {\r\n        return new EMenuItem({\r\n            ...init, type: \"submenu\"\r\n        });\r\n    }\r\n});\r\n//# sourceMappingURL=MenuItem.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { element, CustomElement, AttributeProperty } from \"../../Element\";\r\nimport { EMenuItem } from \"./MenuItem\";\r\nimport \"./MenuItem\";\r\nexport { HTMLEMenuItemGroupElement };\r\nexport { EMenuItemGroup };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEMenuItemGroupElementBase = class HTMLEMenuItemGroupElementBase extends HTMLElement {\r\n    internals;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"span\", {\r\n            attributes: {\r\n                part: \"label\"\r\n            }\r\n        }), element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                flex-direction: column;\r\n            }\r\n            \r\n            [part=\"label\"] {\r\n                font-weight: bold;\r\n            }\r\n            \r\n            :host([label]) [part=\"label\"] {\r\n                padding-bottom: 6px;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        const internals = this.attachInternals();\r\n        internals.role = \"group\";\r\n        this.internals = internals;\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        const { internals } = this;\r\n        switch (name) {\r\n            case \"label\":\r\n                internals.ariaLabel = newValue;\r\n                break;\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEMenuItemGroupElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEMenuItemGroupElementBase.prototype, \"label\", void 0);\r\nHTMLEMenuItemGroupElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-menuitemgroup\"\r\n    })\r\n], HTMLEMenuItemGroupElementBase);\r\nvar HTMLEMenuItemGroupElement = HTMLEMenuItemGroupElementBase;\r\nvar EMenuItemGroup = Object.assign(function (init) {\r\n    const { name, items } = init;\r\n    return element(\"e-menuitemgroup\", {\r\n        attributes: {\r\n            name: name\r\n        },\r\n        children: items\r\n    });\r\n}, {\r\n    prototype: HTMLEMenuItemGroupElement.prototype,\r\n    radios: (init) => {\r\n        const { name, items } = init;\r\n        return element(\"e-menuitemgroup\", {\r\n            attributes: {\r\n                name: name\r\n            },\r\n            children: items.map(({ label, value }) => new EMenuItem({ name, label, type: \"radio\", value }))\r\n        });\r\n    }\r\n});\r\n//# sourceMappingURL=MenuItemGroup.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar HTMLEMenuElementBase_1;\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLEMenuItemElement } from \"./MenuItem\";\r\nimport { HTMLEMenuItemGroupElement } from \"./MenuItemGroup\";\r\nimport \"./MenuItem\";\r\nimport \"./MenuItemGroup\";\r\nexport { HTMLEMenuElement };\r\nexport { EMenu };\r\nvar shadowTemplate;\r\nvar style;\r\nvar toggleAnimations;\r\nvar HIDE_DELAY_MS = 200;\r\nvar SHOW_DELAY_MS = 400;\r\nlet HTMLEMenuElementBase = HTMLEMenuElementBase_1 = class HTMLEMenuElementBase extends HTMLElement {\r\n    items() {\r\n        return Array.from(this.querySelectorAll(\":is(:scope, :scope > e-menuitemgroup) > e-menuitem\"));\r\n    }\r\n    get activeIndex() {\r\n        return this.#activeIndex;\r\n    }\r\n    get activeItem() {\r\n        const { activeIndex } = this;\r\n        return (this.querySelector(\":is(:scope, :scope > e-menuitemgroup) > e-menuitem:focus-within\") ?? activeIndex > -1) ? this.items()[activeIndex] ?? null : null;\r\n    }\r\n    #walker;\r\n    #activeIndex;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                flex-direction: column;\r\n            \r\n                padding: 3px;\r\n                background-color: white;\r\n                width: max-content;\r\n                box-sizing: border-box;\r\n            \r\n                -webkit-box-shadow: rgba(0, 0, 0, 0.2) 0 1px 3px;\r\n                box-shadow: rgba(0, 0, 0, 0.2) 0 1px 3px;\r\n            }\r\n            \r\n            :host([contextual]) {\r\n                z-index: 1;\r\n                position: absolute;\r\n            }\r\n        `;\r\n        toggleAnimations = new WeakMap();\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#activeIndex = -1;\r\n        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this));\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"mouseover\", this.#handleMouseOverEvent.bind(this));\r\n        this.addEventListener(\"mouseout\", this.#handleMouseOutEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const tabindex = this.getAttribute(\"tabindex\");\r\n        this.tabIndex = tabindex !== null ? parseInt(tabindex) : -1;\r\n    }\r\n    positionContextual(x, y) {\r\n        const { style } = this;\r\n        const { width: menuWidth, height: menuHeight } = this.getBoundingClientRect();\r\n        const { scrollX, scrollY } = window;\r\n        const left = x + scrollX;\r\n        const top = y + scrollY;\r\n        const { clientWidth, clientHeight } = document.body;\r\n        const overflowX = left + menuWidth - clientWidth;\r\n        const overflowY = top + menuHeight - clientHeight;\r\n        style.setProperty(\"left\", `${overflowX > 0 ? left - menuWidth : left}px`);\r\n        style.setProperty(\"top\", `${overflowY > 0 ? top - menuHeight : top}px`);\r\n    }\r\n    #collapseSubmenus() {\r\n        this.querySelectorAll(\":is(:scope, :scope > e-menuitemgroup) > e-menuitem[expanded]\")\r\n            .forEach((item_i) => {\r\n            item_i.collapse();\r\n        });\r\n    }\r\n    #nearestItem(target) {\r\n        return Array.from(this.querySelectorAll(\":is(:scope, :scope > e-menuitemgroup) > e-menuitem\")).find(item_i => item_i.contains(target)) ?? null;\r\n    }\r\n    #walkerNodeFilter(node) {\r\n        if (node instanceof HTMLEMenuItemElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEMenuItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    firstItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.firstChild();\r\n    }\r\n    #lastItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.lastChild();\r\n    }\r\n    #previousItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.previousNode();\r\n    }\r\n    #nextItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.nextNode();\r\n    }\r\n    #firstChildItem(item) {\r\n        const { menu } = item;\r\n        return menu instanceof HTMLEMenuElementBase_1 ?\r\n            menu.firstItem() :\r\n            null;\r\n    }\r\n    #setActiveItem(item) {\r\n        if (item !== null) {\r\n            this.#activeIndex = this.items().indexOf(item);\r\n        }\r\n    }\r\n    #handleClickEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-menuitem\");\r\n        if (targetItem) {\r\n            const { type, checked } = targetItem;\r\n            switch (type) {\r\n                case \"checkbox\": {\r\n                    targetItem.checked = !checked;\r\n                    break;\r\n                }\r\n                case \"radio\": {\r\n                    const { name, value } = targetItem;\r\n                    targetItem.checked = true;\r\n                    this.querySelectorAll(`:is(:scope, :scope > e-menuitemgroup) > e-menuitem[type=radio][name=${name}]`)\r\n                        .forEach((radio_i) => {\r\n                        radio_i.checked = radio_i.value == value;\r\n                    });\r\n                    break;\r\n                }\r\n                case \"menu\":\r\n                case \"submenu\": {\r\n                    targetItem.toggle();\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        if (target instanceof HTMLEMenuItemElement) {\r\n            const nearestItem = this.#nearestItem(target);\r\n            if (nearestItem) {\r\n                this.#setActiveItem(nearestItem);\r\n            }\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const lostFocusWithin = !this.contains(relatedTarget);\r\n        if (lostFocusWithin) {\r\n            const { contextual } = this;\r\n            if (contextual) {\r\n                try {\r\n                    this.remove();\r\n                }\r\n                catch (error) { }\r\n                ;\r\n            }\r\n            else {\r\n                const { activeItem } = this;\r\n                if (activeItem?.expanded) {\r\n                    activeItem.collapse();\r\n                }\r\n                this.#setActiveItem(null);\r\n            }\r\n        }\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { activeItem } = this;\r\n        switch (key) {\r\n            case \"ArrowUp\": {\r\n                const previousItem = activeItem ?\r\n                    this.#previousItem(activeItem) ?? this.#lastItem() :\r\n                    this.firstItem();\r\n                previousItem?.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowDown\": {\r\n                const nextItem = activeItem ?\r\n                    this.#nextItem(activeItem) ?? this.firstItem() :\r\n                    this.firstItem();\r\n                nextItem?.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.firstItem();\r\n                firstItem?.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                lastItem?.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Enter\":\r\n            case \" \": {\r\n                if (activeItem) {\r\n                    const { type } = activeItem;\r\n                    switch (type) {\r\n                        case \"menu\":\r\n                        case \"submenu\": {\r\n                            activeItem.expand();\r\n                            if (activeItem.expanded) {\r\n                                const firstChildItem = this.#firstChildItem(activeItem);\r\n                                firstChildItem?.focus({ preventScroll: true });\r\n                            }\r\n                            break;\r\n                        }\r\n                        default: {\r\n                            activeItem.click();\r\n                            break;\r\n                        }\r\n                    }\r\n                    event.stopPropagation();\r\n                }\r\n                break;\r\n            }\r\n            case \"Escape\": {\r\n                if (activeItem) {\r\n                    const isClosestTargetMenu = event.composedPath().find(target_i => target_i instanceof HTMLEMenuElement) == this;\r\n                    if (!isClosestTargetMenu) {\r\n                        activeItem.collapse();\r\n                        activeItem.focus({ preventScroll: true });\r\n                        event.stopPropagation();\r\n                    }\r\n                    else {\r\n                        const { contextual } = this;\r\n                        if (contextual) {\r\n                            this.blur();\r\n                            this.dispatchEvent(new Event(\"close\", { bubbles: true }));\r\n                            event.stopPropagation();\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"ArrowLeft\": {\r\n                if (activeItem) {\r\n                    const isClosestTargetMenu = event.composedPath().find(target_i => target_i instanceof HTMLEMenuElement) == this;\r\n                    if (!isClosestTargetMenu) {\r\n                        activeItem.collapse();\r\n                        activeItem.focus({ preventScroll: true });\r\n                        event.stopPropagation();\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                if (activeItem) {\r\n                    const { type } = activeItem;\r\n                    switch (type) {\r\n                        case \"submenu\": {\r\n                            if (!activeItem.expanded) {\r\n                                activeItem.expand();\r\n                                const firstChildItem = this.#firstChildItem(activeItem);\r\n                                firstChildItem?.focus({ preventScroll: true });\r\n                                event.stopPropagation();\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleMouseOutEvent(event) {\r\n        const { target, relatedTarget } = event;\r\n        if (target instanceof HTMLEMenuItemElement) {\r\n            const nearestItem = this.#nearestItem(target);\r\n            if (nearestItem !== null) {\r\n                if (nearestItem.type == \"submenu\" &&\r\n                    !nearestItem.expanded) {\r\n                    toggleAnimations.get(nearestItem)?.cancel();\r\n                }\r\n                const isTargetClosestMenu = event.composedPath().find(target_i => target_i instanceof HTMLEMenuElement) == this;\r\n                if (isTargetClosestMenu) {\r\n                    const { activeItem } = this;\r\n                    if (activeItem?.type == \"submenu\" &&\r\n                        activeItem.expanded) {\r\n                        let toggleAnimation = toggleAnimations.get(activeItem);\r\n                        if (toggleAnimation) {\r\n                            toggleAnimation.cancel();\r\n                        }\r\n                        toggleAnimation = activeItem.animate(null, {\r\n                            duration: HIDE_DELAY_MS\r\n                        });\r\n                        toggleAnimations.set(activeItem, toggleAnimation);\r\n                        const { finished } = toggleAnimation;\r\n                        finished\r\n                            .then(() => {\r\n                            activeItem.collapse();\r\n                        })\r\n                            .catch(() => undefined)\r\n                            .finally(() => {\r\n                            toggleAnimations.delete(activeItem);\r\n                        });\r\n                    }\r\n                    const { left, right, top, bottom } = (() => {\r\n                        const parentItem = this.closest(\"e-menuitem\");\r\n                        if (parentItem && !parentItem.expanded) {\r\n                            parentItem.expand();\r\n                            const menuRect = this.getBoundingClientRect();\r\n                            parentItem.collapse();\r\n                            return menuRect;\r\n                        }\r\n                        else {\r\n                            return this.getBoundingClientRect();\r\n                        }\r\n                    })();\r\n                    const { clientX, clientY } = event;\r\n                    const intersectsWithMouse = !(left > clientX || right < clientX || top > clientY || bottom < clientY);\r\n                    const containsRelatedTarget = this.contains(relatedTarget);\r\n                    if (intersectsWithMouse && containsRelatedTarget) {\r\n                        if (relatedTarget instanceof HTMLEMenuElement && relatedTarget !== this) {\r\n                            relatedTarget.focus({ preventScroll: true });\r\n                        }\r\n                        else {\r\n                            this.focus({ preventScroll: true });\r\n                            this.#setActiveItem(null);\r\n                        }\r\n                    }\r\n                    if (!intersectsWithMouse) {\r\n                        this.focus({ preventScroll: true });\r\n                        this.#setActiveItem(null);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleMouseOverEvent(event) {\r\n        const { target } = event;\r\n        if (target instanceof HTMLEMenuItemElement) {\r\n            const nearestItem = this.#nearestItem(target);\r\n            if (nearestItem !== null) {\r\n                if (nearestItem.type === \"submenu\" && nearestItem.expanded) {\r\n                    toggleAnimations.get(nearestItem)?.cancel();\r\n                }\r\n                const isTargetClosestMenu = event.composedPath().find(target_i => target_i instanceof HTMLEMenuElement) == this;\r\n                if (isTargetClosestMenu) {\r\n                    const { activeItem } = this;\r\n                    if (activeItem?.type === \"submenu\" &&\r\n                        activeItem.expanded &&\r\n                        !activeItem.contains(target)) {\r\n                        let toggleAnimation = toggleAnimations.get(activeItem);\r\n                        if (toggleAnimation) {\r\n                            toggleAnimation.cancel();\r\n                        }\r\n                        toggleAnimation = activeItem.animate(null, {\r\n                            duration: SHOW_DELAY_MS\r\n                        });\r\n                        toggleAnimations.set(activeItem, toggleAnimation);\r\n                        const { finished } = toggleAnimation;\r\n                        finished\r\n                            .then(() => {\r\n                            activeItem.collapse();\r\n                        })\r\n                            .catch(() => undefined)\r\n                            .finally(() => {\r\n                            toggleAnimations.delete(activeItem);\r\n                        });\r\n                    }\r\n                    this.#setActiveItem(nearestItem);\r\n                    nearestItem.focus({ preventScroll: true });\r\n                    if (nearestItem.type === \"submenu\") {\r\n                        if (!nearestItem.expanded) {\r\n                            let toggleAnimation = toggleAnimations.get(nearestItem);\r\n                            if (toggleAnimation) {\r\n                                toggleAnimation.cancel();\r\n                            }\r\n                            toggleAnimation = nearestItem.animate(null, {\r\n                                duration: HIDE_DELAY_MS\r\n                            });\r\n                            toggleAnimations.set(nearestItem, toggleAnimation);\r\n                            const { finished } = toggleAnimation;\r\n                            finished\r\n                                .then(() => {\r\n                                const { activeItem } = this;\r\n                                this.#collapseSubmenus();\r\n                                if (activeItem) {\r\n                                    toggleAnimations.get(activeItem)?.cancel();\r\n                                    activeItem.expand();\r\n                                    activeItem.menu?.focus({ preventScroll: true });\r\n                                }\r\n                            })\r\n                                .catch(() => undefined)\r\n                                .finally(() => {\r\n                                toggleAnimations.delete(nearestItem);\r\n                            });\r\n                        }\r\n                        else {\r\n                            nearestItem.menu?.focus({ preventScroll: true });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEMenuElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEMenuElementBase.prototype, \"contextual\", void 0);\r\nHTMLEMenuElementBase = HTMLEMenuElementBase_1 = __decorate([\r\n    CustomElement({\r\n        name: \"e-menu\"\r\n    })\r\n], HTMLEMenuElementBase);\r\nvar HTMLEMenuElement = HTMLEMenuElementBase;\r\nvar EMenu = Object.assign(function (init) {\r\n    const { name, children } = init;\r\n    return element(\"e-menu\", {\r\n        attributes: {\r\n            name: name,\r\n            tabindex: -1,\r\n        },\r\n        children: children\r\n    });\r\n}, {\r\n    prototype: HTMLEMenuElement.prototype,\r\n});\r\n//# sourceMappingURL=Menu.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLEMenuItemElement } from \"./MenuItem\";\r\nimport { HTMLEMenuItemGroupElement } from \"./MenuItemGroup\";\r\nimport \"./Menu\";\r\nimport \"./MenuItem\";\r\nimport \"./MenuItemGroup\";\r\nexport { HTMLEMenuBarElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEMenuBarElementBase = class HTMLEMenuBarElementBase extends HTMLElement {\r\n    #activeIndex;\r\n    #walker;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                position: relative;\r\n                display: flex;\r\n                flex-direction: row;\r\n                width: max-content;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this));\r\n        this.#activeIndex = -1;\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n        this.addEventListener(\"mouseover\", this.#handleMouseOverEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const tabindex = this.getAttribute(\"tabindex\");\r\n        this.tabIndex = tabindex !== null ? parseInt(tabindex) : -1;\r\n    }\r\n    items() {\r\n        return Array.from(this.querySelectorAll(\":is(:scope, :scope > e-menuitemgroup) > e-menuitem\"));\r\n    }\r\n    get activeIndex() {\r\n        return this.#activeIndex;\r\n    }\r\n    get activeItem() {\r\n        const { activeIndex } = this;\r\n        return (this.querySelector(\":is(:scope, :scope > e-menuitemgroup) > e-menuitem:focus-within\") ?? activeIndex > -1) ? this.items()[activeIndex] ?? null : null;\r\n    }\r\n    #walkerNodeFilter(node) {\r\n        if (node instanceof HTMLEMenuItemElement && !(node.disabled || node.hidden)) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEMenuItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    firstItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.firstChild();\r\n    }\r\n    #lastItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.lastChild();\r\n    }\r\n    #previousItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.previousSibling();\r\n    }\r\n    #nextItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.nextSibling();\r\n    }\r\n    #firstChildItem(item) {\r\n        const { menu } = item;\r\n        if (menu) {\r\n            const walker = this.#walker;\r\n            walker.currentNode = menu;\r\n            return walker.firstChild();\r\n        }\r\n        return null;\r\n    }\r\n    #setActiveItem(item) {\r\n        const { activeItem, expanded } = this;\r\n        if (activeItem !== null && activeItem !== item) {\r\n            activeItem.collapse();\r\n        }\r\n        if (item !== null) {\r\n            if (expanded) {\r\n                item.expand();\r\n            }\r\n            this.#activeIndex = this.items().indexOf(item);\r\n        }\r\n        else {\r\n            this.#activeIndex = -1;\r\n        }\r\n    }\r\n    get #items() {\r\n        return Array.from(this.querySelectorAll(\":is(:scope, :scope > e-menuitemgroup) > e-menuitem\"));\r\n    }\r\n    #isClosestMenu(target) {\r\n        return target.closest(\":is(e-menubar, e-menu)\") == this;\r\n    }\r\n    #nearestItem(target) {\r\n        return this.#items.find(item_i => item_i.contains(target)) ?? null;\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const { activeItem } = this;\r\n        if (!this.contains(relatedTarget)) {\r\n            (activeItem ?? this.firstItem())?.focus();\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        if (target instanceof Element) {\r\n            const nearestItem = this.#nearestItem(target);\r\n            this.#setActiveItem(nearestItem);\r\n            this.tabIndex = -1;\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { target, relatedTarget } = event;\r\n        if (target instanceof HTMLElement) {\r\n            const nearestItem = this.#nearestItem(target);\r\n            if (nearestItem) {\r\n                nearestItem.collapse();\r\n            }\r\n        }\r\n        const lostFocusWithin = !this.contains(relatedTarget);\r\n        if (lostFocusWithin) {\r\n            this.expanded = false;\r\n            this.tabIndex = 0;\r\n        }\r\n    }\r\n    #handleMouseOverEvent(event) {\r\n        const { target } = event;\r\n        const { expanded, activeItem } = this;\r\n        if (target instanceof HTMLEMenuItemElement) {\r\n            const isClosestMenu = this.#isClosestMenu(target);\r\n            if (isClosestMenu && target !== activeItem && expanded) {\r\n                const { menu } = target;\r\n                if (menu) {\r\n                    target.expand();\r\n                    menu.focus({ preventScroll: true });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleClickEvent(event) {\r\n        const { target } = event;\r\n        const { expanded, activeItem } = this;\r\n        if (target instanceof HTMLEMenuItemElement) {\r\n            const isClosestMenu = this.#isClosestMenu(target);\r\n            if (isClosestMenu) {\r\n                const isExpanded = !expanded;\r\n                this.expanded = isExpanded;\r\n                if (isExpanded) {\r\n                    if (activeItem && !activeItem.expanded) {\r\n                        activeItem.expand();\r\n                    }\r\n                    const { menu } = target;\r\n                    menu?.focus({ preventScroll: true });\r\n                }\r\n                else {\r\n                    if (activeItem) {\r\n                        activeItem.collapse();\r\n                        activeItem.blur();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { expanded } = this;\r\n        let { activeItem } = this;\r\n        switch (key) {\r\n            case \"ArrowLeft\": {\r\n                const previousItem = activeItem ?\r\n                    this.#previousItem(activeItem) ?? this.#lastItem() :\r\n                    this.firstItem();\r\n                previousItem?.focus({ preventScroll: true });\r\n                ({ activeItem } = this);\r\n                if (expanded && activeItem) {\r\n                    const firstChildItem = this.#firstChildItem(activeItem);\r\n                    firstChildItem?.focus({ preventScroll: true });\r\n                }\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                const nextItem = activeItem ?\r\n                    this.#nextItem(activeItem) ?? this.firstItem() :\r\n                    this.#lastItem();\r\n                nextItem?.focus({ preventScroll: true });\r\n                ({ activeItem } = this);\r\n                if (expanded && activeItem) {\r\n                    const firstChildItem = this.#firstChildItem(activeItem);\r\n                    firstChildItem?.focus({ preventScroll: true });\r\n                }\r\n                break;\r\n            }\r\n            case \"Enter\":\r\n            case \" \": {\r\n                if (activeItem) {\r\n                    this.expanded = !expanded;\r\n                    if (!expanded) {\r\n                        const firstChildItem = this.#firstChildItem(activeItem);\r\n                        firstChildItem?.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"Escape\": {\r\n                if (expanded) {\r\n                    this.expanded = false;\r\n                    if (activeItem) {\r\n                        activeItem.collapse();\r\n                        activeItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                else {\r\n                    this.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEMenuBarElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEMenuBarElementBase.prototype, \"expanded\", void 0);\r\nHTMLEMenuBarElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-menubar\"\r\n    })\r\n], HTMLEMenuBarElementBase);\r\nvar HTMLEMenuBarElement = HTMLEMenuBarElementBase;\r\n//# sourceMappingURL=MenuBar.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR, DEFAULT_THEME_FOCUSED_ITEM_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element, QueryProperty } from \"../../Element\";\r\nimport \"./Menu\";\r\nimport \"./MenuItem\";\r\nimport \"./MenuItemGroup\";\r\nexport { HTMLEMenuButtonElement };\r\nexport { EMenuButton };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEMenuButtonElementBase = class HTMLEMenuButtonElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"), element(\"slot\", {\r\n            attributes: {\r\n                name: \"menu\"\r\n            }\r\n        }));\r\n        style = /*css*/ `\r\n            :host {\r\n                position: relative;\r\n                display: inline-block;\r\n                padding: 2px;\r\n                line-height: 18px;\r\n                user-select: none;\r\n                white-space: nowrap;\r\n                cursor: pointer;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            :host(:focus-within:not(:focus)) {\r\n                background-color: var(--theme-focused-item-color, ${DEFAULT_THEME_FOCUSED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host(:hover:not(:focus-within)) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([disabled]) {\r\n                color: lightgray;\r\n            }\r\n            \r\n            ::slotted([slot=\"menu\"]) {\r\n                z-index: 1;\r\n                position: absolute;\r\n                color: initial;\r\n            }\r\n            \r\n            :host(:not([expanded])) ::slotted([slot=\"menu\"]) {\r\n                opacity: 0;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host::after {\r\n                display: inline-block;\r\n                text-align: center;\r\n                width: 18px;\r\n                height: 18px;\r\n                content: \"▾\";\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const tabindex = this.getAttribute(\"tabindex\");\r\n        this.tabIndex = tabindex !== null ? parseInt(tabindex) : -1;\r\n    }\r\n    toggle(force) {\r\n        const { expanded } = this;\r\n        const expand = force ?? !expanded;\r\n        expand ? this.expand() : this.collapse();\r\n    }\r\n    expand() {\r\n        const { expanded } = this;\r\n        if (!expanded) {\r\n            this.expanded = true;\r\n            this.#positionMenu();\r\n        }\r\n    }\r\n    collapse() {\r\n        const { expanded } = this;\r\n        if (expanded) {\r\n            this.expanded = false;\r\n        }\r\n    }\r\n    #positionMenu() {\r\n        const { menu } = this;\r\n        if (menu !== null) {\r\n            const { width, height } = this.getBoundingClientRect();\r\n            const { style: menuStyle } = menu;\r\n            const { width: menuWidth, height: menuHeight } = menu.getBoundingClientRect();\r\n            const { clientWidth, clientHeight } = document.body;\r\n            const { offsetLeft, offsetTop } = this;\r\n            const overflowX = offsetLeft + width + menuWidth - clientWidth;\r\n            const overflowY = offsetTop + menuHeight - clientHeight;\r\n            menuStyle.setProperty(\"left\", `${overflowX > 0 ?\r\n                width - menuWidth :\r\n                0}px`);\r\n            menuStyle.setProperty(\"top\", `${overflowY > 0 ?\r\n                -menuHeight :\r\n                height}px`);\r\n        }\r\n    }\r\n    #handleClickEvent(event) {\r\n        const { target } = event;\r\n        const { menu } = this;\r\n        if (menu && !menu.contains(target)) {\r\n            this.toggle();\r\n            const { expanded } = this;\r\n            if (expanded) {\r\n                menu?.focus({ preventScroll: true });\r\n            }\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const lostFocusWithin = !this.contains(relatedTarget);\r\n        if (lostFocusWithin) {\r\n            this.collapse();\r\n        }\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { expanded } = this;\r\n        switch (key) {\r\n            case \"ArrowDown\":\r\n            case \"Enter\":\r\n                if (!expanded) {\r\n                    this.expand();\r\n                    this.firstItem?.focus({ preventScroll: true });\r\n                    event.stopPropagation();\r\n                }\r\n                break;\r\n            case \"Escape\":\r\n                if (expanded) {\r\n                    this.collapse();\r\n                }\r\n                this.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    QueryProperty({ selector: \":scope > e-menu[slot=menu]\" })\r\n], HTMLEMenuButtonElementBase.prototype, \"menu\", void 0);\r\n__decorate([\r\n    QueryProperty({ selector: \":scope > e-menu[slot=menu] e-menuitem\" })\r\n], HTMLEMenuButtonElementBase.prototype, \"firstItem\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEMenuButtonElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEMenuButtonElementBase.prototype, \"disabled\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEMenuButtonElementBase.prototype, \"expanded\", void 0);\r\nHTMLEMenuButtonElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-menubutton\"\r\n    })\r\n], HTMLEMenuButtonElementBase);\r\nvar HTMLEMenuButtonElement = HTMLEMenuButtonElementBase;\r\nvar EMenuButton = Object.assign(function (init) {\r\n    const { menu } = init;\r\n    menu.slot = \"menu\";\r\n    return element(\"e-menubutton\", {\r\n        attributes: {\r\n            tabindex: -1\r\n        },\r\n        children: [menu]\r\n    });\r\n}, {\r\n    prototype: HTMLEMenuButtonElement.prototype,\r\n});\r\n//# sourceMappingURL=MenuButton.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { element, reactiveChildElements, CustomElement, fragment, reactiveElement } from \"../elements/Element\";\r\nimport { ModelList, ModelObject, ReactiveProperty } from \"../models/Model\";\r\nimport { View } from \"./View\";\r\nimport { resetStylesheet } from \"../stylesheets/Reset\";\r\nexport { GridModel };\r\nexport { GridRowModel };\r\nexport { GridColumnModel };\r\nexport { GridView };\r\nimport \"../elements/controls/sashes\";\r\nimport \"../elements/containers/grid\";\r\nimport \"../elements/containers/menus\";\r\nimport { DEFAULT_THEME_ARROW_DROPDOWN_IMAGE, DEFAULT_THEME_ARROW_DROPUP_IMAGE } from \"../stylesheets/Theme\";\r\nclass GridModel extends ModelObject {\r\n    rows;\r\n    columns;\r\n    constructor(init) {\r\n        super();\r\n        const { rows: initRows = [], columns: initColumns = [] } = init ?? {};\r\n        const rows = new ModelList(initRows);\r\n        rows.setParent(this);\r\n        this.rows = rows;\r\n        const columns = new ModelList(initColumns);\r\n        columns.setParent(this);\r\n        this.columns = columns;\r\n    }\r\n    getColumnByName(name) {\r\n        return Array.from(this.columns.values()).find(column_i => column_i.name == name) ?? null;\r\n    }\r\n    sortByColumn(column, sortOrder) {\r\n        Array.from(this.columns.values()).forEach((column_i) => {\r\n            column_i.sortorder = column_i === column ? sortOrder : undefined;\r\n        });\r\n        const sortTest = (() => {\r\n            const { type } = column;\r\n            switch (type) {\r\n                case String: {\r\n                    return (row_1, row_2) => {\r\n                        const cell_1 = String(column.extract(row_1));\r\n                        const cell_2 = String(column.extract(row_2));\r\n                        return sortOrder * cell_1.localeCompare(cell_2);\r\n                    };\r\n                }\r\n                default: {\r\n                    return (row_1, row_2) => {\r\n                        const cell_1 = Number(column.extract(row_1));\r\n                        const cell_2 = Number(column.extract(row_2));\r\n                        return Math.sign(sortOrder * (cell_1 - cell_2));\r\n                    };\r\n                }\r\n            }\r\n        })();\r\n        this.rows.sort(sortTest);\r\n    }\r\n}\r\nclass GridColumnModel extends ModelObject {\r\n    name;\r\n    type;\r\n    label;\r\n    extract;\r\n    filters;\r\n    sortorder;\r\n    constructor(init) {\r\n        super();\r\n        const { name, type, label, extract, filters = [] } = init;\r\n        this.name = name;\r\n        this.type = type;\r\n        this.label = label;\r\n        this.extract = extract;\r\n        this.filters = filters;\r\n    }\r\n}\r\n__decorate([\r\n    ReactiveProperty()\r\n], GridColumnModel.prototype, \"sortorder\", void 0);\r\nclass GridRowModel extends ModelObject {\r\n    id;\r\n    constructor(init) {\r\n        super();\r\n        const { id } = init;\r\n        this.id = id;\r\n    }\r\n}\r\nvar style;\r\nlet GridViewBase = class GridViewBase extends View {\r\n    #columnDelegate;\r\n    #cellDelegate;\r\n    #displayFilters;\r\n    static {\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n            }\r\n            \r\n            e-gridrow[hidden] {\r\n                display: none;\r\n            }\r\n            \r\n            e-gridcell[type=\"gridcell\"] {\r\n                max-width: 0;\r\n                overflow: clip;\r\n                text-overflow: ellipsis;\r\n                white-space: nowrap;\r\n            }\r\n            \r\n            e-gridcell[type=\"columnheader\"] {\r\n                width: 120px;\r\n            }\r\n            \r\n            .gridcell-label,\r\n            .gridheader-label {\r\n                padding-left: 4px;\r\n            }\r\n            \r\n            .gridcell-content {\r\n                overflow: clip;\r\n            }\r\n            \r\n            .gridheader-content {\r\n                display: flex;\r\n            }\r\n            \r\n            .gridheader-label {\r\n                flex: 1 1 0;\r\n                overflow: clip;\r\n                text-overflow: ellipsis;\r\n                white-space: nowrap;\r\n            }\r\n            \r\n            e-treeitem::part(arrow) {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                margin: 1px 4px 1px 1px;\r\n            }\r\n            \r\n            .gridheader-sort-indicator {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n            }\r\n            \r\n            .gridheader-sort-indicator::before {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                margin: 1px;\r\n                content: \"\";\r\n\r\n                mask-size: 18px 18px;\r\n                -webkit-mask-size: 18px 18px;\r\n                background-color: none;\r\n            }\r\n            \r\n            e-gridcell[type=\"columnheader\"]:not([data-sortorder]) .gridheader-sort-indicator::before {\r\n                background-color: unset;\r\n            }\r\n            \r\n            e-gridcell[type=\"columnheader\"][data-sortorder=\"1\"] .gridheader-sort-indicator::before {\r\n                -webkit-mask-image: var(--theme-arrow-dropup-image, url(${DEFAULT_THEME_ARROW_DROPUP_IMAGE}));\r\n                mask-image: var(--theme-arrow-dropup-image, url(${DEFAULT_THEME_ARROW_DROPUP_IMAGE}));\r\n                background-color: black;\r\n            }\r\n            \r\n            e-gridcell[type=\"columnheader\"][data-sortorder=\"-1\"] .gridheader-sort-indicator::before {\r\n                -webkit-mask-image: var(--theme-arrow-dropdown-image, url(${DEFAULT_THEME_ARROW_DROPDOWN_IMAGE}));\r\n                mask-image: var(--theme-arrow-dropdown-image, url(${DEFAULT_THEME_ARROW_DROPDOWN_IMAGE}));\r\n                background-color: black;\r\n            }\r\n        `;\r\n    }\r\n    constructor(model) {\r\n        super();\r\n        this.#displayFilters = [];\r\n        this.#cellDelegate =\r\n            (row, column) => element(\"label\", {\r\n                children: column.extract(row)\r\n            });\r\n        this.#columnDelegate =\r\n            (column) => element(\"label\", {\r\n                children: column.label\r\n            });\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet, resetStylesheet];\r\n        this.setModel(model ?? new GridModel());\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"resizable\":\r\n            case \"sortable\": {\r\n                this.render();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    get gridElement() {\r\n        return this.shadowRoot.querySelector(\"e-grid\");\r\n    }\r\n    setColumnDelegate(delegate) {\r\n        this.#columnDelegate = delegate;\r\n    }\r\n    setCellDelegate(delegate) {\r\n        this.#cellDelegate = delegate;\r\n    }\r\n    getRowElement(row) {\r\n        return this.shadowRoot.querySelector(`e-grid > e-gridbody > e-gridrow[data-index='${row.id}']`);\r\n    }\r\n    getColumnHeaderElement(column) {\r\n        return this.shadowRoot.querySelector(`e-grid > e-gridhead > e-gridcell[id=${column.name}]`);\r\n    }\r\n    getColumnCellsElements(column) {\r\n        return Array.from(this.shadowRoot.querySelectorAll(`e-grid > e-gridbody > e-gridrow > e-gridcell[headers~=${column.name}]`));\r\n    }\r\n    renderShadow() {\r\n        const { model } = this;\r\n        return fragment(element(\"e-grid\", {\r\n            attributes: {\r\n                tabindex: 0,\r\n                selectby: \"row\",\r\n                multisectable: true\r\n            },\r\n            children: [\r\n                element(\"e-gridhead\", {\r\n                    children: reactiveChildElements(model.columns, column => this.#renderGridColumnHeaderCell(column)),\r\n                    listeners: {\r\n                        contextmenu: this.#handleHeadContextMenuEvent.bind(this),\r\n                        click: this.#handleHeadClickEvent.bind(this)\r\n                    }\r\n                }),\r\n                element(\"e-gridbody\", {\r\n                    children: reactiveChildElements(model.rows, row => this.#renderGridBodyRow(row))\r\n                })\r\n            ]\r\n        }));\r\n    }\r\n    filter(row) {\r\n        const displayFilters = this.#displayFilters;\r\n        return (displayFilters.length > 0 ? displayFilters.some(filter_i => filter_i.filter(row)) : true);\r\n    }\r\n    addDisplayFilter(filter) {\r\n        const { model, gridElement } = this;\r\n        const { rows } = model;\r\n        const displayFilters = this.#displayFilters;\r\n        if (!displayFilters.includes(filter)) {\r\n            displayFilters.push(filter);\r\n            Array.from(rows.values()).forEach((row_i) => {\r\n                const rowElement = this.getRowElement(row_i);\r\n                if (rowElement) {\r\n                    rowElement.hidden = !this.filter(row_i);\r\n                }\r\n            });\r\n        }\r\n        gridElement.clearSelection();\r\n    }\r\n    removeDisplayFilter(filter) {\r\n        const { model, gridElement } = this;\r\n        const { rows } = model;\r\n        const displayFilters = this.#displayFilters;\r\n        const filterIndex = displayFilters.indexOf(filter);\r\n        if (filterIndex > -1) {\r\n            displayFilters.splice(filterIndex, 1);\r\n            Array.from(rows.values()).forEach((row_i) => {\r\n                const rowElement = this.getRowElement(row_i);\r\n                if (rowElement) {\r\n                    rowElement.hidden = !this.filter(row_i);\r\n                }\r\n            });\r\n        }\r\n        gridElement.clearSelection();\r\n    }\r\n    removeAllDisplayFilters() {\r\n        const { model, gridElement } = this;\r\n        const { rows } = model;\r\n        const displayFilters = this.#displayFilters;\r\n        displayFilters.splice(0, displayFilters.length);\r\n        Array.from(rows.values()).forEach((row_i) => {\r\n            const rowElement = this.getRowElement(row_i);\r\n            if (rowElement) {\r\n                rowElement.hidden = !this.filter(row_i);\r\n            }\r\n        });\r\n        gridElement.clearSelection();\r\n    }\r\n    #renderGridColumnHeaderCell(column) {\r\n        const gridColumnElement = reactiveElement(column, element(\"e-gridcell\", {\r\n            attributes: {\r\n                type: \"columnheader\",\r\n                id: column.name\r\n            },\r\n            children: [\r\n                element(\"span\", {\r\n                    attributes: {\r\n                        class: \"gridheader-content\"\r\n                    },\r\n                    children: [\r\n                        element(\"span\", {\r\n                            attributes: {\r\n                                class: \"gridheader-label\"\r\n                            },\r\n                            children: this.#columnDelegate(column)\r\n                        }),\r\n                        element(\"span\", {\r\n                            attributes: {\r\n                                class: \"gridheader-sort-indicator\"\r\n                            }\r\n                        }),\r\n                        element(\"e-wsash\", {\r\n                            attributes: {\r\n                                controls: column.name\r\n                            }\r\n                        })\r\n                    ]\r\n                })\r\n            ]\r\n        }), [\"sortorder\"], (cell, property, oldValue, newValue) => {\r\n            switch (property) {\r\n                case \"sortorder\": {\r\n                    const { dataset } = cell;\r\n                    if (typeof newValue !== \"undefined\") {\r\n                        dataset.sortorder = newValue.toString();\r\n                    }\r\n                    else {\r\n                        delete dataset.sortorder;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n        return gridColumnElement;\r\n    }\r\n    #renderGridBodyRow(row) {\r\n        const { model } = this;\r\n        const gridRowElement = element(\"e-gridrow\", {\r\n            attributes: {\r\n                tabindex: -1\r\n            },\r\n            dataset: {\r\n                index: row.id\r\n            },\r\n            children: reactiveChildElements(model.columns, column => this.#renderGridDataCell(row, column))\r\n        });\r\n        return gridRowElement;\r\n    }\r\n    #renderGridDataCell(row, column) {\r\n        const gridCellElement = element(\"e-gridcell\", {\r\n            attributes: {\r\n                type: \"gridcell\",\r\n                headers: column.name\r\n            },\r\n            children: element(\"span\", {\r\n                attributes: {\r\n                    class: \"gridcell-content\"\r\n                },\r\n                children: [\r\n                    element(\"span\", {\r\n                        attributes: {\r\n                            class: \"gridcell-label\"\r\n                        },\r\n                        children: this.#cellDelegate(row, column)\r\n                    })\r\n                ]\r\n            })\r\n        });\r\n        return gridCellElement;\r\n    }\r\n    #handleHeadContextMenuEvent(event) {\r\n        const { clientX, clientY, currentTarget, target } = event;\r\n        const { gridElement } = this;\r\n        const targetHead = currentTarget;\r\n        const targetHeader = target.closest(\"e-gridcell\");\r\n        const { model } = this;\r\n        if (targetHeader) {\r\n            const column = model.getColumnByName(targetHeader.id);\r\n            const { sortorder, filters } = column;\r\n            const contextMenu = element(\"e-menu\", {\r\n                attributes: {\r\n                    contextual: true\r\n                },\r\n                children: [\r\n                    element(\"e-menuitem\", {\r\n                        attributes: {\r\n                            label: \"Resize Auto\"\r\n                        },\r\n                        children: \"Resize auto\",\r\n                        listeners: {\r\n                            click: () => {\r\n                                const columnHeaderElement = this.getColumnHeaderElement(column);\r\n                                if (columnHeaderElement) {\r\n                                    const { style } = columnHeaderElement;\r\n                                    const labels = this.getColumnCellsElements(column).map(cell_i => cell_i.querySelector(\".gridcell-label\"));\r\n                                    const maxWidth = labels.reduce((maxWidth, label) => Math.max(maxWidth, label.getBoundingClientRect().width), 0);\r\n                                    style.setProperty(\"width\", `${maxWidth}px`);\r\n                                }\r\n                                gridElement.focus();\r\n                            }\r\n                        }\r\n                    }),\r\n                    element(\"e-menuitem\", {\r\n                        attributes: {\r\n                            label: \"Resize To Default\"\r\n                        },\r\n                        children: \"Resize to Default\",\r\n                        listeners: {\r\n                            click: () => {\r\n                                const columnHeaderElement = this.getColumnHeaderElement(column);\r\n                                if (columnHeaderElement) {\r\n                                    const { style } = columnHeaderElement;\r\n                                    style.removeProperty(\"width\");\r\n                                }\r\n                                gridElement.focus();\r\n                            }\r\n                        }\r\n                    }),\r\n                    element(\"e-menuitem\", {\r\n                        attributes: {\r\n                            type: \"submenu\",\r\n                            label: \"Sort\",\r\n                        },\r\n                        children: [\r\n                            \"Sort\",\r\n                            element(\"e-menu\", {\r\n                                attributes: {\r\n                                    slot: \"menu\"\r\n                                },\r\n                                children: [\r\n                                    element(\"e-menuitem\", {\r\n                                        attributes: {\r\n                                            type: \"radio\",\r\n                                            name: \"sort\",\r\n                                            value: \"1\",\r\n                                            label: \"Ascending\",\r\n                                            checked: sortorder === 1\r\n                                        },\r\n                                        children: \"Ascending\"\r\n                                    }),\r\n                                    element(\"e-menuitem\", {\r\n                                        attributes: {\r\n                                            type: \"radio\",\r\n                                            name: \"sort\",\r\n                                            value: \"-1\",\r\n                                            label: \"Descending\",\r\n                                            checked: sortorder === -1\r\n                                        },\r\n                                        children: \"Descending\"\r\n                                    })\r\n                                ],\r\n                                listeners: {\r\n                                    click: (event) => {\r\n                                        const { target } = event;\r\n                                        const targetItem = target.closest(\"e-menuitem\");\r\n                                        if (targetItem) {\r\n                                            model.sortByColumn(column, Number(targetItem.value));\r\n                                        }\r\n                                        gridElement.focus();\r\n                                    }\r\n                                }\r\n                            })\r\n                        ]\r\n                    }),\r\n                    element(\"e-menuitem\", {\r\n                        attributes: {\r\n                            type: \"submenu\",\r\n                            label: \"Filter\"\r\n                        },\r\n                        children: [\r\n                            \"Filter\",\r\n                            element(\"e-menu\", {\r\n                                attributes: {\r\n                                    slot: \"menu\"\r\n                                },\r\n                                children: filters.map(filter => {\r\n                                    const { name } = filter;\r\n                                    return element(\"e-menuitem\", {\r\n                                        attributes: {\r\n                                            type: \"checkbox\",\r\n                                            checked: this.#displayFilters.includes(filter),\r\n                                            label: name\r\n                                        },\r\n                                        children: name\r\n                                    });\r\n                                }).concat(element(\"e-menuitem\", {\r\n                                    attributes: {\r\n                                        type: \"button\",\r\n                                        label: \"Remove filters\"\r\n                                    },\r\n                                    children: \"Remove filters\"\r\n                                })),\r\n                                listeners: {\r\n                                    click: (event) => {\r\n                                        const { target } = event;\r\n                                        const targetItem = target.closest(\"e-menuitem\");\r\n                                        if (targetItem) {\r\n                                            const { checked, label } = targetItem;\r\n                                            const filter = filters.find(filter => filter.name === label);\r\n                                            if (filter) {\r\n                                                if (checked) {\r\n                                                    this.addDisplayFilter(filter);\r\n                                                }\r\n                                                else {\r\n                                                    this.removeDisplayFilter(filter);\r\n                                                }\r\n                                            }\r\n                                            else {\r\n                                                this.removeAllDisplayFilters();\r\n                                            }\r\n                                        }\r\n                                        gridElement.focus();\r\n                                    }\r\n                                }\r\n                            })\r\n                        ]\r\n                    })\r\n                ]\r\n            });\r\n            targetHead.append(contextMenu);\r\n            contextMenu.positionContextual(clientX, clientY);\r\n            contextMenu.focus({ preventScroll: true });\r\n            event.preventDefault();\r\n        }\r\n    }\r\n    #handleHeadClickEvent(event) {\r\n        const { target } = event;\r\n        const targetIsHeaderContent = target.matches(\"e-gridcell[type=columnheader] :scope:not(e-wsash)\");\r\n        if (targetIsHeaderContent) {\r\n            const targetHeader = target.closest(\"e-gridcell\");\r\n            const { model } = this;\r\n            const { columns } = model;\r\n            if (targetHeader) {\r\n                const targetColumn = Array.from(columns.values()).find(column_i => column_i.name == targetHeader.id);\r\n                if (targetColumn) {\r\n                    const { sortorder = -1 } = targetColumn;\r\n                    model.sortByColumn(targetColumn, -sortorder);\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\nGridViewBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-gridview\"\r\n    })\r\n], GridViewBase);\r\nvar GridView = GridViewBase;\r\n//# sourceMappingURL=GridView.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_ARROW_DROPDOWN_IMAGE, DEFAULT_THEME_ARROW_RIGHT_IMAGE, DEFAULT_THEME_DROPTARGET_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR, DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, element, AttributeProperty, QueryProperty } from \"../../Element\";\r\nexport { HTMLETreeItemElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLETreeItemElementBase = class HTMLETreeItemElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"div\", {\r\n            attributes: {\r\n                part: \"content\"\r\n            },\r\n            children: [\r\n                element(\"span\", {\r\n                    attributes: {\r\n                        part: \"arrow\"\r\n                    }\r\n                }),\r\n                element(\"slot\")\r\n            ]\r\n        }), element(\"slot\", {\r\n            attributes: {\r\n                name: \"group\"\r\n            }\r\n        }));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n                user-select: none;\r\n            }\r\n            \r\n            :host([droptarget]) {\r\n                background-color: var(--theme-droptarget-item-color, ${DEFAULT_THEME_DROPTARGET_ITEM_COLOR});\r\n            }\r\n\r\n            :host(:focus-visible) {\r\n                outline: none;\r\n            }\r\n            \r\n            :host([active]):host-context(e-tree:focus-within) [part=\"content\"] {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            [part=\"content\"]:hover {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([selected]) [part=\"content\"] {\r\n                background-color: var(--theme-selected-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n            }\r\n            \r\n            [part=\"content\"] {\r\n                display: flex;\r\n                line-height: 22px;\r\n                padding-left: 12px;\r\n            }\r\n            \r\n            :host(:not([type=\"parent\"])) ::slotted([slot=\"group\"]),\r\n            :host(:not([expanded])) ::slotted([slot=\"group\"]) {\r\n                display: none;\r\n            }\r\n            \r\n            :host(:not([type=\"parent\"])) [part=\"arrow\"]::before {\r\n                visibility: hidden;\r\n            }\r\n            \r\n            [part=\"arrow\"] {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                margin: 1px 4px 1px 1px;\r\n            }\r\n            \r\n            [part=\"arrow\"]::before {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                margin: 1px;\r\n                content: \"\";\r\n\r\n                mask-size: 18px 18px;\r\n                -webkit-mask-size: 18px 18px;\r\n                background-color: none;\r\n            }\r\n            \r\n            :host(:not([expanded])) [part=\"arrow\"]::before {\r\n                -webkit-mask-image: var(--theme-arrow-right-image, url(${DEFAULT_THEME_ARROW_RIGHT_IMAGE}));\r\n                mask-image: var(--theme-arrow-right-image, url(${DEFAULT_THEME_ARROW_RIGHT_IMAGE}));\r\n                background-color: black;\r\n            }\r\n            \r\n            :host([expanded]) [part=\"arrow\"]::before {\r\n                -webkit-mask-image: var(--theme-arrow-dropdown-image, url(${DEFAULT_THEME_ARROW_DROPDOWN_IMAGE}));\r\n                mask-image: var(--theme-arrow-dropdown-image, url(${DEFAULT_THEME_ARROW_DROPDOWN_IMAGE}));\r\n                background-color: black;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"expanded\": {\r\n                this.dispatchEvent(new Event(\"toggle\", { bubbles: true }));\r\n                break;\r\n            }\r\n            case \"selected\": {\r\n                this.dispatchEvent(new Event(\"select\", { bubbles: true }));\r\n                break;\r\n            }\r\n            case \"label\": {\r\n                const labelPart = this.shadowRoot.querySelector(\"[part=label]\");\r\n                if (labelPart) {\r\n                    labelPart.textContent = newValue;\r\n                }\r\n                break;\r\n            }\r\n            case \"level\": {\r\n                this.shadowRoot.adoptedStyleSheets[0].cssRules[6].styleMap.set(\"padding-left\", `${12 * Number(newValue)}px`);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    toggle(force) {\r\n        const { expanded } = this;\r\n        this.expanded = force ?? !expanded;\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLETreeItemElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Number })\r\n], HTMLETreeItemElementBase.prototype, \"posinset\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLETreeItemElementBase.prototype, \"label\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLETreeItemElementBase.prototype, \"expanded\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLETreeItemElementBase.prototype, \"droptarget\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLETreeItemElementBase.prototype, \"active\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLETreeItemElementBase.prototype, \"selected\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Number, observed: true })\r\n], HTMLETreeItemElementBase.prototype, \"level\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, defaultValue: \"leaf\" })\r\n], HTMLETreeItemElementBase.prototype, \"type\", void 0);\r\n__decorate([\r\n    QueryProperty({ selector: \":scope > e-treeitemgroup[slot=group]\" })\r\n], HTMLETreeItemElementBase.prototype, \"group\", void 0);\r\nHTMLETreeItemElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-treeitem\"\r\n    })\r\n], HTMLETreeItemElementBase);\r\nvar HTMLETreeItemElement = HTMLETreeItemElementBase;\r\n//# sourceMappingURL=TreeItem.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, element } from \"../../Element\";\r\nimport \"./TreeItem\";\r\nexport { HTMLETreeItemGroupElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLETreeItemGroupElementBase = class HTMLETreeItemGroupElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n};\r\nHTMLETreeItemGroupElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-treeitemgroup\"\r\n    })\r\n], HTMLETreeItemGroupElementBase);\r\nvar HTMLETreeItemGroupElement = HTMLETreeItemGroupElementBase;\r\n//# sourceMappingURL=TreeItemGroup.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLETreeItemElement } from \"./TreeItem\";\r\nimport { HTMLETreeItemGroupElement } from \"./TreeItemGroup\";\r\nimport \"./TreeItem\";\r\nimport \"./TreeItemGroup\";\r\nexport { HTMLETreeElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLETreeElementBase = class HTMLETreeElementBase extends HTMLElement {\r\n    items;\r\n    get activeItem() {\r\n        return this.querySelector(\"e-treeitem[active]\");\r\n    }\r\n    get dropTargetItem() {\r\n        return this.querySelector(\"e-treeitem[droptarget]\");\r\n    }\r\n    #onSelection;\r\n    #hasSelectionChanged;\r\n    #walker;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#nodeFilter.bind(this));\r\n        this.#onSelection = false;\r\n        this.#hasSelectionChanged = false;\r\n        this.items = this.getElementsByTagName(\"e-treeitem\");\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"contextmenu\", this.#handleContextMenuEvent.bind(this));\r\n        this.addEventListener(\"dblclick\", this.#handleDblClickEvent.bind(this));\r\n        this.addEventListener(\"mousedown\", this.#handleMouseDownEvent.bind(this));\r\n        this.addEventListener(\"dragend\", this.#handleDragEndEvent.bind(this));\r\n        this.addEventListener(\"dragenter\", this.#handleDragEnterEvent.bind(this));\r\n        this.addEventListener(\"dragleave\", this.#handleDragLeaveEvent.bind(this));\r\n        this.addEventListener(\"dragover\", this.#handleDragOverEvent.bind(this));\r\n        this.addEventListener(\"drop\", this.#handleDropEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n        this.addEventListener(\"select\", this.#handleSelectEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    selectedItems() {\r\n        const selectedItems = [];\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        let item = this.firstItem();\r\n        while (item !== null) {\r\n            if (item.selected) {\r\n                selectedItems.push(item);\r\n            }\r\n            item = this.#nextItem(item);\r\n        }\r\n        return selectedItems;\r\n    }\r\n    beginSelection() {\r\n        this.#onSelection = true;\r\n    }\r\n    endSelection() {\r\n        this.#onSelection = false;\r\n        if (this.#hasSelectionChanged) {\r\n            this.dispatchEvent(new Event(\"selectionchange\", { bubbles: true }));\r\n            this.#hasSelectionChanged = false;\r\n        }\r\n    }\r\n    #nodeFilter(node) {\r\n        if (node instanceof HTMLETreeItemElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLETreeItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    #getItemsRange(from, to) {\r\n        if (from == to) {\r\n            return [from];\r\n        }\r\n        const position = from.compareDocumentPosition(to);\r\n        if (position & Node.DOCUMENT_POSITION_FOLLOWING) {\r\n            const range = [from];\r\n            let nextVisibleItem = this.#nextItem(from);\r\n            while (nextVisibleItem && nextVisibleItem !== to) {\r\n                range.push(nextVisibleItem);\r\n                nextVisibleItem = this.#nextItem(nextVisibleItem);\r\n            }\r\n            range.push(to);\r\n            return range;\r\n        }\r\n        else if (position & Node.DOCUMENT_POSITION_PRECEDING) {\r\n            const range = [from];\r\n            let previousVisibleItem = this.#previousItem(from);\r\n            while (previousVisibleItem && previousVisibleItem !== to) {\r\n                range.push(previousVisibleItem);\r\n                previousVisibleItem = this.#previousItem(previousVisibleItem);\r\n            }\r\n            range.push(to);\r\n            return range;\r\n        }\r\n        return [];\r\n    }\r\n    #setSelection(...items) {\r\n        const selectedItems = this.selectedItems();\r\n        this.beginSelection();\r\n        selectedItems.forEach((selectedItem_i) => {\r\n            if (!items.includes(selectedItem_i)) {\r\n                selectedItem_i.selected = false;\r\n            }\r\n        });\r\n        items.forEach((item_i) => {\r\n            if (this.contains(item_i) && !item_i.selected) {\r\n                item_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #addToSelection(...items) {\r\n        this.beginSelection();\r\n        items.forEach((item_i) => {\r\n            if (!item_i.selected) {\r\n                item_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #removeFromSelection(...items) {\r\n        const selectedItems = this.selectedItems();\r\n        this.beginSelection();\r\n        items.forEach((item_i) => {\r\n            if (selectedItems.includes(item_i)) {\r\n                item_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #clearSelection() {\r\n        const selectedItems = this.selectedItems();\r\n        this.beginSelection();\r\n        selectedItems.forEach((item_i) => {\r\n            item_i.selected = false;\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #setActiveItem(item) {\r\n        const { activeItem } = this;\r\n        if (activeItem !== null && activeItem !== item) {\r\n            activeItem.active = false;\r\n            activeItem.tabIndex = -1;\r\n        }\r\n        if (item !== null) {\r\n            const walker = this.#walker;\r\n            walker.currentNode = item;\r\n            item.active = true;\r\n            item.tabIndex = 0;\r\n        }\r\n    }\r\n    #setDropTargetItem(item) {\r\n        const { dropTargetItem } = this;\r\n        if (dropTargetItem !== null && dropTargetItem !== item) {\r\n            dropTargetItem.droptarget = false;\r\n        }\r\n        if (item !== null) {\r\n            this.droptarget = true;\r\n            item.droptarget = true;\r\n        }\r\n        else {\r\n            this.droptarget = false;\r\n        }\r\n    }\r\n    firstItem() {\r\n        const walker = this.#walker;\r\n        const { root } = walker;\r\n        walker.currentNode = root;\r\n        return walker.firstChild();\r\n    }\r\n    #lastItem() {\r\n        const walker = this.#walker;\r\n        const { root } = walker;\r\n        walker.currentNode = root;\r\n        return walker.lastChild();\r\n    }\r\n    #previousItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const previousSibling = walker.previousSibling();\r\n        return previousSibling ?\r\n            this.#deepestItem(previousSibling) :\r\n            walker.parentNode();\r\n    }\r\n    #nextItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const { type, expanded } = item;\r\n        return (type === \"leaf\" ?\r\n            walker.nextNode() :\r\n            expanded ?\r\n                walker.nextNode() :\r\n                walker.nextSibling() ??\r\n                    (walker.parentNode(), walker.nextSibling()));\r\n    }\r\n    #deepestItem(item) {\r\n        if (item.expanded) {\r\n            const walker = this.#walker;\r\n            const lastItem = walker.lastChild();\r\n            if (lastItem) {\r\n                return this.#deepestItem(lastItem);\r\n            }\r\n        }\r\n        return item;\r\n    }\r\n    #handleClickEvent(event) {\r\n        const { target, shiftKey, ctrlKey } = event;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        if (targetItem) {\r\n            if (!shiftKey && !ctrlKey) {\r\n                this.#setSelection(targetItem);\r\n                const { type } = targetItem;\r\n                if (type == \"parent\") {\r\n                    targetItem.toggle();\r\n                }\r\n            }\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n    #handleContextMenuEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleDblClickEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleDragEndEvent() {\r\n        this.#setDropTargetItem(null);\r\n    }\r\n    #handleDragEnterEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        if (targetItem) {\r\n            const { type } = targetItem;\r\n            if (type == \"parent\") {\r\n                targetItem.toggle(true);\r\n            }\r\n            this.#setDropTargetItem(targetItem);\r\n        }\r\n        event.preventDefault();\r\n    }\r\n    #handleDragOverEvent(event) {\r\n        event.preventDefault();\r\n    }\r\n    #handleDragLeaveEvent(event) {\r\n        const { relatedTarget } = event;\r\n        if (relatedTarget instanceof Element) {\r\n            const parentItem = relatedTarget.closest(\"e-treeitem\");\r\n            if (!parentItem) {\r\n                let rootNode = relatedTarget;\r\n                while (!(rootNode instanceof HTMLETreeItemElement || rootNode instanceof Document)) {\r\n                    rootNode = rootNode.getRootNode();\r\n                    if (rootNode instanceof ShadowRoot) {\r\n                        rootNode = rootNode.host;\r\n                    }\r\n                }\r\n                if (rootNode instanceof Document) {\r\n                    this.#setDropTargetItem(null);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleDropEvent() {\r\n        this.#setDropTargetItem(null);\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { activeItem } = this;\r\n        switch (key) {\r\n            case \"a\": {\r\n                const { ctrlKey } = event;\r\n                if (ctrlKey) {\r\n                    if (activeItem) {\r\n                        const walker = this.#walker;\r\n                        walker.currentNode = activeItem;\r\n                        const firstItem = (walker.currentNode = walker.parentNode() ?? this, walker.firstChild());\r\n                        const lastItem = (walker.currentNode = walker.parentNode() ?? this, walker.lastChild());\r\n                        if (firstItem && lastItem) {\r\n                            const range = this.#getItemsRange(firstItem, this.#deepestItem(lastItem));\r\n                            if (range) {\r\n                                this.#setSelection(...range);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case \"ArrowLeft\": {\r\n                if (activeItem) {\r\n                    if (activeItem.expanded) {\r\n                        activeItem.toggle();\r\n                    }\r\n                    else {\r\n                        const walker = this.#walker;\r\n                        const parentItem = walker.parentNode();\r\n                        if (parentItem) {\r\n                            parentItem.focus({ preventScroll: true });\r\n                        }\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                if (activeItem) {\r\n                    if (!activeItem.expanded) {\r\n                        activeItem.toggle();\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowUp\": {\r\n                if (activeItem) {\r\n                    const previousItem = this.#previousItem(activeItem);\r\n                    if (previousItem) {\r\n                        previousItem.focus({ preventScroll: true });\r\n                        const { shiftKey } = event;\r\n                        if (shiftKey) {\r\n                            previousItem.selected ?\r\n                                this.#removeFromSelection(previousItem) :\r\n                                this.#addToSelection(previousItem);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    const firstItem = this.firstItem();\r\n                    if (firstItem) {\r\n                        firstItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowDown\": {\r\n                if (activeItem) {\r\n                    const nextItem = this.#nextItem(activeItem);\r\n                    if (nextItem) {\r\n                        nextItem.focus({ preventScroll: true });\r\n                        const { shiftKey } = event;\r\n                        if (shiftKey) {\r\n                            nextItem.selected ?\r\n                                this.#removeFromSelection(nextItem) :\r\n                                this.#addToSelection(nextItem);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    const lastItem = this.#lastItem();\r\n                    if (lastItem) {\r\n                        lastItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.firstItem();\r\n                if (firstItem) {\r\n                    firstItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                if (lastItem) {\r\n                    lastItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Enter\": {\r\n                if (activeItem) {\r\n                    this.#setSelection(activeItem);\r\n                    activeItem.click();\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Escape\": {\r\n                this.#clearSelection();\r\n                this.#setActiveItem(null);\r\n                this.focus();\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const { activeItem } = this;\r\n        if (!this.contains(relatedTarget)) {\r\n            (activeItem ?? this.firstItem())?.focus();\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        if (targetItem) {\r\n            this.#setActiveItem(targetItem);\r\n            this.tabIndex = -1;\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const lostFocusWithin = !this.contains(relatedTarget);\r\n        if (lostFocusWithin) {\r\n            this.tabIndex = 0;\r\n        }\r\n    }\r\n    #handleMouseDownEvent(event) {\r\n        const { target, ctrlKey, shiftKey, button } = event;\r\n        if (target instanceof HTMLETreeItemElement) {\r\n            const { selected } = target;\r\n            switch (button) {\r\n                case 0:\r\n                    {\r\n                        if (!shiftKey && !ctrlKey && !selected) {\r\n                            this.#setSelection(target);\r\n                        }\r\n                        else if (ctrlKey) {\r\n                            if (selected) {\r\n                                target.blur();\r\n                            }\r\n                            (!selected) ?\r\n                                this.#addToSelection(target) :\r\n                                this.#removeFromSelection(target);\r\n                            event.stopPropagation();\r\n                        }\r\n                        else if (shiftKey) {\r\n                            const { activeItem } = this;\r\n                            if (activeItem) {\r\n                                const range = this.#getItemsRange(activeItem, target);\r\n                                if (range) {\r\n                                    this.#setSelection(...range);\r\n                                }\r\n                            }\r\n                            event.stopPropagation();\r\n                        }\r\n                    }\r\n                    break;\r\n                case 2: {\r\n                    if (!selected) {\r\n                        this.#setSelection(target);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleSelectEvent() {\r\n        if (this.#onSelection) {\r\n            this.#hasSelectionChanged = true;\r\n        }\r\n        else {\r\n            this.dispatchEvent(new Event(\"selectionchange\", { bubbles: true }));\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLETreeElementBase.prototype, \"droptarget\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLETreeElementBase.prototype, \"name\", void 0);\r\nHTMLETreeElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-tree\"\r\n    })\r\n], HTMLETreeElementBase);\r\nvar HTMLETreeElement = HTMLETreeElementBase;\r\n//# sourceMappingURL=Tree.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { AttributeProperty, CustomElement, element, fragment, reactiveChildElements, reactiveElement } from \"../elements/Element\";\r\nimport { ModelList, ModelObject, ReactiveProperty } from \"../models/Model\";\r\nimport { resetStylesheet } from \"../stylesheets/Reset\";\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../stylesheets/Theme\";\r\nimport { View } from \"./View\";\r\nimport \"../elements/containers/trees\";\r\nexport { TreeItemModelList };\r\nexport { TreeModel };\r\nexport { TreeItemModel };\r\nexport { TreeView };\r\nclass TreeModel extends ModelObject {\r\n    items;\r\n    childItems;\r\n    sortFunction;\r\n    constructor(init) {\r\n        super();\r\n        const { items = [], sortFunction } = init ?? {};\r\n        items.forEach((item_i, i) => item_i.index = i);\r\n        const childItems = new ModelList(items);\r\n        childItems.setParent(this);\r\n        this.childItems = childItems;\r\n        this.items = new ModelList(this.subtreeItems());\r\n        this.sortFunction = sortFunction ??\r\n            function (item_a, item_b) {\r\n                return item_a.id.localeCompare(item_b.id);\r\n            };\r\n        this.addEventListener(\"modelchange\", this.#handleModelChangeEvent.bind(this));\r\n    }\r\n    #handleModelChangeEvent(event) {\r\n        const { target } = event;\r\n        const { items, sortFunction, subtreeItems } = this;\r\n        if (target instanceof ModelList) {\r\n            const records = target.getRecords();\r\n            records.forEach((record_i) => {\r\n                const { insertedItems, removedItems } = record_i;\r\n                const flattenedInsertedItems = Array.from(insertedItems.values()).flatMap(insertedItem_i => Array.of(insertedItem_i, ...subtreeItems.call(insertedItem_i)));\r\n                const flattenedRemovedItems = Array.from(removedItems.values()).flatMap(removedItem_i => Array.of(removedItem_i, ...subtreeItems.call(removedItem_i)));\r\n                items.beginChanges();\r\n                items.append(...flattenedInsertedItems);\r\n                flattenedRemovedItems.forEach((removedItem_i) => items.remove(removedItem_i));\r\n                if (sortFunction)\r\n                    items.sort(sortFunction);\r\n                items.endChanges();\r\n            });\r\n            Array.from(target.values()).forEach((item_i, i) => {\r\n                item_i.index = i;\r\n            });\r\n        }\r\n    }\r\n    subtreeItems() {\r\n        const { childItems } = this;\r\n        return Array.from(childItems.values()).flatMap(treeItem_i => Array.of(treeItem_i, ...treeItem_i.subtreeItems()));\r\n    }\r\n    getItemByUri(uri) {\r\n        const { childItems } = this;\r\n        const { length: itemsCount } = childItems;\r\n        const { length: uriLength } = uri;\r\n        for (let i = 0; i < itemsCount; i++) {\r\n            const item_i = childItems.get(i);\r\n            const { uri: itemUri } = item_i;\r\n            const { length: itemUriLength } = itemUri;\r\n            if (uri.startsWith(itemUri)) {\r\n                if (itemUriLength === uriLength) {\r\n                    return item_i;\r\n                }\r\n                return TreeModel.prototype.getItemByUri.call(item_i, uri);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}\r\nclass TreeItemModelList {\r\n    items;\r\n    constructor(items) {\r\n        this.items = items;\r\n    }\r\n    get count() {\r\n        return this.items.length;\r\n    }\r\n    remove() {\r\n        const { items } = this;\r\n        const removedItemsGroups = items.reduce((map, item_i) => {\r\n            const { parentNode } = item_i;\r\n            if (parentNode instanceof TreeItemModel || parentNode instanceof TreeModel) {\r\n                const { childItems } = parentNode;\r\n                const group = map.get(childItems);\r\n                if (group)\r\n                    group.push(item_i);\r\n                else\r\n                    map.set(childItems, [item_i]);\r\n            }\r\n            return map;\r\n        }, new Map());\r\n        Array.from(removedItemsGroups.entries()).forEach(([list_i, children_i]) => {\r\n            list_i.beginChanges();\r\n            children_i.forEach((child_i) => {\r\n                list_i.remove(child_i);\r\n            });\r\n            list_i.endChanges();\r\n        });\r\n    }\r\n}\r\nclass TreeItemModel extends ModelObject {\r\n    childItems;\r\n    id;\r\n    type;\r\n    index;\r\n    get level() {\r\n        const { parentNode } = this;\r\n        if (parentNode instanceof TreeItemModel) {\r\n            return parentNode.level + 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    get uri() {\r\n        const { parentNode, id } = this;\r\n        if (parentNode instanceof TreeItemModel) {\r\n            return `${parentNode.uri}${id}/`;\r\n        }\r\n        return `${id}/`;\r\n    }\r\n    get parentItem() {\r\n        const { parentNode } = this;\r\n        if (parentNode instanceof TreeItemModel) {\r\n            return parentNode;\r\n        }\r\n        return null;\r\n    }\r\n    constructor(init) {\r\n        super();\r\n        const { id, type, items = [] } = init;\r\n        items.forEach((item_i, i) => item_i.index = i);\r\n        const childItems = new ModelList(items);\r\n        childItems.setParent(this);\r\n        this.id = id;\r\n        this.childItems = childItems;\r\n        this.type = type;\r\n        this.index = -1;\r\n    }\r\n    subtreeItems() {\r\n        const { childItems } = this;\r\n        return Array.from(childItems.values()).flatMap(treeItem_i => Array.of(treeItem_i, ...treeItem_i.subtreeItems()));\r\n    }\r\n    remove() {\r\n        const { parentNode } = this;\r\n        if (parentNode instanceof TreeItemModel || parentNode instanceof TreeModel) {\r\n            const { childItems } = parentNode;\r\n            if (childItems) {\r\n                childItems.remove(this);\r\n            }\r\n        }\r\n    }\r\n}\r\n__decorate([\r\n    ReactiveProperty()\r\n], TreeItemModel.prototype, \"id\", void 0);\r\n__decorate([\r\n    ReactiveProperty()\r\n], TreeItemModel.prototype, \"type\", void 0);\r\n__decorate([\r\n    ReactiveProperty()\r\n], TreeItemModel.prototype, \"index\", void 0);\r\nvar style;\r\nlet TreeViewBase = class TreeViewBase extends View {\r\n    #dragImages;\r\n    static {\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n            }\r\n            \r\n            .offscreen {\r\n                position: absolute;\r\n                top: 0;\r\n                left: 0;\r\n                transform: translateY(-100%);\r\n                display: block;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            .dragimage {\r\n                white-space: nowrap;\r\n                margin: 1px;\r\n                display: inline-block;\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n                border-radius: 3px; \r\n                padding: 2px 4px;\r\n            }\r\n        `;\r\n    }\r\n    constructor(model) {\r\n        super();\r\n        this.#dragImages = new WeakMap();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet, resetStylesheet];\r\n        this.setModel(model ?? new TreeModel());\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"draggable\": {\r\n                const { treeElement } = this;\r\n                if (treeElement) {\r\n                    Array.from(treeElement.items).forEach(item_i => item_i.draggable = newValue !== null);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    get treeElement() {\r\n        return this.shadowRoot.querySelector(\"e-tree\");\r\n    }\r\n    treeItemElement(item) {\r\n        return this.shadowRoot.querySelector(`e-treeitem[uri=${item.uri}]`);\r\n    }\r\n    #getTreeItemElementUri(item) {\r\n        let uri = \"\";\r\n        let closestItem = item;\r\n        while (closestItem !== null) {\r\n            const { dataset, parentElement } = closestItem;\r\n            uri = `${dataset.id}/` + uri;\r\n            closestItem = parentElement?.closest(\"e-treeitem\") ?? null;\r\n        }\r\n        return uri;\r\n    }\r\n    treeItem(element) {\r\n        return this.model.getItemByUri(this.#getTreeItemElementUri(element));\r\n    }\r\n    renderShadow() {\r\n        const { model } = this;\r\n        const treeElement = element(\"e-tree\", {\r\n            attributes: {\r\n                tabindex: 0,\r\n            },\r\n            children: reactiveChildElements(model.childItems, item => this.#renderTreeItem(item)),\r\n            listeners: {\r\n                dragstart: this.#handleDragStartEvent.bind(this),\r\n                drop: this.#handleDropEvent.bind(this),\r\n                contextmenu: this.#handleContextMenuEvent.bind(this),\r\n                focus: this.#handleFocusEvent.bind(this),\r\n                focusin: this.#handleFocusInEvent.bind(this),\r\n                focusout: this.#handleFocusOutEvent.bind(this),\r\n            }\r\n        });\r\n        return fragment(treeElement, element(\"div\", {\r\n            attributes: {\r\n                class: \"offscreen\",\r\n                hidden: true\r\n            },\r\n            children: reactiveChildElements(model.items, item => this.#renderTreeItemDragImage(item))\r\n        }));\r\n    }\r\n    itemContentDelegate(item) {\r\n        return reactiveElement(item, element(\"span\"), [\"name\"], (label, property, oldValue, newValue) => {\r\n            label.textContent = newValue;\r\n        });\r\n    }\r\n    itemToolbarDelegate(item) {\r\n        return null;\r\n    }\r\n    itemMenuDelegate() {\r\n        return null;\r\n    }\r\n    selectedItems() {\r\n        const { treeElement } = this;\r\n        if (treeElement) {\r\n            const selectedElements = treeElement.selectedItems();\r\n            return selectedElements.map(item_i => this.treeItem(item_i));\r\n        }\r\n        return [];\r\n    }\r\n    activeItem() {\r\n        const { treeElement } = this;\r\n        if (treeElement) {\r\n            const { activeItem } = treeElement;\r\n            return activeItem ?\r\n                this.treeItem(activeItem) :\r\n                null;\r\n        }\r\n        return null;\r\n    }\r\n    #getDragImage(model) {\r\n        return this.#dragImages.get(model)?.deref() ?? null;\r\n    }\r\n    #renderTreeItem(item) {\r\n        const { draggable } = this;\r\n        const { index, level, id } = item;\r\n        const toolbar = this.itemToolbarDelegate(item);\r\n        const content = this.itemContentDelegate(item);\r\n        const treeItemElement = reactiveElement(item, element(\"e-treeitem\", {\r\n            attributes: {\r\n                draggable: String(draggable),\r\n                posinset: index,\r\n                level: level\r\n            },\r\n            dataset: {\r\n                id: id\r\n            },\r\n            children: [\r\n                ...(content ? [content] : []),\r\n                ...(toolbar ? [toolbar] : [])\r\n            ]\r\n        }), [\"index\", \"id\", \"type\"], (treeitem, propertyName, oldValue, newValue) => {\r\n            switch (propertyName) {\r\n                case \"index\": {\r\n                    treeitem.posinset = newValue;\r\n                    break;\r\n                }\r\n                case \"id\": {\r\n                    const { dataset } = treeitem;\r\n                    dataset.id = newValue;\r\n                    break;\r\n                }\r\n                case \"type\": {\r\n                    treeitem.type = newValue;\r\n                    switch (newValue) {\r\n                        case \"parent\": {\r\n                            treeitem.append(element(\"e-treeitemgroup\", {\r\n                                attributes: {\r\n                                    slot: \"group\"\r\n                                },\r\n                                children: reactiveChildElements(item.childItems, item => this.#renderTreeItem(item))\r\n                            }));\r\n                            break;\r\n                        }\r\n                        case \"leaf\": {\r\n                            const { group } = treeitem;\r\n                            if (group) {\r\n                                group.remove();\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n        return treeItemElement;\r\n    }\r\n    #renderTreeItemDragImage(item) {\r\n        const dragImageElement = reactiveElement(item, element(\"span\", {\r\n            attributes: {\r\n                class: \"dragimage\"\r\n            }\r\n        }), [\"name\"], (span, property, oldValue, newValue) => {\r\n            span.textContent = newValue;\r\n        });\r\n        this.#dragImages.set(item, new WeakRef(dragImageElement));\r\n        return dragImageElement;\r\n    }\r\n    #handleDragStartEvent(event) {\r\n        const { currentTarget, target } = event;\r\n        const targetTree = currentTarget;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        const { model } = this;\r\n        if (targetItem) {\r\n            const { dataTransfer } = event;\r\n            const selectedElements = targetTree.selectedItems();\r\n            const { length: selectedCount } = selectedElements;\r\n            if (selectedCount > 0) {\r\n                const selectedUris = selectedElements\r\n                    .map(element_i => this.#getTreeItemElementUri(element_i))\r\n                    .filter((uri_i, _, uris) => !uris.some(uri_j => uri_i.startsWith(`${uri_j}/`)));\r\n                const selectedUrisString = selectedUris.join(\"\\n\");\r\n                const lastUri = selectedUris[selectedUris.length - 1];\r\n                const lastItem = model.getItemByUri(lastUri);\r\n                if (lastItem && dataTransfer) {\r\n                    dataTransfer.dropEffect = \"move\";\r\n                    dataTransfer.setData(\"text/plain\", selectedUrisString);\r\n                    const dragImage = this.#getDragImage(lastItem);\r\n                    if (dragImage) {\r\n                        dataTransfer.setDragImage(dragImage, -16, 0);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleDropEvent(event) {\r\n        const { currentTarget, target } = event;\r\n        const targetTree = currentTarget;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        const { model } = this;\r\n        const { sortFunction } = model;\r\n        if (targetItem) {\r\n            const { dataTransfer } = event;\r\n            if (dataTransfer) {\r\n                const targetUri = this.#getTreeItemElementUri(targetItem);\r\n                const targetItemModel = model.getItemByUri(targetUri);\r\n                const transferedUris = dataTransfer.getData(\"text/plain\").split(\"\\n\");\r\n                const targetIsWithin = transferedUris.some(uri_i => targetUri.startsWith(`${uri_i}/`) || uri_i === targetUri);\r\n                if (!targetIsWithin) {\r\n                    const transferedItems = (transferedUris.map(uri_i => model.getItemByUri(uri_i)).filter(item_i => item_i !== null));\r\n                    const { type: targetType, parentItem: targetParentItem } = targetItemModel;\r\n                    const { childItems: targetList } = targetType === \"parent\" ? targetItemModel :\r\n                        targetParentItem ? targetParentItem : model;\r\n                    const targetItems = Array.from(targetList.values());\r\n                    targetItems.forEach((item_i) => {\r\n                        const sameLabelIndex = transferedItems.findIndex(item_j => item_j.id === item_i.id);\r\n                        if (sameLabelIndex > -1) {\r\n                            const doReplace = confirm(`Replace ${item_i.id}?`);\r\n                            if (doReplace) {\r\n                                targetList.remove(item_i);\r\n                            }\r\n                            else {\r\n                                transferedItems.copyWithin(sameLabelIndex, sameLabelIndex + 1);\r\n                                transferedItems.length--;\r\n                            }\r\n                        }\r\n                    });\r\n                    const transferedItemsModelList = new TreeItemModelList(transferedItems);\r\n                    transferedItemsModelList.remove();\r\n                    if (sortFunction) {\r\n                        targetList.beginChanges();\r\n                        targetList.append(...transferedItems);\r\n                        targetList.sort(sortFunction);\r\n                        targetList.endChanges();\r\n                    }\r\n                    else {\r\n                        targetList.insert(targetItem.posinset, ...transferedItems);\r\n                    }\r\n                    const newElements = targetTree.querySelectorAll(`e-treeitem:is(${transferedItems.map(item_i => `[data-uri=\"${item_i.uri}\"]`).join(\",\")})`);\r\n                    targetTree.beginSelection();\r\n                    newElements.forEach(element_i => element_i.selected = true);\r\n                    targetTree.endSelection();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleContextMenuEvent(event) {\r\n        const { clientX, clientY, currentTarget, target } = event;\r\n        const targetTree = currentTarget;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        if (targetItem) {\r\n            const contextMenu = this.itemMenuDelegate();\r\n            if (contextMenu !== null) {\r\n                contextMenu.contextual = true;\r\n                contextMenu.addEventListener(\"close\", () => {\r\n                    targetItem.focus({ preventScroll: true });\r\n                });\r\n                targetTree.append(contextMenu);\r\n                contextMenu.positionContextual(clientX, clientY);\r\n                contextMenu.focus({ preventScroll: true });\r\n            }\r\n        }\r\n        event.preventDefault();\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { currentTarget, relatedTarget } = event;\r\n        const targetTree = currentTarget;\r\n        if (relatedTarget !== null && !this.contains(relatedTarget)) {\r\n            const relatedPosition = relatedTarget.compareDocumentPosition(this);\r\n            if (!(relatedPosition & Node.DOCUMENT_POSITION_DISCONNECTED) && (relatedPosition & Node.DOCUMENT_POSITION_PRECEDING)) {\r\n                const { activeItem } = targetTree;\r\n                if (activeItem) {\r\n                    const itemToolbar = activeItem.querySelector(\"e-toolbar\");\r\n                    if (itemToolbar) {\r\n                        event.preventDefault();\r\n                        itemToolbar.focus();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        if (targetItem) {\r\n            const itemToolbar = targetItem.querySelector(\"e-toolbar\");\r\n            if (itemToolbar) {\r\n                itemToolbar.tabIndex = itemToolbar.contains(target) ? -1 : 0;\r\n            }\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        if (targetItem) {\r\n            const itemToolbar = targetItem.querySelector(\"e-toolbar\");\r\n            if (itemToolbar) {\r\n                itemToolbar.tabIndex = itemToolbar.contains(target) ? 0 : -1;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], TreeViewBase.prototype, \"draggable\", void 0);\r\nTreeViewBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-treeview\"\r\n    })\r\n], TreeViewBase);\r\nvar TreeView = TreeViewBase;\r\n//# sourceMappingURL=TreeView.js.map","import { HTMLEMenuElement, HTMLEMenuItemElement } from \"editor/lib/elements/containers/menus\";\r\nimport { HTMLEToolBarElement, HTMLEToolBarItemElement } from \"editor/lib/elements/containers/toolbars\";\r\nimport { HTMLETreeElement } from \"editor/lib/elements/containers/trees\";\r\nimport { HTMLEOptionElement, HTMLESelectElement } from \"editor/lib/elements/controls/select\";\r\nimport { CustomElement, element, fragment, reactiveElement } from \"editor/lib/elements/Element\";\r\nimport { ReactiveProperty, ModelEvent } from \"editor/lib/models/Model\";\r\nimport { TreeItemModelList, TreeItemModel, TreeView } from \"editor/lib/views/TreeView\";\r\n\r\nexport { MyTreeItemModel };\r\nexport { MyTreeItemModelList };\r\nexport { MyTreeView };\r\n\r\nclass MyTreeItemModel extends TreeItemModel {\r\n    \r\n    @ReactiveProperty()\r\n    childCount: number;\r\n\r\n    @ReactiveProperty()\r\n    visibility: boolean;\r\n\r\n    constructor(init: {id: string, type: \"leaf\" | \"parent\", items?: TreeItemModel[]}) {\r\n        super(init);\r\n        this.childCount = this.childItems.length;\r\n        this.visibility = true;\r\n        this.addEventListener(\"modelchange\", this.#handleModelChangeEvent.bind(this));\r\n    }\r\n\r\n    show(): void {\r\n        this.visibility = true;\r\n    }\r\n\r\n    hide(): void {\r\n        this.visibility = false;\r\n    }\r\n\r\n    display(): void {\r\n        console.log(this.id);\r\n    }\r\n\r\n    #handleModelChangeEvent(event: ModelEvent): void {\r\n        const {target} = event;\r\n        const {childItems} = this;\r\n        if (target == childItems) {\r\n            this.childCount = childItems.length;\r\n        }\r\n    }\r\n}\r\n\r\nclass MyTreeItemModelList extends TreeItemModelList {\r\n    declare readonly items: MyTreeItemModel[];\r\n\r\n    constructor(items: MyTreeItemModel[]) {\r\n        super(items);\r\n    }\r\n\r\n    get count(): number {\r\n        return this.items.length;\r\n    }\r\n\r\n    show(): void {\r\n        this.items.forEach(item_i => item_i.show());\r\n    }\r\n\r\n    hide(): void {\r\n        this.items.forEach(item_i => item_i.hide());\r\n    }\r\n    \r\n    display(): void {\r\n        const result = this.items.map(item_i => item_i.id).join(\" \");\r\n        console.log(result);\r\n    }\r\n}\r\n\r\n@CustomElement({\r\n    name: \"e-mytreeview\"\r\n})\r\nclass MyTreeView extends TreeView {\r\n\r\n    override render(): void {\r\n        super.render();\r\n        const {shadowRoot, treeElement} = this;\r\n        shadowRoot.prepend(\r\n            element(\"link\", {\r\n                attributes: {\r\n                    rel: \"stylesheet\",\r\n                    href: \"../css/mytreeview.css\"\r\n                }\r\n            })\r\n        );\r\n        treeElement!.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n    }\r\n\r\n    override itemContentDelegate(item: MyTreeItemModel) {\r\n        return fragment(\r\n            reactiveElement(\r\n                item,\r\n                element(\"span\", {\r\n                    attributes: {\r\n                        class: \"label\"\r\n                    }\r\n                }),\r\n                [\"id\"],\r\n                (label, property, oldValue, newValue) => {\r\n                    label.textContent = newValue;\r\n                }\r\n            ),\r\n            reactiveElement(\r\n                item,\r\n                element(\"span\", {\r\n                    attributes: {\r\n                        class: \"badge\"\r\n                    }\r\n                }),\r\n                [\"childCount\", \"type\"],\r\n                (badge, property, oldValue, newValue) => {\r\n                    switch (property) {\r\n                        case \"type\": {\r\n                            if (newValue === \"leaf\") {\r\n                                badge.textContent = null;\r\n                                badge.hidden = true;\r\n                            }\r\n                            else {\r\n                                badge.textContent = `(${item.childCount})`;\r\n                                badge.hidden = false;\r\n                            }\r\n                            break;\r\n                        }\r\n                        case \"childCount\": {\r\n                            badge.textContent = `(${newValue})`;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            )\r\n        );\r\n    }\r\n\r\n    override itemToolbarDelegate(this: MyTreeView, item: MyTreeItemModel): HTMLEToolBarElement {\r\n        return reactiveElement(\r\n            item,\r\n            element(\"e-toolbar\", {\r\n                children: [\r\n                    element(\"e-toolbaritem\", {\r\n                        attributes: {\r\n                            name: \"type\",\r\n                            type: \"select\"\r\n                        },\r\n                        children: [\r\n                            element(\"e-select\", {\r\n                                attributes: {\r\n                                    slot: \"select\"\r\n                                },\r\n                                children: [\"parent\", \"leaf\"].map(\r\n                                    type => element(\"e-option\", {\r\n                                        attributes: {\r\n                                            label: type,\r\n                                            value: type\r\n                                        }\r\n                                    })\r\n                                ),\r\n                                listeners: {\r\n                                    click: (event) => {\r\n                                        const {currentTarget} = event;\r\n                                        const select = <HTMLESelectElement>currentTarget;\r\n                                        const {selectedOption} = select;\r\n                                        if (selectedOption) {\r\n                                            const {value} = selectedOption;\r\n                                            item.type = <\"parent\" | \"leaf\">value;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            })\r\n                        ]\r\n                    }),\r\n                    element(\"e-toolbaritem\", {\r\n                        attributes: {\r\n                            name: \"edit\",\r\n                            type: \"button\",\r\n                            label: \"Edit\",\r\n                            iconed: true\r\n                        },\r\n                        listeners: {\r\n                            click: () => {\r\n                                this.showEditItemDialog(item);\r\n                            }\r\n                        }\r\n                    }),\r\n                    element(\"e-toolbaritem\", {\r\n                        attributes: {\r\n                            name: \"visibility\",\r\n                            type: \"checkbox\",\r\n                            label: \"Visibility\",\r\n                            iconed: true\r\n                        },\r\n                        listeners: {\r\n                            click: (event) => {\r\n                                item.visibility ?\r\n                                    item.hide() :\r\n                                    item.show();\r\n                                event.stopPropagation();\r\n                            }\r\n                        }\r\n                    })\r\n                ]\r\n            }),\r\n            [\"visibility\", \"type\"],\r\n            (toolbar, property, oldValue, newValue) => {\r\n                switch (property) {\r\n                    case \"visibility\": {\r\n                        const visibilityItem = toolbar\r\n                            .querySelector<HTMLEToolBarItemElement>(\"e-toolbaritem[name=visibility]\");\r\n                        if (visibilityItem) {\r\n                            const label = newValue ? \"Hide\" : \"Show\";\r\n                            visibilityItem.label = label;\r\n                            visibilityItem.title = label;\r\n                            visibilityItem.pressed = newValue;\r\n                        }\r\n                        break;\r\n                    }\r\n                    case \"type\": {\r\n                        const typeSelect = toolbar\r\n                            .querySelector<HTMLESelectElement>(\"e-toolbaritem[name=type] e-select\");\r\n                        if (typeSelect) {\r\n                            typeSelect\r\n                                .querySelector<HTMLEOptionElement>(`e-option[value=\"${newValue}\"]`)!\r\n                                .selected = true;\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    override itemMenuDelegate(this: MyTreeView): HTMLEMenuElement {\r\n        console.log(\"here\");\r\n        const {treeElement} = this;\r\n        const {activeItem: activeItemElement} = treeElement!;\r\n        const selectedItems = <MyTreeItemModel[]>this.selectedItems();\r\n        const activeItem = <MyTreeItemModel>this.activeItem();\r\n        return element(\"e-menu\", {\r\n            attributes: {\r\n                contextual: true\r\n            },\r\n            children: [\r\n                element(\"e-menuitemgroup\", {\r\n                    children: [\r\n                        element(\"e-menuitem\", {\r\n                            attributes: {\r\n                                type: \"button\",\r\n                                label: \"Edit\"\r\n                            },\r\n                            children: \"Edit\",\r\n                            listeners: {\r\n                                click: <EventListener>(\r\n                                    function(this: MyTreeView) {\r\n                                        selectedItems.forEach((selectItem) => {\r\n                                            this.showEditItemDialog(selectItem);\r\n                                        });\r\n                                    }\r\n                                ).bind(this)\r\n                            }\r\n                        }),\r\n                        element(\"e-menuitem\", {\r\n                            attributes: {\r\n                                type: \"checkbox\",\r\n                                label: activeItem.visibility ? \"Hide\" : \"Show\"\r\n                            },\r\n                            children: activeItem.visibility ? \"Hide\" : \"Show\",\r\n                            listeners: {\r\n                                click: () => {\r\n                                    const selectedItemsList = selectedItems.includes(activeItem) ?\r\n                                        new MyTreeItemModelList(selectedItems) : new MyTreeItemModelList([activeItem]);\r\n                                    activeItem.visibility ?\r\n                                        selectedItemsList.hide() :\r\n                                        selectedItemsList.show();\r\n                                    activeItemElement!.focus();\r\n                                }\r\n                            }\r\n                        })\r\n                    ]\r\n                }),\r\n                element(\"e-separator\"),\r\n                element(\"e-menuitemgroup\", {\r\n                    children: [\r\n                        element(\"e-menuitem\", {\r\n                            attributes: {\r\n                                label: \"Delete\"\r\n                            },\r\n                            children: \"Delete\",\r\n                            listeners: {\r\n                                click: () => {\r\n                                    const selectedItemsList = selectedItems.includes(activeItem) ?\r\n                                        new MyTreeItemModelList(selectedItems) : new MyTreeItemModelList([activeItem]);\r\n                                    const {count} = selectedItemsList;\r\n                                    const doRemove = confirm(`Remove ${count} items?`);\r\n                                    if (doRemove) {\r\n                                        selectedItemsList.remove();\r\n                                    }\r\n                                    treeElement!.focus();\r\n                                }\r\n                            }\r\n                        })\r\n                    ]\r\n                })\r\n            ]\r\n        });\r\n    }\r\n\r\n    #handleKeyDownEvent(event: KeyboardEvent) {\r\n        const {currentTarget, key} = event;\r\n        const targetTree = <HTMLETreeElement>currentTarget;\r\n        const {activeItem} = targetTree;\r\n        if (activeItem) {\r\n            const activeItemModel = <MyTreeItemModel>this.treeItem(activeItem!)!;\r\n            switch (key) {\r\n                case \"Delete\": {\r\n                    const selectedItems = this.selectedItems();\r\n                    const selectedItemsList = selectedItems.includes(activeItemModel) ?\r\n                        new TreeItemModelList(selectedItems) : new TreeItemModelList([activeItemModel]);\r\n                    const {count} = selectedItemsList;\r\n                    const doRemove = confirm(`Remove ${count} items?`);\r\n                    if (doRemove) {\r\n                        selectedItemsList.remove();\r\n                    }\r\n                    targetTree.focus();\r\n                    event.preventDefault();\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    showEditItemDialog(item: MyTreeItemModel): void {\r\n        const {shadowRoot} = this;\r\n        const {visibility, id, type} = item;\r\n        const dialog = element(\"dialog\", {\r\n            children: [\r\n                element(\"form\", {\r\n                    attributes: {\r\n                        method: \"dialog\"\r\n                    },\r\n                    children: [\r\n                        element(\"e-menubar\", {\r\n                            attributes: {\r\n                                tabindex: 0\r\n                            },\r\n                            children: [\r\n                                element(\"e-menuitem\", {\r\n                                    attributes: {\r\n                                        type: \"menu\",\r\n                                        label: \"Menu 1\"\r\n                                    },\r\n                                    children: [\r\n                                        \"Menu 1\",\r\n                                        element(\"e-menu\", {\r\n                                            attributes: {\r\n                                                slot: \"menu\"\r\n                                            },\r\n                                            children: [\r\n                                                element(\"e-menuitem\", {\r\n                                                    attributes: {\r\n                                                        type: \"checkbox\"\r\n                                                    },\r\n                                                    children: \"Menuitem 1\"\r\n                                                }),\r\n                                                element(\"e-menuitem\", {\r\n                                                    attributes: {\r\n                                                        type: \"checkbox\"\r\n                                                    },\r\n                                                    children: \"Menuitem 2\"\r\n                                                }),\r\n                                                element(\"e-menuitem\", {\r\n                                                    attributes: {\r\n                                                        type: \"submenu\"\r\n                                                    },\r\n                                                    children: [\r\n                                                        \"Submenu 1\",\r\n                                                        element(\"e-menu\", {\r\n                                                            attributes: {\r\n                                                                slot: \"menu\"\r\n                                                            },\r\n                                                            children: [\r\n                                                                element(\"e-menuitem\", {\r\n                                                                    attributes: {\r\n                                                                        label: \"SubmenuItem 1\",\r\n                                                                        name: \"radio\",\r\n                                                                        value: String(0),\r\n                                                                        type: \"radio\"\r\n                                                                    },\r\n                                                                    children: \"SubmenuItem 1\"\r\n                                                                }),\r\n                                                                element(\"e-menuitem\", {\r\n                                                                    attributes: {\r\n                                                                        label: \"SubmenuItem 2\",\r\n                                                                        name: \"radio\",\r\n                                                                        value: String(1),\r\n                                                                        type: \"radio\"\r\n                                                                    },\r\n                                                                    children: \"SubmenuItem 2\"\r\n                                                                }),\r\n                                                                element(\"e-menuitem\", {\r\n                                                                    attributes: {\r\n                                                                        label: \"SubmenuItem 3\",\r\n                                                                        name: \"radio\",\r\n                                                                        value: String(3),\r\n                                                                        type: \"radio\"\r\n                                                                    },\r\n                                                                    children: \"SubmenuItem 3\"\r\n                                                                })\r\n                                                            ]\r\n                                                        })\r\n                                                    ]\r\n                                                })\r\n                                            ]\r\n                                        })\r\n                                    ]\r\n                                })\r\n                            ]\r\n                        }),\r\n                        element(\"e-tablist\", {\r\n                            attributes: {\r\n                                tabindex: 0\r\n                            },\r\n                            children: [\r\n                                element(\"e-tab\", {\r\n                                    attributes: {\r\n                                        controls: \"properties\"\r\n                                    },\r\n                                    children: \"Properties\"\r\n                                })\r\n                            ]\r\n                        }),\r\n                        element(\"e-tabpanel\", {\r\n                            attributes: {\r\n                                id: \"properties\"\r\n                            },\r\n                            children: [\r\n                                element(\"fieldset\", {\r\n                                    children: [\r\n                                        element(\"legend\", {\r\n                                            children: \"Item information\"\r\n                                        }),\r\n                                        element(\"div\", {\r\n                                            attributes: {\r\n                                                class: \"form-content\"\r\n                                            },\r\n                                            children: [\r\n                                                element(\"label\", {\r\n                                                    attributes: {\r\n                                                        for: \"visibility\"\r\n                                                    },\r\n                                                    children: \"Visibility\"\r\n                                                }),\r\n                                                element(\"input\", {\r\n                                                    attributes: {\r\n                                                        id: \"visibility\",\r\n                                                        type: \"checkbox\",\r\n                                                        name: \"visibility\",\r\n                                                        checked: visibility,\r\n                                                        tabindex: 0,\r\n                                                        autofocus: true\r\n                                                    }\r\n                                                }),\r\n                                                element(\"label\", {\r\n                                                    attributes: {\r\n                                                        for: \"id\"\r\n                                                    },\r\n                                                    children: \"ID\"\r\n                                                }),\r\n                                                element(\"input\", {\r\n                                                    attributes: {\r\n                                                        id: \"id\",\r\n                                                        type: \"text\",\r\n                                                        name: \"id\",\r\n                                                        value: id,\r\n                                                        tabindex: 0\r\n                                                    }\r\n                                                }),\r\n                                                element(\"label\", {\r\n                                                    attributes: {\r\n                                                        for: \"type\"\r\n                                                    },\r\n                                                    children: \"Type\"\r\n                                                }),\r\n                                                element(\"select\", {\r\n                                                    attributes: {\r\n                                                        id: \"type\",\r\n                                                        name: \"type\",\r\n                                                        tabindex: 0\r\n                                                    },\r\n                                                    children: [\"parent\", \"leaf\"].map(\r\n                                                        type_i => element(\"option\", {\r\n                                                            attributes: {\r\n                                                                label: type_i,\r\n                                                                value: type_i,\r\n                                                                selected: type === type_i\r\n                                                            }\r\n                                                        })\r\n                                                    )\r\n                                                })\r\n                                            ]\r\n                                        })\r\n                                    ]\r\n                                })\r\n                            ]\r\n                        }),\r\n                        element(\"footer\", {\r\n                            attributes: {\r\n                                class: \"dialog-footer\"\r\n                            },\r\n                            children: [\r\n                                element(\"button\", {\r\n                                    attributes: {\r\n                                        type: \"submit\",\r\n                                        value: \"confirm\"\r\n                                    },\r\n                                    children: \"Confirm\"\r\n                                }),\r\n                                element(\"button\", {\r\n                                    attributes: {\r\n                                        value: \"cancel\"\r\n                                    },\r\n                                    children: \"Cancel\"\r\n                                })\r\n                            ]\r\n                        })\r\n                    ]\r\n                })\r\n            ],\r\n            listeners: {\r\n                close: (event) => {\r\n                    const {currentTarget} = event;\r\n                    const targetDialog = <HTMLDialogElement>currentTarget;\r\n                    if (targetDialog.returnValue === \"confirm\") {\r\n                        const form = targetDialog.querySelector(\"form\")!;\r\n                        const formData = new FormData(form);\r\n                        item.visibility = Boolean(formData.get(\"visibility\"));\r\n                        item.type = <\"leaf\" | \"parent\">String(formData.get(\"type\"));\r\n                        item.id = String(formData.get(\"id\"));\r\n                    }\r\n                    targetDialog.remove();\r\n                }\r\n            }\r\n        });\r\n        shadowRoot.append(dialog);\r\n        dialog.showModal();\r\n    }\r\n};","import { CustomElement, element } from \"editor/lib/elements/Element\";\r\nimport { ReactiveProperty } from \"editor/lib/models/Model\";\r\nimport { GridRowFilter, GridRowModel, GridView } from \"editor/lib/views/GridView\";\r\n\r\nexport { MyGridRowModel };\r\nexport { MyGridView };\r\n\r\nclass MyGridRowModel extends GridRowModel {\r\n    @ReactiveProperty()\r\n    name: string;\r\n\r\n    @ReactiveProperty()\r\n    age: number;\r\n\r\n    @ReactiveProperty()\r\n    color: string;\r\n    \r\n    constructor(init: {\r\n        id: number;\r\n        name: string;\r\n        age: number;\r\n        color: string;\r\n    }) {\r\n        super(init);\r\n        const {name, age, color} = init;\r\n        this.name = name;\r\n        this.age = age;\r\n        this.color = color;\r\n    }\r\n}\r\n\r\nvar style: string;\r\n\r\n@CustomElement({\r\n    name: \"e-mygridview\"\r\n})\r\nclass MyGridView extends GridView {\r\n\r\n    #searchFilter: GridRowFilter | null;\r\n\r\n    static {\r\n        style = /*css*/`\r\n            e-gridcell[headers=\"age\"] {\r\n                text-align: right;\r\n            }\r\n        `;\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n        this.#searchFilter = null;\r\n        const {shadowRoot} = this\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [\r\n            ...shadowRoot.adoptedStyleSheets, adoptedStylesheet\r\n        ];\r\n    }\r\n\r\n    override renderShadow(): Node {\r\n        const shadowNode = super.renderShadow();\r\n        shadowNode.insertBefore(\r\n            element(\"div\", {\r\n                children: element(\"input\", {\r\n                    attributes: {\r\n                        type: \"search\"\r\n                    },\r\n                    listeners: {\r\n                        input: <EventListener>this.#handleSearchInputEvent.bind(this)\r\n                    }\r\n                })\r\n            }),\r\n            shadowNode.firstChild\r\n        );\r\n        return shadowNode;\r\n    }\r\n\r\n    filter(row: GridRowModel): boolean {\r\n        const searchFilter = this.#searchFilter;\r\n        return super.filter(row) &&\r\n        (searchFilter ? searchFilter.filter(row) : true);\r\n    }\r\n\r\n    setSearchFilter(filter: GridRowFilter | null): void {\r\n        const {model, gridElement} = this;\r\n        const {rows} = model;\r\n        this.#searchFilter = filter;\r\n        Array.from(rows.values()).forEach((row_i) => {\r\n            const rowElement = this.getRowElement(row_i);\r\n            if (rowElement) {\r\n                rowElement.hidden = !this.filter(row_i);\r\n            }\r\n        });\r\n        gridElement.clearSelection();\r\n    }\r\n\r\n    #handleSearchInputEvent(event: InputEvent) {\r\n        const {target} = event;\r\n        if (target instanceof HTMLInputElement) {\r\n            const {value} = target;\r\n            if (value !== \"\") {\r\n                this.setSearchFilter({\r\n                    filter: (row) => (<MyGridRowModel>row).name.toLowerCase().includes(value.toLowerCase())\r\n                });\r\n            }\r\n            else {\r\n                this.setSearchFilter(null);\r\n            }\r\n        }\r\n    }\r\n}","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_ACTIVATED_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element, QueryProperty } from \"../../Element\";\r\nexport { HTMLEToolBarItemElement };\r\nexport { EToolBarItem };\r\nvar shadowTemplate;\r\nvar style;\r\nvar iconPartTemplate;\r\nlet HTMLEToolBarItemElementBase = class HTMLEToolBarItemElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"), element(\"slot\", {\r\n            attributes: {\r\n                name: \"select\"\r\n            }\r\n        }), element(\"slot\", {\r\n            attributes: {\r\n                name: \"menubutton\"\r\n            }\r\n        }));\r\n        iconPartTemplate = element(\"span\", {\r\n            attributes: {\r\n                part: \"icon\"\r\n            }\r\n        });\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                user-select: none;\r\n                white-space: nowrap;\r\n                cursor: pointer;\r\n                line-height: 22px;\r\n            }\r\n            \r\n            :host([disabled]) {\r\n                opacity: 0.38;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host(:hover) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([pressed]),\r\n            :host(:active) {\r\n                background-color: var(--theme-activated-item-color, ${DEFAULT_THEME_ACTIVATED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host(:not([iconed])) [part=\"icon\"] {\r\n                display: none;\r\n            }\r\n\r\n            [part=\"icon\"] {\r\n                flex: none;\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                padding: 2px;\r\n                overflow: hidden;\r\n            }\r\n            \r\n            [part=\"icon\"]::before {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                content: \"\";\r\n                mask-size: 18px 18px;\r\n                -webkit-mask-size: 18px 18px;\r\n                background-color: none;\r\n                -webkit-mask-image: none;\r\n                mask-image: none;\r\n                filter: none;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            :host([type=\"select\"]:focus) ::slotted(e-select) {\r\n                border-color: transparent;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"label\": {\r\n                //...\r\n                break;\r\n            }\r\n            case \"iconed\": {\r\n                const { shadowRoot } = this;\r\n                if (newValue !== null) {\r\n                    shadowRoot.prepend(iconPartTemplate.cloneNode(true));\r\n                }\r\n                else {\r\n                    const iconPart = this.#icon();\r\n                    if (iconPart) {\r\n                        iconPart.remove();\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #icon() {\r\n        return this.shadowRoot.querySelector(\"[part=icon]\");\r\n    }\r\n};\r\n__decorate([\r\n    QueryProperty({ selector: \":scope > e-menubutton[slot=menubutton]\" })\r\n], HTMLEToolBarItemElementBase.prototype, \"menubutton\", void 0);\r\n__decorate([\r\n    QueryProperty({ selector: \":scope > e-select[slot=select]\" })\r\n], HTMLEToolBarItemElementBase.prototype, \"select\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEToolBarItemElementBase.prototype, \"active\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEToolBarItemElementBase.prototype, \"pressed\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEToolBarItemElementBase.prototype, \"expanded\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLEToolBarItemElementBase.prototype, \"iconed\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEToolBarItemElementBase.prototype, \"value\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEToolBarItemElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEToolBarItemElementBase.prototype, \"label\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEToolBarItemElementBase.prototype, \"type\", void 0);\r\nHTMLEToolBarItemElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-toolbaritem\"\r\n    })\r\n], HTMLEToolBarItemElementBase);\r\nvar HTMLEToolBarItemElement = HTMLEToolBarItemElementBase;\r\nvar EToolBarItem = Object.assign(function (init) {\r\n    const { label, name, type, value, trigger, menubutton, select } = init;\r\n    if (menubutton) {\r\n        menubutton.slot = \"menubutton\";\r\n    }\r\n    if (select) {\r\n        select.slot = \"select\";\r\n    }\r\n    return element(\"e-toolbaritem\", {\r\n        attributes: {\r\n            tabindex: -1,\r\n            title: label,\r\n            name: name,\r\n            value: value,\r\n            type: type\r\n        },\r\n        children: menubutton ? [menubutton] : select ? [select] : undefined,\r\n        listeners: {\r\n            click: trigger\r\n        }\r\n    });\r\n}, {\r\n    prototype: HTMLEToolBarItemElement.prototype,\r\n    button(init) {\r\n        return new EToolBarItem({\r\n            ...init, type: \"button\"\r\n        });\r\n    },\r\n    checkbox(init) {\r\n        return new EToolBarItem({\r\n            ...init, type: \"checkbox\"\r\n        });\r\n    },\r\n    radio(init) {\r\n        return new EToolBarItem({\r\n            ...init, type: \"radio\"\r\n        });\r\n    },\r\n    menubutton(init) {\r\n        return new EToolBarItem({\r\n            ...init, type: \"menubutton\"\r\n        });\r\n    },\r\n    select(init) {\r\n        return new EToolBarItem({\r\n            ...init, type: \"select\"\r\n        });\r\n    },\r\n});\r\n//# sourceMappingURL=ToolBarItem.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { element, CustomElement, AttributeProperty } from \"../../Element\";\r\nimport \"./ToolBarItem\";\r\nexport { HTMLEToolBarItemGroupElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEToolBarItemGroupElementBase = class HTMLEToolBarItemGroupElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                width: max-content;\r\n                flex-direction: row;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"label\": {\r\n                const label = this.shadowRoot.querySelector(\"[part='label']\");\r\n                if (label) {\r\n                    label.textContent = newValue;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEToolBarItemGroupElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEToolBarItemGroupElementBase.prototype, \"label\", void 0);\r\nHTMLEToolBarItemGroupElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-toolbaritemgroup\"\r\n    })\r\n], HTMLEToolBarItemGroupElementBase);\r\nvar HTMLEToolBarItemGroupElement = HTMLEToolBarItemGroupElementBase;\r\n//# sourceMappingURL=ToolBarItemGroup.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLEToolBarItemElement } from \"./ToolBarItem\";\r\nimport { HTMLEToolBarItemGroupElement } from \"./ToolBarItemGroup\";\r\nimport \"./ToolBarItem\";\r\nimport \"./ToolBarItemGroup\";\r\nexport { HTMLEToolBarElement };\r\nvar shadowTemplate;\r\nvar style;\r\nvar wasExpandedOnMouseDown;\r\nlet HTMLEToolBarElementBase = class HTMLEToolBarElementBase extends HTMLElement {\r\n    get activeItem() {\r\n        return this.querySelector(\"e-toolbaritem[active]\");\r\n    }\r\n    items() {\r\n        return Array.from(this.querySelectorAll(\":is(:scope, :scope > e-toolbaritemgroup) > e-toolbaritem\"));\r\n    }\r\n    #walker;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        wasExpandedOnMouseDown = new WeakMap();\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                flex-direction: row;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#nodeFilter.bind(this));\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"contextmenu\", this.#handleContextMenuEvent.bind(this));\r\n        this.addEventListener(\"dblclick\", this.#handleDblClickEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n        this.addEventListener(\"mousedown\", this.#handleMouseDownEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    #nodeFilter(node) {\r\n        if (node instanceof HTMLEToolBarItemElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEToolBarItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    firstItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.firstChild();\r\n    }\r\n    #lastItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.lastChild();\r\n    }\r\n    #previousItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const previousItem = walker.previousSibling();\r\n        return previousItem;\r\n    }\r\n    #nextItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.nextSibling();\r\n    }\r\n    #setActiveItem(item) {\r\n        const { activeItem } = this;\r\n        if (activeItem !== null && activeItem !== item) {\r\n            activeItem.active = false;\r\n        }\r\n        if (item !== null) {\r\n            item.active = true;\r\n        }\r\n    }\r\n    #handleClickEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-toolbaritem\");\r\n        if (targetItem) {\r\n            const { type, pressed } = targetItem;\r\n            switch (type) {\r\n                case \"checkbox\": {\r\n                    targetItem.pressed = !pressed;\r\n                    break;\r\n                }\r\n                case \"radio\": {\r\n                    targetItem.pressed = true;\r\n                    break;\r\n                }\r\n                case \"menubutton\": {\r\n                    const { menubutton } = targetItem;\r\n                    if (menubutton && !menubutton.contains(target)) {\r\n                        const expand = !wasExpandedOnMouseDown.get(targetItem);\r\n                        menubutton.toggle(expand);\r\n                        if (expand) {\r\n                            menubutton.firstItem?.focus({ preventScroll: true });\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                case \"select\": {\r\n                    const { select } = targetItem;\r\n                    if (select && !select.contains(target)) {\r\n                        const expand = !wasExpandedOnMouseDown.get(targetItem);\r\n                        select.toggle(expand);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n    #handleContextMenuEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleDblClickEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const { activeItem } = this;\r\n        if (!this.contains(relatedTarget)) {\r\n            (activeItem ?? this.firstItem())?.focus();\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-toolbaritem\");\r\n        if (targetItem) {\r\n            this.#setActiveItem(targetItem);\r\n            this.tabIndex = -1;\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const lostFocusWithin = !this.contains(relatedTarget);\r\n        if (lostFocusWithin) {\r\n            this.tabIndex = 0;\r\n        }\r\n    }\r\n    #handleMouseDownEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-toolbaritem\");\r\n        if (targetItem) {\r\n            const { type } = targetItem;\r\n            switch (type) {\r\n                case \"menubutton\": {\r\n                    const { menubutton } = targetItem;\r\n                    if (menubutton && !menubutton.contains(target)) {\r\n                        wasExpandedOnMouseDown.set(targetItem, menubutton.expanded);\r\n                    }\r\n                    break;\r\n                }\r\n                case \"select\": {\r\n                    const { select } = targetItem;\r\n                    if (select && !select.contains(target)) {\r\n                        wasExpandedOnMouseDown.set(targetItem, select.expanded);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { activeItem } = this;\r\n        switch (key) {\r\n            case \"Enter\":\r\n            case \" \": {\r\n                if (activeItem) {\r\n                    const { type } = activeItem;\r\n                    switch (type) {\r\n                        case \"menubutton\": {\r\n                            const { menubutton } = activeItem;\r\n                            if (menubutton) {\r\n                                menubutton.expand();\r\n                                menubutton.firstItem?.focus({ preventScroll: true });\r\n                            }\r\n                            break;\r\n                        }\r\n                        case \"select\": {\r\n                            const { select } = activeItem;\r\n                            if (select) {\r\n                                select.expand();\r\n                            }\r\n                            break;\r\n                        }\r\n                        default: {\r\n                            activeItem.click();\r\n                            break;\r\n                        }\r\n                    }\r\n                    event.stopPropagation();\r\n                }\r\n                break;\r\n            }\r\n            case \"ArrowLeft\": {\r\n                if (activeItem) {\r\n                    const previousItem = this.#previousItem(activeItem);\r\n                    if (previousItem) {\r\n                        previousItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                else {\r\n                    const firstItem = this.firstItem();\r\n                    if (firstItem) {\r\n                        firstItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                if (activeItem) {\r\n                    const nextItem = this.#nextItem(activeItem);\r\n                    if (nextItem) {\r\n                        nextItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                else {\r\n                    const lastItem = this.#lastItem();\r\n                    if (lastItem) {\r\n                        lastItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowDown\": {\r\n                if (activeItem) {\r\n                    const { type } = activeItem;\r\n                    switch (type) {\r\n                        case \"select\": {\r\n                            activeItem.select?.expand();\r\n                            event.stopPropagation();\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.firstItem();\r\n                if (firstItem) {\r\n                    firstItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                if (lastItem) {\r\n                    lastItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEToolBarElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEToolBarElementBase.prototype, \"orientation\", void 0);\r\nHTMLEToolBarElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-toolbar\"\r\n    })\r\n], HTMLEToolBarElementBase);\r\nvar HTMLEToolBarElement = HTMLEToolBarElementBase;\r\n//# sourceMappingURL=ToolBar.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_DROPTARGET_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR, DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, element, AttributeProperty } from \"../../Element\";\r\nimport { HTMLEMenuElement } from \"../menus/Menu\";\r\nimport { HTMLEToolBarElement } from \"../toolbars/ToolBar\";\r\nexport { HTMLEListItemElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEListItemElementBase = class HTMLEListItemElementBase extends HTMLElement {\r\n    get badge() {\r\n        return this.#badge;\r\n    }\r\n    get toolbar() {\r\n        return this.#toolbar;\r\n    }\r\n    get menu() {\r\n        return this.#menu;\r\n    }\r\n    #badge;\r\n    #toolbar;\r\n    #menu;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                user-select: none;\r\n                line-height: 22px;\r\n            }\r\n            \r\n            :host([droptarget]) {\r\n                background-color: var(--theme-droptarget-item-color, ${DEFAULT_THEME_DROPTARGET_ITEM_COLOR});\r\n            }\r\n            \r\n            :host(:hover) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([active]) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                background-color: var(--theme-focused-item-color, ${DEFAULT_THEME_FOCUSED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([selected]) {\r\n                background-color: var(--theme-selected-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.#badge = null;\r\n        this.#menu = null;\r\n        this.#toolbar = null;\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"selected\": {\r\n                this.dispatchEvent(new Event(\"select\", { bubbles: true }));\r\n                break;\r\n            }\r\n            case \"label\": {\r\n                const { shadowRoot } = this;\r\n                const labelPart = shadowRoot.querySelector(\"[part=label]\");\r\n                if (labelPart) {\r\n                    labelPart.textContent = newValue;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const { name: slotName } = target;\r\n        switch (slotName) {\r\n            case \"toolbar\": {\r\n                const element = target.assignedElements()[0];\r\n                this.#toolbar = element instanceof HTMLEToolBarElement ? element : null;\r\n                break;\r\n            }\r\n            case \"badge\": {\r\n                const element = target.assignedElements()[0];\r\n                this.#badge = element instanceof HTMLSpanElement ? element : null;\r\n                break;\r\n            }\r\n            case \"menu\": {\r\n                const element = target.assignedElements()[0];\r\n                this.#menu = element instanceof HTMLEMenuElement ? element : null;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEListItemElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Number })\r\n], HTMLEListItemElementBase.prototype, \"posinset\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEListItemElementBase.prototype, \"label\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEListItemElementBase.prototype, \"droptarget\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEListItemElementBase.prototype, \"active\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLEListItemElementBase.prototype, \"selected\", void 0);\r\nHTMLEListItemElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-listitem\"\r\n    })\r\n], HTMLEListItemElementBase);\r\nvar HTMLEListItemElement = HTMLEListItemElementBase;\r\n//# sourceMappingURL=ListItem.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, element } from \"../../Element\";\r\nimport { HTMLEListItemElement } from \"./ListItem\";\r\nimport \"./ListItem\";\r\nexport { HTMLEListItemGroupElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEListItemGroupElementBase = class HTMLEListItemGroupElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const assignedItems = target\r\n            .assignedElements()\r\n            .filter(element_i => element_i instanceof HTMLEListItemElement);\r\n        assignedItems.forEach((item_i, i) => {\r\n            item_i.posinset = i;\r\n        });\r\n    }\r\n};\r\nHTMLEListItemGroupElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-listitemgroup\"\r\n    })\r\n], HTMLEListItemGroupElementBase);\r\nvar HTMLEListItemGroupElement = HTMLEListItemGroupElementBase;\r\n//# sourceMappingURL=ListItemGroup.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLEListItemElement } from \"./ListItem\";\r\nimport { HTMLEListItemGroupElement } from \"./ListItemGroup\";\r\nimport \"./ListItem\";\r\nimport \"./ListItemGroup\";\r\nexport { HTMLEListElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEListElementBase = class HTMLEListElementBase extends HTMLElement {\r\n    get activeItem() {\r\n        return this.querySelector(\"e-listitem[active]\");\r\n    }\r\n    get dropTargetItem() {\r\n        return this.querySelector(\"e-listitem[droptarget]\");\r\n    }\r\n    #onSelection;\r\n    #hasSelectionChanged;\r\n    #walker;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"style\", {\r\n            children: [\r\n                /*css*/ `\r\n\r\n                    `\r\n            ]\r\n        }), element(\"slot\", {\r\n            children: [\r\n                element(\"slot\")\r\n            ]\r\n        }));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n        `;\r\n    }\r\n    items() {\r\n        return Array.from(this.querySelectorAll(\":is(:scope, :scope > e-listitemgroup) > e-listitem\"));\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this));\r\n        this.#onSelection = false;\r\n        this.#hasSelectionChanged = false;\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"contextmenu\", this.#handleContextMenuEvent.bind(this));\r\n        this.addEventListener(\"dragend\", this.#handleDragEndEvent.bind(this));\r\n        this.addEventListener(\"dragenter\", this.#handleDragEnterEvent.bind(this));\r\n        this.addEventListener(\"dragover\", this.#handleDragOverEvent.bind(this));\r\n        this.addEventListener(\"dragleave\", this.#handleDragLeaveEvent.bind(this));\r\n        this.addEventListener(\"dragstart\", this.#handleDragStartEvent.bind(this));\r\n        this.addEventListener(\"drop\", this.#handleDropEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n        this.addEventListener(\"mousedown\", this.#handleMouseDownEvent.bind(this));\r\n        this.addEventListener(\"select\", this.#handleSelectEvent.bind(this));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const tabIndex = this.getAttribute(\"tabindex\");\r\n        this.tabIndex = tabIndex === null ? 0 : parseInt(tabIndex);\r\n    }\r\n    beginSelection() {\r\n        this.#onSelection = true;\r\n    }\r\n    endSelection() {\r\n        this.#onSelection = false;\r\n        if (this.#hasSelectionChanged) {\r\n            this.dispatchEvent(new Event(\"selectionchange\", { bubbles: true }));\r\n            this.#hasSelectionChanged = false;\r\n        }\r\n    }\r\n    selectedItems() {\r\n        const selectedItems = [];\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        let item = this.#firstItem();\r\n        while (item !== null) {\r\n            if (item.selected) {\r\n                selectedItems.push(item);\r\n            }\r\n            item = this.#nextItem(item);\r\n        }\r\n        return selectedItems;\r\n    }\r\n    #walkerNodeFilter(node) {\r\n        if (node instanceof HTMLEListItemElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEListItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    #getItemsRange(from, to) {\r\n        const items = this.items();\r\n        const fromIndex = items.indexOf(from);\r\n        const toIndex = items.indexOf(to);\r\n        if (fromIndex > -1 && toIndex > -1) {\r\n            if (from == to) {\r\n                return [from];\r\n            }\r\n            return items.slice(Math.min(fromIndex, toIndex), Math.max(fromIndex, toIndex) + 1);\r\n        }\r\n        return [];\r\n    }\r\n    #setSelection(...items) {\r\n        this.beginSelection();\r\n        const selectedItems = this.selectedItems();\r\n        selectedItems.forEach((selectedItem_i) => {\r\n            if (!items.includes(selectedItem_i)) {\r\n                selectedItem_i.selected = false;\r\n            }\r\n        });\r\n        items.forEach((item_i) => {\r\n            if (this.contains(item_i) && !item_i.selected) {\r\n                item_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #addToSelection(...items) {\r\n        this.beginSelection();\r\n        items.forEach((item_i) => {\r\n            if (!item_i.selected) {\r\n                item_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #removeFromSelection(...items) {\r\n        this.beginSelection();\r\n        const selectedItems = this.selectedItems();\r\n        items.forEach((item_i) => {\r\n            if (selectedItems.includes(item_i)) {\r\n                item_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #clearSelection() {\r\n        this.beginSelection();\r\n        const selectedItems = this.selectedItems();\r\n        selectedItems.forEach((item_i) => {\r\n            if (item_i.selected) {\r\n                item_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #setActiveItem(item) {\r\n        const { activeItem, items } = this;\r\n        if (activeItem !== null && activeItem !== item) {\r\n            activeItem.active = false;\r\n            activeItem.tabIndex = -1;\r\n        }\r\n        if (item !== null) {\r\n            item.active = true;\r\n            item.tabIndex = 0;\r\n        }\r\n    }\r\n    #setDropTargetItem(item) {\r\n        const { dropTargetItem } = this;\r\n        if (dropTargetItem !== null && dropTargetItem !== item) {\r\n            dropTargetItem.droptarget = false;\r\n        }\r\n        if (item !== null) {\r\n            this.droptarget = true;\r\n            item.droptarget = true;\r\n        }\r\n        else {\r\n            this.droptarget = false;\r\n        }\r\n    }\r\n    #firstItem() {\r\n        const walker = this.#walker;\r\n        const { root } = walker;\r\n        walker.currentNode = root;\r\n        return walker.firstChild();\r\n    }\r\n    #lastItem() {\r\n        const walker = this.#walker;\r\n        const { root } = walker;\r\n        walker.currentNode = root;\r\n        return walker.lastChild();\r\n    }\r\n    #previousItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const previousItem = walker.previousNode();\r\n        return previousItem;\r\n    }\r\n    #nextItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const nextItem = walker.nextNode();\r\n        return nextItem;\r\n    }\r\n    #handleContextMenuEvent(event) {\r\n        const { target } = event;\r\n        if (target instanceof HTMLEListItemElement) {\r\n            const selectedItems = this.selectedItems();\r\n            if (!selectedItems.includes(target)) {\r\n                this.#setSelection(target);\r\n            }\r\n            target.focus({ preventScroll: true });\r\n            event.preventDefault();\r\n        }\r\n    }\r\n    #handleDragEndEvent() {\r\n        this.#setDropTargetItem(null);\r\n    }\r\n    #handleDragEnterEvent(event) {\r\n        const { target } = event;\r\n        if (target instanceof HTMLEListItemElement) {\r\n            this.#setDropTargetItem(target);\r\n        }\r\n        event.preventDefault();\r\n    }\r\n    #handleDragOverEvent(event) {\r\n        event.preventDefault();\r\n    }\r\n    #handleDragLeaveEvent(event) {\r\n        const { relatedTarget } = event;\r\n        if (relatedTarget instanceof Element) {\r\n            const parentItem = relatedTarget.closest(\"e-listitem\");\r\n            if (!parentItem) {\r\n                let rootNode = relatedTarget;\r\n                while (!(rootNode instanceof HTMLEListItemElement || rootNode instanceof Document)) {\r\n                    rootNode = rootNode.getRootNode();\r\n                    if (rootNode instanceof ShadowRoot) {\r\n                        rootNode = rootNode.host;\r\n                    }\r\n                }\r\n                if (rootNode instanceof Document) {\r\n                    this.#setDropTargetItem(null);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleDragStartEvent(event) {\r\n        const { target } = event;\r\n        if (target instanceof HTMLEListItemElement) {\r\n            const selectedItems = this.selectedItems();\r\n            if (!selectedItems.includes(target)) {\r\n                this.#setSelection(target);\r\n            }\r\n        }\r\n    }\r\n    #handleDropEvent() {\r\n        this.#setDropTargetItem(null);\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const { activeItem } = this;\r\n        if (activeItem && relatedTarget !== activeItem) {\r\n            activeItem.focus();\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        if (target instanceof HTMLEListItemElement) {\r\n            this.#setActiveItem(target);\r\n        }\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { activeItem } = this;\r\n        switch (key) {\r\n            case \"a\": {\r\n                const { ctrlKey } = event;\r\n                if (ctrlKey) {\r\n                    const walker = this.#walker;\r\n                    const { root } = walker;\r\n                    const firstItem = (walker.currentNode = walker.parentNode() ?? root, walker.firstChild());\r\n                    const lastItem = (walker.currentNode = walker.parentNode() ?? root, walker.lastChild());\r\n                    const range = this.#getItemsRange(firstItem, lastItem);\r\n                    if (range) {\r\n                        this.#setSelection(...range);\r\n                    }\r\n                }\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case \"ArrowUp\": {\r\n                if (activeItem) {\r\n                    const previousItem = this.#previousItem(activeItem);\r\n                    if (previousItem) {\r\n                        previousItem.focus({ preventScroll: true });\r\n                        const { shiftKey } = event;\r\n                        if (shiftKey) {\r\n                            previousItem.selected ?\r\n                                this.#removeFromSelection(previousItem) :\r\n                                this.#addToSelection(previousItem);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    const firstItem = this.#firstItem();\r\n                    if (firstItem) {\r\n                        firstItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowDown\": {\r\n                if (activeItem) {\r\n                    const nextItem = this.#nextItem(activeItem);\r\n                    if (nextItem) {\r\n                        nextItem.focus({ preventScroll: true });\r\n                        const { shiftKey } = event;\r\n                        if (shiftKey) {\r\n                            nextItem.selected ?\r\n                                this.#removeFromSelection(nextItem) :\r\n                                this.#addToSelection(nextItem);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    const lastItem = this.#lastItem();\r\n                    if (lastItem) {\r\n                        lastItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.#firstItem();\r\n                if (firstItem) {\r\n                    firstItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                if (lastItem) {\r\n                    lastItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Enter\": {\r\n                const { activeItem } = this;\r\n                if (activeItem) {\r\n                    this.#setSelection(activeItem);\r\n                    activeItem.click();\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Escape\": {\r\n                this.#clearSelection();\r\n                this.#setActiveItem(null);\r\n                this.focus();\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleMouseDownEvent(event) {\r\n        const { target, ctrlKey, shiftKey } = event;\r\n        const selectedItems = this.selectedItems();\r\n        if (target instanceof HTMLEListItemElement) {\r\n            if (!shiftKey && !ctrlKey) {\r\n                this.#setSelection(target);\r\n            }\r\n            else if (ctrlKey) {\r\n                (!target.selected) ?\r\n                    this.#addToSelection(target) :\r\n                    this.#removeFromSelection(target);\r\n                event.stopPropagation();\r\n            }\r\n            else if (shiftKey) {\r\n                const lastSelectedItem = selectedItems[selectedItems.length - 1];\r\n                if (lastSelectedItem) {\r\n                    const range = this.#getItemsRange(lastSelectedItem, target);\r\n                    if (range) {\r\n                        if (selectedItems.includes(target)) {\r\n                            this.#removeFromSelection(...range);\r\n                        }\r\n                        else {\r\n                            this.#addToSelection(...range);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    this.#setSelection(target);\r\n                }\r\n                event.stopPropagation();\r\n            }\r\n        }\r\n    }\r\n    #handleSelectEvent() {\r\n        if (!this.#onSelection) {\r\n            this.dispatchEvent(new Event(\"selectionchange\", { bubbles: true }));\r\n        }\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const assignedItems = target\r\n            .assignedElements()\r\n            .filter(element_i => element_i instanceof HTMLEListItemElement);\r\n        assignedItems.forEach((item_i, i) => {\r\n            item_i.posinset = i;\r\n        });\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEListElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEListElementBase.prototype, \"droptarget\", void 0);\r\nHTMLEListElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-list\"\r\n    })\r\n], HTMLEListElementBase);\r\nvar HTMLEListElement = HTMLEListElementBase;\r\n//# sourceMappingURL=List.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, element } from \"../../Element\";\r\nexport { HTMLETabPanelElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLETabPanelElementBase = class HTMLETabPanelElementBase extends HTMLElement {\r\n    get tab() {\r\n        const { id } = this;\r\n        return this.getRootNode().querySelector(`e-tab[controls=${id}]`);\r\n    }\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n                padding: 4px;\r\n            }\r\n            \r\n            :host([hidden]) {\r\n                display: none;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    connectedCallback() {\r\n        const { tab } = this;\r\n        if (tab) {\r\n            customElements.upgrade(tab);\r\n            const { selected } = tab;\r\n            this.hidden = !selected;\r\n        }\r\n    }\r\n};\r\nHTMLETabPanelElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-tabpanel\"\r\n    })\r\n], HTMLETabPanelElementBase);\r\nvar HTMLETabPanelElement = HTMLETabPanelElementBase;\r\n//# sourceMappingURL=TabPanel.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_HOVERED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport \"./TabPanel\";\r\nexport { HTMLETabElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLETabElementBase = class HTMLETabElementBase extends HTMLElement {\r\n    get panel() {\r\n        const { controls } = this;\r\n        const rootNode = this.getRootNode();\r\n        if (rootNode instanceof Document || rootNode instanceof ShadowRoot) {\r\n            return rootNode.querySelector(`e-tabpanel[id='${controls}']`);\r\n        }\r\n        return null;\r\n    }\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: inline-block;\r\n                user-select: none;\r\n                white-space: nowrap;\r\n                padding: 4px;\r\n            }\r\n            \r\n            :host([disabled]) {\r\n                opacity: 0.38;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host(:hover) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"selected\": {\r\n                this.dispatchEvent(new Event(\"select\", { bubbles: true }));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    select() {\r\n        this.selected = true;\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLETabElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLETabElementBase.prototype, \"disabled\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLETabElementBase.prototype, \"controls\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLETabElementBase.prototype, \"active\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLETabElementBase.prototype, \"selected\", void 0);\r\nHTMLETabElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-tab\"\r\n    })\r\n], HTMLETabElementBase);\r\nvar HTMLETabElement = HTMLETabElementBase;\r\n//# sourceMappingURL=Tab.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, element } from \"../../Element\";\r\nimport { HTMLETabElement } from \"./Tab\";\r\nimport \"./Tab\";\r\nimport \"./TabPanel\";\r\nexport { HTMLETabListElement };\r\nvar shadowTemplate;\r\nvar style;\r\nvar SELECT_ANIMATION_DURATION = 200;\r\nlet HTMLETabListElementBase = class HTMLETabListElementBase extends HTMLElement {\r\n    #walker;\r\n    get tabs() {\r\n        return Array.from(this.querySelectorAll(\"e-tab\"));\r\n    }\r\n    get activeTab() {\r\n        return this.querySelector(\"e-tab[active]\");\r\n    }\r\n    get selectedTab() {\r\n        return this.querySelector(\"e-tab[selected]\");\r\n    }\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                position: relative;\r\n                display: flex;\r\n            }\r\n\r\n            :host::after {\r\n                position: absolute;\r\n                display: inline-block;\r\n                content: \"\";\r\n                z-index: -1;\r\n                transform: translateY(-100%);\r\n                box-sizing: border-box;\r\n                border-top: 2px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this));\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n        this.addEventListener(\"select\", this.#handleSelectEvent.bind(this));\r\n        this.addEventListener(\"select\", this.#handleSelectEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex, selectedTab } = this;\r\n        this.tabIndex = tabIndex;\r\n        customElements.upgrade(this);\r\n        const tabToSelect = selectedTab ?? this.firstItem();\r\n        if (tabToSelect) {\r\n            this.#selectTab(tabToSelect);\r\n            setTimeout(() => {\r\n                const { width: tabWidth, height: tabHeight } = tabToSelect.getBoundingClientRect();\r\n                const { offsetLeft } = tabToSelect;\r\n                this.animate([{\r\n                        width: `${tabWidth}px`,\r\n                        left: `${offsetLeft}px`,\r\n                        top: `${tabHeight}px`\r\n                    }], {\r\n                    duration: 0,\r\n                    fill: \"forwards\",\r\n                    easing: \"ease-in-out\",\r\n                    pseudoElement: \"::after\"\r\n                });\r\n            });\r\n        }\r\n    }\r\n    #walkerNodeFilter(node) {\r\n        if (node instanceof HTMLETabElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    firstItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.firstChild();\r\n    }\r\n    #lastItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.lastChild();\r\n    }\r\n    #previousItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.previousNode();\r\n    }\r\n    #nextItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.nextNode();\r\n    }\r\n    #setActiveTab(item) {\r\n        const { activeTab } = this;\r\n        if (activeTab !== null && activeTab !== item) {\r\n            activeTab.active = false;\r\n        }\r\n        if (item !== null) {\r\n            item.active = true;\r\n        }\r\n    }\r\n    #selectTab(tab) {\r\n        const { selectedTab } = this;\r\n        if (tab !== selectedTab) {\r\n            tab.selected = true;\r\n        }\r\n    }\r\n    #handleClickEvent(event) {\r\n        const { target } = event;\r\n        const targetTab = target.closest(\"e-tab\");\r\n        if (targetTab) {\r\n            targetTab.select();\r\n            const { width: tabWidth, height: tabHeight } = targetTab.getBoundingClientRect();\r\n            const { offsetLeft } = targetTab;\r\n            this.animate([{\r\n                    width: `${tabWidth}px`,\r\n                    left: `${offsetLeft}px`,\r\n                    top: `${tabHeight}px`\r\n                }], {\r\n                duration: SELECT_ANIMATION_DURATION,\r\n                fill: \"forwards\",\r\n                easing: \"ease-in-out\",\r\n                pseudoElement: \"::after\"\r\n            });\r\n        }\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const { selectedTab } = this;\r\n        if (!this.contains(relatedTarget)) {\r\n            (selectedTab ?? this.firstItem())?.focus();\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        const targetTab = target.closest(\"e-tab\");\r\n        if (targetTab) {\r\n            this.#setActiveTab(targetTab);\r\n            this.tabIndex = -1;\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const lostFocusWithin = !this.contains(relatedTarget);\r\n        if (lostFocusWithin) {\r\n            this.tabIndex = 0;\r\n        }\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { activeTab } = this;\r\n        switch (key) {\r\n            case \"ArrowLeft\": {\r\n                const previousTab = activeTab ?\r\n                    this.#previousItem(activeTab) ?? this.#lastItem() :\r\n                    this.firstItem();\r\n                previousTab?.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                const nextTab = activeTab ?\r\n                    this.#nextItem(activeTab) ?? this.firstItem() :\r\n                    this.#lastItem();\r\n                nextTab?.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.firstItem();\r\n                if (firstItem) {\r\n                    firstItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                if (lastItem) {\r\n                    lastItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Enter\": {\r\n                activeTab?.click();\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleSelectEvent(event) {\r\n        const { target } = event;\r\n        const targetTab = target;\r\n        if (targetTab.selected) {\r\n            const { tabs } = this;\r\n            tabs.forEach((tab_i) => {\r\n                if (tab_i !== targetTab) {\r\n                    tab_i.selected = false;\r\n                    const { panel } = tab_i;\r\n                    if (panel) {\r\n                        panel.hidden = true;\r\n                    }\r\n                }\r\n            });\r\n            const { panel } = targetTab;\r\n            if (panel) {\r\n                panel.hidden = false;\r\n            }\r\n        }\r\n    }\r\n};\r\nHTMLETabListElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-tablist\"\r\n    })\r\n], HTMLETabListElementBase);\r\nvar HTMLETabListElement = HTMLETabListElementBase;\r\n//# sourceMappingURL=TabList.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_HOVERED_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nexport { HTMLEStatusItemElement };\r\nexport { EStatusItem };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEStatusItemElementBase = class HTMLEStatusItemElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"span\", {\r\n            attributes: {\r\n                part: \"content\"\r\n            },\r\n            children: element(\"slot\")\r\n        }));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                user-select: none;\r\n                white-space: nowrap;\r\n                cursor: pointer;\r\n                line-height: 22px;\r\n            }\r\n            \r\n            :host([disabled]) {\r\n                opacity: 0.38;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host(:hover) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host(:focus-within):host-context(e-statusbar:focus-within) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            [part=\"content\"] {\r\n                padding: 0 4px;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEStatusItemElementBase.prototype, \"active\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEStatusItemElementBase.prototype, \"name\", void 0);\r\nHTMLEStatusItemElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-statusitem\"\r\n    })\r\n], HTMLEStatusItemElementBase);\r\nvar HTMLEStatusItemElement = HTMLEStatusItemElementBase;\r\nvar EStatusItem = Object.assign(function (init) {\r\n    const { label, name, onclick } = init;\r\n    return element(\"e-statusitem\", {\r\n        attributes: {\r\n            title: label,\r\n            name: name,\r\n        },\r\n        children: label,\r\n        listeners: {\r\n            click: onclick\r\n        }\r\n    });\r\n}, {\r\n    prototype: HTMLEStatusItemElement.prototype\r\n});\r\n//# sourceMappingURL=StatusItem.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { element, CustomElement, AttributeProperty } from \"../../Element\";\r\nimport \"./StatusItem\";\r\nexport { HTMLEStatusItemGroupElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEStatusItemGroupElementBase = class HTMLEStatusItemGroupElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                width: max-content;\r\n                flex-direction: row;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"label\": {\r\n                const label = this.shadowRoot.querySelector(\"[part='label']\");\r\n                if (label) {\r\n                    label.textContent = newValue;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEStatusItemGroupElementBase.prototype, \"name\", void 0);\r\nHTMLEStatusItemGroupElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-statusitemgroup\"\r\n    })\r\n], HTMLEStatusItemGroupElementBase);\r\nvar HTMLEStatusItemGroupElement = HTMLEStatusItemGroupElementBase;\r\n//# sourceMappingURL=StatusItemGroup.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, element } from \"../../Element\";\r\nimport { HTMLEStatusItemElement } from \"./StatusItem\";\r\nimport { HTMLEStatusItemGroupElement } from \"./StatusItemGroup\";\r\nimport \"./StatusItem\";\r\nimport \"./StatusItemGroup\";\r\nexport { HTMLEStatusBarElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEStatusBarElementBase = class HTMLEStatusBarElementBase extends HTMLElement {\r\n    get activeItem() {\r\n        return this.querySelector(\"e-statusitem[active]\");\r\n    }\r\n    items() {\r\n        return Array.from(this.querySelectorAll(\":is(:scope, :scope > e-statusitemgroup) > e-statusitem\"));\r\n    }\r\n    #walker;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                flex-direction: row;\r\n            }\r\n\r\n            :host(:focus) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n\r\n            ::slotted(e-statusitem:not(:first-child)) {\r\n                margin-left: 4px;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#nodeFilter.bind(this));\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"contextmenu\", this.#handleContextMenuEvent.bind(this));\r\n        this.addEventListener(\"dblclick\", this.#handleDblClickEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    #nodeFilter(node) {\r\n        if (node instanceof HTMLEStatusItemElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEStatusItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    firstItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.firstChild();\r\n    }\r\n    #lastItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.lastChild();\r\n    }\r\n    #previousItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const previousItem = walker.previousSibling();\r\n        return previousItem;\r\n    }\r\n    #nextItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.nextSibling();\r\n    }\r\n    #setActiveItem(item) {\r\n        const { activeItem } = this;\r\n        if (activeItem !== null && activeItem !== item) {\r\n            activeItem.active = false;\r\n        }\r\n        if (item !== null) {\r\n            item.active = true;\r\n        }\r\n    }\r\n    #handleContextMenuEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleDblClickEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const { activeItem } = this;\r\n        if (!this.contains(relatedTarget)) {\r\n            (activeItem ?? this.firstItem())?.focus();\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-statusitem\");\r\n        if (targetItem) {\r\n            this.#setActiveItem(targetItem);\r\n            this.tabIndex = -1;\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const lostFocusWithin = !this.contains(relatedTarget);\r\n        if (lostFocusWithin) {\r\n            this.tabIndex = 0;\r\n        }\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { activeItem } = this;\r\n        switch (key) {\r\n            case \"Enter\": {\r\n                if (activeItem) {\r\n                    activeItem.click();\r\n                    event.stopPropagation();\r\n                }\r\n                break;\r\n            }\r\n            case \"ArrowLeft\": {\r\n                if (activeItem) {\r\n                    const previousItem = this.#previousItem(activeItem);\r\n                    if (previousItem) {\r\n                        previousItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                else {\r\n                    const firstItem = this.firstItem();\r\n                    if (firstItem) {\r\n                        firstItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                if (activeItem) {\r\n                    const nextItem = this.#nextItem(activeItem);\r\n                    if (nextItem) {\r\n                        nextItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                else {\r\n                    const lastItem = this.#lastItem();\r\n                    if (lastItem) {\r\n                        lastItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.firstItem();\r\n                if (firstItem) {\r\n                    firstItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                if (lastItem) {\r\n                    lastItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Escape\": {\r\n                this.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\nHTMLEStatusBarElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-statusbar\"\r\n    })\r\n], HTMLEStatusBarElementBase);\r\nvar HTMLEStatusBarElement = HTMLEStatusBarElementBase;\r\n//# sourceMappingURL=StatusBar.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty } from \"../Element\";\r\nexport { HTMLEHandleElement };\r\nvar style;\r\nlet HTMLEHandleElementBase = class HTMLEHandleElementBase extends HTMLElement {\r\n    #target;\r\n    #onCapture;\r\n    static {\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n                            \r\n                width: 24px;\r\n                height: 12px;\r\n                \r\n                background-color: var(--theme-selected-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n\r\n                -webkit-mask-image: url(\"/assets/dots.png\");\r\n                mask-image: url(\"/assets/dots.png\");\r\n\r\n                -webkit-mask-repeat: repeat;\r\n                mask-repeat: repeat;\r\n                cursor: move;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        this.#target = null;\r\n        this.#onCapture = false;\r\n        this.addEventListener(\"pointerdown\", this.#handlePointerDownEvent.bind(this));\r\n        this.addEventListener(\"pointermove\", this.#handlePointerMoveEvent.bind(this));\r\n        this.addEventListener(\"pointerup\", this.#handlePointerUpEvent.bind(this));\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"controls\": {\r\n                const { controls } = this;\r\n                this.#target = document.getElementById(controls);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handlePointerUpEvent(event) {\r\n        const { pointerId } = event;\r\n        this.releasePointerCapture(pointerId);\r\n        this.#onCapture = false;\r\n    }\r\n    #handlePointerDownEvent(event) {\r\n        const { pointerId } = event;\r\n        const { controls } = this;\r\n        this.#target = document.getElementById(controls);\r\n        this.setPointerCapture(pointerId);\r\n        this.#onCapture = true;\r\n    }\r\n    #handlePointerMoveEvent(event) {\r\n        if (this.#onCapture) {\r\n            const target = this.#target;\r\n            if (target !== null) {\r\n                const targetComputedStyle = window.getComputedStyle(target);\r\n                const { movementX, movementY } = event;\r\n                const { width: rectWidth, height: rectHeight } = target.getBoundingClientRect();\r\n                const outerElement = target.parentElement ?? document.body;\r\n                const { left: outerRectLeft, right: outerRectRight, top: outerRectTop, bottom: outerRectBottom } = outerElement.getBoundingClientRect();\r\n                const left = parseFloat(targetComputedStyle.getPropertyValue(\"left\"));\r\n                const newLeft = Math.max(outerRectLeft, Math.min(Math.trunc(left + movementX), outerRectRight - rectWidth));\r\n                const top = parseFloat(targetComputedStyle.getPropertyValue(\"top\"));\r\n                const newTop = Math.max(outerRectTop, Math.min(Math.trunc(top + movementY), outerRectBottom - rectHeight));\r\n                target.style.setProperty(\"left\", `${newLeft}px`);\r\n                target.style.setProperty(\"top\", `${newTop}px`);\r\n                this.dispatchEvent(new CustomEvent(\"move\"));\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEHandleElementBase.prototype, \"controls\", void 0);\r\nHTMLEHandleElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-handle\"\r\n    })\r\n], HTMLEHandleElementBase);\r\nvar HTMLEHandleElement = HTMLEHandleElementBase;\r\n//# sourceMappingURL=Handle.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, AttributeProperty } from \"../Element\";\r\nexport { HTMLEImportElement };\r\nlet HTMLEImportElementBase = class HTMLEImportElementBase extends HTMLElement {\r\n    connectedCallback() {\r\n        const { src } = this;\r\n        if (src) {\r\n            this.#importRequest(src);\r\n        }\r\n    }\r\n    async #importRequest(src) {\r\n        this.outerHTML = await fetch(src).then((response) => {\r\n            if (response.ok) {\r\n                return response.text();\r\n            }\r\n            else {\r\n                throw new Error(response.statusText);\r\n            }\r\n        });\r\n        this.dispatchEvent(new Event(\"load\", { bubbles: true }));\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEImportElementBase.prototype, \"src\", void 0);\r\nHTMLEImportElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-import\"\r\n    })\r\n], HTMLEImportElementBase);\r\nvar HTMLEImportElement = HTMLEImportElementBase;\r\n//# sourceMappingURL=Import.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element } from \"../Element\";\r\nexport { HTMLELoaderElement };\r\nvar barShadowTemplate;\r\nvar spinnerShadowTemplate;\r\nvar style;\r\nlet HTMLELoaderElementBase = class HTMLELoaderElementBase extends HTMLElement {\r\n    static {\r\n        barShadowTemplate = element(\"template\");\r\n        barShadowTemplate.content.append(element(\"div\", {\r\n            attributes: {\r\n                part: \"bar\"\r\n            },\r\n            children: [\r\n                element(\"div\", {\r\n                    attributes: {\r\n                        part: \"slider\"\r\n                    },\r\n                    children: [\r\n                        element(\"div\", {\r\n                            attributes: {\r\n                                part: \"cursor\"\r\n                            }\r\n                        })\r\n                    ]\r\n                })\r\n            ]\r\n        }));\r\n        spinnerShadowTemplate = element(\"template\");\r\n        spinnerShadowTemplate.content.append(element(\"div\", {\r\n            attributes: {\r\n                part: \"spinner\"\r\n            }\r\n        }));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: inline-block;\r\n            }\r\n\r\n            :host(:is(:not([type]), [type=\"bar\"])) {\r\n                border: 1px solid gainsboro;\r\n                border-radius: 4px;\r\n            }\r\n        \r\n            [part=\"bar\"] {\r\n                position: relative;\r\n                overflow: hidden;\r\n                height: 6px;\r\n                width: 100%;\r\n                width: 86px;\r\n                border-radius: 4px;\r\n                background-color: whitesmoke;\r\n            }\r\n        \r\n            [part=\"slider\"] {\r\n                display: flex;\r\n                position: absolute;\r\n                width: 100%;\r\n                height: 100%;\r\n                animation-name: slider;\r\n            }\r\n        \r\n            [part=\"slider\"],\r\n            [part=\"cursor\"] {\r\n                border-radius: 4px;\r\n                will-change: transform;\r\n                animation-duration: 1s;\r\n                animation-timing-function: linear;\r\n                animation-iteration-count: infinite;\r\n            }\r\n        \r\n            [part=\"cursor\"] {\r\n                display: block;\r\n                width: 32px;\r\n                background-color: var(--theme-activated-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n                animation-name: cursor;\r\n            }\r\n        \r\n            :host([type=\"spinner\"]) {\r\n                display: inline-block;\r\n                width: 20px;\r\n                height: 20px;\r\n            }\r\n        \r\n            [part=\"spinner\"] {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n            }\r\n        \r\n            [part=\"spinner\"]::after {\r\n                content: \"\";\r\n                display: block;\r\n                width: 12px;\r\n                height: 12px;\r\n                border-radius: 50%;\r\n                border-width: 4px;\r\n                border-style: solid;\r\n                border-color: transparent var(--theme-activated-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n                animation: spin 1.2s linear infinite;\r\n            }\r\n        \r\n            @keyframes slider {\r\n                0% {\r\n                    transform: translateX(0%);\r\n                }\r\n                100% {\r\n                    transform: translateX(100%);\r\n                }\r\n            }\r\n        \r\n            @keyframes cursor {\r\n                0% {\r\n                    transform: translateX(-100%);\r\n                }\r\n                100% {\r\n                    transform: translateX(100%);\r\n                }\r\n            }\r\n        \r\n            @keyframes spin {\r\n                0% {\r\n                    transform: rotate(0);\r\n                }\r\n                100% {\r\n                    transform: rotate(360deg);\r\n                }\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.replaceChildren(barShadowTemplate.content.cloneNode(true));\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"type\": {\r\n                this.#updateTemplate();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #updateTemplate() {\r\n        const { type, shadowRoot } = this;\r\n        switch (type) {\r\n            case \"spinner\": {\r\n                shadowRoot.replaceChildren(spinnerShadowTemplate.content.cloneNode(true));\r\n                break;\r\n            }\r\n            case \"bar\": {\r\n                shadowRoot.replaceChildren(barShadowTemplate.content.cloneNode(true));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String, defaultValue: \"bar\", observed: true })\r\n], HTMLELoaderElementBase.prototype, \"type\", void 0);\r\nHTMLELoaderElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-loader\"\r\n    })\r\n], HTMLELoaderElementBase);\r\nvar HTMLELoaderElement = HTMLELoaderElementBase;\r\n//# sourceMappingURL=Loader.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement } from \"../Element\";\r\nexport { HTMLESeparatorElement };\r\nvar style;\r\nlet HTMLESeparatorElementBase = class HTMLESeparatorElementBase extends HTMLElement {\r\n    #internals;\r\n    static {\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n                margin: 10px 0 10px 27px;\r\n                border: none;\r\n                border-top: 1px solid lightgrey;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        this.#internals = this.attachInternals();\r\n        this.#internals.role = \"separator\";\r\n    }\r\n};\r\nHTMLESeparatorElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-separator\"\r\n    })\r\n], HTMLESeparatorElementBase);\r\nvar HTMLESeparatorElement = HTMLESeparatorElementBase;\r\n//# sourceMappingURL=Separator.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, AttributeProperty, element } from \"../Element\";\r\nexport { HTMLEToolTipElement };\r\nvar shadowTemplate;\r\nvar style;\r\nvar HIDE_DELAY_MS = 100;\r\nvar SHOW_DELAY_MS = 200;\r\nvar ANIMATION_DURATION = 100;\r\nlet HTMLEToolTipElementBase = class HTMLEToolTipElementBase extends HTMLElement {\r\n    get target() {\r\n        return this.#target;\r\n    }\r\n    #target;\r\n    #targetListenerObject;\r\n    #documentListenerObject;\r\n    #toggleAnimation;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"div\", {\r\n            attributes: {\r\n                part: \"container\"\r\n            },\r\n            children: [\r\n                element(\"span\", {\r\n                    attributes: {\r\n                        part: \"arrow\"\r\n                    }\r\n                }),\r\n                element(\"slot\")\r\n            ]\r\n        }));\r\n        style = /*css*/ `\r\n            :host {\r\n                position: fixed;\r\n                display: inline-block;\r\n                z-index: 1;\r\n                padding: 4px;\r\n                border-radius: 3px;\r\n                box-sizing: border-box;\r\n                background-color: white;\r\n                border: 1px solid black;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host([hidden]) {\r\n                display: none;\r\n            }\r\n\r\n            :host(:not([visible])) {\r\n                opacity: 0;\r\n            }\r\n            \r\n            [part=\"arrow\"] {\r\n                display: inline-block;\r\n                position: fixed;\r\n                z-index: 1;\r\n                width: 4px;\r\n                height: 4px;\r\n                box-sizing: border-box;\r\n                background-color: white;\r\n                border: 1px solid black;\r\n                border-width: 0 1px 1px 0;\r\n            }\r\n            \r\n            :host(:is(:not([position]), [position=\"top\"])) [part=\"arrow\"] {\r\n                transform: translate(-2px, -2px) rotate(45deg);\r\n            }\r\n            \r\n            :host(:is([position=\"bottom\"])) [part=\"arrow\"] {\r\n                transform: translate(-2px, -2px) rotate(225deg);\r\n            }\r\n            \r\n            :host(:is([position=\"left\"])) [part=\"arrow\"] {\r\n                transform: translate(-2px, -2px) rotate(315deg);\r\n            }\r\n            \r\n            :host(:is([position=\"right\"])) [part=\"arrow\"] {\r\n                transform: translate(-2px, -2px) rotate(135deg);\r\n            }        \r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.#target = null;\r\n        this.#toggleAnimation = null;\r\n        this.#targetListenerObject = (function (tooltip) {\r\n            return {\r\n                handleEvent(event) {\r\n                    const { type } = event;\r\n                    switch (type) {\r\n                        case \"mouseenter\": {\r\n                            tooltip.#handleTargetMouseEnterEvent();\r\n                            break;\r\n                        }\r\n                        case \"mouseleave\": {\r\n                            tooltip.#handleTargetMouseLeaveEvent();\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n        })(this);\r\n        this.#documentListenerObject = (function (tooltip) {\r\n            return {\r\n                handleEvent(event) {\r\n                    const { type } = event;\r\n                    switch (type) {\r\n                        case \"keydown\": {\r\n                            tooltip.#handleDocumentKeyDownEvent(event);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n        })(this);\r\n    }\r\n    connectedCallback() {\r\n        this.#setTarget();\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"for\": {\r\n                this.#setTarget();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #setTarget() {\r\n        const { htmlFor } = this;\r\n        if (htmlFor) {\r\n            const rootNode = this.getRootNode();\r\n            if (rootNode instanceof Document || rootNode instanceof ShadowRoot) {\r\n                const target = rootNode.getElementById(htmlFor);\r\n                if (target !== null) {\r\n                    const oldTarget = this.#target;\r\n                    const targetListenerObject = this.#targetListenerObject;\r\n                    if (oldTarget) {\r\n                        oldTarget.removeEventListener(\"mouseenter\", targetListenerObject);\r\n                        oldTarget.removeEventListener(\"mouseleave\", targetListenerObject);\r\n                    }\r\n                    target.addEventListener(\"mouseenter\", targetListenerObject);\r\n                    target.addEventListener(\"mouseleave\", targetListenerObject);\r\n                }\r\n                this.#target = target;\r\n            }\r\n            this.#position();\r\n        }\r\n    }\r\n    show(options) {\r\n        const { immediate = false } = options ?? {};\r\n        let toggleAnimation = this.#toggleAnimation;\r\n        if (toggleAnimation !== null) {\r\n            const { id } = toggleAnimation;\r\n            if (id === \"hide\") {\r\n                toggleAnimation.cancel();\r\n            }\r\n            else if (!immediate) {\r\n                return;\r\n            }\r\n        }\r\n        if (!this.visible) {\r\n            this.hidden = false;\r\n            toggleAnimation = this.animate([\r\n                { opacity: 0 },\r\n                { opacity: 1 }\r\n            ], {\r\n                id: \"show\",\r\n                delay: immediate ? 0 : SHOW_DELAY_MS,\r\n                duration: immediate ? 0 : ANIMATION_DURATION\r\n            });\r\n            const { finished } = toggleAnimation;\r\n            finished.then(() => {\r\n                this.visible = true;\r\n            }).catch(_ => void 0);\r\n            this.#toggleAnimation = toggleAnimation;\r\n            this.#position();\r\n        }\r\n        else {\r\n            this.#toggleAnimation = null;\r\n        }\r\n    }\r\n    hide(options) {\r\n        const { immediate = false } = options ?? {};\r\n        let toggleAnimation = this.#toggleAnimation;\r\n        if (toggleAnimation !== null) {\r\n            const { id } = toggleAnimation;\r\n            if (id === \"show\") {\r\n                toggleAnimation.cancel();\r\n            }\r\n            else if (!immediate) {\r\n                return;\r\n            }\r\n        }\r\n        if (this.visible) {\r\n            toggleAnimation = this.animate([\r\n                { opacity: 1 },\r\n                { opacity: 0 }\r\n            ], {\r\n                id: \"hide\",\r\n                delay: immediate ? 0 : HIDE_DELAY_MS,\r\n                duration: immediate ? 0 : ANIMATION_DURATION\r\n            });\r\n            const { finished } = toggleAnimation;\r\n            finished.then(() => {\r\n                this.visible = false;\r\n                this.hidden = true;\r\n            }).catch(_ => void 0);\r\n            this.#toggleAnimation = toggleAnimation;\r\n        }\r\n        else {\r\n            this.#toggleAnimation = null;\r\n        }\r\n    }\r\n    #arrow() {\r\n        return this.shadowRoot.querySelector(\"[part=arrow]\");\r\n    }\r\n    #position() {\r\n        const target = this.#target;\r\n        if (target !== null) {\r\n            const { top: targetTop, bottom: targetBottom, left: targetLeft, right: targetRight } = target.getBoundingClientRect();\r\n            const { width: tooltipWidth, height: tooltipHeight } = this.getBoundingClientRect();\r\n            const tooltipHalfWidth = tooltipWidth / 2;\r\n            const tooltipHalfHeight = tooltipHeight / 2;\r\n            const targetCenter = (targetRight + targetLeft) / 2;\r\n            const targetMiddle = (targetBottom + targetTop) / 2;\r\n            const { position, style: tooltipStyle } = this;\r\n            const arrow = this.#arrow();\r\n            const { style: arrowStyle } = arrow;\r\n            const { width: arrowWidth, height: arrowHeight } = arrow.getBoundingClientRect();\r\n            const arrowHalfWidth = arrowWidth / 2;\r\n            const arrowHalfHeight = arrowHeight / 2;\r\n            const { clientWidth } = document.body;\r\n            switch (position) {\r\n                case \"top\": {\r\n                    tooltipStyle.setProperty(\"top\", `${targetTop - tooltipHeight - arrowHalfHeight}px`);\r\n                    tooltipStyle.setProperty(\"left\", `${Math.max(0, Math.min(targetCenter - tooltipHalfWidth, clientWidth - tooltipWidth))}px`);\r\n                    arrowStyle.setProperty(\"top\", `${targetTop - arrowHalfHeight}px`);\r\n                    arrowStyle.setProperty(\"left\", `${targetCenter}px`);\r\n                    break;\r\n                }\r\n                case \"bottom\": {\r\n                    tooltipStyle.setProperty(\"top\", `${targetBottom + arrowHalfHeight}px`);\r\n                    tooltipStyle.setProperty(\"left\", `${Math.max(0, Math.min(targetCenter - tooltipHalfWidth, clientWidth - tooltipWidth))}px`);\r\n                    arrowStyle.setProperty(\"top\", `${targetBottom + arrowHalfHeight}px`);\r\n                    arrowStyle.setProperty(\"left\", `${targetCenter}px`);\r\n                    break;\r\n                }\r\n                case \"left\": {\r\n                    tooltipStyle.setProperty(\"top\", `${targetMiddle - tooltipHalfHeight}px`);\r\n                    tooltipStyle.setProperty(\"left\", `${targetLeft - tooltipWidth - arrowHalfWidth}px`);\r\n                    arrowStyle.setProperty(\"top\", `${targetMiddle}px`);\r\n                    arrowStyle.setProperty(\"left\", `${targetLeft - arrowHalfWidth}px`);\r\n                    break;\r\n                }\r\n                case \"right\": {\r\n                    tooltipStyle.setProperty(\"top\", `${targetMiddle - tooltipHalfHeight}px`);\r\n                    tooltipStyle.setProperty(\"left\", `${targetRight + arrowHalfWidth}px`);\r\n                    arrowStyle.setProperty(\"top\", `${targetMiddle}px`);\r\n                    arrowStyle.setProperty(\"left\", `${targetRight + arrowHalfWidth}px`);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleTargetMouseEnterEvent() {\r\n        this.show();\r\n        const toggleAnimation = this.#toggleAnimation;\r\n        if (toggleAnimation) {\r\n            const documentListenerObject = this.#documentListenerObject;\r\n            const { finished } = toggleAnimation;\r\n            finished.then(() => {\r\n                document.addEventListener(\"keydown\", documentListenerObject);\r\n            }).catch(_ => void 0);\r\n        }\r\n    }\r\n    #handleTargetMouseLeaveEvent() {\r\n        this.hide();\r\n        const toggleAnimation = this.#toggleAnimation;\r\n        if (toggleAnimation) {\r\n            const documentListenerObject = this.#documentListenerObject;\r\n            const { finished } = toggleAnimation;\r\n            finished.then(() => {\r\n                document.removeEventListener(\"keydown\", documentListenerObject);\r\n            }).catch(_ => void 0);\r\n        }\r\n    }\r\n    #handleDocumentKeyDownEvent(event) {\r\n        const { key } = event;\r\n        switch (key) {\r\n            case \"Escape\": {\r\n                this.hide({\r\n                    immediate: true\r\n                });\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true, name: \"for\" })\r\n], HTMLEToolTipElementBase.prototype, \"htmlFor\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, defaultValue: \"top\" })\r\n], HTMLEToolTipElementBase.prototype, \"position\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEToolTipElementBase.prototype, \"visible\", void 0);\r\nHTMLEToolTipElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-tooltip\"\r\n    })\r\n], HTMLEToolTipElementBase);\r\nvar HTMLEToolTipElement = HTMLEToolTipElementBase;\r\n//# sourceMappingURL=ToolTip.js.map","import { element } from \"editor/lib/elements/Element\";\r\nimport { GridColumnModel, GridModel, GridRowModel } from \"editor/lib/views/GridView\";\r\nimport { TreeModel } from \"editor/lib/views/TreeView\";\r\n\r\nimport { theme } from \"editor/lib/stylesheets/Theme\";\r\n\r\nimport { MyTreeItemModel, MyTreeView } from \"./src/MyTreeView\";\r\nimport { MyGridRowModel, MyGridView } from \"./src/MyGridView\";\r\n\r\nimport \"editor/lib/elements/containers/lists\";\r\nimport \"editor/lib/elements/containers/tabs\";\r\nimport \"editor/lib/elements/containers/menus\";\r\nimport \"editor/lib/elements/containers/status\";\r\nimport \"editor/lib/elements/misc\";\r\nimport { HTMLEToolTipElement } from \"editor/lib/elements/misc\";\r\n\r\nexport async function main() {\r\n    document.adoptedStyleSheets = [theme.stylesheet];\r\n    document.head.append(\r\n        ...Object.values(theme.images()).map(\r\n            (img) => element(\"link\", {\r\n                attributes: {\r\n                    rel: \"preload\",\r\n                    as: \"image\",\r\n                    href: img,\r\n                    crossorigin: \"anonymous\"\r\n                }\r\n            })\r\n        )\r\n    );\r\n    \r\n    const gridView = new MyGridView();\r\n    gridView.setModel(\r\n        new GridModel({\r\n            columns: [\r\n                new GridColumnModel({\r\n                    name: \"name\",\r\n                    type: String,\r\n                    label: \"Nom\",\r\n                    extract: (row) => (<MyGridRowModel>row).name\r\n                }),\r\n                new GridColumnModel({\r\n                    name: \"color\",\r\n                    type: String,\r\n                    label: \"Couleur\",\r\n                    extract: (row) => (<MyGridRowModel>row).color\r\n                }),\r\n                new GridColumnModel({\r\n                    name: \"age\",\r\n                    type: Number,\r\n                    label: \"Age\",\r\n                    extract: (row) => String((<MyGridRowModel>row).age),\r\n                    filters: [{\r\n                        name: \"Minors\",\r\n                        filter: (row) => (<MyGridRowModel>row).age < 18\r\n                    },{\r\n                        name: \"Majors\",\r\n                        filter: (row) => (<MyGridRowModel>row).age >= 18\r\n                    }]\r\n                })\r\n            ],\r\n            rows: [\r\n                new MyGridRowModel({\r\n                    id: 1,\r\n                    name: \"Louis\",\r\n                    age: 13,\r\n                    color: \"bleu\"\r\n                }),\r\n                new MyGridRowModel({\r\n                    id: 2,\r\n                    name: \"Marine\",\r\n                    age: 21,\r\n                    color: \"bleu\"\r\n                }),\r\n                new MyGridRowModel({\r\n                    id: 3,\r\n                    name: \"Jean-Christophe\",\r\n                    age: 32,\r\n                    color: \"rouge\"\r\n                }),\r\n                new MyGridRowModel({\r\n                    id: 4,\r\n                    name: \"Anne\",\r\n                    age: 54,\r\n                    color: \"jaune\"\r\n                }),\r\n                new MyGridRowModel({\r\n                    id: 5,\r\n                    name: \"Claude\",\r\n                    age: 61,\r\n                    color: \"noir\"\r\n                }),\r\n                new MyGridRowModel({\r\n                    id: 6,\r\n                    name: \"Benoît\",\r\n                    age: 38,\r\n                    color: \"vert\"\r\n                })\r\n            ]\r\n        })\r\n    );\r\n    document.body.append(gridView);\r\n    gridView.render();\r\n\r\n    const treeModel = new TreeModel({\r\n        items: [\r\n            new MyTreeItemModel({\r\n                id: \"TI 0\",\r\n                type: \"parent\",\r\n                items: [\r\n                    new MyTreeItemModel({\r\n                        id: \"TI 1A\",\r\n                        type: \"parent\",\r\n                        items: [\r\n                            new MyTreeItemModel({\r\n                                type: \"leaf\",\r\n                                id: \"TI 1AX\"\r\n                            }),\r\n                        ]\r\n                    }),\r\n                    new MyTreeItemModel({\r\n                        type: \"parent\",\r\n                        id: \"TI 1B\"\r\n                    })\r\n                ]\r\n            }),\r\n            new MyTreeItemModel({\r\n                id: \"TI 1\",\r\n                type: \"parent\",\r\n                items: [\r\n                    new MyTreeItemModel({\r\n                        id: \"TI 1A\",\r\n                        type: \"parent\",\r\n                        items: [\r\n                            new MyTreeItemModel({\r\n                                type: \"leaf\",\r\n                                id: \"TI 1AX\"\r\n                            }),\r\n                        ]\r\n                    }),\r\n                    new MyTreeItemModel({\r\n                        type: \"parent\",\r\n                        id: \"TI 1B\"\r\n                    })\r\n                ]\r\n            }),\r\n            new MyTreeItemModel({\r\n                type: \"leaf\",\r\n                id: \"TI 2\"\r\n            }),\r\n            new MyTreeItemModel({\r\n                type: \"leaf\",\r\n                id: \"TI 3\"\r\n            })\r\n        ]\r\n    });\r\n\r\n    const treeView = new MyTreeView();\r\n    treeView.draggable = true;\r\n    treeView.setModel(treeModel);\r\n    treeView.render();\r\n    document.body.append(treeView);\r\n\r\n    document.body.append(\r\n        ...[\r\n            \"builtins\",\r\n            \"tablist\",\r\n            \"sash\",\r\n            \"loaders\",\r\n            \"tree\",\r\n            \"menus\",\r\n            \"list\",\r\n            \"status\"\r\n        ].map(example => {\r\n            return element(\"details\", {\r\n                children: [\r\n                    element(\"summary\", {\r\n                        children: `${example}.html`\r\n                    }),\r\n                    element(\"e-import\", {\r\n                        attributes: {\r\n                            src: `example/${example}.html`\r\n                        }\r\n                    })\r\n                ]\r\n            })\r\n        })\r\n    );\r\n}"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","g","globalThis","this","Function","e","window","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","length","Error","replace","p","ModelChangeRecordBase","target","changeType","propertyName","oldValue","newValue","removedIndex","removedItems","insertedIndex","insertedItems","sortedIndices","constructor","init","undefined","ModelNodesList","PROPERTY_CHANGE","LIST_REMOVE","LIST_INSERT","LIST_SORT","ModelChangeRecord","items","slice","item","index","values","ModelEventBase","type","currentTarget","static","setCurrentTarget","event","setTarget","ModelEventTargetAccessor","ModelEvent","ModelEventTargetBase","Map","receiveEvent","callbacks","forEach","callback_i","addEventListener","callback","push","set","removeEventListener","callbackIndex","findIndex","splice","delete","dispatchEvent","ModelNodeBase","super","parentNode","setParent","isCyclicReference","ancestorNode","TypeError","beginChanges","endChanges","getRecords","property","records","record","triggerChange","node","handleRecord","ModelNodeRecordsAccessor","ModelNode","ReactiveProperty","ModelReactivePropertiesAccessor","getProperty","setProperty","ModelObjectBase","ModelObject","ModelList","item_i","indexOf","sort","compareFunction","indexedItems","map","i","indexedItem_a","indexedItem_b","indexedItem_i","prepend","_items","append","insert","Math","abs","remove","clear","removedItem_i","ModelChangeObserver","WeakMap","observe","options","references","reference","listener","bind","unobserve","disconnect","properties","propertiesFilter","childList","subtree","filter","record_i","includes","camelToTrain","str","toLowerCase","AttributeProperty","String","defaultValue","observed","name","observedAttributes","Reflect","Array","isArray","writable","Boolean","hasAttribute","setAttribute","removeAttribute","val","getAttribute","JSON","parse","stringify","Number","parseFloat","CustomElement","elementCtor","customElements","define","QueryProperty","propertyKey","selector","getter","withinShadowRoot","shadowRoot","querySelector","fragment","nodes","createDocumentFragment","tagName","attributes","dataset","children","listeners","element","createElement","entries","attributeName","attributeValue","toggleAttribute","elementDataset","from","name_i","listener_i","reactiveElementsMap","reactiveElementsFinalizationRegistry","FinalizationRegistry","heldValue","model","reactiveElement","reactiveElementsMapEntry","reactiveElementsArray","reactiveElementsPropertyObserver","reactiveElement_i","elementRef","react","deref","WeakRef","register","observerOptions","concat","property_i","reactiveChildElementsMap","reactiveChildElementsFinalizationRegistry","list","reactiveChildElement","reactiveChildrenElementsMapEntry","reactiveChildElementsArray","reactiveChildElementsObserver","range","listLength","reactiveChildElements_i","parentRef","mapping","placeholder","parent","firstChild","childrenCount","removeChild","insertedItemsArray","before","removedCount","createRange","removeEndIndex","setStartBefore","setEndAfter","deleteContents","childrenArray","index_i","reactiveChildElements","reactiveChildElementsMapEntry","replaceChildren","ViewBase","HTMLElement","setModel","renderLight","renderShadow","render","shadow","light","View","__decorate","decorators","desc","d","c","arguments","getOwnPropertyDescriptor","decorate","DEFAULT_THEME_HOVERED_ITEM_COLOR","DEFAULT_THEME_FOCUSED_ITEM_COLOR","DEFAULT_THEME_SELECTED_ITEM_COLOR","DEFAULT_THEME_ACTIVATED_ITEM_COLOR","DEFAULT_THEME_DROPTARGET_ITEM_COLOR","Theme","stylesheet","images","checkedImage","arrowRightImage","arrowDropDownImage","arrowDropUpImage","CSSStyleSheet","tint","variablesMap","cssRules","styleMap","theme","resetStylesheet","style","HTMLEHeightSashElementBase","attachShadow","mode","adoptedStylesheet","adoptedStyleSheets","targetComputedStyle","getComputedStyle","growdir","movementY","height","getPropertyValue","newHeight","trunc","computedNewHeight","Event","pointerId","controls","rootNode","getRootNode","getElementById","setPointerCapture","requestAnimationFrame","releasePointerCapture","HTMLEWidthSashElementBase","setWidth","width","max","movementX","newWidth","shadowTemplate","HTMLEGridCellElementBase","content","cloneNode","attributeChangedCallback","bubbles","HTMLEGridCellElement","HTMLEGridRowElementBase","cells","querySelectorAll","assignedElements","element_i","cell_i","posinset","HTMLEGridRowElement","HTMLEGridBodyElementBase","rows","HTMLEGridBodyElement","HTMLEGridHeadElementBase","HTMLEGridRowGroupElementBase","HTMLEGridRowGroupElement","HTMLEGridElementBase","activeCell","activeRow","body","head","createTreeWalker","NodeFilter","SHOW_ELEMENT","connectedCallback","tabIndex","beginSelection","endSelection","clearSelection","selectedCells","selectedRows","hidden","FILTER_ACCEPT","FILTER_SKIP","FILTER_REJECT","to","fromIndex","toIndex","min","position","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","nextVisibleRow","DOCUMENT_POSITION_PRECEDING","previousVisibleRow","selectedCell_i","selected","selectedRow_i","row_i","cell","active","currentNode","row","cellsWalker","lastChild","previousNode","nextNode","rowsWalker","root","closestRow","cellIndex","previousRow","previousRowCells","nextRow","nextRowCells","ctrlKey","shiftKey","selectby","composedPath","targetCell","find","target_i","lastSelectedCell","targetRow","lastSelectedRow","stopPropagation","firstRow","firstCell","lastRow","lastCell","preventDefault","previousCell","focus","preventScroll","nextCell","topCell","bottomCell","click","relatedTarget","closest","HTMLEMenuItemElementBase","internals","part","attachInternals","role","ariaChecked","ariaDisabled","ariaExpanded","ariaLabel","toggle","force","expanded","expand","collapse","menu","getBoundingClientRect","menuStyle","menuWidth","menuHeight","clientWidth","clientHeight","offsetLeft","offsetTop","overflowX","overflowY","HTMLEMenuItemElement","EMenuItem","assign","label","trigger","slot","tabindex","title","button","checkbox","radio","submenu","HTMLEMenuItemGroupElementBase","HTMLEMenuElementBase_1","toggleAnimations","HTMLEMenuItemGroupElement","radios","HTMLEMenuElementBase","activeIndex","activeItem","parseInt","positionContextual","x","y","scrollX","scrollY","left","top","contains","firstItem","walker","targetItem","checked","radio_i","nearestItem","contextual","error","HTMLEMenuElement","blur","cancel","toggleAnimation","animate","duration","finished","then","catch","finally","right","bottom","parentItem","menuRect","clientX","clientY","intersectsWithMouse","containsRelatedTarget","HTMLEMenuBarElementBase","disabled","previousSibling","nextSibling","Element","isExpanded","HTMLEMenuButtonElementBase","HTMLEMenuButtonElement","GridModel","columns","initRows","initColumns","getColumnByName","column_i","sortByColumn","column","sortOrder","sortorder","sortTest","row_1","row_2","cell_1","extract","cell_2","localeCompare","sign","GridColumnModel","filters","GridRowModel","id","GridViewBase","gridElement","setColumnDelegate","delegate","setCellDelegate","getRowElement","getColumnHeaderElement","getColumnCellsElements","multisectable","contextmenu","displayFilters","some","filter_i","addDisplayFilter","rowElement","removeDisplayFilter","filterIndex","removeAllDisplayFilters","class","toString","headers","targetHead","targetHeader","contextMenu","columnHeaderElement","maxWidth","reduce","removeProperty","matches","targetColumn","GridView","HTMLETreeItemElementBase","labelPart","textContent","HTMLETreeItemElement","HTMLETreeItemGroupElementBase","HTMLETreeItemGroupElement","HTMLETreeElementBase","dropTargetItem","selectedItems","nextVisibleItem","previousVisibleItem","selectedItem_i","droptarget","lastItem","Document","ShadowRoot","host","previousItem","nextItem","TreeModel","childItems","sortFunction","subtreeItems","item_a","item_b","flattenedInsertedItems","flatMap","insertedItem_i","of","flattenedRemovedItems","treeItem_i","getItemByUri","uri","itemsCount","uriLength","itemUri","itemUriLength","startsWith","TreeItemModelList","count","removedItemsGroups","TreeItemModel","group","list_i","children_i","child_i","level","TreeViewBase","treeElement","draggable","treeItemElement","closestItem","parentElement","treeItem","dragstart","drop","focusin","focusout","itemContentDelegate","itemToolbarDelegate","itemMenuDelegate","toolbar","treeitem","dragImageElement","span","targetTree","dataTransfer","selectedElements","selectedCount","selectedUris","uri_i","_","uris","uri_j","selectedUrisString","join","lastUri","dropEffect","setData","dragImage","setDragImage","targetUri","targetItemModel","transferedUris","getData","split","transferedItems","targetType","targetParentItem","targetList","sameLabelIndex","item_j","confirm","copyWithin","newElements","relatedPosition","DOCUMENT_POSITION_DISCONNECTED","itemToolbar","TreeView","MyTreeItemModel","childCount","visibility","show","hide","display","console","log","MyTreeItemModelList","result","MyTreeView","rel","href","badge","select","selectedOption","iconed","showEditItemDialog","visibilityItem","pressed","typeSelect","activeItemElement","selectItem","selectedItemsList","activeItemModel","dialog","method","for","autofocus","type_i","close","targetDialog","returnValue","form","formData","FormData","showModal","MyGridRowModel","age","color","MyGridView","shadowNode","insertBefore","input","searchFilter","setSearchFilter","HTMLInputElement","iconPartTemplate","HTMLEToolBarItemElementBase","iconPart","HTMLEToolBarItemElement","EToolBarItem","menubutton","HTMLEToolBarItemGroupElementBase","wasExpandedOnMouseDown","HTMLEToolBarItemGroupElement","HTMLEToolBarElementBase","HTMLEToolBarElement","HTMLEListItemElementBase","slotName","HTMLSpanElement","HTMLEListItemElement","HTMLEListItemGroupElementBase","HTMLEListItemGroupElement","HTMLEListElementBase","lastSelectedItem","HTMLETabPanelElementBase","tab","upgrade","HTMLETabElementBase","panel","HTMLETabElement","HTMLETabListElementBase","tabs","activeTab","selectedTab","tabToSelect","setTimeout","tabWidth","tabHeight","fill","easing","pseudoElement","targetTab","tab_i","HTMLEStatusItemElementBase","HTMLEStatusItemElement","onclick","HTMLEStatusItemGroupElementBase","HTMLEStatusItemGroupElement","HTMLEStatusBarElementBase","HTMLEHandleElementBase","rectWidth","rectHeight","outerElement","outerRectLeft","outerRectRight","outerRectTop","outerRectBottom","newLeft","newTop","CustomEvent","HTMLEImportElementBase","async","outerHTML","fetch","response","ok","text","statusText","barShadowTemplate","spinnerShadowTemplate","HTMLELoaderElementBase","HTMLESeparatorElementBase","HTMLEToolTipElementBase","tooltip","handleEvent","htmlFor","oldTarget","targetListenerObject","immediate","visible","opacity","delay","targetTop","targetBottom","targetLeft","targetRight","tooltipWidth","tooltipHeight","tooltipHalfWidth","tooltipHalfHeight","targetCenter","targetMiddle","tooltipStyle","arrow","arrowStyle","arrowWidth","arrowHeight","arrowHalfWidth","arrowHalfHeight","documentListenerObject","main","img","as","crossorigin","gridView","treeModel","treeView","example"],"sourceRoot":""}