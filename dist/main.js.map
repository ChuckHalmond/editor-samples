{"version":3,"file":"main.js","mappings":"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","sources":["webpack://main/webpack/bootstrap","webpack://main/webpack/runtime/define property getters","webpack://main/webpack/runtime/global","webpack://main/webpack/runtime/hasOwnProperty shorthand","webpack://main/webpack/runtime/make namespace object","webpack://main/webpack/runtime/publicPath","webpack://main/../editor/lib/models/Model.js","webpack://main/../editor/lib/elements/Snippets.js","webpack://main/../editor/lib/elements/Element.js","webpack://main/../editor/lib/views/View.js","webpack://main/../editor/lib/stylesheets/Theme.js","webpack://main/../editor/lib/stylesheets/Reset.js","webpack://main/../editor/lib/elements/controls/sashes/HeightSash.js","webpack://main/../editor/lib/elements/controls/sashes/WidthSash.js","webpack://main/../editor/lib/elements/containers/grid/GridCell.js","webpack://main/../editor/lib/elements/containers/grid/GridRow.js","webpack://main/../editor/lib/elements/containers/grid/GridBody.js","webpack://main/../editor/lib/elements/containers/grid/GridHead.js","webpack://main/../editor/lib/elements/containers/grid/GridRowGroup.js","webpack://main/../editor/lib/elements/containers/grid/Grid.js","webpack://main/../editor/lib/elements/containers/menus/MenuItem.js","webpack://main/../editor/lib/elements/containers/menus/MenuItemGroup.js","webpack://main/../editor/lib/elements/containers/menus/Menu.js","webpack://main/../editor/lib/elements/containers/menus/MenuBar.js","webpack://main/../editor/lib/elements/containers/menus/MenuButton.js","webpack://main/../editor/lib/views/GridView.js","webpack://main/../editor/lib/elements/containers/trees/TreeItem.js","webpack://main/../editor/lib/elements/containers/trees/TreeItemGroup.js","webpack://main/../editor/lib/elements/containers/trees/Tree.js","webpack://main/../editor/lib/views/TreeView.js","webpack://main/./src/MyTreeView.ts","webpack://main/./src/MyGridView.ts","webpack://main/../editor/lib/elements/containers/toolbars/ToolBarItem.js","webpack://main/../editor/lib/elements/containers/toolbars/ToolBarItemGroup.js","webpack://main/../editor/lib/elements/containers/toolbars/ToolBar.js","webpack://main/../editor/lib/elements/containers/lists/ListItem.js","webpack://main/../editor/lib/elements/containers/lists/ListItemGroup.js","webpack://main/../editor/lib/elements/containers/lists/List.js","webpack://main/../editor/lib/elements/containers/tabs/TabPanel.js","webpack://main/../editor/lib/elements/containers/tabs/Tab.js","webpack://main/../editor/lib/elements/containers/tabs/TabList.js","webpack://main/../editor/lib/elements/containers/status/StatusItem.js","webpack://main/../editor/lib/elements/containers/status/StatusItemGroup.js","webpack://main/../editor/lib/elements/containers/status/StatusBar.js","webpack://main/../editor/lib/elements/misc/Handle.js","webpack://main/../editor/lib/elements/misc/Import.js","webpack://main/../editor/lib/elements/misc/Loader.js","webpack://main/../editor/lib/elements/misc/Separator.js","webpack://main/../editor/lib/elements/misc/ToolTip.js","webpack://main/./main.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","export { ModelChangeRecord };\r\nexport { ModelEvent };\r\nexport { ModelNode };\r\nexport { ModelObject };\r\nexport { ReactiveProperty };\r\nexport { ModelList };\r\nexport { ModelChangeObserver };\r\nclass ModelChangeRecordBase {\r\n    target;\r\n    changeType;\r\n    propertyName;\r\n    oldValue;\r\n    newValue;\r\n    removedIndex;\r\n    removedItems;\r\n    insertedIndex;\r\n    insertedItems;\r\n    sortedIndices;\r\n    constructor(init) {\r\n        this.target = init.target;\r\n        this.changeType = init.changeType;\r\n        this.propertyName = init.propertyName ?? null;\r\n        this.oldValue = init.oldValue ?? undefined;\r\n        this.newValue = init.newValue ?? undefined;\r\n        this.removedIndex = init.removedIndex ?? 0;\r\n        this.removedItems = new ModelNodesList(init.removedItems ?? []);\r\n        this.insertedIndex = init.insertedIndex ?? 0;\r\n        this.insertedItems = new ModelNodesList(init.insertedItems ?? []);\r\n        this.sortedIndices = init.sortedIndices ?? [];\r\n    }\r\n    static get PROPERTY_CHANGE() {\r\n        return 1;\r\n    }\r\n    static get LIST_REMOVE() {\r\n        return 2;\r\n    }\r\n    static get LIST_INSERT() {\r\n        return 3;\r\n    }\r\n    static get LIST_SORT() {\r\n        return 4;\r\n    }\r\n    get PROPERTY_CHANGE() {\r\n        return ModelChangeRecordBase.PROPERTY_CHANGE;\r\n    }\r\n    get LIST_REMOVE() {\r\n        return ModelChangeRecordBase.LIST_REMOVE;\r\n    }\r\n    get LIST_INSERT() {\r\n        return ModelChangeRecordBase.LIST_INSERT;\r\n    }\r\n    get LIST_SORT() {\r\n        return ModelChangeRecordBase.LIST_SORT;\r\n    }\r\n}\r\nvar ModelChangeRecord = ModelChangeRecordBase;\r\nclass ModelNodesListBase {\r\n    #items;\r\n    constructor(items) {\r\n        this.#items = items.slice();\r\n    }\r\n    get length() {\r\n        return this.#items.length;\r\n    }\r\n    item(index) {\r\n        return this.#items[index] ?? null;\r\n    }\r\n    values() {\r\n        return this.#items.values();\r\n    }\r\n}\r\nvar ModelNodesList = ModelNodesListBase;\r\nclass ModelEventBase {\r\n    type;\r\n    #currentTarget;\r\n    #target;\r\n    constructor(type) {\r\n        this.type = type;\r\n        this.#currentTarget = null;\r\n        this.#target = null;\r\n    }\r\n    get currentTarget() {\r\n        return this.#currentTarget;\r\n    }\r\n    get target() {\r\n        return this.#target;\r\n    }\r\n    static ModelEventTargetAccessor = new class ModelEventTargetAccessor {\r\n        setCurrentTarget(event, currentTarget) {\r\n            if (event instanceof ModelEventBase) {\r\n                event.#currentTarget = currentTarget;\r\n            }\r\n        }\r\n        setTarget(event, target) {\r\n            if (event instanceof ModelEventBase) {\r\n                event.#target = target;\r\n            }\r\n        }\r\n    };\r\n}\r\nvar ModelEventTargetAccessor = ModelEventBase.ModelEventTargetAccessor;\r\ndelete ModelEventBase.ModelEventTargetAccessor;\r\nvar ModelEvent = ModelEventBase;\r\nclass ModelEventTargetBase {\r\n    #callbacks;\r\n    constructor() {\r\n        this.#callbacks = new Map();\r\n    }\r\n    receiveEvent(event) {\r\n        const { type } = event;\r\n        const callbacks = this.#callbacks.get(type);\r\n        ModelEventTargetAccessor.setCurrentTarget(event, this);\r\n        if (callbacks) {\r\n            callbacks.forEach((callback_i) => {\r\n                callback_i(event);\r\n            });\r\n        }\r\n    }\r\n    addEventListener(type, callback) {\r\n        const callbacks = this.#callbacks.get(type);\r\n        if (callbacks) {\r\n            callbacks.push(callback);\r\n        }\r\n        else {\r\n            this.#callbacks.set(type, [callback]);\r\n        }\r\n    }\r\n    removeEventListener(type, callback) {\r\n        const callbacks = this.#callbacks.get(type);\r\n        if (callbacks) {\r\n            const callbackIndex = callbacks.findIndex(callback_i => callback_i == callback);\r\n            if (callbackIndex > -1) {\r\n                callbacks.splice(callbackIndex, 1);\r\n            }\r\n            if (callbacks.length == 0) {\r\n                this.#callbacks.delete(type);\r\n            }\r\n        }\r\n    }\r\n    dispatchEvent(event) {\r\n        ModelEventTargetAccessor.setTarget(event, this);\r\n        this.receiveEvent(event);\r\n    }\r\n}\r\nvar ModelEventTarget = ModelEventTargetBase;\r\nclass ModelNodeBase extends ModelEventTargetBase {\r\n    #parentNode;\r\n    #records;\r\n    #isRecording;\r\n    constructor() {\r\n        super();\r\n        this.#parentNode = null;\r\n        this.#records = [];\r\n        this.#isRecording = false;\r\n    }\r\n    get parentNode() {\r\n        return this.#parentNode;\r\n    }\r\n    setParent(parentNode) {\r\n        if (parentNode !== null) {\r\n            let isCyclicReference = parentNode == this;\r\n            let { parentNode: ancestorNode } = parentNode;\r\n            while (!isCyclicReference && ancestorNode !== null) {\r\n                ({ parentNode: ancestorNode } = ancestorNode);\r\n                isCyclicReference = ancestorNode == this;\r\n            }\r\n            if (!isCyclicReference) {\r\n                this.#parentNode = parentNode;\r\n            }\r\n            else {\r\n                throw new TypeError(\"Failed to set parent on ModelNode: circular reference detected in the hierarchy.\");\r\n            }\r\n        }\r\n        else {\r\n            this.#parentNode = null;\r\n        }\r\n    }\r\n    beginChanges() {\r\n        this.#isRecording = true;\r\n    }\r\n    endChanges() {\r\n        this.dispatchEvent(new ModelEvent(\"modelchange\"));\r\n        this.#records.splice(0);\r\n        this.#isRecording = false;\r\n    }\r\n    getRecords() {\r\n        return this.#records.slice();\r\n    }\r\n    receiveEvent(event) {\r\n        super.receiveEvent(event);\r\n        const { parentNode } = this;\r\n        if (parentNode) {\r\n            parentNode.receiveEvent(event);\r\n        }\r\n    }\r\n    #triggerChange(property, oldValue, newValue) {\r\n        const records = this.#records;\r\n        const record = new ModelChangeRecord({\r\n            target: this,\r\n            changeType: ModelChangeRecord.PROPERTY_CHANGE,\r\n            propertyName: property,\r\n            oldValue, newValue\r\n        });\r\n        records.push(record);\r\n        if (!this.#isRecording) {\r\n            this.dispatchEvent(new ModelEvent(\"modelchange\"));\r\n            records.splice(0);\r\n        }\r\n    }\r\n    #handleRecord(record) {\r\n        this.#records.push(record);\r\n        if (!this.#isRecording) {\r\n            this.dispatchEvent(new ModelEvent(\"modelchange\"));\r\n            this.#records.splice(0);\r\n        }\r\n    }\r\n    static ModelNodeRecordsAccessor = new class ModelNodeRecordsAccessor {\r\n        triggerChange(node, property, oldValue, newValue) {\r\n            if (node instanceof ModelNodeBase) {\r\n                node.#triggerChange(property, oldValue, newValue);\r\n            }\r\n        }\r\n        handleRecord(node, record) {\r\n            if (node instanceof ModelNodeBase) {\r\n                node.#handleRecord(record);\r\n            }\r\n        }\r\n    };\r\n}\r\nvar ModelNodeRecordsAccessor = ModelNodeBase.ModelNodeRecordsAccessor;\r\ndelete ModelNodeBase.ModelNodeRecordsAccessor;\r\nvar ModelNode = ModelNodeBase;\r\nconst ReactiveProperty = function () {\r\n    return (target, property) => {\r\n        const { constructor } = target;\r\n        const { prototype } = constructor;\r\n        const setter = function (value) {\r\n            const oldValue = ModelReactivePropertiesAccessor.getProperty(this, property);\r\n            ModelReactivePropertiesAccessor.setProperty(this, property, value);\r\n            if (value !== oldValue) {\r\n                ModelNodeRecordsAccessor.triggerChange(this, property, oldValue, value);\r\n            }\r\n            return true;\r\n        };\r\n        const getter = function () {\r\n            return ModelReactivePropertiesAccessor.getProperty(this, property);\r\n        };\r\n        Object.defineProperty(prototype, property, {\r\n            set: setter,\r\n            get: getter,\r\n            enumerable: true\r\n        });\r\n    };\r\n};\r\nclass ModelObjectBase extends ModelNodeBase {\r\n    #properties;\r\n    constructor() {\r\n        super();\r\n        this.#properties = new Map();\r\n    }\r\n    static ModelReactivePropertiesAccessor = new class ModelReactivePropertiesAccessor {\r\n        setProperty(node, property, value) {\r\n            if (node instanceof ModelObjectBase) {\r\n                node.#properties.set(property, value);\r\n            }\r\n        }\r\n        getProperty(node, property) {\r\n            if (node instanceof ModelObjectBase) {\r\n                return node.#properties.get(property);\r\n            }\r\n        }\r\n    };\r\n}\r\nvar ModelReactivePropertiesAccessor = ModelObjectBase.ModelReactivePropertiesAccessor;\r\ndelete ModelObjectBase.ModelReactivePropertiesAccessor;\r\nvar ModelObject = ModelObjectBase;\r\nclass ModelListBase extends ModelNodeBase {\r\n    #items;\r\n    constructor(items) {\r\n        super();\r\n        this.#items = items?.slice() ?? [];\r\n    }\r\n    setParent(parentNode) {\r\n        super.setParent(parentNode);\r\n        this.#items.forEach((item_i) => {\r\n            item_i.setParent(parentNode);\r\n        });\r\n    }\r\n    get length() {\r\n        return this.#items.length;\r\n    }\r\n    get(index) {\r\n        return this.#items[index] ?? null;\r\n    }\r\n    index(item) {\r\n        return this.#items.indexOf(item);\r\n    }\r\n    values() {\r\n        return this.#items.values();\r\n    }\r\n    sort(compareFunction) {\r\n        const items = this.#items;\r\n        const indexedItems = items.map((item_i, i) => {\r\n            return {\r\n                item: item_i,\r\n                index: i\r\n            };\r\n        });\r\n        indexedItems.sort((indexedItem_a, indexedItem_b) => {\r\n            return compareFunction(indexedItem_a.item, indexedItem_b.item);\r\n        });\r\n        this.#items = indexedItems.map(indexedItem_i => indexedItem_i.item);\r\n        const record = new ModelChangeRecord({\r\n            target: this,\r\n            changeType: ModelChangeRecord.LIST_SORT,\r\n            sortedIndices: indexedItems.map(indexedItem_i => indexedItem_i.index)\r\n        });\r\n        ModelNodeRecordsAccessor.handleRecord(this, record);\r\n    }\r\n    prepend(...items) {\r\n        const _items = this.#items;\r\n        const { parentNode } = this;\r\n        if (parentNode) {\r\n            items.forEach(item_i => {\r\n                item_i.setParent(parentNode);\r\n            });\r\n        }\r\n        _items.splice(0, 0, ...items);\r\n        const record = new ModelChangeRecord({\r\n            target: this,\r\n            changeType: ModelChangeRecord.LIST_INSERT,\r\n            insertedIndex: 0,\r\n            insertedItems: items\r\n        });\r\n        ModelNodeRecordsAccessor.handleRecord(this, record);\r\n    }\r\n    append(...items) {\r\n        const _items = this.#items;\r\n        const { length } = _items;\r\n        const { parentNode } = this;\r\n        if (parentNode) {\r\n            items.forEach(item_i => {\r\n                item_i.setParent(parentNode);\r\n            });\r\n        }\r\n        _items.push(...items);\r\n        const record = new ModelChangeRecord({\r\n            target: this,\r\n            changeType: ModelChangeRecord.LIST_INSERT,\r\n            insertedIndex: length,\r\n            insertedItems: items\r\n        });\r\n        ModelNodeRecordsAccessor.handleRecord(this, record);\r\n    }\r\n    insert(index, ...items) {\r\n        const _items = this.#items;\r\n        const { length } = _items;\r\n        const positiveIndex = Math.abs(index);\r\n        if (positiveIndex <= length) {\r\n            if (index >= 0) {\r\n                const { parentNode } = this;\r\n                items.forEach(item_i => {\r\n                    item_i.setParent(parentNode);\r\n                });\r\n                if (index < length) {\r\n                    _items.splice(index, 0, ...items);\r\n                }\r\n                else {\r\n                    _items.push(...items);\r\n                }\r\n            }\r\n            else if (index < 0) {\r\n                index = length - index;\r\n                const { parentNode } = this;\r\n                if (parentNode) {\r\n                    items.forEach(item_i => {\r\n                        item_i.setParent(parentNode);\r\n                    });\r\n                }\r\n                _items.splice(index, 0, ...items);\r\n            }\r\n            const record = new ModelChangeRecord({\r\n                target: this,\r\n                changeType: ModelChangeRecord.LIST_INSERT,\r\n                insertedIndex: index,\r\n                insertedItems: items.slice()\r\n            });\r\n            ModelNodeRecordsAccessor.handleRecord(this, record);\r\n        }\r\n    }\r\n    remove(item) {\r\n        const _items = this.#items;\r\n        const index = _items.indexOf(item);\r\n        if (index > -1) {\r\n            const item = _items.splice(index, 1)[0];\r\n            const { parentNode } = this;\r\n            if (parentNode) {\r\n                item.setParent(null);\r\n            }\r\n            const record = new ModelChangeRecord({\r\n                target: this,\r\n                changeType: ModelChangeRecord.LIST_REMOVE,\r\n                removedIndex: index,\r\n                removedItems: [item]\r\n            });\r\n            ModelNodeRecordsAccessor.handleRecord(this, record);\r\n        }\r\n    }\r\n    clear() {\r\n        const items = this.#items;\r\n        const { length } = items;\r\n        if (length > 0) {\r\n            const removedItems = items.splice(0);\r\n            const { parentNode } = this;\r\n            if (parentNode) {\r\n                removedItems.forEach((removedItem_i) => {\r\n                    removedItem_i.setParent(null);\r\n                });\r\n            }\r\n            const record = new ModelChangeRecord({\r\n                target: this,\r\n                changeType: ModelChangeRecord.LIST_REMOVE,\r\n                removedIndex: 0,\r\n                removedItems: removedItems\r\n            });\r\n            ModelNodeRecordsAccessor.handleRecord(this, record);\r\n        }\r\n    }\r\n}\r\n;\r\nvar ModelList = ModelListBase;\r\nclass ModelChangeObserverBase {\r\n    #callback;\r\n    #records;\r\n    #disconnected;\r\n    #references;\r\n    constructor(callback) {\r\n        this.#callback = callback;\r\n        this.#records = [];\r\n        this.#disconnected = false;\r\n        this.#references = new WeakMap();\r\n    }\r\n    observe(node, options) {\r\n        this.#disconnected = false;\r\n        const references = this.#references;\r\n        let reference = references.get(node);\r\n        if (!reference) {\r\n            const listener = this.#handleModelEvent.bind(this);\r\n            node.addEventListener(\"modelchange\", listener);\r\n            reference = { listener, options };\r\n            references.set(node, reference);\r\n        }\r\n        else {\r\n            references.set(node, reference);\r\n        }\r\n    }\r\n    unobserve(node) {\r\n        const references = this.#references;\r\n        let reference = references.get(node);\r\n        if (reference) {\r\n            const { listener } = reference;\r\n            node.removeEventListener(\"modelchange\", listener);\r\n        }\r\n    }\r\n    disconnect() {\r\n        this.#records.splice(0);\r\n        this.#disconnected = true;\r\n    }\r\n    #trigger() {\r\n        const records = this.#records.splice(0);\r\n        if (records.length > 0) {\r\n            this.#callback(records);\r\n        }\r\n    }\r\n    #handleModelEvent(event) {\r\n        if (!this.#disconnected) {\r\n            const { target, currentTarget } = event;\r\n            const reference = this.#references.get(currentTarget);\r\n            if (reference) {\r\n                const { options } = reference;\r\n                const { properties, propertiesFilter, childList, subtree } = options;\r\n                if (subtree) {\r\n                    if (properties && target instanceof ModelNode) {\r\n                        if (propertiesFilter) {\r\n                            this.#records.push(...target.getRecords()\r\n                                .filter(record_i => {\r\n                                const { propertyName } = record_i;\r\n                                return propertiesFilter.includes(propertyName);\r\n                            }));\r\n                        }\r\n                        else {\r\n                            this.#records.push(...target.getRecords());\r\n                        }\r\n                        this.#trigger();\r\n                    }\r\n                    else if (childList && target instanceof ModelList) {\r\n                        this.#records.push(...target.getRecords());\r\n                        this.#trigger();\r\n                    }\r\n                }\r\n                else if (target == currentTarget) {\r\n                    if (properties && target instanceof ModelNode) {\r\n                        if (propertiesFilter) {\r\n                            this.#records.push(...target.getRecords()\r\n                                .filter(record_i => {\r\n                                const { propertyName } = record_i;\r\n                                return propertiesFilter.includes(propertyName);\r\n                            }));\r\n                        }\r\n                        else {\r\n                            this.#records.push(...target.getRecords());\r\n                        }\r\n                        this.#trigger();\r\n                    }\r\n                    else if (childList && target instanceof ModelList) {\r\n                        this.#records.push(...target.getRecords());\r\n                        this.#trigger();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nvar ModelChangeObserver = ModelChangeObserverBase;\r\n//# sourceMappingURL=Model.js.map","export { snakeToCamel };\r\nexport { camelToSnake };\r\nexport { trainToCamel };\r\nexport { camelToTrain };\r\nfunction snakeToCamel(str) {\r\n    return str.split('_').map(str => str.charAt(0).toUpperCase() + str.substring(1).toLowerCase()).join(\"\");\r\n}\r\nfunction camelToSnake(str) {\r\n    return str.replace(/(?<!^)(?=[A-Z])/g, '_').toLowerCase();\r\n}\r\nfunction trainToCamel(str) {\r\n    return str.split('-').map(str => str.charAt(0).toUpperCase() + str.substring(1).toLowerCase()).join(\"\");\r\n}\r\nfunction camelToTrain(str) {\r\n    return str.replace(/(?<!^)(?=[A-Z])/g, '-').toLowerCase();\r\n}\r\n//# sourceMappingURL=Snippets.js.map","import { ModelChangeObserver } from \"../models/Model\";\r\nimport { camelToTrain } from \"./Snippets\";\r\nexport { CustomElement };\r\nexport { QueryProperty };\r\nexport { QueryAllProperty };\r\nexport { AttributeProperty };\r\nexport { reactiveElement };\r\nexport { revokeReactiveElement };\r\nexport { reactiveChildElements };\r\nexport { revokeReactiveChildElements };\r\nexport { element };\r\nexport { fragment };\r\nexport { textNode };\r\nexport { areAttributesMatching };\r\nexport { AttributeMutationMixinBase };\r\nexport { trimMultilineIndent };\r\nexport { Stylesheet };\r\nexport { reactiveElementsMap };\r\nconst AttributeProperty = function (init) {\r\n    return (target, property) => {\r\n        const { constructor } = target;\r\n        const { prototype } = constructor;\r\n        const propertyName = String(property);\r\n        const { defaultValue = null, observed = false, name = camelToTrain(propertyName) } = init;\r\n        if (observed) {\r\n            const observedAttributes = Reflect.get(constructor, \"observedAttributes\", constructor);\r\n            if (Array.isArray(observedAttributes)) {\r\n                observedAttributes.push(name);\r\n            }\r\n            else {\r\n                Object.defineProperty(constructor, \"observedAttributes\", {\r\n                    value: [name],\r\n                    writable: false\r\n                });\r\n            }\r\n        }\r\n        const { type } = init;\r\n        switch (type) {\r\n            case Boolean: {\r\n                Object.defineProperty(prototype, propertyName, {\r\n                    get: function () {\r\n                        return this.hasAttribute(name);\r\n                    },\r\n                    set: function (value) {\r\n                        if (value) {\r\n                            this.setAttribute(name, \"\");\r\n                        }\r\n                        else {\r\n                            this.removeAttribute(name);\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            }\r\n            case Object: {\r\n                Object.defineProperty(prototype, propertyName, {\r\n                    get: function () {\r\n                        const val = this.getAttribute(name);\r\n                        return (val !== null) ? JSON.parse(val) : defaultValue;\r\n                    },\r\n                    set: function (value) {\r\n                        if (value !== null) {\r\n                            this.setAttribute(name, JSON.stringify(value));\r\n                        }\r\n                        else {\r\n                            this.removeAttribute(name);\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            }\r\n            case Number: {\r\n                Object.defineProperty(prototype, propertyName, {\r\n                    get: function () {\r\n                        const val = this.getAttribute(name);\r\n                        return (val !== null) ? parseFloat(val) : defaultValue;\r\n                    },\r\n                    set: function (value) {\r\n                        if (value !== null) {\r\n                            this.setAttribute(name, value);\r\n                        }\r\n                        else {\r\n                            this.removeAttribute(name);\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            }\r\n            case String:\r\n            default: {\r\n                Object.defineProperty(prototype, propertyName, {\r\n                    get: function () {\r\n                        const val = this.getAttribute(name);\r\n                        return (val !== null) ? val : defaultValue;\r\n                    },\r\n                    set: function (value) {\r\n                        if (value !== null) {\r\n                            this.setAttribute(name, value);\r\n                        }\r\n                        else {\r\n                            this.removeAttribute(name);\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            }\r\n        }\r\n    };\r\n};\r\nfunction Stylesheet(text) {\r\n    const stylesheet = new CSSStyleSheet();\r\n    stylesheet.replaceSync(text);\r\n    return stylesheet;\r\n}\r\nfunction trimMultilineIndent(text) {\r\n    const newlineIndex = text.indexOf(\"\\n\");\r\n    text = text.substring(newlineIndex + 1);\r\n    const indentMatch = text.match(/^[\\s]*/);\r\n    if (indentMatch) {\r\n        const indent = text.substring(0, indentMatch[0].length);\r\n        text = text.replaceAll(indent, \"\").trimEnd();\r\n    }\r\n    return text;\r\n}\r\nconst CustomElement = function (init) {\r\n    return (elementCtor) => {\r\n        const { name, options } = init;\r\n        if (!customElements.get(name)) {\r\n            customElements.define(name, elementCtor, options);\r\n        }\r\n        return elementCtor;\r\n    };\r\n};\r\nconst QueryProperty = function (init) {\r\n    return (target, propertyKey) => {\r\n        const { constructor } = target;\r\n        const { prototype } = constructor;\r\n        const propertyName = String(propertyKey);\r\n        const { selector } = init;\r\n        const withinShadowRoot = init.withinShadowRoot ?? false;\r\n        const getter = withinShadowRoot ? function () {\r\n            return this.shadowRoot.querySelector(selector);\r\n        } : function () {\r\n            return this.querySelector(selector);\r\n        };\r\n        Object.defineProperty(prototype, propertyName, {\r\n            get: getter\r\n        });\r\n    };\r\n};\r\nconst QueryAllProperty = function (init) {\r\n    return (target, propertyKey) => {\r\n        const { constructor } = target;\r\n        const { prototype } = constructor;\r\n        const propertyName = String(propertyKey);\r\n        const { selector } = init;\r\n        const withinShadowRoot = init.withinShadowRoot ?? false;\r\n        const getter = withinShadowRoot ? function () {\r\n            return Array.from(this.shadowRoot.querySelectorAll(selector));\r\n        } : function () {\r\n            return Array.from(this.querySelectorAll(selector));\r\n        };\r\n        Object.defineProperty(prototype, propertyName, {\r\n            get: getter\r\n        });\r\n    };\r\n};\r\nfunction fragment(...nodes) {\r\n    const fragment = document.createDocumentFragment();\r\n    fragment.append(...nodes);\r\n    return fragment;\r\n}\r\nfunction textNode(text) {\r\n    return document.createTextNode(text);\r\n}\r\nfunction element(tagName, init) {\r\n    if (init) {\r\n        const { options, attributes, dataset, children, listeners } = init;\r\n        const element = document.createElement(tagName, options);\r\n        if (attributes) {\r\n            Object.entries(attributes).forEach(([attributeName, attributeValue]) => {\r\n                if (attributeValue !== undefined) {\r\n                    if (typeof attributeValue === \"boolean\") {\r\n                        element.toggleAttribute(camelToTrain(attributeName), attributeValue);\r\n                    }\r\n                    else {\r\n                        element.setAttribute(camelToTrain(attributeName), String(attributeValue));\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (dataset) {\r\n            const { dataset: elementDataset } = element;\r\n            Object.keys(dataset).forEach((datasetEntry_i) => {\r\n                elementDataset[datasetEntry_i] = String(dataset[datasetEntry_i]);\r\n            });\r\n        }\r\n        if (children) {\r\n            if (typeof children === \"function\") {\r\n                children(element);\r\n            }\r\n            else if (typeof children === \"object\" && \"length\" in children) {\r\n                element.append(...Array.from(children));\r\n            }\r\n            else {\r\n                element.append(children);\r\n            }\r\n        }\r\n        if (listeners) {\r\n            Object.entries(listeners).forEach(([name_i, listener_i]) => {\r\n                if (Array.isArray(listener_i)) {\r\n                    element.addEventListener(name_i, listener_i[0], listener_i[1]);\r\n                }\r\n                else {\r\n                    element.addEventListener(name_i, listener_i);\r\n                }\r\n            });\r\n        }\r\n        return element;\r\n    }\r\n    return document.createElement(tagName);\r\n}\r\nconst reactiveElementsMap = new WeakMap();\r\nconst reactiveElementsFinalizationRegistry = new FinalizationRegistry((heldValue) => {\r\n    const { model, reactiveElement } = heldValue;\r\n    const reactiveElementsMapEntry = reactiveElementsMap.get(model);\r\n    if (reactiveElementsMapEntry !== undefined) {\r\n        const { reactiveElementsArray } = reactiveElementsMapEntry;\r\n        reactiveElementsArray.splice(reactiveElementsArray.indexOf(reactiveElement), 1);\r\n    }\r\n});\r\nconst reactiveElementsPropertyObserver = new ModelChangeObserver((records) => {\r\n    records.forEach((record_i) => {\r\n        const { target, propertyName, oldValue, newValue } = record_i;\r\n        const { reactiveElementsArray } = reactiveElementsMap.get(target);\r\n        reactiveElementsArray.forEach(reactiveElement_i => {\r\n            const { elementRef, react, properties } = reactiveElement_i;\r\n            const element = elementRef.deref();\r\n            if (element) {\r\n                if (properties.includes(propertyName)) {\r\n                    react(element, propertyName, oldValue, newValue);\r\n                }\r\n            }\r\n        });\r\n    });\r\n});\r\nfunction reactiveElement(model, element, properties, react) {\r\n    const elementRef = new WeakRef(element);\r\n    const reactiveElement = { elementRef, react, properties };\r\n    const reactiveElementsMapEntry = reactiveElementsMap.get(model);\r\n    reactiveElementsFinalizationRegistry.register(element, { model, reactiveElement });\r\n    if (!reactiveElementsMapEntry) {\r\n        const observerOptions = {\r\n            properties: true,\r\n            propertiesFilter: properties\r\n        };\r\n        const reactiveElementsArray = [reactiveElement];\r\n        reactiveElementsMap.set(model, { observerOptions, reactiveElementsArray });\r\n        reactiveElementsPropertyObserver.observe(model, observerOptions);\r\n    }\r\n    else {\r\n        const { reactiveElementsArray, observerOptions } = reactiveElementsMapEntry;\r\n        const { propertiesFilter } = observerOptions;\r\n        reactiveElementsArray.push(reactiveElement);\r\n        observerOptions.propertiesFilter = propertiesFilter ?\r\n            propertiesFilter.concat(properties.filter(property_i => !propertiesFilter.includes(property_i))) : properties.filter((property_i, i, properties) => properties.indexOf(property_i) === i);\r\n    }\r\n    properties.forEach((property_i) => {\r\n        if (property_i in model) {\r\n            const value = Reflect.get(model, property_i, model);\r\n            react(element, property_i, undefined, value);\r\n        }\r\n    });\r\n    return element;\r\n}\r\nfunction revokeReactiveElement(model, element) {\r\n    const reactiveElementsMapEntry = reactiveElementsMap.get(model);\r\n    if (reactiveElementsMapEntry) {\r\n        const { reactiveElementsArray } = reactiveElementsMapEntry;\r\n        const reactiveElementIndex = reactiveElementsArray.findIndex(reactiveElement => reactiveElement.elementRef.deref() === element);\r\n        if (reactiveElementIndex > -1) {\r\n            reactiveElementsArray.splice(reactiveElementIndex, 1);\r\n        }\r\n        if (reactiveElementsArray.length === 0) {\r\n            reactiveElementsMap.delete(model);\r\n        }\r\n    }\r\n}\r\nconst reactiveChildElementsMap = new WeakMap();\r\nconst reactiveChildElementsFinalizationRegistry = new FinalizationRegistry((heldValue) => {\r\n    const { list, reactiveChildElement } = heldValue;\r\n    const reactiveChildrenElementsMapEntry = reactiveChildElementsMap.get(list);\r\n    if (reactiveChildrenElementsMapEntry) {\r\n        const { reactiveChildElementsArray } = reactiveChildrenElementsMapEntry;\r\n        reactiveChildElementsArray.splice(reactiveChildElementsArray.indexOf(reactiveChildElement), 1);\r\n    }\r\n});\r\nconst reactiveChildElementsObserver = new ModelChangeObserver((records) => {\r\n    let range = null;\r\n    Array.from(records.values()).forEach((record_i) => {\r\n        const { target } = record_i;\r\n        const list = target;\r\n        const { length: listLength } = list;\r\n        const { reactiveChildElementsArray } = reactiveChildElementsMap.get(list);\r\n        reactiveChildElementsArray.forEach((reactiveChildElements_i) => {\r\n            const { parentRef, mapping, placeholder } = reactiveChildElements_i;\r\n            const parent = parentRef.deref();\r\n            if (parent) {\r\n                const { firstChild, children } = parent;\r\n                const { length: childrenCount } = children;\r\n                if (placeholder && listLength > 0 && firstChild == placeholder) {\r\n                    parent.removeChild(placeholder);\r\n                }\r\n                const { changeType, LIST_INSERT, LIST_REMOVE, LIST_SORT } = record_i;\r\n                switch (changeType) {\r\n                    case LIST_INSERT: {\r\n                        const { insertedIndex, insertedItems } = record_i;\r\n                        const insertedItemsArray = Array.from(insertedItems.values()).map(mapping);\r\n                        const { length: childrenCount } = children;\r\n                        if (insertedIndex < childrenCount) {\r\n                            children[insertedIndex].before(...insertedItemsArray);\r\n                        }\r\n                        else {\r\n                            parent.append(...insertedItemsArray);\r\n                        }\r\n                        break;\r\n                    }\r\n                    case LIST_REMOVE: {\r\n                        const { removedIndex, removedItems } = record_i;\r\n                        const { length: removedCount } = removedItems;\r\n                        range = range ?? document.createRange();\r\n                        const removeEndIndex = removedIndex + (removedCount - 1);\r\n                        if (removeEndIndex < childrenCount) {\r\n                            range.setStartBefore(children[removedIndex]);\r\n                            range.setEndAfter(children[removeEndIndex]);\r\n                            range.deleteContents();\r\n                        }\r\n                        break;\r\n                    }\r\n                    case LIST_SORT: {\r\n                        const { sortedIndices } = record_i;\r\n                        const childrenArray = Array.from(children);\r\n                        parent.append(...sortedIndices.filter(index_i => index_i < childrenCount).map(index_i => childrenArray[index_i]));\r\n                        break;\r\n                    }\r\n                }\r\n                if (listLength == 0 && placeholder) {\r\n                    parent.append(placeholder);\r\n                }\r\n            }\r\n        });\r\n    });\r\n});\r\nfunction reactiveChildElements(list, mapping, placeholder) {\r\n    return (parent) => {\r\n        const parentRef = new WeakRef(parent);\r\n        const reactiveChildElementsMapEntry = reactiveChildElementsMap.get(list);\r\n        const reactiveChildElement = { parentRef, mapping, placeholder };\r\n        reactiveChildElementsFinalizationRegistry.register(parent, { list, reactiveChildElement });\r\n        if (!reactiveChildElementsMapEntry) {\r\n            const reactiveChildElementsArray = [reactiveChildElement];\r\n            reactiveChildElementsMap.set(list, { reactiveChildElementsArray });\r\n            reactiveChildElementsObserver.observe(list, {\r\n                childList: true\r\n            });\r\n        }\r\n        else {\r\n            const { reactiveChildElementsArray } = reactiveChildElementsMapEntry;\r\n            reactiveChildElementsArray.push(reactiveChildElement);\r\n        }\r\n        const children = list.length == 0 && placeholder ?\r\n            [placeholder] : Array.from(list.values()).map(mapping);\r\n        parent.replaceChildren(...children);\r\n    };\r\n}\r\nfunction revokeReactiveChildElements(list, parent) {\r\n    const reactiveChildElementsMapEntry = reactiveChildElementsMap.get(list);\r\n    if (reactiveChildElementsMapEntry) {\r\n        const { reactiveChildElementsArray } = reactiveChildElementsMapEntry;\r\n        const reactiveChildElementsIndex = reactiveChildElementsArray.findIndex(reactiveChildElement => reactiveChildElement.parentRef.deref() === parent);\r\n        if (reactiveChildElementsIndex > -1) {\r\n            reactiveChildElementsArray.splice(reactiveChildElementsIndex, 1);\r\n        }\r\n        if (reactiveChildElementsArray.length === 0) {\r\n            reactiveChildElementsMap.delete(list);\r\n        }\r\n    }\r\n}\r\nfunction areAttributesMatching(referenceAttributeType, referenceAttributeName, referenceAttributeValue, attributeName, attributeValue) {\r\n    if (referenceAttributeName == attributeName) {\r\n        switch (referenceAttributeType) {\r\n            case \"boolean\":\r\n                return referenceAttributeValue == \"\" && attributeValue == \"\";\r\n            case \"string\":\r\n                return referenceAttributeValue !== \"\" && (referenceAttributeValue == attributeValue);\r\n            case \"list\":\r\n                return (referenceAttributeValue !== \"\" && attributeValue !== null) && new RegExp(`${referenceAttributeValue}\\s*?`, \"g\").test(attributeValue);\r\n        }\r\n    }\r\n    return false;\r\n}\r\nclass AttributeMutationMixinBase {\r\n    attributeName;\r\n    attributeValue;\r\n    attributeType;\r\n    constructor(attributeName, attributeType = \"boolean\", attributeValue = \"\") {\r\n        this.attributeName = attributeName;\r\n        this.attributeType = attributeType;\r\n        this.attributeValue = attributeValue;\r\n    }\r\n    attach() {\r\n        throw new TypeError(\"Not implemented method.\");\r\n    }\r\n    detach() {\r\n        throw new TypeError(\"Not implemented method.\");\r\n    }\r\n}\r\n//# sourceMappingURL=Element.js.map","export { View };\r\nclass ViewBase extends HTMLElement {\r\n    #model;\r\n    constructor() {\r\n        super();\r\n        this.#model = null;\r\n    }\r\n    get model() {\r\n        return this.#model;\r\n    }\r\n    setModel(model) {\r\n        if (model !== this.#model) {\r\n            this.#model = model;\r\n        }\r\n    }\r\n    renderLight() {\r\n        return;\r\n    }\r\n    renderShadow() {\r\n        return;\r\n    }\r\n    render() {\r\n        const { shadowRoot } = this;\r\n        if (shadowRoot !== null) {\r\n            const shadow = this.renderShadow();\r\n            if (shadow) {\r\n                shadowRoot.replaceChildren(shadow);\r\n            }\r\n        }\r\n        const light = this.renderLight();\r\n        if (light) {\r\n            this.replaceChildren(light);\r\n        }\r\n    }\r\n}\r\nvar View = ViewBase;\r\n//# sourceMappingURL=View.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport DEFAULT_THEME_ARROW_RIGHT_IMAGE from \"../../assets/arrow_right_FILL0_wght400_GRAD0_opsz48.svg\";\r\nimport DEFAULT_THEME_ARROW_DROPDOWN_IMAGE from \"../../assets/arrow_drop_down_FILL0_wght400_GRAD0_opsz48.svg\";\r\nimport DEFAULT_THEME_ARROW_DROPUP_IMAGE from \"../../assets/arrow_drop_up_FILL0_wght400_GRAD0_opsz48.svg\";\r\nimport DEFAULT_THEME_CHECKED_IMAGE from \"../../assets/done_FILL0_wght400_GRAD0_opsz48.svg\";\r\nimport openSansTtf from \"../../assets/fonts/Open_Sans/OpenSans-VariableFont_wdth,wght.ttf\";\r\nimport { ModelObject, ReactiveProperty } from \"../models/Model\";\r\nexport { theme };\r\nexport { DEFAULT_THEME_HOVERED_ITEM_COLOR };\r\nexport { DEFAULT_THEME_FOCUSED_ITEM_COLOR };\r\nexport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR };\r\nexport { DEFAULT_THEME_SELECTED_ITEM_COLOR };\r\nexport { DEFAULT_THEME_ACTIVATED_ITEM_COLOR };\r\nexport { DEFAULT_THEME_DROPTARGET_ITEM_COLOR };\r\nexport { DEFAULT_THEME_ARROW_RIGHT_IMAGE };\r\nexport { DEFAULT_THEME_ARROW_DROPDOWN_IMAGE };\r\nexport { DEFAULT_THEME_ARROW_DROPUP_IMAGE };\r\nexport { DEFAULT_THEME_CHECKED_IMAGE };\r\nconst DEFAULT_THEME_TINT = 203;\r\nconst DEFAULT_THEME_ACCENT_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%, 50%)`;\r\nconst DEFAULT_THEME_HOVERED_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 80%, 50%)`;\r\nconst DEFAULT_THEME_FOCUSED_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%, 50%)`;\r\nconst DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%)`;\r\nconst DEFAULT_THEME_SELECTED_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 75%, 75%)`;\r\nconst DEFAULT_THEME_ACTIVATED_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%, 50%)`;\r\nconst DEFAULT_THEME_DROPTARGET_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%, 50%)`;\r\nclass Theme extends ModelObject {\r\n    stylesheet;\r\n    images() {\r\n        return new Map([\r\n            [\"checkedImage\", this.checkedImage],\r\n            [\"arrowRightImage\", this.arrowRightImage],\r\n            [\"arrowDropDownImage\", this.arrowDropDownImage],\r\n            [\"arrowDropUpImage\", this.arrowDropUpImage],\r\n        ]);\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.stylesheet = new CSSStyleSheet();\r\n        this.stylesheet.replace(/*css*/ `\r\n            :root {\r\n                --theme-accent-color: ${DEFAULT_THEME_ACCENT_COLOR};\r\n                --theme-hovered-item-color: ${DEFAULT_THEME_HOVERED_ITEM_COLOR};\r\n                --theme-focused-item-color: ${DEFAULT_THEME_FOCUSED_ITEM_COLOR};\r\n                --theme-focused-item-outline-color: ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR};\r\n                --theme-selected-item-color: ${DEFAULT_THEME_SELECTED_ITEM_COLOR};\r\n                --theme-activated-item-color: ${DEFAULT_THEME_ACTIVATED_ITEM_COLOR};\r\n                --theme-droptarget-item-color: ${DEFAULT_THEME_DROPTARGET_ITEM_COLOR};\r\n\r\n                --theme-arrow-color: var(--font-color);\r\n                --theme-arrow-icon-collapsed: var(--arrow-right);\r\n                --theme-arrow-icon-expanded: var(--arrow-dropdown);\r\n\r\n                --theme-sortorder-indicator-color: var(--font-color);\r\n                --theme-sortorder-indicator-ascending: var(--arrow-dropup);\r\n                --theme-sortorder-indicator-descending: var(--arrow-dropdown);\r\n            }\r\n            \r\n            @font-face {\r\n                font-family: \"Open Sans\";\r\n                src: url(${openSansTtf}) format(\"truetype\")\r\n            }\r\n\r\n            :root {\r\n                font-size: 10px;\r\n                font-family: \"Open Sans\";\r\n                accent-color: var(--theme-accent-color);\r\n            }\r\n\r\n            ::selection {\r\n                background-color: var(--theme-selected-item-color);\r\n            }\r\n        `);\r\n        this.addEventListener(\"modelchange\", this.#handleModelChangeEvent.bind(this));\r\n        this.tint = DEFAULT_THEME_TINT;\r\n        this.arrowRightImage = DEFAULT_THEME_ARROW_RIGHT_IMAGE;\r\n        this.arrowDropDownImage = DEFAULT_THEME_ARROW_DROPDOWN_IMAGE;\r\n        this.arrowDropUpImage = DEFAULT_THEME_ARROW_DROPUP_IMAGE;\r\n        this.checkedImage = DEFAULT_THEME_ARROW_DROPDOWN_IMAGE;\r\n    }\r\n    #handleModelChangeEvent() {\r\n        const { stylesheet } = this;\r\n        const variablesMap = stylesheet.cssRules[0].styleMap;\r\n        const records = this.getRecords();\r\n        records.forEach((record) => {\r\n            const { propertyName, newValue } = record;\r\n            switch (propertyName) {\r\n                case \"tint\": {\r\n                    variablesMap.set(\"--theme-tint\", String(newValue));\r\n                    break;\r\n                }\r\n                case \"checkedImage\": {\r\n                    variablesMap.set(\"--theme-checked-image\", `url(${String(newValue)})`);\r\n                    break;\r\n                }\r\n                case \"arrowRightImage\": {\r\n                    variablesMap.set(\"--theme-arrow-right-image\", `url(${String(newValue)})`);\r\n                    break;\r\n                }\r\n                case \"arrowDropDown\": {\r\n                    variablesMap.set(\"--theme-arrow-dropdown-image\", `url(${String(newValue)})`);\r\n                    break;\r\n                }\r\n                case \"arrowDropUp\": {\r\n                    variablesMap.set(\"--theme-arrow-dropup-image\", `url(${String(newValue)})`);\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n__decorate([\r\n    ReactiveProperty()\r\n], Theme.prototype, \"tint\", void 0);\r\n__decorate([\r\n    ReactiveProperty()\r\n], Theme.prototype, \"checkedImage\", void 0);\r\n__decorate([\r\n    ReactiveProperty()\r\n], Theme.prototype, \"arrowRightImage\", void 0);\r\n__decorate([\r\n    ReactiveProperty()\r\n], Theme.prototype, \"arrowDropDownImage\", void 0);\r\n__decorate([\r\n    ReactiveProperty()\r\n], Theme.prototype, \"arrowDropUpImage\", void 0);\r\nconst theme = new Theme();\r\n//# sourceMappingURL=Theme.js.map","import { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR, DEFAULT_THEME_SELECTED_ITEM_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_COLOR } from \"./Theme\";\r\nexport { resetStylesheet };\r\nconst resetStylesheet = new CSSStyleSheet();\r\nresetStylesheet.replace(/*css*/ `\r\n    \r\n    html.fullscreen,\r\n    html.fullscreen > body {\r\n        height: 100%;\r\n    }\r\n\r\n    dialog {\r\n        overflow: visible;\r\n    }\r\n\r\n    body {\r\n        font-size: 13px;\r\n        margin: 0;\r\n    }\r\n\r\n    ::backdrop {\r\n        background-color: rgba(120, 120, 120, 0.2);\r\n    }\r\n\r\n    ::selection {\r\n        background-color: ${DEFAULT_THEME_SELECTED_ITEM_COLOR};\r\n    }\r\n    \r\n    input,\r\n    output,\r\n    button,\r\n    select,\r\n    textarea {\r\n        margin: 0;\r\n        font-family: inherit;\r\n        font-size: inherit;\r\n        box-sizing: content-box;\r\n    }\r\n\r\n    dialog {\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    input {\r\n        border: 1px solid grey;\r\n    }\r\n\r\n    legend {\r\n        padding: 0 6px;\r\n    }\r\n\r\n    select,\r\n    progress {\r\n        height: 22px;\r\n    }\r\n\r\n    input {\r\n        height: 18px;\r\n    }\r\n\r\n    input:is([type=\"radio\"], [type=\"checkbox\"]) {\r\n        width: 18px; \r\n    }\r\n\r\n    input[type=\"color\" i] {\r\n        border: none;\r\n        padding: 0;\r\n    }\r\n\r\n    ::-webkit-color-swatch {\r\n        border: none;\r\n    }\r\n\r\n    ::-webkit-color-swatch-wrapper {\r\n        padding: 0;\r\n    }\r\n\r\n    ::-webkit-search-cancel-button {\r\n        appearance: none;\r\n    }\r\n\r\n    dialog,\r\n    fieldset {\r\n        padding: 8px;\r\n        border: 1px solid lightgrey;\r\n    }\r\n\r\n    button[type=\"submit\"] {\r\n        border-width: 2px;\r\n    }\r\n\r\n    button:hover {\r\n        background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n    }\r\n\r\n    button:not([aria-pressed]):focus,\r\n    button[aria-pressed=\"true\"] {\r\n        background-color: var(--theme-focused-item-color, ${DEFAULT_THEME_FOCUSED_ITEM_COLOR});\r\n    }\r\n\r\n    button {\r\n        height: 18px;\r\n        appearance: none;\r\n        background: none;\r\n        border: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n    }\r\n\r\n    table {\r\n        border-spacing: 0;\r\n    }\r\n\r\n    ul {\r\n        padding: 0;\r\n        margin: 0;\r\n    }\r\n`);\r\n//# sourceMappingURL=Reset.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { AttributeProperty, CustomElement } from \"../../Element\";\r\nexport { HTMLEHeightSashElement };\r\nvar style;\r\nlet HTMLEHeightSashElementBase = class HTMLEHeightSashElementBase extends HTMLElement {\r\n    get target() {\r\n        return this.#target;\r\n    }\r\n    static {\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n                background-color: var(--theme-selected-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n                transition-property: opacity;\r\n                transition-delay: 0.2s;\r\n                transition-duration: 0.2s;\r\n                transition-timing-function: ease-out;\r\n                \r\n                height: 2px;\r\n                cursor: ns-resize;\r\n            }\r\n        `;\r\n    }\r\n    #target;\r\n    #onCapture;\r\n    #queuedPointerCallback;\r\n    #pointerMovement;\r\n    constructor() {\r\n        super();\r\n        this.#target = null;\r\n        this.#queuedPointerCallback = null;\r\n        this.#pointerMovement = 0;\r\n        this.#onCapture = false;\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        this.addEventListener(\"pointerdown\", this.#handlePointerDownEvent.bind(this));\r\n        this.addEventListener(\"pointermove\", this.#handlePointerMoveEvent.bind(this));\r\n        this.addEventListener(\"pointerup\", this.#handlePointerUpEvent.bind(this));\r\n    }\r\n    #pointerMoveCallback() {\r\n        const target = this.#target;\r\n        if (target !== null) {\r\n            const targetComputedStyle = window.getComputedStyle(target);\r\n            const { style } = target;\r\n            const { growdir } = this;\r\n            const movementY = this.#pointerMovement;\r\n            const height = parseFloat(targetComputedStyle.getPropertyValue(\"height\"));\r\n            const newHeight = Math.trunc(height + (growdir == \"top\" ? -1 : 1) * movementY);\r\n            style.setProperty(\"height\", `${newHeight}px`);\r\n            const computedNewHeight = parseFloat(targetComputedStyle.getPropertyValue(\"height\"));\r\n            style.setProperty(\"height\", `${computedNewHeight}px`);\r\n            this.dispatchEvent(new Event(\"resize\"));\r\n        }\r\n        this.#queuedPointerCallback = null;\r\n    }\r\n    #handlePointerDownEvent(event) {\r\n        const { pointerId } = event;\r\n        const { controls } = this;\r\n        const rootNode = this.getRootNode();\r\n        this.#target = rootNode.getElementById(controls);\r\n        this.setPointerCapture(pointerId);\r\n        this.#onCapture = true;\r\n    }\r\n    #handlePointerMoveEvent(event) {\r\n        if (this.#onCapture) {\r\n            if (this.#queuedPointerCallback == null) {\r\n                this.#pointerMovement = event.movementY;\r\n                this.#queuedPointerCallback = this.#pointerMoveCallback.bind(this);\r\n                requestAnimationFrame(this.#queuedPointerCallback);\r\n            }\r\n            else {\r\n                this.#pointerMovement += event.movementY;\r\n            }\r\n        }\r\n    }\r\n    #handlePointerUpEvent(event) {\r\n        const { pointerId } = event;\r\n        this.releasePointerCapture(pointerId);\r\n        this.#onCapture = false;\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEHeightSashElementBase.prototype, \"controls\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, defaultValue: \"top\" })\r\n], HTMLEHeightSashElementBase.prototype, \"growdir\", void 0);\r\nHTMLEHeightSashElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-hsash\"\r\n    })\r\n], HTMLEHeightSashElementBase);\r\nvar HTMLEHeightSashElement = HTMLEHeightSashElementBase;\r\n//# sourceMappingURL=HeightSash.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty } from \"../../Element\";\r\nexport { HTMLEWidthSashElement };\r\nvar style;\r\nlet HTMLEWidthSashElementBase = class HTMLEWidthSashElementBase extends HTMLElement {\r\n    get target() {\r\n        return this.#target;\r\n    }\r\n    #target;\r\n    #onCapture;\r\n    #queuedPointerCallback;\r\n    #pointerMovement;\r\n    static {\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n                background-color: var(--theme-selected-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n                transition-property: opacity;\r\n                transition-delay: 0.2s;\r\n                transition-duration: 0.2s;\r\n                transition-timing-function: ease-out;\r\n                \r\n                width: 2px;\r\n                cursor: ew-resize;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#target = null;\r\n        this.#queuedPointerCallback = null;\r\n        this.#pointerMovement = 0;\r\n        this.#onCapture = false;\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        this.addEventListener(\"pointerdown\", this.#handlePointerDownEvent.bind(this));\r\n        this.addEventListener(\"pointermove\", this.#handlePointerMoveEvent.bind(this));\r\n        this.addEventListener(\"pointerup\", this.#handlePointerUpEvent.bind(this));\r\n    }\r\n    setWidth(width) {\r\n        const target = this.#target;\r\n        if (target !== null) {\r\n            const { max } = this;\r\n            const { style } = target;\r\n            style.setProperty(\"width\", `${width}px`);\r\n            if (max) {\r\n                style.setProperty(\"max-width\", `${width}px`);\r\n            }\r\n        }\r\n    }\r\n    #pointerMoveCallback() {\r\n        const target = this.#target;\r\n        if (target !== null) {\r\n            const targetComputedStyle = window.getComputedStyle(target);\r\n            const { growdir } = this;\r\n            const movementX = this.#pointerMovement;\r\n            const width = parseFloat(targetComputedStyle.getPropertyValue(\"width\"));\r\n            const newWidth = width + (growdir == \"right\" ? 1 : -1) * movementX;\r\n            this.setWidth(newWidth);\r\n            this.dispatchEvent(new Event(\"resize\"));\r\n        }\r\n        this.#pointerMovement = 0;\r\n        this.#queuedPointerCallback = null;\r\n    }\r\n    #handlePointerDownEvent(event) {\r\n        const { pointerId } = event;\r\n        const { controls } = this;\r\n        const rootNode = this.getRootNode();\r\n        this.#target = rootNode.getElementById(controls);\r\n        this.setPointerCapture(pointerId);\r\n        this.#onCapture = true;\r\n    }\r\n    #handlePointerMoveEvent(event) {\r\n        if (this.#onCapture) {\r\n            if (this.#queuedPointerCallback == null) {\r\n                this.#queuedPointerCallback = this.#pointerMoveCallback.bind(this);\r\n                requestAnimationFrame(this.#queuedPointerCallback);\r\n            }\r\n            this.#pointerMovement += event.movementX;\r\n        }\r\n    }\r\n    #handlePointerUpEvent(event) {\r\n        const { pointerId } = event;\r\n        this.releasePointerCapture(pointerId);\r\n        this.#onCapture = false;\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEWidthSashElementBase.prototype, \"controls\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, defaultValue: \"right\" })\r\n], HTMLEWidthSashElementBase.prototype, \"growdir\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEWidthSashElementBase.prototype, \"max\", void 0);\r\nHTMLEWidthSashElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-wsash\"\r\n    })\r\n], HTMLEWidthSashElementBase);\r\nvar HTMLEWidthSashElement = HTMLEWidthSashElementBase;\r\n//# sourceMappingURL=WidthSash.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR, DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, element, AttributeProperty } from \"../../Element\";\r\nexport { HTMLEGridCellElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEGridCellElementBase = class HTMLEGridCellElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: table-cell;\r\n                text-align: left;\r\n            }\r\n            \r\n            :host([type=\"columnheader\"]:hover) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host(:hover):host-context(e-grid:is(:not([selectby]), [selectby=\"cell\"])) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([type=\"columnheader\"][active]) {\r\n                background-color: var(--theme-focused-item-color, ${DEFAULT_THEME_FOCUSED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([active]):host-context(e-grid:focus-within:is(:not([selectby]), [selectby=\"cell\"])) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            :host([selected]):host-context(e-grid:is(:not([selectby]), [selectby=\"cell\"])) {\r\n                background-color: var(--theme-selected-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"selected\": {\r\n                this.dispatchEvent(new Event(\"select\", { bubbles: true }));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEGridCellElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEGridCellElementBase.prototype, \"headers\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEGridCellElementBase.prototype, \"type\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Number })\r\n], HTMLEGridCellElementBase.prototype, \"posinset\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEGridCellElementBase.prototype, \"droptarget\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEGridCellElementBase.prototype, \"active\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLEGridCellElementBase.prototype, \"selected\", void 0);\r\nHTMLEGridCellElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-gridcell\"\r\n    })\r\n], HTMLEGridCellElementBase);\r\nvar HTMLEGridCellElement = HTMLEGridCellElementBase;\r\n//# sourceMappingURL=GridCell.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR, DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { AttributeProperty, CustomElement, element } from \"../../Element\";\r\nimport { HTMLEGridCellElement } from \"./GridCell\";\r\nimport \"./GridCell\";\r\nexport { HTMLEGridRowElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEGridRowElementBase = class HTMLEGridRowElementBase extends HTMLElement {\r\n    cells() {\r\n        return Array.from(this.querySelectorAll(\"e-gridcell\"));\r\n    }\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: table-row;\r\n            }\r\n            \r\n            :host(:hover):host-context(e-grid:is([selectby=\"row\"])) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([active]):host-context(e-grid:focus-within:is([selectby=\"row\"])) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            :host([selected]):host-context(e-grid:is([selectby=\"row\"])) {\r\n                background-color: var(--theme-selected-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"selected\": {\r\n                this.dispatchEvent(new Event(\"select\", { bubbles: true }));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const assignedCells = target\r\n            .assignedElements()\r\n            .filter(element_i => element_i instanceof HTMLEGridCellElement);\r\n        assignedCells.forEach((cell_i, i) => {\r\n            cell_i.posinset = i;\r\n        });\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEGridRowElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEGridRowElementBase.prototype, \"active\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEGridRowElementBase.prototype, \"selected\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Number })\r\n], HTMLEGridRowElementBase.prototype, \"posinset\", void 0);\r\nHTMLEGridRowElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-gridrow\"\r\n    })\r\n], HTMLEGridRowElementBase);\r\nvar HTMLEGridRowElement = HTMLEGridRowElementBase;\r\n//# sourceMappingURL=GridRow.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, element } from \"../../Element\";\r\nimport { HTMLEGridCellElement } from \"./GridCell\";\r\nimport \"./GridRow\";\r\nimport \"./GridCell\";\r\nexport { HTMLEGridBodyElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEGridBodyElementBase = class HTMLEGridBodyElementBase extends HTMLElement {\r\n    cells() {\r\n        return Array.from(this.querySelectorAll(\"e-gridcell\"));\r\n    }\r\n    rows() {\r\n        return Array.from(this.querySelectorAll(\"e-gridrow\"));\r\n    }\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: table-row-group;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const assignedItems = target\r\n            .assignedElements()\r\n            .filter(element_i => element_i instanceof HTMLEGridCellElement);\r\n        assignedItems.forEach((item_i, i) => {\r\n            item_i.posinset = i;\r\n        });\r\n    }\r\n};\r\nHTMLEGridBodyElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-gridbody\"\r\n    })\r\n], HTMLEGridBodyElementBase);\r\nvar HTMLEGridBodyElement = HTMLEGridBodyElementBase;\r\n//# sourceMappingURL=GridBody.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, element } from \"../../Element\";\r\nimport { HTMLEGridCellElement } from \"./GridCell\";\r\nimport \"./GridRow\";\r\nimport \"./GridCell\";\r\nexport { HTMLEGridHeadElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEGridHeadElementBase = class HTMLEGridHeadElementBase extends HTMLElement {\r\n    cells() {\r\n        return Array.from(this.querySelectorAll(\"e-gridcell\"));\r\n    }\r\n    rows() {\r\n        return Array.from(this.querySelectorAll(\"e-gridrow\"));\r\n    }\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: table-header-group;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const assignedItems = target\r\n            .assignedElements()\r\n            .filter(element_i => element_i instanceof HTMLEGridCellElement);\r\n        assignedItems.forEach((item_i, i) => {\r\n            item_i.posinset = i;\r\n        });\r\n    }\r\n};\r\nHTMLEGridHeadElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-gridhead\"\r\n    })\r\n], HTMLEGridHeadElementBase);\r\nvar HTMLEGridHeadElement = HTMLEGridHeadElementBase;\r\n//# sourceMappingURL=GridHead.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, element } from \"../../Element\";\r\nimport { HTMLEGridRowElement } from \"./GridRow\";\r\nimport \"./GridRow\";\r\nexport { HTMLEGridRowGroupElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEGridRowGroupElementBase = class HTMLEGridRowGroupElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: table-row-group;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const assignedItems = target\r\n            .assignedElements()\r\n            .filter(element_i => element_i instanceof HTMLEGridRowElement);\r\n        assignedItems.forEach((item_i, i) => {\r\n            item_i.posinset = i;\r\n        });\r\n    }\r\n};\r\nHTMLEGridRowGroupElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-gridrowgroup\"\r\n    })\r\n], HTMLEGridRowGroupElementBase);\r\nvar HTMLEGridRowGroupElement = HTMLEGridRowGroupElementBase;\r\n//# sourceMappingURL=GridRowGroup.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLEGridBodyElement } from \"./GridBody\";\r\nimport { HTMLEGridCellElement } from \"./GridCell\";\r\nimport { HTMLEGridHeadElement } from \"./GridHead\";\r\nimport { HTMLEGridRowElement } from \"./GridRow\";\r\nimport { HTMLEGridRowGroupElement } from \"./GridRowGroup\";\r\nimport \"./GridBody\";\r\nimport \"./GridHead\";\r\nimport \"./GridRowGroup\";\r\nimport \"./GridRow\";\r\nimport \"./GridCell\";\r\nexport { HTMLEGridElement };\r\nHTMLEGridHeadElement;\r\nHTMLEGridBodyElement;\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEGridElementBase = class HTMLEGridElementBase extends HTMLElement {\r\n    cells() {\r\n        return Array.from(this.querySelectorAll(\"e-gridcell\"));\r\n    }\r\n    rows() {\r\n        return Array.from(this.querySelectorAll(\"e-gridrow\"));\r\n    }\r\n    get activeCell() {\r\n        return this.querySelector(\"e-gridcell[active]\");\r\n    }\r\n    get activeRow() {\r\n        return this.querySelector(\"e-gridrow[active]\");\r\n    }\r\n    get body() {\r\n        return this.querySelector(\":scope > e-gridbody\");\r\n    }\r\n    get head() {\r\n        return this.querySelector(\":scope > e-gridhead\");\r\n    }\r\n    #onSelection;\r\n    #hasSelectionChanged;\r\n    #cellsWalker;\r\n    #rowsWalker;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: table;\r\n                user-select: none;\r\n                line-height: 22px;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#cellsWalker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#cellsWalkerNodeFilter.bind(this));\r\n        this.#rowsWalker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#rowsWalkerNodeFilter.bind(this));\r\n        this.#onSelection = false;\r\n        this.#hasSelectionChanged = false;\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"contextmenu\", this.#handleContextMenuEvent.bind(this));\r\n        this.addEventListener(\"dblclick\", this.#handleDblClickEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n        this.addEventListener(\"select\", this.#handleSelectEvent.bind(this));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    beginSelection() {\r\n        this.#onSelection = true;\r\n    }\r\n    endSelection() {\r\n        this.#onSelection = false;\r\n        if (this.#hasSelectionChanged) {\r\n            this.dispatchEvent(new Event(\"selectionchange\", { bubbles: true }));\r\n            this.#hasSelectionChanged = false;\r\n        }\r\n    }\r\n    clearSelection() {\r\n        this.#clearCellsSelection();\r\n        this.#clearRowsSelection();\r\n    }\r\n    selectedCells() {\r\n        return Array.from(this.querySelectorAll(\"e-gridcell[selected]\"));\r\n    }\r\n    selectedRows() {\r\n        return Array.from(this.querySelectorAll(\"e-gridrow[selected]\"));\r\n    }\r\n    #cellsWalkerNodeFilter(node) {\r\n        if (node instanceof HTMLEGridCellElement && !node.hidden) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEGridBodyElement || node instanceof HTMLEGridRowGroupElement || node instanceof HTMLEGridRowElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    #rowsWalkerNodeFilter(node) {\r\n        if (node instanceof HTMLEGridRowElement && !node.hidden) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEGridBodyElement || node instanceof HTMLEGridRowGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    #getCellsRange(from, to) {\r\n        const cells = Array.from(this.cells());\r\n        const fromIndex = cells.indexOf(from);\r\n        const toIndex = cells.indexOf(to);\r\n        if (fromIndex > -1 && toIndex > -1) {\r\n            if (from == to) {\r\n                return [from];\r\n            }\r\n            return cells.slice(Math.min(fromIndex, toIndex), Math.max(fromIndex, toIndex) + 1);\r\n        }\r\n        return [];\r\n    }\r\n    #getRowsRange(from, to) {\r\n        if (from == to) {\r\n            return [from];\r\n        }\r\n        const position = from.compareDocumentPosition(to);\r\n        if (position & Node.DOCUMENT_POSITION_FOLLOWING) {\r\n            const range = [from];\r\n            let nextVisibleRow = this.#nextRow(from);\r\n            while (nextVisibleRow && nextVisibleRow !== to) {\r\n                range.push(nextVisibleRow);\r\n                nextVisibleRow = this.#nextRow(nextVisibleRow);\r\n            }\r\n            range.push(to);\r\n            return range;\r\n        }\r\n        else if (position & Node.DOCUMENT_POSITION_PRECEDING) {\r\n            const range = [from];\r\n            let previousVisibleRow = this.#previousRow(from);\r\n            while (previousVisibleRow && previousVisibleRow !== to) {\r\n                range.push(previousVisibleRow);\r\n                previousVisibleRow = this.#previousRow(previousVisibleRow);\r\n            }\r\n            range.push(to);\r\n            return range;\r\n        }\r\n        return [];\r\n    }\r\n    #setCellsSelection(...cells) {\r\n        this.beginSelection();\r\n        const selectedCells = this.selectedCells();\r\n        selectedCells.forEach((selectedCell_i) => {\r\n            if (!cells.includes(selectedCell_i)) {\r\n                selectedCell_i.selected = false;\r\n            }\r\n        });\r\n        cells.forEach((cell_i) => {\r\n            if (!cell_i.selected) {\r\n                cell_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #setRowsSelection(...rows) {\r\n        this.beginSelection();\r\n        const selectedRows = this.selectedRows();\r\n        selectedRows.forEach((selectedRow_i) => {\r\n            if (!rows.includes(selectedRow_i)) {\r\n                selectedRow_i.selected = false;\r\n            }\r\n        });\r\n        rows.forEach((row_i) => {\r\n            if (!row_i.selected) {\r\n                row_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #addCellsToSelection(...cells) {\r\n        this.beginSelection();\r\n        cells.forEach((cell_i) => {\r\n            if (!cell_i.selected) {\r\n                cell_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #addRowsToSelection(...rows) {\r\n        this.beginSelection();\r\n        rows.forEach((row_i) => {\r\n            if (!row_i.selected) {\r\n                row_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #removeCellsFromSelection(...cells) {\r\n        this.beginSelection();\r\n        const selectedCells = this.selectedCells();\r\n        cells.forEach((cell_i) => {\r\n            if (selectedCells.includes(cell_i)) {\r\n                cell_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #removeRowsFromSelection(...rows) {\r\n        this.beginSelection();\r\n        const selectedRows = this.selectedRows();\r\n        rows.forEach((row_i) => {\r\n            if (selectedRows.includes(row_i)) {\r\n                row_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #clearCellsSelection() {\r\n        this.beginSelection();\r\n        const selectedCells = this.selectedCells();\r\n        selectedCells.forEach((cell_i) => {\r\n            if (cell_i.selected) {\r\n                cell_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #clearRowsSelection() {\r\n        this.beginSelection();\r\n        const selectedRows = this.selectedRows();\r\n        selectedRows.forEach((row_i) => {\r\n            if (row_i.selected) {\r\n                row_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #setActiveCell(cell) {\r\n        const { activeCell } = this;\r\n        if (activeCell !== null && activeCell !== cell) {\r\n            activeCell.active = false;\r\n            activeCell.tabIndex = -1;\r\n        }\r\n        if (cell !== null) {\r\n            const cellsWalker = this.#cellsWalker;\r\n            cellsWalker.currentNode = cell;\r\n            cell.active = true;\r\n            cell.tabIndex = 0;\r\n        }\r\n    }\r\n    #setActiveRow(row) {\r\n        const { activeRow } = this;\r\n        if (activeRow !== null && activeRow !== row) {\r\n            activeRow.active = false;\r\n            activeRow.tabIndex = -1;\r\n        }\r\n        if (row !== null) {\r\n            const rowsWalker = this.#rowsWalker;\r\n            rowsWalker.currentNode = row;\r\n            row.active = true;\r\n            row.tabIndex = 0;\r\n        }\r\n    }\r\n    #firstCell(row) {\r\n        const cellsWalker = this.#cellsWalker;\r\n        cellsWalker.currentNode = row;\r\n        return cellsWalker.firstChild();\r\n    }\r\n    #lastCell(row) {\r\n        const cellsWalker = this.#cellsWalker;\r\n        cellsWalker.currentNode = row;\r\n        return cellsWalker.lastChild();\r\n    }\r\n    #previousCell(cell) {\r\n        const cellsWalker = this.#cellsWalker;\r\n        cellsWalker.currentNode = cell;\r\n        return cellsWalker.previousNode();\r\n    }\r\n    #nextCell(cell) {\r\n        const cellsWalker = this.#cellsWalker;\r\n        cellsWalker.currentNode = cell;\r\n        return cellsWalker.nextNode();\r\n    }\r\n    #closestRow(cell) {\r\n        const rowsWalker = this.#rowsWalker;\r\n        rowsWalker.currentNode = cell;\r\n        return rowsWalker.parentNode();\r\n    }\r\n    #firstRow() {\r\n        const rowsWalker = this.#rowsWalker;\r\n        const { root } = rowsWalker;\r\n        rowsWalker.currentNode = root;\r\n        return rowsWalker.firstChild();\r\n    }\r\n    #lastRow() {\r\n        const rowsWalker = this.#rowsWalker;\r\n        const { root } = rowsWalker;\r\n        rowsWalker.currentNode = root;\r\n        return rowsWalker.lastChild();\r\n    }\r\n    #previousRow(row) {\r\n        const rowsWalker = this.#rowsWalker;\r\n        rowsWalker.currentNode = row;\r\n        return rowsWalker.previousNode();\r\n    }\r\n    #nextRow(row) {\r\n        const rowsWalker = this.#rowsWalker;\r\n        rowsWalker.currentNode = row;\r\n        return rowsWalker.nextNode();\r\n    }\r\n    #topCell(cell) {\r\n        const closestRow = this.#closestRow(cell);\r\n        if (closestRow) {\r\n            const closestRowCells = closestRow.cells();\r\n            const cellIndex = closestRowCells.indexOf(cell);\r\n            const previousRow = this.#previousRow(closestRow);\r\n            if (previousRow) {\r\n                const previousRowCells = previousRow.cells();\r\n                return previousRowCells[Math.min(cellIndex, previousRowCells.length)];\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    #bottomCell(cell) {\r\n        const closestRow = this.#closestRow(cell);\r\n        if (closestRow) {\r\n            const closestRowCells = closestRow.cells();\r\n            const cellIndex = closestRowCells.indexOf(cell);\r\n            const nextRow = this.#nextRow(closestRow);\r\n            if (nextRow) {\r\n                const nextRowCells = nextRow.cells();\r\n                return nextRowCells[Math.min(cellIndex, nextRowCells.length)];\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    #handleClickEvent(event) {\r\n        const { ctrlKey, shiftKey } = event;\r\n        const { selectby } = this;\r\n        switch (selectby) {\r\n            case \"cell\": {\r\n                const composedPath = event.composedPath();\r\n                const targetCell = composedPath.find(target_i => target_i instanceof HTMLEGridBodyElement) ? composedPath.find(target_i => target_i instanceof HTMLEGridCellElement) : null;\r\n                const selectedCells = this.selectedCells();\r\n                if (targetCell instanceof HTMLEGridCellElement) {\r\n                    if (!shiftKey && !ctrlKey) {\r\n                        this.#setCellsSelection(targetCell);\r\n                    }\r\n                    else if (ctrlKey) {\r\n                        !targetCell.selected ?\r\n                            this.#addCellsToSelection(targetCell) :\r\n                            this.#removeCellsFromSelection(targetCell);\r\n                    }\r\n                    else if (shiftKey) {\r\n                        const lastSelectedCell = selectedCells[selectedCells.length - 1];\r\n                        if (lastSelectedCell) {\r\n                            const range = this.#getCellsRange(lastSelectedCell, targetCell);\r\n                            if (range) {\r\n                                selectedCells.includes(targetCell) ?\r\n                                    this.#removeCellsFromSelection(...range) :\r\n                                    this.#addCellsToSelection(...range);\r\n                            }\r\n                        }\r\n                        else {\r\n                            this.#setCellsSelection(targetCell);\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"row\": {\r\n                const selectedRows = this.selectedRows();\r\n                const composedPath = event.composedPath();\r\n                const targetRow = composedPath.find(target_i => target_i instanceof HTMLEGridBodyElement) ? composedPath.find(target_i => target_i instanceof HTMLEGridRowElement) : null;\r\n                if (targetRow instanceof HTMLEGridRowElement) {\r\n                    if (!shiftKey && !ctrlKey) {\r\n                        this.#setRowsSelection(targetRow);\r\n                    }\r\n                    else if (ctrlKey) {\r\n                        !targetRow.selected ?\r\n                            this.#addRowsToSelection(targetRow) :\r\n                            this.#removeRowsFromSelection(targetRow);\r\n                    }\r\n                    else if (shiftKey) {\r\n                        const lastSelectedRow = selectedRows[selectedRows.length - 1];\r\n                        if (lastSelectedRow) {\r\n                            const range = this.#getRowsRange(lastSelectedRow, targetRow);\r\n                            if (range) {\r\n                                selectedRows.includes(targetRow) ?\r\n                                    this.#removeRowsFromSelection(...range) :\r\n                                    this.#addRowsToSelection(...range);\r\n                            }\r\n                        }\r\n                        else {\r\n                            this.#setRowsSelection(targetRow);\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n    #handleContextMenuEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleDblClickEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { selectby, activeCell, activeRow } = this;\r\n        switch (key) {\r\n            case \"a\": {\r\n                const { ctrlKey } = event;\r\n                if (ctrlKey) {\r\n                    switch (selectby) {\r\n                        case \"cell\": {\r\n                            const firstRow = this.#firstRow();\r\n                            const firstCell = firstRow ? this.#firstCell(firstRow) : null;\r\n                            const lastRow = this.#lastRow();\r\n                            const lastCell = lastRow ? this.#lastCell(lastRow) : null;\r\n                            if (firstCell && lastCell) {\r\n                                const range = this.#getCellsRange(firstCell, lastCell);\r\n                                if (range) {\r\n                                    this.#setCellsSelection(...range);\r\n                                }\r\n                            }\r\n                            break;\r\n                        }\r\n                        case \"row\": {\r\n                            const firstRow = this.#firstRow();\r\n                            const lastRow = this.#lastRow();\r\n                            if (firstRow && lastRow) {\r\n                                const range = this.#getRowsRange(firstRow, lastRow);\r\n                                if (range) {\r\n                                    this.#setRowsSelection(...range);\r\n                                }\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case \"ArrowLeft\": {\r\n                if (selectby == \"cell\") {\r\n                    if (activeCell) {\r\n                        const previousCell = this.#previousCell(activeCell);\r\n                        if (previousCell) {\r\n                            previousCell.focus({ preventScroll: true });\r\n                            const { shiftKey } = event;\r\n                            if (shiftKey) {\r\n                                previousCell.selected ?\r\n                                    this.#removeCellsFromSelection(previousCell) :\r\n                                    this.#addCellsToSelection(previousCell);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                if (selectby == \"cell\") {\r\n                    if (activeCell) {\r\n                        const nextCell = this.#nextCell(activeCell);\r\n                        if (nextCell) {\r\n                            nextCell.focus({ preventScroll: true });\r\n                            const { shiftKey } = event;\r\n                            if (shiftKey) {\r\n                                nextCell.selected ?\r\n                                    this.#removeCellsFromSelection(nextCell) :\r\n                                    this.#addCellsToSelection(nextCell);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowUp\": {\r\n                switch (selectby) {\r\n                    case \"cell\": {\r\n                        const firstRow = activeRow ?? this.#firstRow();\r\n                        const topCell = activeCell ?\r\n                            this.#topCell(activeCell) :\r\n                            firstRow ?\r\n                                this.#firstCell(firstRow) :\r\n                                null;\r\n                        if (topCell) {\r\n                            topCell.focus({ preventScroll: true });\r\n                            const { shiftKey } = event;\r\n                            if (shiftKey) {\r\n                                topCell.selected ?\r\n                                    this.#removeCellsFromSelection(topCell) :\r\n                                    this.#addCellsToSelection(topCell);\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    case \"row\": {\r\n                        const previousRow = activeRow ?\r\n                            this.#previousRow(activeRow) :\r\n                            this.#firstRow();\r\n                        if (previousRow) {\r\n                            previousRow.focus({ preventScroll: true });\r\n                            const { shiftKey } = event;\r\n                            if (shiftKey) {\r\n                                previousRow.selected ?\r\n                                    this.#removeRowsFromSelection(previousRow) :\r\n                                    this.#addRowsToSelection(previousRow);\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowDown\": {\r\n                switch (selectby) {\r\n                    case \"cell\":\r\n                        {\r\n                            const lastRow = activeRow ?? this.#lastRow();\r\n                            const bottomCell = activeCell ?\r\n                                this.#bottomCell(activeCell) :\r\n                                lastRow ?\r\n                                    this.#lastCell(lastRow) :\r\n                                    null;\r\n                            if (bottomCell) {\r\n                                bottomCell.focus({ preventScroll: true });\r\n                                const { shiftKey } = event;\r\n                                if (shiftKey) {\r\n                                    bottomCell.selected ?\r\n                                        this.#removeCellsFromSelection(bottomCell) :\r\n                                        this.#addCellsToSelection(bottomCell);\r\n                                }\r\n                            }\r\n                        }\r\n                        break;\r\n                    case \"row\": {\r\n                        const nextRow = activeRow ?\r\n                            this.#nextRow(activeRow) :\r\n                            this.#lastRow();\r\n                        if (nextRow) {\r\n                            nextRow.focus({ preventScroll: true });\r\n                            const { shiftKey } = event;\r\n                            if (shiftKey) {\r\n                                nextRow.selected ?\r\n                                    this.#removeRowsFromSelection(nextRow) :\r\n                                    this.#addRowsToSelection(nextRow);\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                switch (selectby) {\r\n                    case \"cell\": {\r\n                        if (activeRow) {\r\n                            const firstCell = this.#firstCell(activeRow);\r\n                            if (firstCell) {\r\n                                firstCell.focus({ preventScroll: true });\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    case \"row\": {\r\n                        const firstRow = this.#firstRow();\r\n                        if (firstRow) {\r\n                            firstRow.focus({ preventScroll: true });\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                switch (selectby) {\r\n                    case \"cell\": {\r\n                        if (activeRow) {\r\n                            const lastCell = this.#lastCell(activeRow);\r\n                            if (lastCell) {\r\n                                lastCell.focus({ preventScroll: true });\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    case \"row\": {\r\n                        const lastRow = this.#lastRow();\r\n                        if (lastRow) {\r\n                            lastRow.focus({ preventScroll: true });\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Enter\": {\r\n                switch (selectby) {\r\n                    case \"cell\": {\r\n                        if (activeCell) {\r\n                            this.#setCellsSelection(activeCell);\r\n                            activeCell.click();\r\n                        }\r\n                        break;\r\n                    }\r\n                    case \"row\": {\r\n                        if (activeRow) {\r\n                            this.#setRowsSelection(activeRow);\r\n                            activeRow.click();\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Escape\": {\r\n                switch (selectby) {\r\n                    case \"cell\": {\r\n                        this.#clearCellsSelection();\r\n                        this.#setActiveCell(null);\r\n                        break;\r\n                    }\r\n                    case \"row\": {\r\n                        this.#clearRowsSelection();\r\n                        this.#setActiveRow(null);\r\n                        break;\r\n                    }\r\n                }\r\n                this.focus();\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const { selectby } = this;\r\n        switch (selectby) {\r\n            case \"cell\": {\r\n                const { activeCell } = this;\r\n                if (activeCell && relatedTarget !== activeCell) {\r\n                    activeCell.focus();\r\n                }\r\n                break;\r\n            }\r\n            case \"row\": {\r\n                const { activeRow } = this;\r\n                if (activeRow && relatedTarget !== activeRow) {\r\n                    activeRow.focus();\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        const { selectby } = this;\r\n        switch (selectby) {\r\n            case \"cell\": {\r\n                const targetCell = target.closest(\"e-gridcell\");\r\n                if (targetCell) {\r\n                    this.#setActiveCell(targetCell);\r\n                }\r\n                break;\r\n            }\r\n            case \"row\": {\r\n                const targetRow = target.closest(\"e-gridrow\");\r\n                if (targetRow) {\r\n                    this.#setActiveRow(targetRow);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleSelectEvent() {\r\n        if (this.#onSelection) {\r\n            this.#hasSelectionChanged = true;\r\n        }\r\n        else {\r\n            this.dispatchEvent(new Event(\"selectionchange\", { bubbles: true }));\r\n        }\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const assignedRows = target\r\n            .assignedElements()\r\n            .filter(element_i => element_i instanceof HTMLEGridRowElement);\r\n        assignedRows.forEach((row_i, i) => {\r\n            row_i.posinset = i;\r\n        });\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEGridElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, defaultValue: \"cell\" })\r\n], HTMLEGridElementBase.prototype, \"selectby\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEGridElementBase.prototype, \"multiselectable\", void 0);\r\nHTMLEGridElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-grid\"\r\n    })\r\n], HTMLEGridElementBase);\r\nvar HTMLEGridElement = HTMLEGridElementBase;\r\n//# sourceMappingURL=Grid.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_CHECKED_IMAGE, DEFAULT_THEME_ACTIVATED_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR, DEFAULT_THEME_ARROW_RIGHT_IMAGE } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, QueryProperty, element } from \"../../Element\";\r\nexport { HTMLEMenuItemElement };\r\nexport { EMenuItem };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEMenuItemElementBase = class HTMLEMenuItemElementBase extends HTMLElement {\r\n    internals;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"span\", {\r\n            attributes: {\r\n                part: \"icon\"\r\n            }\r\n        }), element(\"span\", {\r\n            attributes: {\r\n                part: \"label\"\r\n            },\r\n            children: [\r\n                element(\"slot\")\r\n            ]\r\n        }), element(\"span\", {\r\n            attributes: {\r\n                part: \"arrow\"\r\n            }\r\n        }), element(\"slot\", {\r\n            attributes: {\r\n                name: \"menu\"\r\n            }\r\n        }));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                user-select: none;\r\n                white-space: nowrap;\r\n                box-sizing: border-box;\r\n            }\r\n            \r\n            :host([disabled]) {\r\n                opacity: 0.38;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host(:focus-within) {\r\n                background-color: ${DEFAULT_THEME_FOCUSED_ITEM_COLOR};\r\n            }\r\n            \r\n            :host(:is([type=\"menu\"], [type=\"submenu\"])) ::slotted([slot=\"menu\"]) {\r\n                z-index: 1;\r\n                position: absolute;\r\n            }\r\n            \r\n            :host(:is([type=\"menu\"], [type=\"submenu\"]):not([expanded])) ::slotted([slot=\"menu\"]) {\r\n                width: 0;\r\n                height: 0;\r\n                padding: 0;\r\n                opacity: 0;\r\n                pointer-events: none;\r\n                overflow: hidden;\r\n            }\r\n            \r\n            :host([type=\"submenu\"]) [part=\"icon\"] {\r\n                visibility: hidden;\r\n            }\r\n            \r\n            :host([type=\"menu\"]) [part=\"icon\"],\r\n            :host(:not([type=\"submenu\"])) [part=\"arrow\"] {\r\n                display: none;\r\n            }\r\n            \r\n            :host(:is([type=\"checkbox\"], [type=\"radio\"])[checked]) [part=\"icon\"]::before {\r\n                -webkit-mask-image: var(--theme-arrow-done-image, url(${DEFAULT_THEME_CHECKED_IMAGE}));\r\n                mask-image: var(--theme-arrow-done-image, url(${DEFAULT_THEME_CHECKED_IMAGE}));\r\n                background-color: black;\r\n            }\r\n            \r\n            :host([type=\"submenu\"]) [part=\"arrow\"]::after {\r\n                -webkit-mask-image: var(--theme-arrow-right-image, url(${DEFAULT_THEME_ARROW_RIGHT_IMAGE}));\r\n                mask-image: var(--theme-arrow-right-image, url(${DEFAULT_THEME_ARROW_RIGHT_IMAGE}));\r\n                background-color: black;\r\n            }\r\n            \r\n            [part=\"icon\"],\r\n            [part=\"label\"],\r\n            [part=\"arrow\"] {\r\n                pointer-events: none;\r\n            }\r\n            \r\n            [part=\"icon\"] {\r\n                flex: none;\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                padding: 2px;\r\n                overflow: hidden;\r\n                margin-right: 4px;\r\n            }\r\n            \r\n            [part=\"label\"] {\r\n                flex: auto;\r\n                line-height: 18px;\r\n                padding: 2px;\r\n                margin-left: 8px;\r\n                margin-right: 8px;\r\n            }\r\n            \r\n            :host(:is(:not([type]), [type=\"button\"], [type=\"radio\"], [type=\"checkbox\"])[checked]) [part=\"icon\"] {\r\n                background-color: var(--theme-activated-item-color, ${DEFAULT_THEME_ACTIVATED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host(:is(:not([type]), [type=\"button\"], [type=\"radio\"], [type=\"checkbox\"])) [part=\"icon\"]::before {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                content: \"\";\r\n                mask-size: 18px 18px;\r\n                -webkit-mask-size: 18px 18px;\r\n\r\n                mask-image: none;\r\n                -webkit-mask-image: none;\r\n                background-color: none;\r\n            }\r\n            \r\n            [part=\"arrow\"] {\r\n                flex: none;\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                margin: 1px 4px 1px 1px;\r\n            }\r\n            \r\n            [part=\"arrow\"]::after {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                margin: 1px;\r\n                content: \"\";\r\n                mask-size: 18px 18px;\r\n                -webkit-mask-size: 18px 18px;\r\n\r\n                mask-image: none;\r\n                -webkit-mask-image: none;\r\n                background-color: none;\r\n            }\r\n\r\n            :host(:hover):host-context(e-menubar:focus),\r\n            :host(:hover):host-context(e-menubar:not(:focus-within)) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const internals = this.attachInternals();\r\n        this.internals = internals;\r\n        internals.role = \"menuitem\";\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    attributeChangedCallback(attributeName, oldValue, newValue) {\r\n        const { internals } = this;\r\n        switch (attributeName) {\r\n            case \"type\": {\r\n                switch (newValue) {\r\n                    case \"checkbox\":\r\n                    case \"radio\": {\r\n                        internals.role = `menuitem${newValue}`;\r\n                        break;\r\n                    }\r\n                    default: {\r\n                        internals.role = \"menuitem\";\r\n                        break;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"checked\": {\r\n                internals.ariaChecked = String(newValue !== null);\r\n                break;\r\n            }\r\n            case \"disabled\": {\r\n                internals.ariaDisabled = String(newValue !== null);\r\n                break;\r\n            }\r\n            case \"expanded\": {\r\n                internals.ariaExpanded = String(newValue !== null);\r\n                break;\r\n            }\r\n            case \"label\": {\r\n                internals.ariaLabel = newValue;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    toggle(force) {\r\n        const { type, expanded } = this;\r\n        switch (type) {\r\n            case \"menu\":\r\n            case \"submenu\": {\r\n                const expand = force ?? !expanded;\r\n                this.expanded = expand;\r\n                if (expand) {\r\n                    this.#positionMenu();\r\n                }\r\n                this.dispatchEvent(new Event(\"toggle\", { bubbles: true }));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    expand() {\r\n        const { type, expanded } = this;\r\n        switch (type) {\r\n            case \"menu\":\r\n            case \"submenu\": {\r\n                if (!expanded) {\r\n                    this.expanded = true;\r\n                    this.#positionMenu();\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    collapse() {\r\n        const { type, expanded } = this;\r\n        switch (type) {\r\n            case \"menu\":\r\n            case \"submenu\": {\r\n                if (expanded) {\r\n                    this.expanded = false;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #positionMenu() {\r\n        const { menu } = this;\r\n        if (menu !== null) {\r\n            const { width, height } = this.getBoundingClientRect();\r\n            const { style: menuStyle } = menu;\r\n            const { width: menuWidth, height: menuHeight } = menu.getBoundingClientRect();\r\n            const { clientWidth, clientHeight } = document.body;\r\n            const { type, offsetLeft, offsetTop } = this;\r\n            const overflowX = offsetLeft + width + menuWidth - clientWidth;\r\n            const overflowY = offsetTop + menuHeight - clientHeight;\r\n            if (type === \"menu\") {\r\n                menuStyle.setProperty(\"left\", `${overflowX > 0 ?\r\n                    offsetLeft + width - menuWidth :\r\n                    offsetLeft}px`);\r\n                menuStyle.setProperty(\"top\", `${overflowY > 0 ?\r\n                    offsetTop - menuHeight :\r\n                    offsetTop + height}px`);\r\n            }\r\n            else {\r\n                menuStyle.setProperty(\"left\", `${overflowX > 0 ?\r\n                    offsetLeft - menuWidth :\r\n                    offsetLeft + width}px`);\r\n                menuStyle.setProperty(\"top\", `${overflowY > 0 ?\r\n                    offsetTop + height - menuHeight :\r\n                    offsetTop}px`);\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    QueryProperty({ selector: \":scope > e-menu[slot=menu]\" })\r\n], HTMLEMenuItemElementBase.prototype, \"menu\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEMenuItemElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEMenuItemElementBase.prototype, \"label\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEMenuItemElementBase.prototype, \"value\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEMenuItemElementBase.prototype, \"hotkey\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLEMenuItemElementBase.prototype, \"disabled\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLEMenuItemElementBase.prototype, \"checked\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLEMenuItemElementBase.prototype, \"expanded\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEMenuItemElementBase.prototype, \"overflown\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, defaultValue: \"button\", observed: true })\r\n], HTMLEMenuItemElementBase.prototype, \"type\", void 0);\r\nHTMLEMenuItemElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-menuitem\"\r\n    })\r\n], HTMLEMenuItemElementBase);\r\nvar HTMLEMenuItemElement = HTMLEMenuItemElementBase;\r\nvar EMenuItem = Object.assign(function (init) {\r\n    const { label, name, type, value, trigger, menu } = init;\r\n    if (menu) {\r\n        menu.slot = \"menu\";\r\n    }\r\n    return element(\"e-menuitem\", {\r\n        attributes: {\r\n            tabindex: -1,\r\n            title: label,\r\n            name: name,\r\n            value: value,\r\n            type: type\r\n        },\r\n        children: menu ? [\r\n            label,\r\n            menu\r\n        ] : [\r\n            label\r\n        ],\r\n        listeners: {\r\n            click: trigger\r\n        }\r\n    });\r\n}, {\r\n    prototype: HTMLEMenuItemElement.prototype,\r\n    button(init) {\r\n        return new EMenuItem({\r\n            ...init, type: \"button\"\r\n        });\r\n    },\r\n    checkbox(init) {\r\n        return new EMenuItem({\r\n            ...init, type: \"checkbox\"\r\n        });\r\n    },\r\n    radio(init) {\r\n        return new EMenuItem({\r\n            ...init, type: \"radio\"\r\n        });\r\n    },\r\n    menu(init) {\r\n        return new EMenuItem({\r\n            ...init, type: \"menu\"\r\n        });\r\n    },\r\n    submenu(init) {\r\n        return new EMenuItem({\r\n            ...init, type: \"submenu\"\r\n        });\r\n    }\r\n});\r\n//# sourceMappingURL=MenuItem.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { element, CustomElement, AttributeProperty } from \"../../Element\";\r\nimport { EMenuItem } from \"./MenuItem\";\r\nimport \"./MenuItem\";\r\nexport { HTMLEMenuItemGroupElement };\r\nexport { EMenuItemGroup };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEMenuItemGroupElementBase = class HTMLEMenuItemGroupElementBase extends HTMLElement {\r\n    internals;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"span\", {\r\n            attributes: {\r\n                part: \"label\"\r\n            }\r\n        }), element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                flex-direction: column;\r\n            }\r\n            \r\n            [part=\"label\"] {\r\n                font-weight: bold;\r\n            }\r\n            \r\n            :host([label]) [part=\"label\"] {\r\n                padding-bottom: 6px;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        const internals = this.attachInternals();\r\n        internals.role = \"group\";\r\n        this.internals = internals;\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        const { internals } = this;\r\n        switch (name) {\r\n            case \"label\":\r\n                internals.ariaLabel = newValue;\r\n                break;\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEMenuItemGroupElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEMenuItemGroupElementBase.prototype, \"label\", void 0);\r\nHTMLEMenuItemGroupElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-menuitemgroup\"\r\n    })\r\n], HTMLEMenuItemGroupElementBase);\r\nvar HTMLEMenuItemGroupElement = HTMLEMenuItemGroupElementBase;\r\nvar EMenuItemGroup = Object.assign(function (init) {\r\n    const { name, items } = init;\r\n    return element(\"e-menuitemgroup\", {\r\n        attributes: {\r\n            name: name\r\n        },\r\n        children: items\r\n    });\r\n}, {\r\n    prototype: HTMLEMenuItemGroupElement.prototype,\r\n    radios: (init) => {\r\n        const { name, items } = init;\r\n        return element(\"e-menuitemgroup\", {\r\n            attributes: {\r\n                name: name\r\n            },\r\n            children: items.map(({ label, value }) => new EMenuItem({ name, label, type: \"radio\", value }))\r\n        });\r\n    }\r\n});\r\n//# sourceMappingURL=MenuItemGroup.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar HTMLEMenuElementBase_1;\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLEMenuItemElement } from \"./MenuItem\";\r\nimport { HTMLEMenuItemGroupElement } from \"./MenuItemGroup\";\r\nimport \"./MenuItem\";\r\nimport \"./MenuItemGroup\";\r\nexport { HTMLEMenuElement };\r\nexport { EMenu };\r\nvar shadowTemplate;\r\nvar style;\r\nvar toggleAnimations;\r\nvar HIDE_DELAY_MS = 200;\r\nvar SHOW_DELAY_MS = 400;\r\nlet HTMLEMenuElementBase = HTMLEMenuElementBase_1 = class HTMLEMenuElementBase extends HTMLElement {\r\n    items() {\r\n        return Array.from(this.querySelectorAll(\":is(:scope, :scope > e-menuitemgroup) > e-menuitem\"));\r\n    }\r\n    get activeIndex() {\r\n        return this.#activeIndex;\r\n    }\r\n    get activeItem() {\r\n        const { activeIndex } = this;\r\n        return (this.querySelector(\":is(:scope, :scope > e-menuitemgroup) > e-menuitem:focus-within\") ?? activeIndex > -1) ? this.items()[activeIndex] ?? null : null;\r\n    }\r\n    #walker;\r\n    #activeIndex;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                flex-direction: column;\r\n            \r\n                padding: 3px;\r\n                background-color: white;\r\n                width: max-content;\r\n                box-sizing: border-box;\r\n            \r\n                -webkit-box-shadow: rgba(0, 0, 0, 0.2) 0 1px 3px;\r\n                box-shadow: rgba(0, 0, 0, 0.2) 0 1px 3px;\r\n            }\r\n            \r\n            :host([contextual]) {\r\n                z-index: 1;\r\n                position: absolute;\r\n            }\r\n        `;\r\n        toggleAnimations = new WeakMap();\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#activeIndex = -1;\r\n        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this));\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"mouseover\", this.#handleMouseOverEvent.bind(this));\r\n        this.addEventListener(\"mouseout\", this.#handleMouseOutEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const tabindex = this.getAttribute(\"tabindex\");\r\n        this.tabIndex = tabindex !== null ? parseInt(tabindex) : -1;\r\n    }\r\n    positionContextual(x, y) {\r\n        const { style } = this;\r\n        const { width: menuWidth, height: menuHeight } = this.getBoundingClientRect();\r\n        const { scrollX, scrollY } = window;\r\n        const left = x + scrollX;\r\n        const top = y + scrollY;\r\n        const { clientWidth, clientHeight } = document.body;\r\n        const overflowX = left + menuWidth - clientWidth;\r\n        const overflowY = top + menuHeight - clientHeight;\r\n        style.setProperty(\"left\", `${overflowX > 0 ? left - menuWidth : left}px`);\r\n        style.setProperty(\"top\", `${overflowY > 0 ? top - menuHeight : top}px`);\r\n    }\r\n    #collapseSubmenus() {\r\n        this.querySelectorAll(\":is(:scope, :scope > e-menuitemgroup) > e-menuitem[expanded]\")\r\n            .forEach((item_i) => {\r\n            item_i.collapse();\r\n        });\r\n    }\r\n    #nearestItem(target) {\r\n        return Array.from(this.querySelectorAll(\":is(:scope, :scope > e-menuitemgroup) > e-menuitem\")).find(item_i => item_i.contains(target)) ?? null;\r\n    }\r\n    #walkerNodeFilter(node) {\r\n        if (node instanceof HTMLEMenuItemElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEMenuItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    firstItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.firstChild();\r\n    }\r\n    #lastItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.lastChild();\r\n    }\r\n    #previousItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.previousNode();\r\n    }\r\n    #nextItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.nextNode();\r\n    }\r\n    #firstChildItem(item) {\r\n        const { menu } = item;\r\n        return menu instanceof HTMLEMenuElementBase_1 ?\r\n            menu.firstItem() :\r\n            null;\r\n    }\r\n    #setActiveItem(item) {\r\n        if (item !== null) {\r\n            this.#activeIndex = this.items().indexOf(item);\r\n        }\r\n    }\r\n    #handleClickEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-menuitem\");\r\n        if (targetItem) {\r\n            const { type, checked } = targetItem;\r\n            switch (type) {\r\n                case \"checkbox\": {\r\n                    targetItem.checked = !checked;\r\n                    break;\r\n                }\r\n                case \"radio\": {\r\n                    const { name, value } = targetItem;\r\n                    targetItem.checked = true;\r\n                    this.querySelectorAll(`:is(:scope, :scope > e-menuitemgroup) > e-menuitem[type=radio][name=${name}]`)\r\n                        .forEach((radio_i) => {\r\n                        radio_i.checked = radio_i.value == value;\r\n                    });\r\n                    break;\r\n                }\r\n                case \"menu\":\r\n                case \"submenu\": {\r\n                    targetItem.toggle();\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        if (target instanceof HTMLEMenuItemElement) {\r\n            const nearestItem = this.#nearestItem(target);\r\n            if (nearestItem) {\r\n                this.#setActiveItem(nearestItem);\r\n            }\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const lostFocusWithin = !this.contains(relatedTarget);\r\n        if (lostFocusWithin) {\r\n            const { contextual } = this;\r\n            if (contextual) {\r\n                try {\r\n                    this.remove();\r\n                }\r\n                catch (error) { }\r\n                ;\r\n            }\r\n            else {\r\n                const { activeItem } = this;\r\n                if (activeItem?.expanded) {\r\n                    activeItem.collapse();\r\n                }\r\n                this.#setActiveItem(null);\r\n            }\r\n        }\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { activeItem } = this;\r\n        switch (key) {\r\n            case \"ArrowUp\": {\r\n                const previousItem = activeItem ?\r\n                    this.#previousItem(activeItem) ?? this.#lastItem() :\r\n                    this.firstItem();\r\n                previousItem?.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowDown\": {\r\n                const nextItem = activeItem ?\r\n                    this.#nextItem(activeItem) ?? this.firstItem() :\r\n                    this.firstItem();\r\n                nextItem?.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.firstItem();\r\n                firstItem?.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                lastItem?.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Enter\":\r\n            case \" \": {\r\n                if (activeItem) {\r\n                    const { type } = activeItem;\r\n                    switch (type) {\r\n                        case \"menu\":\r\n                        case \"submenu\": {\r\n                            activeItem.expand();\r\n                            if (activeItem.expanded) {\r\n                                const firstChildItem = this.#firstChildItem(activeItem);\r\n                                firstChildItem?.focus({ preventScroll: true });\r\n                            }\r\n                            break;\r\n                        }\r\n                        default: {\r\n                            activeItem.click();\r\n                            break;\r\n                        }\r\n                    }\r\n                    event.stopPropagation();\r\n                }\r\n                break;\r\n            }\r\n            case \"Escape\": {\r\n                if (activeItem) {\r\n                    const isClosestTargetMenu = event.composedPath().find(target_i => target_i instanceof HTMLEMenuElement) == this;\r\n                    if (!isClosestTargetMenu) {\r\n                        activeItem.collapse();\r\n                        activeItem.focus({ preventScroll: true });\r\n                        event.stopPropagation();\r\n                    }\r\n                    else {\r\n                        const { contextual } = this;\r\n                        if (contextual) {\r\n                            this.blur();\r\n                            this.dispatchEvent(new Event(\"close\", { bubbles: true }));\r\n                            event.stopPropagation();\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"ArrowLeft\": {\r\n                if (activeItem) {\r\n                    const isClosestTargetMenu = event.composedPath().find(target_i => target_i instanceof HTMLEMenuElement) == this;\r\n                    if (!isClosestTargetMenu) {\r\n                        activeItem.collapse();\r\n                        activeItem.focus({ preventScroll: true });\r\n                        event.stopPropagation();\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                if (activeItem) {\r\n                    const { type } = activeItem;\r\n                    switch (type) {\r\n                        case \"submenu\": {\r\n                            if (!activeItem.expanded) {\r\n                                activeItem.expand();\r\n                                const firstChildItem = this.#firstChildItem(activeItem);\r\n                                firstChildItem?.focus({ preventScroll: true });\r\n                                event.stopPropagation();\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleMouseOutEvent(event) {\r\n        const { target, relatedTarget } = event;\r\n        if (target instanceof HTMLEMenuItemElement) {\r\n            const nearestItem = this.#nearestItem(target);\r\n            if (nearestItem !== null) {\r\n                if (nearestItem.type == \"submenu\" &&\r\n                    !nearestItem.expanded) {\r\n                    toggleAnimations.get(nearestItem)?.cancel();\r\n                }\r\n                const isTargetClosestMenu = event.composedPath().find(target_i => target_i instanceof HTMLEMenuElement) == this;\r\n                if (isTargetClosestMenu) {\r\n                    const { activeItem } = this;\r\n                    if (activeItem?.type == \"submenu\" &&\r\n                        activeItem.expanded) {\r\n                        let toggleAnimation = toggleAnimations.get(activeItem);\r\n                        if (toggleAnimation) {\r\n                            toggleAnimation.cancel();\r\n                        }\r\n                        toggleAnimation = activeItem.animate(null, {\r\n                            duration: HIDE_DELAY_MS\r\n                        });\r\n                        toggleAnimations.set(activeItem, toggleAnimation);\r\n                        const { finished } = toggleAnimation;\r\n                        finished\r\n                            .then(() => {\r\n                            activeItem.collapse();\r\n                        })\r\n                            .catch(() => undefined)\r\n                            .finally(() => {\r\n                            toggleAnimations.delete(activeItem);\r\n                        });\r\n                    }\r\n                    const { left, right, top, bottom } = (() => {\r\n                        const parentItem = this.closest(\"e-menuitem\");\r\n                        if (parentItem && !parentItem.expanded) {\r\n                            parentItem.expand();\r\n                            const menuRect = this.getBoundingClientRect();\r\n                            parentItem.collapse();\r\n                            return menuRect;\r\n                        }\r\n                        else {\r\n                            return this.getBoundingClientRect();\r\n                        }\r\n                    })();\r\n                    const { clientX, clientY } = event;\r\n                    const intersectsWithMouse = !(left > clientX || right < clientX || top > clientY || bottom < clientY);\r\n                    const containsRelatedTarget = this.contains(relatedTarget);\r\n                    if (intersectsWithMouse && containsRelatedTarget) {\r\n                        if (relatedTarget instanceof HTMLEMenuElement && relatedTarget !== this) {\r\n                            relatedTarget.focus({ preventScroll: true });\r\n                        }\r\n                        else {\r\n                            this.focus({ preventScroll: true });\r\n                            this.#setActiveItem(null);\r\n                        }\r\n                    }\r\n                    if (!intersectsWithMouse) {\r\n                        this.focus({ preventScroll: true });\r\n                        this.#setActiveItem(null);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleMouseOverEvent(event) {\r\n        const { target } = event;\r\n        if (target instanceof HTMLEMenuItemElement) {\r\n            const nearestItem = this.#nearestItem(target);\r\n            if (nearestItem !== null) {\r\n                if (nearestItem.type === \"submenu\" && nearestItem.expanded) {\r\n                    toggleAnimations.get(nearestItem)?.cancel();\r\n                }\r\n                const isTargetClosestMenu = event.composedPath().find(target_i => target_i instanceof HTMLEMenuElement) == this;\r\n                if (isTargetClosestMenu) {\r\n                    const { activeItem } = this;\r\n                    if (activeItem?.type === \"submenu\" &&\r\n                        activeItem.expanded &&\r\n                        !activeItem.contains(target)) {\r\n                        let toggleAnimation = toggleAnimations.get(activeItem);\r\n                        if (toggleAnimation) {\r\n                            toggleAnimation.cancel();\r\n                        }\r\n                        toggleAnimation = activeItem.animate(null, {\r\n                            duration: SHOW_DELAY_MS\r\n                        });\r\n                        toggleAnimations.set(activeItem, toggleAnimation);\r\n                        const { finished } = toggleAnimation;\r\n                        finished\r\n                            .then(() => {\r\n                            activeItem.collapse();\r\n                        })\r\n                            .catch(() => undefined)\r\n                            .finally(() => {\r\n                            toggleAnimations.delete(activeItem);\r\n                        });\r\n                    }\r\n                    this.#setActiveItem(nearestItem);\r\n                    nearestItem.focus({ preventScroll: true });\r\n                    if (nearestItem.type === \"submenu\") {\r\n                        if (!nearestItem.expanded) {\r\n                            let toggleAnimation = toggleAnimations.get(nearestItem);\r\n                            if (toggleAnimation) {\r\n                                toggleAnimation.cancel();\r\n                            }\r\n                            toggleAnimation = nearestItem.animate(null, {\r\n                                duration: HIDE_DELAY_MS\r\n                            });\r\n                            toggleAnimations.set(nearestItem, toggleAnimation);\r\n                            const { finished } = toggleAnimation;\r\n                            finished\r\n                                .then(() => {\r\n                                const { activeItem } = this;\r\n                                this.#collapseSubmenus();\r\n                                if (activeItem) {\r\n                                    toggleAnimations.get(activeItem)?.cancel();\r\n                                    activeItem.expand();\r\n                                    activeItem.menu?.focus({ preventScroll: true });\r\n                                }\r\n                            })\r\n                                .catch(() => undefined)\r\n                                .finally(() => {\r\n                                toggleAnimations.delete(nearestItem);\r\n                            });\r\n                        }\r\n                        else {\r\n                            nearestItem.menu?.focus({ preventScroll: true });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEMenuElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEMenuElementBase.prototype, \"contextual\", void 0);\r\nHTMLEMenuElementBase = HTMLEMenuElementBase_1 = __decorate([\r\n    CustomElement({\r\n        name: \"e-menu\"\r\n    })\r\n], HTMLEMenuElementBase);\r\nvar HTMLEMenuElement = HTMLEMenuElementBase;\r\nvar EMenu = Object.assign(function (init) {\r\n    const { name, children } = init;\r\n    return element(\"e-menu\", {\r\n        attributes: {\r\n            name: name,\r\n            tabindex: -1,\r\n        },\r\n        children: children\r\n    });\r\n}, {\r\n    prototype: HTMLEMenuElement.prototype,\r\n});\r\n//# sourceMappingURL=Menu.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLEMenuItemElement } from \"./MenuItem\";\r\nimport { HTMLEMenuItemGroupElement } from \"./MenuItemGroup\";\r\nimport \"./Menu\";\r\nimport \"./MenuItem\";\r\nimport \"./MenuItemGroup\";\r\nexport { HTMLEMenuBarElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEMenuBarElementBase = class HTMLEMenuBarElementBase extends HTMLElement {\r\n    #activeIndex;\r\n    #walker;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                position: relative;\r\n                display: flex;\r\n                flex-direction: row;\r\n                width: max-content;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this));\r\n        this.#activeIndex = -1;\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n        this.addEventListener(\"mouseover\", this.#handleMouseOverEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const tabindex = this.getAttribute(\"tabindex\");\r\n        this.tabIndex = tabindex !== null ? parseInt(tabindex) : -1;\r\n    }\r\n    items() {\r\n        return Array.from(this.querySelectorAll(\":is(:scope, :scope > e-menuitemgroup) > e-menuitem\"));\r\n    }\r\n    get activeIndex() {\r\n        return this.#activeIndex;\r\n    }\r\n    get activeItem() {\r\n        const { activeIndex } = this;\r\n        return (this.querySelector(\":is(:scope, :scope > e-menuitemgroup) > e-menuitem:focus-within\") ?? activeIndex > -1) ? this.items()[activeIndex] ?? null : null;\r\n    }\r\n    #walkerNodeFilter(node) {\r\n        if (node instanceof HTMLEMenuItemElement && !(node.disabled || node.hidden)) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEMenuItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    firstItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.firstChild();\r\n    }\r\n    #lastItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.lastChild();\r\n    }\r\n    #previousItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.previousSibling();\r\n    }\r\n    #nextItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.nextSibling();\r\n    }\r\n    #firstChildItem(item) {\r\n        const { menu } = item;\r\n        if (menu) {\r\n            const walker = this.#walker;\r\n            walker.currentNode = menu;\r\n            return walker.firstChild();\r\n        }\r\n        return null;\r\n    }\r\n    #setActiveItem(item) {\r\n        const { activeItem, expanded } = this;\r\n        if (activeItem !== null && activeItem !== item) {\r\n            activeItem.collapse();\r\n        }\r\n        if (item !== null) {\r\n            if (expanded) {\r\n                item.expand();\r\n            }\r\n            this.#activeIndex = this.items().indexOf(item);\r\n        }\r\n        else {\r\n            this.#activeIndex = -1;\r\n        }\r\n    }\r\n    get #items() {\r\n        return Array.from(this.querySelectorAll(\":is(:scope, :scope > e-menuitemgroup) > e-menuitem\"));\r\n    }\r\n    #isClosestMenu(target) {\r\n        return target.closest(\":is(e-menubar, e-menu)\") == this;\r\n    }\r\n    #nearestItem(target) {\r\n        return this.#items.find(item_i => item_i.contains(target)) ?? null;\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const { activeItem } = this;\r\n        if (!this.contains(relatedTarget)) {\r\n            (activeItem ?? this.firstItem())?.focus();\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        if (target instanceof Element) {\r\n            const nearestItem = this.#nearestItem(target);\r\n            this.#setActiveItem(nearestItem);\r\n            this.tabIndex = -1;\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { target, relatedTarget } = event;\r\n        if (target instanceof HTMLElement) {\r\n            const nearestItem = this.#nearestItem(target);\r\n            if (nearestItem) {\r\n                nearestItem.collapse();\r\n            }\r\n        }\r\n        const lostFocusWithin = !this.contains(relatedTarget);\r\n        if (lostFocusWithin) {\r\n            this.expanded = false;\r\n            this.tabIndex = 0;\r\n        }\r\n    }\r\n    #handleMouseOverEvent(event) {\r\n        const { target } = event;\r\n        const { expanded, activeItem } = this;\r\n        if (target instanceof HTMLEMenuItemElement) {\r\n            const isClosestMenu = this.#isClosestMenu(target);\r\n            if (isClosestMenu && target !== activeItem && expanded) {\r\n                const { menu } = target;\r\n                if (menu) {\r\n                    target.expand();\r\n                    menu.focus({ preventScroll: true });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleClickEvent(event) {\r\n        const { target } = event;\r\n        const { expanded, activeItem } = this;\r\n        if (target instanceof HTMLEMenuItemElement) {\r\n            const isClosestMenu = this.#isClosestMenu(target);\r\n            if (isClosestMenu) {\r\n                const isExpanded = !expanded;\r\n                this.expanded = isExpanded;\r\n                if (isExpanded) {\r\n                    if (activeItem && !activeItem.expanded) {\r\n                        activeItem.expand();\r\n                    }\r\n                    const { menu } = target;\r\n                    menu?.focus({ preventScroll: true });\r\n                }\r\n                else {\r\n                    if (activeItem) {\r\n                        activeItem.collapse();\r\n                        activeItem.blur();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { expanded } = this;\r\n        let { activeItem } = this;\r\n        switch (key) {\r\n            case \"ArrowLeft\": {\r\n                const previousItem = activeItem ?\r\n                    this.#previousItem(activeItem) ?? this.#lastItem() :\r\n                    this.firstItem();\r\n                previousItem?.focus({ preventScroll: true });\r\n                ({ activeItem } = this);\r\n                if (expanded && activeItem) {\r\n                    const firstChildItem = this.#firstChildItem(activeItem);\r\n                    firstChildItem?.focus({ preventScroll: true });\r\n                }\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                const nextItem = activeItem ?\r\n                    this.#nextItem(activeItem) ?? this.firstItem() :\r\n                    this.#lastItem();\r\n                nextItem?.focus({ preventScroll: true });\r\n                ({ activeItem } = this);\r\n                if (expanded && activeItem) {\r\n                    const firstChildItem = this.#firstChildItem(activeItem);\r\n                    firstChildItem?.focus({ preventScroll: true });\r\n                }\r\n                break;\r\n            }\r\n            case \"Enter\":\r\n            case \" \": {\r\n                if (activeItem) {\r\n                    this.expanded = !expanded;\r\n                    if (!expanded) {\r\n                        const firstChildItem = this.#firstChildItem(activeItem);\r\n                        firstChildItem?.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"Escape\": {\r\n                if (expanded) {\r\n                    this.expanded = false;\r\n                    if (activeItem) {\r\n                        activeItem.collapse();\r\n                        activeItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                else {\r\n                    this.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEMenuBarElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEMenuBarElementBase.prototype, \"expanded\", void 0);\r\nHTMLEMenuBarElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-menubar\"\r\n    })\r\n], HTMLEMenuBarElementBase);\r\nvar HTMLEMenuBarElement = HTMLEMenuBarElementBase;\r\n//# sourceMappingURL=MenuBar.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR, DEFAULT_THEME_FOCUSED_ITEM_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element, QueryProperty } from \"../../Element\";\r\nimport \"./Menu\";\r\nimport \"./MenuItem\";\r\nimport \"./MenuItemGroup\";\r\nexport { HTMLEMenuButtonElement };\r\nexport { EMenuButton };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEMenuButtonElementBase = class HTMLEMenuButtonElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"), element(\"slot\", {\r\n            attributes: {\r\n                name: \"menu\"\r\n            }\r\n        }));\r\n        style = /*css*/ `\r\n            :host {\r\n                position: relative;\r\n                display: inline-block;\r\n                padding: 2px;\r\n                line-height: 18px;\r\n                user-select: none;\r\n                white-space: nowrap;\r\n                cursor: pointer;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            :host(:focus-within:not(:focus)) {\r\n                background-color: var(--theme-focused-item-color, ${DEFAULT_THEME_FOCUSED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host(:hover:not(:focus-within)) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([disabled]) {\r\n                color: lightgray;\r\n            }\r\n            \r\n            ::slotted([slot=\"menu\"]) {\r\n                z-index: 1;\r\n                position: absolute;\r\n                color: initial;\r\n            }\r\n            \r\n            :host(:not([expanded])) ::slotted([slot=\"menu\"]) {\r\n                opacity: 0;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host::after {\r\n                display: inline-block;\r\n                text-align: center;\r\n                width: 18px;\r\n                height: 18px;\r\n                content: \"▾\";\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const tabindex = this.getAttribute(\"tabindex\");\r\n        this.tabIndex = tabindex !== null ? parseInt(tabindex) : -1;\r\n    }\r\n    toggle(force) {\r\n        const { expanded } = this;\r\n        const expand = force ?? !expanded;\r\n        expand ? this.expand() : this.collapse();\r\n    }\r\n    expand() {\r\n        const { expanded } = this;\r\n        if (!expanded) {\r\n            this.expanded = true;\r\n            this.#positionMenu();\r\n        }\r\n    }\r\n    collapse() {\r\n        const { expanded } = this;\r\n        if (expanded) {\r\n            this.expanded = false;\r\n        }\r\n    }\r\n    #positionMenu() {\r\n        const { menu } = this;\r\n        if (menu !== null) {\r\n            const { width, height } = this.getBoundingClientRect();\r\n            const { style: menuStyle } = menu;\r\n            const { width: menuWidth, height: menuHeight } = menu.getBoundingClientRect();\r\n            const { clientWidth, clientHeight } = document.body;\r\n            const { offsetLeft, offsetTop } = this;\r\n            const overflowX = offsetLeft + width + menuWidth - clientWidth;\r\n            const overflowY = offsetTop + menuHeight - clientHeight;\r\n            menuStyle.setProperty(\"left\", `${overflowX > 0 ?\r\n                width - menuWidth :\r\n                0}px`);\r\n            menuStyle.setProperty(\"top\", `${overflowY > 0 ?\r\n                -menuHeight :\r\n                height}px`);\r\n        }\r\n    }\r\n    #handleClickEvent(event) {\r\n        const { target } = event;\r\n        const { menu } = this;\r\n        if (menu && !menu.contains(target)) {\r\n            this.toggle();\r\n            const { expanded } = this;\r\n            if (expanded) {\r\n                menu?.focus({ preventScroll: true });\r\n            }\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const lostFocusWithin = !this.contains(relatedTarget);\r\n        if (lostFocusWithin) {\r\n            this.collapse();\r\n        }\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { expanded } = this;\r\n        switch (key) {\r\n            case \"ArrowDown\":\r\n            case \"Enter\":\r\n                if (!expanded) {\r\n                    this.expand();\r\n                    this.firstItem?.focus({ preventScroll: true });\r\n                    event.stopPropagation();\r\n                }\r\n                break;\r\n            case \"Escape\":\r\n                if (expanded) {\r\n                    this.collapse();\r\n                }\r\n                this.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    QueryProperty({ selector: \":scope > e-menu[slot=menu]\" })\r\n], HTMLEMenuButtonElementBase.prototype, \"menu\", void 0);\r\n__decorate([\r\n    QueryProperty({ selector: \":scope > e-menu[slot=menu] e-menuitem\" })\r\n], HTMLEMenuButtonElementBase.prototype, \"firstItem\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEMenuButtonElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEMenuButtonElementBase.prototype, \"disabled\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEMenuButtonElementBase.prototype, \"expanded\", void 0);\r\nHTMLEMenuButtonElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-menubutton\"\r\n    })\r\n], HTMLEMenuButtonElementBase);\r\nvar HTMLEMenuButtonElement = HTMLEMenuButtonElementBase;\r\nvar EMenuButton = Object.assign(function (init) {\r\n    const { menu } = init;\r\n    menu.slot = \"menu\";\r\n    return element(\"e-menubutton\", {\r\n        attributes: {\r\n            tabindex: -1\r\n        },\r\n        children: [menu]\r\n    });\r\n}, {\r\n    prototype: HTMLEMenuButtonElement.prototype,\r\n});\r\n//# sourceMappingURL=MenuButton.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { element, reactiveChildElements, CustomElement, fragment, reactiveElement } from \"../elements/Element\";\r\nimport { ModelList, ModelObject, ReactiveProperty } from \"../models/Model\";\r\nimport { View } from \"./View\";\r\nimport { resetStylesheet } from \"../stylesheets/Reset\";\r\nexport { GridModel };\r\nexport { GridRowModel };\r\nexport { GridColumnModel };\r\nexport { GridView };\r\nimport \"../elements/controls/sashes\";\r\nimport \"../elements/containers/grid\";\r\nimport \"../elements/containers/menus\";\r\nimport { DEFAULT_THEME_ARROW_DROPDOWN_IMAGE, DEFAULT_THEME_ARROW_DROPUP_IMAGE } from \"../stylesheets/Theme\";\r\nclass GridModel extends ModelObject {\r\n    rows;\r\n    columns;\r\n    constructor(init) {\r\n        super();\r\n        const { rows: initRows = [], columns: initColumns = [] } = init ?? {};\r\n        const rows = new ModelList(initRows);\r\n        rows.setParent(this);\r\n        this.rows = rows;\r\n        const columns = new ModelList(initColumns);\r\n        columns.setParent(this);\r\n        this.columns = columns;\r\n    }\r\n    getColumnByName(name) {\r\n        return Array.from(this.columns.values()).find(column_i => column_i.name == name) ?? null;\r\n    }\r\n    sortByColumn(column, sortOrder) {\r\n        Array.from(this.columns.values()).forEach((column_i) => {\r\n            column_i.sortorder = column_i === column ? sortOrder : undefined;\r\n        });\r\n        const sortTest = (() => {\r\n            const { type } = column;\r\n            switch (type) {\r\n                case String: {\r\n                    return (row_1, row_2) => {\r\n                        const cell_1 = String(column.extract(row_1));\r\n                        const cell_2 = String(column.extract(row_2));\r\n                        return sortOrder * cell_1.localeCompare(cell_2);\r\n                    };\r\n                }\r\n                default: {\r\n                    return (row_1, row_2) => {\r\n                        const cell_1 = Number(column.extract(row_1));\r\n                        const cell_2 = Number(column.extract(row_2));\r\n                        return Math.sign(sortOrder * (cell_1 - cell_2));\r\n                    };\r\n                }\r\n            }\r\n        })();\r\n        this.rows.sort(sortTest);\r\n    }\r\n}\r\nclass GridColumnModel extends ModelObject {\r\n    name;\r\n    type;\r\n    label;\r\n    extract;\r\n    filters;\r\n    sortorder;\r\n    constructor(init) {\r\n        super();\r\n        const { name, type, label, extract, filters = [] } = init;\r\n        this.name = name;\r\n        this.type = type;\r\n        this.label = label;\r\n        this.extract = extract;\r\n        this.filters = filters;\r\n    }\r\n}\r\n__decorate([\r\n    ReactiveProperty()\r\n], GridColumnModel.prototype, \"sortorder\", void 0);\r\nclass GridRowModel extends ModelObject {\r\n    id;\r\n    constructor(init) {\r\n        super();\r\n        const { id } = init;\r\n        this.id = id;\r\n    }\r\n}\r\nvar style;\r\nlet GridViewBase = class GridViewBase extends View {\r\n    #columnDelegate;\r\n    #cellDelegate;\r\n    #displayFilters;\r\n    static {\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n            }\r\n            \r\n            e-gridrow[hidden] {\r\n                display: none;\r\n            }\r\n            \r\n            e-gridcell[type=\"gridcell\"] {\r\n                max-width: 0;\r\n                overflow: clip;\r\n                text-overflow: ellipsis;\r\n                white-space: nowrap;\r\n            }\r\n            \r\n            e-gridcell[type=\"columnheader\"] {\r\n                width: 120px;\r\n            }\r\n            \r\n            .gridcell-label,\r\n            .gridheader-label {\r\n                padding-left: 4px;\r\n            }\r\n            \r\n            .gridcell-content {\r\n                overflow: clip;\r\n            }\r\n            \r\n            .gridheader-content {\r\n                display: flex;\r\n            }\r\n            \r\n            .gridheader-label {\r\n                flex: 1 1 0;\r\n                overflow: clip;\r\n                text-overflow: ellipsis;\r\n                white-space: nowrap;\r\n            }\r\n            \r\n            e-treeitem::part(arrow) {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                margin: 1px 4px 1px 1px;\r\n            }\r\n            \r\n            .gridheader-sort-indicator {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n            }\r\n            \r\n            .gridheader-sort-indicator::before {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                margin: 1px;\r\n                content: \"\";\r\n\r\n                mask-size: 18px 18px;\r\n                -webkit-mask-size: 18px 18px;\r\n                background-color: none;\r\n            }\r\n            \r\n            e-gridcell[type=\"columnheader\"]:not([data-sortorder]) .gridheader-sort-indicator::before {\r\n                background-color: unset;\r\n            }\r\n            \r\n            e-gridcell[type=\"columnheader\"][data-sortorder=\"1\"] .gridheader-sort-indicator::before {\r\n                -webkit-mask-image: var(--theme-arrow-dropup-image, url(${DEFAULT_THEME_ARROW_DROPUP_IMAGE}));\r\n                mask-image: var(--theme-arrow-dropup-image, url(${DEFAULT_THEME_ARROW_DROPUP_IMAGE}));\r\n                background-color: black;\r\n            }\r\n            \r\n            e-gridcell[type=\"columnheader\"][data-sortorder=\"-1\"] .gridheader-sort-indicator::before {\r\n                -webkit-mask-image: var(--theme-arrow-dropdown-image, url(${DEFAULT_THEME_ARROW_DROPDOWN_IMAGE}));\r\n                mask-image: var(--theme-arrow-dropdown-image, url(${DEFAULT_THEME_ARROW_DROPDOWN_IMAGE}));\r\n                background-color: black;\r\n            }\r\n        `;\r\n    }\r\n    constructor(model) {\r\n        super();\r\n        this.#displayFilters = [];\r\n        this.#cellDelegate =\r\n            (row, column) => element(\"label\", {\r\n                children: column.extract(row)\r\n            });\r\n        this.#columnDelegate =\r\n            (column) => element(\"label\", {\r\n                children: column.label\r\n            });\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet, resetStylesheet];\r\n        this.setModel(model ?? new GridModel());\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"resizable\":\r\n            case \"sortable\": {\r\n                this.render();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    get gridElement() {\r\n        return this.shadowRoot.querySelector(\"e-grid\");\r\n    }\r\n    setColumnDelegate(delegate) {\r\n        this.#columnDelegate = delegate;\r\n    }\r\n    setCellDelegate(delegate) {\r\n        this.#cellDelegate = delegate;\r\n    }\r\n    getRowElement(row) {\r\n        return this.shadowRoot.querySelector(`e-grid > e-gridbody > e-gridrow[data-index='${row.id}']`);\r\n    }\r\n    getColumnHeaderElement(column) {\r\n        return this.shadowRoot.querySelector(`e-grid > e-gridhead > e-gridcell[id=${column.name}]`);\r\n    }\r\n    getColumnCellsElements(column) {\r\n        return Array.from(this.shadowRoot.querySelectorAll(`e-grid > e-gridbody > e-gridrow > e-gridcell[headers~=${column.name}]`));\r\n    }\r\n    renderShadow() {\r\n        const { model } = this;\r\n        return fragment(element(\"e-grid\", {\r\n            attributes: {\r\n                tabindex: 0,\r\n                selectby: \"row\",\r\n                multisectable: true\r\n            },\r\n            children: [\r\n                element(\"e-gridhead\", {\r\n                    children: reactiveChildElements(model.columns, column => this.#renderGridColumnHeaderCell(column)),\r\n                    listeners: {\r\n                        contextmenu: this.#handleHeadContextMenuEvent.bind(this),\r\n                        click: this.#handleHeadClickEvent.bind(this)\r\n                    }\r\n                }),\r\n                element(\"e-gridbody\", {\r\n                    children: reactiveChildElements(model.rows, row => this.#renderGridBodyRow(row))\r\n                })\r\n            ]\r\n        }));\r\n    }\r\n    filter(row) {\r\n        const displayFilters = this.#displayFilters;\r\n        return (displayFilters.length > 0 ? displayFilters.some(filter_i => filter_i.filter(row)) : true);\r\n    }\r\n    addDisplayFilter(filter) {\r\n        const { model, gridElement } = this;\r\n        const { rows } = model;\r\n        const displayFilters = this.#displayFilters;\r\n        if (!displayFilters.includes(filter)) {\r\n            displayFilters.push(filter);\r\n            Array.from(rows.values()).forEach((row_i) => {\r\n                const rowElement = this.getRowElement(row_i);\r\n                if (rowElement) {\r\n                    rowElement.hidden = !this.filter(row_i);\r\n                }\r\n            });\r\n        }\r\n        gridElement.clearSelection();\r\n    }\r\n    removeDisplayFilter(filter) {\r\n        const { model, gridElement } = this;\r\n        const { rows } = model;\r\n        const displayFilters = this.#displayFilters;\r\n        const filterIndex = displayFilters.indexOf(filter);\r\n        if (filterIndex > -1) {\r\n            displayFilters.splice(filterIndex, 1);\r\n            Array.from(rows.values()).forEach((row_i) => {\r\n                const rowElement = this.getRowElement(row_i);\r\n                if (rowElement) {\r\n                    rowElement.hidden = !this.filter(row_i);\r\n                }\r\n            });\r\n        }\r\n        gridElement.clearSelection();\r\n    }\r\n    removeAllDisplayFilters() {\r\n        const { model, gridElement } = this;\r\n        const { rows } = model;\r\n        const displayFilters = this.#displayFilters;\r\n        displayFilters.splice(0, displayFilters.length);\r\n        Array.from(rows.values()).forEach((row_i) => {\r\n            const rowElement = this.getRowElement(row_i);\r\n            if (rowElement) {\r\n                rowElement.hidden = !this.filter(row_i);\r\n            }\r\n        });\r\n        gridElement.clearSelection();\r\n    }\r\n    #renderGridColumnHeaderCell(column) {\r\n        const gridColumnElement = reactiveElement(column, element(\"e-gridcell\", {\r\n            attributes: {\r\n                type: \"columnheader\",\r\n                id: column.name\r\n            },\r\n            children: [\r\n                element(\"span\", {\r\n                    attributes: {\r\n                        class: \"gridheader-content\"\r\n                    },\r\n                    children: [\r\n                        element(\"span\", {\r\n                            attributes: {\r\n                                class: \"gridheader-label\"\r\n                            },\r\n                            children: this.#columnDelegate(column)\r\n                        }),\r\n                        element(\"span\", {\r\n                            attributes: {\r\n                                class: \"gridheader-sort-indicator\"\r\n                            }\r\n                        }),\r\n                        element(\"e-wsash\", {\r\n                            attributes: {\r\n                                controls: column.name\r\n                            }\r\n                        })\r\n                    ]\r\n                })\r\n            ]\r\n        }), [\"sortorder\"], (cell, property, oldValue, newValue) => {\r\n            switch (property) {\r\n                case \"sortorder\": {\r\n                    const { dataset } = cell;\r\n                    if (typeof newValue !== \"undefined\") {\r\n                        dataset.sortorder = newValue.toString();\r\n                    }\r\n                    else {\r\n                        delete dataset.sortorder;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n        return gridColumnElement;\r\n    }\r\n    #renderGridBodyRow(row) {\r\n        const { model } = this;\r\n        const gridRowElement = element(\"e-gridrow\", {\r\n            attributes: {\r\n                tabindex: -1\r\n            },\r\n            dataset: {\r\n                index: row.id\r\n            },\r\n            children: reactiveChildElements(model.columns, column => this.#renderGridDataCell(row, column))\r\n        });\r\n        return gridRowElement;\r\n    }\r\n    #renderGridDataCell(row, column) {\r\n        const gridCellElement = element(\"e-gridcell\", {\r\n            attributes: {\r\n                type: \"gridcell\",\r\n                headers: column.name\r\n            },\r\n            children: element(\"span\", {\r\n                attributes: {\r\n                    class: \"gridcell-content\"\r\n                },\r\n                children: [\r\n                    element(\"span\", {\r\n                        attributes: {\r\n                            class: \"gridcell-label\"\r\n                        },\r\n                        children: this.#cellDelegate(row, column)\r\n                    })\r\n                ]\r\n            })\r\n        });\r\n        return gridCellElement;\r\n    }\r\n    #handleHeadContextMenuEvent(event) {\r\n        const { clientX, clientY, currentTarget, target } = event;\r\n        const { gridElement } = this;\r\n        const targetHead = currentTarget;\r\n        const targetHeader = target.closest(\"e-gridcell\");\r\n        const { model } = this;\r\n        if (targetHeader) {\r\n            const column = model.getColumnByName(targetHeader.id);\r\n            const { sortorder, filters } = column;\r\n            const contextMenu = element(\"e-menu\", {\r\n                attributes: {\r\n                    contextual: true\r\n                },\r\n                children: [\r\n                    element(\"e-menuitem\", {\r\n                        attributes: {\r\n                            label: \"Resize Auto\"\r\n                        },\r\n                        children: \"Resize auto\",\r\n                        listeners: {\r\n                            click: () => {\r\n                                const columnHeaderElement = this.getColumnHeaderElement(column);\r\n                                if (columnHeaderElement) {\r\n                                    const { style } = columnHeaderElement;\r\n                                    const labels = this.getColumnCellsElements(column).map(cell_i => cell_i.querySelector(\".gridcell-label\"));\r\n                                    const maxWidth = labels.reduce((maxWidth, label) => Math.max(maxWidth, label.getBoundingClientRect().width), 0);\r\n                                    style.setProperty(\"width\", `${maxWidth}px`);\r\n                                }\r\n                                gridElement.focus();\r\n                            }\r\n                        }\r\n                    }),\r\n                    element(\"e-menuitem\", {\r\n                        attributes: {\r\n                            label: \"Resize To Default\"\r\n                        },\r\n                        children: \"Resize to Default\",\r\n                        listeners: {\r\n                            click: () => {\r\n                                const columnHeaderElement = this.getColumnHeaderElement(column);\r\n                                if (columnHeaderElement) {\r\n                                    const { style } = columnHeaderElement;\r\n                                    style.removeProperty(\"width\");\r\n                                }\r\n                                gridElement.focus();\r\n                            }\r\n                        }\r\n                    }),\r\n                    element(\"e-menuitem\", {\r\n                        attributes: {\r\n                            type: \"submenu\",\r\n                            label: \"Sort\",\r\n                        },\r\n                        children: [\r\n                            \"Sort\",\r\n                            element(\"e-menu\", {\r\n                                attributes: {\r\n                                    slot: \"menu\"\r\n                                },\r\n                                children: [\r\n                                    element(\"e-menuitem\", {\r\n                                        attributes: {\r\n                                            type: \"radio\",\r\n                                            name: \"sort\",\r\n                                            value: \"1\",\r\n                                            label: \"Ascending\",\r\n                                            checked: sortorder === 1\r\n                                        },\r\n                                        children: \"Ascending\"\r\n                                    }),\r\n                                    element(\"e-menuitem\", {\r\n                                        attributes: {\r\n                                            type: \"radio\",\r\n                                            name: \"sort\",\r\n                                            value: \"-1\",\r\n                                            label: \"Descending\",\r\n                                            checked: sortorder === -1\r\n                                        },\r\n                                        children: \"Descending\"\r\n                                    })\r\n                                ],\r\n                                listeners: {\r\n                                    click: (event) => {\r\n                                        const { target } = event;\r\n                                        const targetItem = target.closest(\"e-menuitem\");\r\n                                        if (targetItem) {\r\n                                            model.sortByColumn(column, Number(targetItem.value));\r\n                                        }\r\n                                        gridElement.focus();\r\n                                    }\r\n                                }\r\n                            })\r\n                        ]\r\n                    }),\r\n                    element(\"e-menuitem\", {\r\n                        attributes: {\r\n                            type: \"submenu\",\r\n                            label: \"Filter\"\r\n                        },\r\n                        children: [\r\n                            \"Filter\",\r\n                            element(\"e-menu\", {\r\n                                attributes: {\r\n                                    slot: \"menu\"\r\n                                },\r\n                                children: filters.map(filter => {\r\n                                    const { name } = filter;\r\n                                    return element(\"e-menuitem\", {\r\n                                        attributes: {\r\n                                            type: \"checkbox\",\r\n                                            checked: this.#displayFilters.includes(filter),\r\n                                            label: name\r\n                                        },\r\n                                        children: name\r\n                                    });\r\n                                }).concat(element(\"e-menuitem\", {\r\n                                    attributes: {\r\n                                        type: \"button\",\r\n                                        label: \"Remove filters\"\r\n                                    },\r\n                                    children: \"Remove filters\"\r\n                                })),\r\n                                listeners: {\r\n                                    click: (event) => {\r\n                                        const { target } = event;\r\n                                        const targetItem = target.closest(\"e-menuitem\");\r\n                                        if (targetItem) {\r\n                                            const { checked, label } = targetItem;\r\n                                            const filter = filters.find(filter => filter.name === label);\r\n                                            if (filter) {\r\n                                                if (checked) {\r\n                                                    this.addDisplayFilter(filter);\r\n                                                }\r\n                                                else {\r\n                                                    this.removeDisplayFilter(filter);\r\n                                                }\r\n                                            }\r\n                                            else {\r\n                                                this.removeAllDisplayFilters();\r\n                                            }\r\n                                        }\r\n                                        gridElement.focus();\r\n                                    }\r\n                                }\r\n                            })\r\n                        ]\r\n                    })\r\n                ]\r\n            });\r\n            targetHead.append(contextMenu);\r\n            contextMenu.positionContextual(clientX, clientY);\r\n            contextMenu.focus({ preventScroll: true });\r\n            event.preventDefault();\r\n        }\r\n    }\r\n    #handleHeadClickEvent(event) {\r\n        const { target } = event;\r\n        const targetIsHeaderContent = target.matches(\"e-gridcell[type=columnheader] :scope:not(e-wsash)\");\r\n        if (targetIsHeaderContent) {\r\n            const targetHeader = target.closest(\"e-gridcell\");\r\n            const { model } = this;\r\n            const { columns } = model;\r\n            if (targetHeader) {\r\n                const targetColumn = Array.from(columns.values()).find(column_i => column_i.name == targetHeader.id);\r\n                if (targetColumn) {\r\n                    const { sortorder = -1 } = targetColumn;\r\n                    model.sortByColumn(targetColumn, -sortorder);\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\nGridViewBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-gridview\"\r\n    })\r\n], GridViewBase);\r\nvar GridView = GridViewBase;\r\n//# sourceMappingURL=GridView.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_ARROW_DROPDOWN_IMAGE, DEFAULT_THEME_ARROW_RIGHT_IMAGE, DEFAULT_THEME_DROPTARGET_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR, DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, element, AttributeProperty, QueryProperty } from \"../../Element\";\r\nexport { HTMLETreeItemElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLETreeItemElementBase = class HTMLETreeItemElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"div\", {\r\n            attributes: {\r\n                part: \"content\"\r\n            },\r\n            children: [\r\n                element(\"span\", {\r\n                    attributes: {\r\n                        part: \"arrow\"\r\n                    }\r\n                }),\r\n                element(\"slot\")\r\n            ]\r\n        }), element(\"slot\", {\r\n            attributes: {\r\n                name: \"group\"\r\n            }\r\n        }));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n                user-select: none;\r\n            }\r\n            \r\n            :host([droptarget]) {\r\n                background-color: var(--theme-droptarget-item-color, ${DEFAULT_THEME_DROPTARGET_ITEM_COLOR});\r\n            }\r\n\r\n            :host(:focus-visible) {\r\n                outline: none;\r\n            }\r\n            \r\n            :host([active]):host-context(e-tree:focus-within) [part=\"content\"] {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            [part=\"content\"]:hover {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([selected]) [part=\"content\"] {\r\n                background-color: var(--theme-selected-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n            }\r\n            \r\n            [part=\"content\"] {\r\n                display: flex;\r\n                line-height: 22px;\r\n                padding-left: 12px;\r\n            }\r\n            \r\n            :host(:not([type=\"parent\"])) ::slotted([slot=\"group\"]),\r\n            :host(:not([expanded])) ::slotted([slot=\"group\"]) {\r\n                display: none;\r\n            }\r\n            \r\n            :host(:not([type=\"parent\"])) [part=\"arrow\"]::before {\r\n                visibility: hidden;\r\n            }\r\n            \r\n            [part=\"arrow\"] {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                margin: 1px 4px 1px 1px;\r\n            }\r\n            \r\n            [part=\"arrow\"]::before {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                margin: 1px;\r\n                content: \"\";\r\n\r\n                mask-size: 18px 18px;\r\n                -webkit-mask-size: 18px 18px;\r\n                background-color: none;\r\n            }\r\n            \r\n            :host(:not([expanded])) [part=\"arrow\"]::before {\r\n                -webkit-mask-image: var(--theme-arrow-right-image, url(${DEFAULT_THEME_ARROW_RIGHT_IMAGE}));\r\n                mask-image: var(--theme-arrow-right-image, url(${DEFAULT_THEME_ARROW_RIGHT_IMAGE}));\r\n                background-color: black;\r\n            }\r\n            \r\n            :host([expanded]) [part=\"arrow\"]::before {\r\n                -webkit-mask-image: var(--theme-arrow-dropdown-image, url(${DEFAULT_THEME_ARROW_DROPDOWN_IMAGE}));\r\n                mask-image: var(--theme-arrow-dropdown-image, url(${DEFAULT_THEME_ARROW_DROPDOWN_IMAGE}));\r\n                background-color: black;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"expanded\": {\r\n                this.dispatchEvent(new Event(\"toggle\", { bubbles: true }));\r\n                break;\r\n            }\r\n            case \"selected\": {\r\n                this.dispatchEvent(new Event(\"select\", { bubbles: true }));\r\n                break;\r\n            }\r\n            case \"label\": {\r\n                const labelPart = this.shadowRoot.querySelector(\"[part=label]\");\r\n                if (labelPart) {\r\n                    labelPart.textContent = newValue;\r\n                }\r\n                break;\r\n            }\r\n            case \"level\": {\r\n                this.shadowRoot.adoptedStyleSheets[0].cssRules[6].styleMap.set(\"padding-left\", `${12 * Number(newValue)}px`);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    toggle(force) {\r\n        const { expanded } = this;\r\n        this.expanded = force ?? !expanded;\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLETreeItemElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Number })\r\n], HTMLETreeItemElementBase.prototype, \"posinset\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLETreeItemElementBase.prototype, \"label\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLETreeItemElementBase.prototype, \"expanded\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLETreeItemElementBase.prototype, \"droptarget\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLETreeItemElementBase.prototype, \"active\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLETreeItemElementBase.prototype, \"selected\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Number, observed: true })\r\n], HTMLETreeItemElementBase.prototype, \"level\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, defaultValue: \"leaf\" })\r\n], HTMLETreeItemElementBase.prototype, \"type\", void 0);\r\n__decorate([\r\n    QueryProperty({ selector: \":scope > e-treeitemgroup[slot=group]\" })\r\n], HTMLETreeItemElementBase.prototype, \"group\", void 0);\r\nHTMLETreeItemElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-treeitem\"\r\n    })\r\n], HTMLETreeItemElementBase);\r\nvar HTMLETreeItemElement = HTMLETreeItemElementBase;\r\n//# sourceMappingURL=TreeItem.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, element } from \"../../Element\";\r\nimport \"./TreeItem\";\r\nexport { HTMLETreeItemGroupElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLETreeItemGroupElementBase = class HTMLETreeItemGroupElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n};\r\nHTMLETreeItemGroupElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-treeitemgroup\"\r\n    })\r\n], HTMLETreeItemGroupElementBase);\r\nvar HTMLETreeItemGroupElement = HTMLETreeItemGroupElementBase;\r\n//# sourceMappingURL=TreeItemGroup.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLETreeItemElement } from \"./TreeItem\";\r\nimport { HTMLETreeItemGroupElement } from \"./TreeItemGroup\";\r\nimport \"./TreeItem\";\r\nimport \"./TreeItemGroup\";\r\nexport { HTMLETreeElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLETreeElementBase = class HTMLETreeElementBase extends HTMLElement {\r\n    items;\r\n    get activeItem() {\r\n        return this.querySelector(\"e-treeitem[active]\");\r\n    }\r\n    get dropTargetItem() {\r\n        return this.querySelector(\"e-treeitem[droptarget]\");\r\n    }\r\n    #onSelection;\r\n    #hasSelectionChanged;\r\n    #walker;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#nodeFilter.bind(this));\r\n        this.#onSelection = false;\r\n        this.#hasSelectionChanged = false;\r\n        this.items = this.getElementsByTagName(\"e-treeitem\");\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"contextmenu\", this.#handleContextMenuEvent.bind(this));\r\n        this.addEventListener(\"dblclick\", this.#handleDblClickEvent.bind(this));\r\n        this.addEventListener(\"mousedown\", this.#handleMouseDownEvent.bind(this));\r\n        this.addEventListener(\"dragend\", this.#handleDragEndEvent.bind(this));\r\n        this.addEventListener(\"dragenter\", this.#handleDragEnterEvent.bind(this));\r\n        this.addEventListener(\"dragleave\", this.#handleDragLeaveEvent.bind(this));\r\n        this.addEventListener(\"dragover\", this.#handleDragOverEvent.bind(this));\r\n        this.addEventListener(\"drop\", this.#handleDropEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n        this.addEventListener(\"select\", this.#handleSelectEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    selectedItems() {\r\n        const selectedItems = [];\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        let item = this.firstItem();\r\n        while (item !== null) {\r\n            if (item.selected) {\r\n                selectedItems.push(item);\r\n            }\r\n            item = this.#nextItem(item);\r\n        }\r\n        return selectedItems;\r\n    }\r\n    beginSelection() {\r\n        this.#onSelection = true;\r\n    }\r\n    endSelection() {\r\n        this.#onSelection = false;\r\n        if (this.#hasSelectionChanged) {\r\n            this.dispatchEvent(new Event(\"selectionchange\", { bubbles: true }));\r\n            this.#hasSelectionChanged = false;\r\n        }\r\n    }\r\n    #nodeFilter(node) {\r\n        if (node instanceof HTMLETreeItemElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLETreeItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    #getItemsRange(from, to) {\r\n        if (from == to) {\r\n            return [from];\r\n        }\r\n        const position = from.compareDocumentPosition(to);\r\n        if (position & Node.DOCUMENT_POSITION_FOLLOWING) {\r\n            const range = [from];\r\n            let nextVisibleItem = this.#nextItem(from);\r\n            while (nextVisibleItem && nextVisibleItem !== to) {\r\n                range.push(nextVisibleItem);\r\n                nextVisibleItem = this.#nextItem(nextVisibleItem);\r\n            }\r\n            range.push(to);\r\n            return range;\r\n        }\r\n        else if (position & Node.DOCUMENT_POSITION_PRECEDING) {\r\n            const range = [from];\r\n            let previousVisibleItem = this.#previousItem(from);\r\n            while (previousVisibleItem && previousVisibleItem !== to) {\r\n                range.push(previousVisibleItem);\r\n                previousVisibleItem = this.#previousItem(previousVisibleItem);\r\n            }\r\n            range.push(to);\r\n            return range;\r\n        }\r\n        return [];\r\n    }\r\n    #setSelection(...items) {\r\n        const selectedItems = this.selectedItems();\r\n        this.beginSelection();\r\n        selectedItems.forEach((selectedItem_i) => {\r\n            if (!items.includes(selectedItem_i)) {\r\n                selectedItem_i.selected = false;\r\n            }\r\n        });\r\n        items.forEach((item_i) => {\r\n            if (this.contains(item_i) && !item_i.selected) {\r\n                item_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #addToSelection(...items) {\r\n        this.beginSelection();\r\n        items.forEach((item_i) => {\r\n            if (!item_i.selected) {\r\n                item_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #removeFromSelection(...items) {\r\n        const selectedItems = this.selectedItems();\r\n        this.beginSelection();\r\n        items.forEach((item_i) => {\r\n            if (selectedItems.includes(item_i)) {\r\n                item_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #clearSelection() {\r\n        const selectedItems = this.selectedItems();\r\n        this.beginSelection();\r\n        selectedItems.forEach((item_i) => {\r\n            item_i.selected = false;\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #setActiveItem(item) {\r\n        const { activeItem } = this;\r\n        if (activeItem !== null && activeItem !== item) {\r\n            activeItem.active = false;\r\n            activeItem.tabIndex = -1;\r\n        }\r\n        if (item !== null) {\r\n            const walker = this.#walker;\r\n            walker.currentNode = item;\r\n            item.active = true;\r\n            item.tabIndex = 0;\r\n        }\r\n    }\r\n    #setDropTargetItem(item) {\r\n        const { dropTargetItem } = this;\r\n        if (dropTargetItem !== null && dropTargetItem !== item) {\r\n            dropTargetItem.droptarget = false;\r\n        }\r\n        if (item !== null) {\r\n            this.droptarget = true;\r\n            item.droptarget = true;\r\n        }\r\n        else {\r\n            this.droptarget = false;\r\n        }\r\n    }\r\n    firstItem() {\r\n        const walker = this.#walker;\r\n        const { root } = walker;\r\n        walker.currentNode = root;\r\n        return walker.firstChild();\r\n    }\r\n    #lastItem() {\r\n        const walker = this.#walker;\r\n        const { root } = walker;\r\n        walker.currentNode = root;\r\n        return walker.lastChild();\r\n    }\r\n    #previousItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const previousSibling = walker.previousSibling();\r\n        return previousSibling ?\r\n            this.#deepestItem(previousSibling) :\r\n            walker.parentNode();\r\n    }\r\n    #nextItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const { type, expanded } = item;\r\n        return (type === \"leaf\" ?\r\n            walker.nextNode() :\r\n            expanded ?\r\n                walker.nextNode() :\r\n                walker.nextSibling() ??\r\n                    (walker.parentNode(), walker.nextSibling()));\r\n    }\r\n    #deepestItem(item) {\r\n        if (item.expanded) {\r\n            const walker = this.#walker;\r\n            const lastItem = walker.lastChild();\r\n            if (lastItem) {\r\n                return this.#deepestItem(lastItem);\r\n            }\r\n        }\r\n        return item;\r\n    }\r\n    #handleClickEvent(event) {\r\n        const { target, shiftKey, ctrlKey } = event;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        if (targetItem) {\r\n            if (!shiftKey && !ctrlKey) {\r\n                this.#setSelection(targetItem);\r\n                const { type } = targetItem;\r\n                if (type == \"parent\") {\r\n                    targetItem.toggle();\r\n                }\r\n            }\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n    #handleContextMenuEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleDblClickEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleDragEndEvent() {\r\n        this.#setDropTargetItem(null);\r\n    }\r\n    #handleDragEnterEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        if (targetItem) {\r\n            const { type } = targetItem;\r\n            if (type == \"parent\") {\r\n                targetItem.toggle(true);\r\n            }\r\n            this.#setDropTargetItem(targetItem);\r\n        }\r\n        event.preventDefault();\r\n    }\r\n    #handleDragOverEvent(event) {\r\n        event.preventDefault();\r\n    }\r\n    #handleDragLeaveEvent(event) {\r\n        const { relatedTarget } = event;\r\n        if (relatedTarget instanceof Element) {\r\n            const parentItem = relatedTarget.closest(\"e-treeitem\");\r\n            if (!parentItem) {\r\n                let rootNode = relatedTarget;\r\n                while (!(rootNode instanceof HTMLETreeItemElement || rootNode instanceof Document)) {\r\n                    rootNode = rootNode.getRootNode();\r\n                    if (rootNode instanceof ShadowRoot) {\r\n                        rootNode = rootNode.host;\r\n                    }\r\n                }\r\n                if (rootNode instanceof Document) {\r\n                    this.#setDropTargetItem(null);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleDropEvent() {\r\n        this.#setDropTargetItem(null);\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { activeItem } = this;\r\n        switch (key) {\r\n            case \"a\": {\r\n                const { ctrlKey } = event;\r\n                if (ctrlKey) {\r\n                    if (activeItem) {\r\n                        const walker = this.#walker;\r\n                        walker.currentNode = activeItem;\r\n                        const firstItem = (walker.currentNode = walker.parentNode() ?? this, walker.firstChild());\r\n                        const lastItem = (walker.currentNode = walker.parentNode() ?? this, walker.lastChild());\r\n                        if (firstItem && lastItem) {\r\n                            const range = this.#getItemsRange(firstItem, this.#deepestItem(lastItem));\r\n                            if (range) {\r\n                                this.#setSelection(...range);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case \"ArrowLeft\": {\r\n                if (activeItem) {\r\n                    if (activeItem.expanded) {\r\n                        activeItem.toggle();\r\n                    }\r\n                    else {\r\n                        const walker = this.#walker;\r\n                        const parentItem = walker.parentNode();\r\n                        if (parentItem) {\r\n                            parentItem.focus({ preventScroll: true });\r\n                        }\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                if (activeItem) {\r\n                    if (!activeItem.expanded) {\r\n                        activeItem.toggle();\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowUp\": {\r\n                if (activeItem) {\r\n                    const previousItem = this.#previousItem(activeItem);\r\n                    if (previousItem) {\r\n                        previousItem.focus({ preventScroll: true });\r\n                        const { shiftKey } = event;\r\n                        if (shiftKey) {\r\n                            previousItem.selected ?\r\n                                this.#removeFromSelection(previousItem) :\r\n                                this.#addToSelection(previousItem);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    const firstItem = this.firstItem();\r\n                    if (firstItem) {\r\n                        firstItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowDown\": {\r\n                if (activeItem) {\r\n                    const nextItem = this.#nextItem(activeItem);\r\n                    if (nextItem) {\r\n                        nextItem.focus({ preventScroll: true });\r\n                        const { shiftKey } = event;\r\n                        if (shiftKey) {\r\n                            nextItem.selected ?\r\n                                this.#removeFromSelection(nextItem) :\r\n                                this.#addToSelection(nextItem);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    const lastItem = this.#lastItem();\r\n                    if (lastItem) {\r\n                        lastItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.firstItem();\r\n                if (firstItem) {\r\n                    firstItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                if (lastItem) {\r\n                    lastItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Enter\": {\r\n                if (activeItem) {\r\n                    this.#setSelection(activeItem);\r\n                    activeItem.click();\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Escape\": {\r\n                this.#clearSelection();\r\n                this.#setActiveItem(null);\r\n                this.focus();\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const { activeItem } = this;\r\n        if (!this.contains(relatedTarget)) {\r\n            (activeItem ?? this.firstItem())?.focus();\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        if (targetItem) {\r\n            this.#setActiveItem(targetItem);\r\n            this.tabIndex = -1;\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const lostFocusWithin = !this.contains(relatedTarget);\r\n        if (lostFocusWithin) {\r\n            this.tabIndex = 0;\r\n        }\r\n    }\r\n    #handleMouseDownEvent(event) {\r\n        const { target, ctrlKey, shiftKey, button } = event;\r\n        if (target instanceof HTMLETreeItemElement) {\r\n            const { selected } = target;\r\n            switch (button) {\r\n                case 0:\r\n                    {\r\n                        if (!shiftKey && !ctrlKey && !selected) {\r\n                            this.#setSelection(target);\r\n                        }\r\n                        else if (ctrlKey) {\r\n                            if (selected) {\r\n                                target.blur();\r\n                            }\r\n                            (!selected) ?\r\n                                this.#addToSelection(target) :\r\n                                this.#removeFromSelection(target);\r\n                            event.stopPropagation();\r\n                        }\r\n                        else if (shiftKey) {\r\n                            const { activeItem } = this;\r\n                            if (activeItem) {\r\n                                const range = this.#getItemsRange(activeItem, target);\r\n                                if (range) {\r\n                                    this.#setSelection(...range);\r\n                                }\r\n                            }\r\n                            event.stopPropagation();\r\n                        }\r\n                    }\r\n                    break;\r\n                case 2: {\r\n                    if (!selected) {\r\n                        this.#setSelection(target);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleSelectEvent() {\r\n        if (this.#onSelection) {\r\n            this.#hasSelectionChanged = true;\r\n        }\r\n        else {\r\n            this.dispatchEvent(new Event(\"selectionchange\", { bubbles: true }));\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLETreeElementBase.prototype, \"droptarget\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLETreeElementBase.prototype, \"name\", void 0);\r\nHTMLETreeElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-tree\"\r\n    })\r\n], HTMLETreeElementBase);\r\nvar HTMLETreeElement = HTMLETreeElementBase;\r\n//# sourceMappingURL=Tree.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { AttributeProperty, CustomElement, element, fragment, reactiveChildElements, reactiveElement } from \"../elements/Element\";\r\nimport { ModelList, ModelObject, ReactiveProperty } from \"../models/Model\";\r\nimport { resetStylesheet } from \"../stylesheets/Reset\";\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../stylesheets/Theme\";\r\nimport { View } from \"./View\";\r\nimport \"../elements/containers/trees\";\r\nexport { TreeItemModelList };\r\nexport { TreeModel };\r\nexport { TreeItemModel };\r\nexport { TreeView };\r\nclass TreeModel extends ModelObject {\r\n    items;\r\n    childItems;\r\n    sortFunction;\r\n    constructor(init) {\r\n        super();\r\n        const { items = [], sortFunction } = init ?? {};\r\n        items.forEach((item_i, i) => item_i.index = i);\r\n        const childItems = new ModelList(items);\r\n        childItems.setParent(this);\r\n        this.childItems = childItems;\r\n        this.items = new ModelList(this.subtreeItems());\r\n        this.sortFunction = sortFunction ??\r\n            function (item_a, item_b) {\r\n                return item_a.id.localeCompare(item_b.id);\r\n            };\r\n        this.addEventListener(\"modelchange\", this.#handleModelChangeEvent.bind(this));\r\n    }\r\n    #handleModelChangeEvent(event) {\r\n        const { target } = event;\r\n        const { items, sortFunction, subtreeItems } = this;\r\n        if (target instanceof ModelList) {\r\n            const records = target.getRecords();\r\n            records.forEach((record_i) => {\r\n                const { insertedItems, removedItems } = record_i;\r\n                const flattenedInsertedItems = Array.from(insertedItems.values()).flatMap(insertedItem_i => Array.of(insertedItem_i, ...subtreeItems.call(insertedItem_i)));\r\n                const flattenedRemovedItems = Array.from(removedItems.values()).flatMap(removedItem_i => Array.of(removedItem_i, ...subtreeItems.call(removedItem_i)));\r\n                items.beginChanges();\r\n                items.append(...flattenedInsertedItems);\r\n                flattenedRemovedItems.forEach((removedItem_i) => items.remove(removedItem_i));\r\n                if (sortFunction)\r\n                    items.sort(sortFunction);\r\n                items.endChanges();\r\n            });\r\n            Array.from(target.values()).forEach((item_i, i) => {\r\n                item_i.index = i;\r\n            });\r\n        }\r\n    }\r\n    subtreeItems() {\r\n        const { childItems } = this;\r\n        return Array.from(childItems.values()).flatMap(treeItem_i => Array.of(treeItem_i, ...treeItem_i.subtreeItems()));\r\n    }\r\n    getItemByUri(uri) {\r\n        const { childItems } = this;\r\n        const { length: itemsCount } = childItems;\r\n        const { length: uriLength } = uri;\r\n        for (let i = 0; i < itemsCount; i++) {\r\n            const item_i = childItems.get(i);\r\n            const { uri: itemUri } = item_i;\r\n            const { length: itemUriLength } = itemUri;\r\n            if (uri.startsWith(itemUri)) {\r\n                if (itemUriLength === uriLength) {\r\n                    return item_i;\r\n                }\r\n                return TreeModel.prototype.getItemByUri.call(item_i, uri);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}\r\nclass TreeItemModelList {\r\n    items;\r\n    constructor(items) {\r\n        this.items = items;\r\n    }\r\n    get count() {\r\n        return this.items.length;\r\n    }\r\n    remove() {\r\n        const { items } = this;\r\n        const removedItemsGroups = items.reduce((map, item_i) => {\r\n            const { parentNode } = item_i;\r\n            if (parentNode instanceof TreeItemModel || parentNode instanceof TreeModel) {\r\n                const { childItems } = parentNode;\r\n                const group = map.get(childItems);\r\n                if (group)\r\n                    group.push(item_i);\r\n                else\r\n                    map.set(childItems, [item_i]);\r\n            }\r\n            return map;\r\n        }, new Map());\r\n        Array.from(removedItemsGroups.entries()).forEach(([list_i, children_i]) => {\r\n            list_i.beginChanges();\r\n            children_i.forEach((child_i) => {\r\n                list_i.remove(child_i);\r\n            });\r\n            list_i.endChanges();\r\n        });\r\n    }\r\n}\r\nclass TreeItemModel extends ModelObject {\r\n    childItems;\r\n    id;\r\n    type;\r\n    index;\r\n    get level() {\r\n        const { parentNode } = this;\r\n        if (parentNode instanceof TreeItemModel) {\r\n            return parentNode.level + 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    get uri() {\r\n        const { parentNode, id } = this;\r\n        if (parentNode instanceof TreeItemModel) {\r\n            return `${parentNode.uri}${id}/`;\r\n        }\r\n        return `${id}/`;\r\n    }\r\n    get parentItem() {\r\n        const { parentNode } = this;\r\n        if (parentNode instanceof TreeItemModel) {\r\n            return parentNode;\r\n        }\r\n        return null;\r\n    }\r\n    constructor(init) {\r\n        super();\r\n        const { id, type, items = [] } = init;\r\n        items.forEach((item_i, i) => item_i.index = i);\r\n        const childItems = new ModelList(items);\r\n        childItems.setParent(this);\r\n        this.id = id;\r\n        this.childItems = childItems;\r\n        this.type = type;\r\n        this.index = -1;\r\n    }\r\n    subtreeItems() {\r\n        const { childItems } = this;\r\n        return Array.from(childItems.values()).flatMap(treeItem_i => Array.of(treeItem_i, ...treeItem_i.subtreeItems()));\r\n    }\r\n    remove() {\r\n        const { parentNode } = this;\r\n        if (parentNode instanceof TreeItemModel || parentNode instanceof TreeModel) {\r\n            const { childItems } = parentNode;\r\n            if (childItems) {\r\n                childItems.remove(this);\r\n            }\r\n        }\r\n    }\r\n}\r\n__decorate([\r\n    ReactiveProperty()\r\n], TreeItemModel.prototype, \"id\", void 0);\r\n__decorate([\r\n    ReactiveProperty()\r\n], TreeItemModel.prototype, \"type\", void 0);\r\n__decorate([\r\n    ReactiveProperty()\r\n], TreeItemModel.prototype, \"index\", void 0);\r\nvar style;\r\nlet TreeViewBase = class TreeViewBase extends View {\r\n    #dragImages;\r\n    static {\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n            }\r\n            \r\n            .offscreen {\r\n                position: absolute;\r\n                top: 0;\r\n                left: 0;\r\n                transform: translateY(-100%);\r\n                display: block;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            .dragimage {\r\n                white-space: nowrap;\r\n                margin: 1px;\r\n                display: inline-block;\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n                border-radius: 3px; \r\n                padding: 2px 4px;\r\n            }\r\n        `;\r\n    }\r\n    constructor(model) {\r\n        super();\r\n        this.#dragImages = new WeakMap();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet, resetStylesheet];\r\n        this.setModel(model ?? new TreeModel());\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"draggable\": {\r\n                const { treeElement } = this;\r\n                if (treeElement) {\r\n                    Array.from(treeElement.items).forEach(item_i => item_i.draggable = newValue !== null);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    get treeElement() {\r\n        return this.shadowRoot.querySelector(\"e-tree\");\r\n    }\r\n    treeItemElement(item) {\r\n        return this.shadowRoot.querySelector(`e-treeitem[uri=${item.uri}]`);\r\n    }\r\n    #getTreeItemElementUri(item) {\r\n        let uri = \"\";\r\n        let closestItem = item;\r\n        while (closestItem !== null) {\r\n            const { dataset, parentElement } = closestItem;\r\n            uri = `${dataset.id}/` + uri;\r\n            closestItem = parentElement?.closest(\"e-treeitem\") ?? null;\r\n        }\r\n        return uri;\r\n    }\r\n    treeItem(element) {\r\n        return this.model.getItemByUri(this.#getTreeItemElementUri(element));\r\n    }\r\n    renderShadow() {\r\n        const { model } = this;\r\n        const treeElement = element(\"e-tree\", {\r\n            attributes: {\r\n                tabindex: 0,\r\n            },\r\n            children: reactiveChildElements(model.childItems, item => this.#renderTreeItem(item)),\r\n            listeners: {\r\n                dragstart: this.#handleDragStartEvent.bind(this),\r\n                drop: this.#handleDropEvent.bind(this),\r\n                contextmenu: this.#handleContextMenuEvent.bind(this),\r\n                focus: this.#handleFocusEvent.bind(this),\r\n                focusin: this.#handleFocusInEvent.bind(this),\r\n                focusout: this.#handleFocusOutEvent.bind(this),\r\n            }\r\n        });\r\n        return fragment(treeElement, element(\"div\", {\r\n            attributes: {\r\n                class: \"offscreen\",\r\n                hidden: true\r\n            },\r\n            children: reactiveChildElements(model.items, item => this.#renderTreeItemDragImage(item))\r\n        }));\r\n    }\r\n    itemContentDelegate(item) {\r\n        return reactiveElement(item, element(\"span\"), [\"name\"], (label, property, oldValue, newValue) => {\r\n            label.textContent = newValue;\r\n        });\r\n    }\r\n    itemToolbarDelegate(item) {\r\n        return null;\r\n    }\r\n    itemMenuDelegate() {\r\n        return null;\r\n    }\r\n    selectedItems() {\r\n        const { treeElement } = this;\r\n        if (treeElement) {\r\n            const selectedElements = treeElement.selectedItems();\r\n            return selectedElements.map(item_i => this.treeItem(item_i));\r\n        }\r\n        return [];\r\n    }\r\n    activeItem() {\r\n        const { treeElement } = this;\r\n        if (treeElement) {\r\n            const { activeItem } = treeElement;\r\n            return activeItem ?\r\n                this.treeItem(activeItem) :\r\n                null;\r\n        }\r\n        return null;\r\n    }\r\n    #getDragImage(model) {\r\n        return this.#dragImages.get(model)?.deref() ?? null;\r\n    }\r\n    #renderTreeItem(item) {\r\n        const { draggable } = this;\r\n        const { index, level, id } = item;\r\n        const toolbar = this.itemToolbarDelegate(item);\r\n        const content = this.itemContentDelegate(item);\r\n        const treeItemElement = reactiveElement(item, element(\"e-treeitem\", {\r\n            attributes: {\r\n                draggable: String(draggable),\r\n                posinset: index,\r\n                level: level\r\n            },\r\n            dataset: {\r\n                id: id\r\n            },\r\n            children: [\r\n                ...(content ? [content] : []),\r\n                ...(toolbar ? [toolbar] : [])\r\n            ]\r\n        }), [\"index\", \"id\", \"type\"], (treeitem, propertyName, oldValue, newValue) => {\r\n            switch (propertyName) {\r\n                case \"index\": {\r\n                    treeitem.posinset = newValue;\r\n                    break;\r\n                }\r\n                case \"id\": {\r\n                    const { dataset } = treeitem;\r\n                    dataset.id = newValue;\r\n                    break;\r\n                }\r\n                case \"type\": {\r\n                    treeitem.type = newValue;\r\n                    switch (newValue) {\r\n                        case \"parent\": {\r\n                            treeitem.append(element(\"e-treeitemgroup\", {\r\n                                attributes: {\r\n                                    slot: \"group\"\r\n                                },\r\n                                children: reactiveChildElements(item.childItems, item => this.#renderTreeItem(item))\r\n                            }));\r\n                            break;\r\n                        }\r\n                        case \"leaf\": {\r\n                            const { group } = treeitem;\r\n                            if (group) {\r\n                                group.remove();\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n        return treeItemElement;\r\n    }\r\n    #renderTreeItemDragImage(item) {\r\n        const dragImageElement = reactiveElement(item, element(\"span\", {\r\n            attributes: {\r\n                class: \"dragimage\"\r\n            }\r\n        }), [\"name\"], (span, property, oldValue, newValue) => {\r\n            span.textContent = newValue;\r\n        });\r\n        this.#dragImages.set(item, new WeakRef(dragImageElement));\r\n        return dragImageElement;\r\n    }\r\n    #handleDragStartEvent(event) {\r\n        const { currentTarget, target } = event;\r\n        const targetTree = currentTarget;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        const { model } = this;\r\n        if (targetItem) {\r\n            const { dataTransfer } = event;\r\n            const selectedElements = targetTree.selectedItems();\r\n            const { length: selectedCount } = selectedElements;\r\n            if (selectedCount > 0) {\r\n                const selectedUris = selectedElements\r\n                    .map(element_i => this.#getTreeItemElementUri(element_i))\r\n                    .filter((uri_i, _, uris) => !uris.some(uri_j => uri_i.startsWith(`${uri_j}/`)));\r\n                const selectedUrisString = selectedUris.join(\"\\n\");\r\n                const lastUri = selectedUris[selectedUris.length - 1];\r\n                const lastItem = model.getItemByUri(lastUri);\r\n                if (lastItem && dataTransfer) {\r\n                    dataTransfer.dropEffect = \"move\";\r\n                    dataTransfer.setData(\"text/plain\", selectedUrisString);\r\n                    const dragImage = this.#getDragImage(lastItem);\r\n                    if (dragImage) {\r\n                        dataTransfer.setDragImage(dragImage, -16, 0);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleDropEvent(event) {\r\n        const { currentTarget, target } = event;\r\n        const targetTree = currentTarget;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        const { model } = this;\r\n        const { sortFunction } = model;\r\n        if (targetItem) {\r\n            const { dataTransfer } = event;\r\n            if (dataTransfer) {\r\n                const targetUri = this.#getTreeItemElementUri(targetItem);\r\n                const targetItemModel = model.getItemByUri(targetUri);\r\n                const transferedUris = dataTransfer.getData(\"text/plain\").split(\"\\n\");\r\n                const targetIsWithin = transferedUris.some(uri_i => targetUri.startsWith(`${uri_i}/`) || uri_i === targetUri);\r\n                if (!targetIsWithin) {\r\n                    const transferedItems = (transferedUris.map(uri_i => model.getItemByUri(uri_i)).filter(item_i => item_i !== null));\r\n                    const { type: targetType, parentItem: targetParentItem } = targetItemModel;\r\n                    const { childItems: targetList } = targetType === \"parent\" ? targetItemModel :\r\n                        targetParentItem ? targetParentItem : model;\r\n                    const targetItems = Array.from(targetList.values());\r\n                    targetItems.forEach((item_i) => {\r\n                        const sameLabelIndex = transferedItems.findIndex(item_j => item_j.id === item_i.id);\r\n                        if (sameLabelIndex > -1) {\r\n                            const doReplace = confirm(`Replace ${item_i.id}?`);\r\n                            if (doReplace) {\r\n                                targetList.remove(item_i);\r\n                            }\r\n                            else {\r\n                                transferedItems.copyWithin(sameLabelIndex, sameLabelIndex + 1);\r\n                                transferedItems.length--;\r\n                            }\r\n                        }\r\n                    });\r\n                    const transferedItemsModelList = new TreeItemModelList(transferedItems);\r\n                    transferedItemsModelList.remove();\r\n                    if (sortFunction) {\r\n                        targetList.beginChanges();\r\n                        targetList.append(...transferedItems);\r\n                        targetList.sort(sortFunction);\r\n                        targetList.endChanges();\r\n                    }\r\n                    else {\r\n                        targetList.insert(targetItem.posinset, ...transferedItems);\r\n                    }\r\n                    const newElements = targetTree.querySelectorAll(`e-treeitem:is(${transferedItems.map(item_i => `[data-uri=\"${item_i.uri}\"]`).join(\",\")})`);\r\n                    targetTree.beginSelection();\r\n                    newElements.forEach(element_i => element_i.selected = true);\r\n                    targetTree.endSelection();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleContextMenuEvent(event) {\r\n        const { clientX, clientY, currentTarget, target } = event;\r\n        const targetTree = currentTarget;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        if (targetItem) {\r\n            const contextMenu = this.itemMenuDelegate();\r\n            if (contextMenu !== null) {\r\n                contextMenu.contextual = true;\r\n                contextMenu.addEventListener(\"close\", () => {\r\n                    targetItem.focus({ preventScroll: true });\r\n                });\r\n                targetTree.append(contextMenu);\r\n                contextMenu.positionContextual(clientX, clientY);\r\n                contextMenu.focus({ preventScroll: true });\r\n            }\r\n        }\r\n        event.preventDefault();\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { currentTarget, relatedTarget } = event;\r\n        const targetTree = currentTarget;\r\n        if (relatedTarget !== null && !this.contains(relatedTarget)) {\r\n            const relatedPosition = relatedTarget.compareDocumentPosition(this);\r\n            if (!(relatedPosition & Node.DOCUMENT_POSITION_DISCONNECTED) && (relatedPosition & Node.DOCUMENT_POSITION_PRECEDING)) {\r\n                const { activeItem } = targetTree;\r\n                if (activeItem) {\r\n                    const itemToolbar = activeItem.querySelector(\"e-toolbar\");\r\n                    if (itemToolbar) {\r\n                        event.preventDefault();\r\n                        itemToolbar.focus();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        if (targetItem) {\r\n            const itemToolbar = targetItem.querySelector(\"e-toolbar\");\r\n            if (itemToolbar) {\r\n                itemToolbar.tabIndex = itemToolbar.contains(target) ? -1 : 0;\r\n            }\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-treeitem\");\r\n        if (targetItem) {\r\n            const itemToolbar = targetItem.querySelector(\"e-toolbar\");\r\n            if (itemToolbar) {\r\n                itemToolbar.tabIndex = itemToolbar.contains(target) ? 0 : -1;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], TreeViewBase.prototype, \"draggable\", void 0);\r\nTreeViewBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-treeview\"\r\n    })\r\n], TreeViewBase);\r\nvar TreeView = TreeViewBase;\r\n//# sourceMappingURL=TreeView.js.map","import { HTMLEMenuElement, HTMLEMenuItemElement } from \"editor/lib/elements/containers/menus\";\r\nimport { HTMLEToolBarElement, HTMLEToolBarItemElement } from \"editor/lib/elements/containers/toolbars\";\r\nimport { HTMLETreeElement } from \"editor/lib/elements/containers/trees\";\r\nimport { HTMLEOptionElement, HTMLESelectElement } from \"editor/lib/elements/controls/select\";\r\nimport { CustomElement, element, fragment, reactiveElement } from \"editor/lib/elements/Element\";\r\nimport { ReactiveProperty, ModelEvent } from \"editor/lib/models/Model\";\r\nimport { TreeItemModelList, TreeItemModel, TreeView } from \"editor/lib/views/TreeView\";\r\n\r\nexport { MyTreeItemModel };\r\nexport { MyTreeItemModelList };\r\nexport { MyTreeView };\r\n\r\nclass MyTreeItemModel extends TreeItemModel {\r\n    \r\n    @ReactiveProperty()\r\n    childCount: number;\r\n\r\n    @ReactiveProperty()\r\n    visibility: boolean;\r\n\r\n    constructor(init: {id: string, type: \"leaf\" | \"parent\", items?: TreeItemModel[]}) {\r\n        super(init);\r\n        this.childCount = this.childItems.length;\r\n        this.visibility = true;\r\n        this.addEventListener(\"modelchange\", this.#handleModelChangeEvent.bind(this));\r\n    }\r\n\r\n    show(): void {\r\n        this.visibility = true;\r\n    }\r\n\r\n    hide(): void {\r\n        this.visibility = false;\r\n    }\r\n\r\n    display(): void {\r\n        console.log(this.id);\r\n    }\r\n\r\n    #handleModelChangeEvent(event: ModelEvent): void {\r\n        const {target} = event;\r\n        const {childItems} = this;\r\n        if (target == childItems) {\r\n            this.childCount = childItems.length;\r\n        }\r\n    }\r\n}\r\n\r\nclass MyTreeItemModelList extends TreeItemModelList {\r\n    declare readonly items: MyTreeItemModel[];\r\n\r\n    constructor(items: MyTreeItemModel[]) {\r\n        super(items);\r\n    }\r\n\r\n    get count(): number {\r\n        return this.items.length;\r\n    }\r\n\r\n    show(): void {\r\n        this.items.forEach(item_i => item_i.show());\r\n    }\r\n\r\n    hide(): void {\r\n        this.items.forEach(item_i => item_i.hide());\r\n    }\r\n    \r\n    display(): void {\r\n        const result = this.items.map(item_i => item_i.id).join(\" \");\r\n        console.log(result);\r\n    }\r\n}\r\n\r\n@CustomElement({\r\n    name: \"e-mytreeview\"\r\n})\r\nclass MyTreeView extends TreeView {\r\n\r\n    override render(): void {\r\n        super.render();\r\n        const {shadowRoot, treeElement} = this;\r\n        shadowRoot.prepend(\r\n            element(\"link\", {\r\n                attributes: {\r\n                    rel: \"stylesheet\",\r\n                    href: \"../css/mytreeview.css\"\r\n                }\r\n            })\r\n        );\r\n        treeElement!.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n    }\r\n\r\n    override itemContentDelegate(item: MyTreeItemModel) {\r\n        return fragment(\r\n            reactiveElement(\r\n                item,\r\n                element(\"span\", {\r\n                    attributes: {\r\n                        class: \"label\"\r\n                    }\r\n                }),\r\n                [\"id\"],\r\n                (label, property, oldValue, newValue) => {\r\n                    label.textContent = newValue;\r\n                }\r\n            ),\r\n            reactiveElement(\r\n                item,\r\n                element(\"span\", {\r\n                    attributes: {\r\n                        class: \"badge\"\r\n                    }\r\n                }),\r\n                [\"childCount\", \"type\"],\r\n                (badge, property, oldValue, newValue) => {\r\n                    switch (property) {\r\n                        case \"type\": {\r\n                            if (newValue === \"leaf\") {\r\n                                badge.textContent = null;\r\n                                badge.hidden = true;\r\n                            }\r\n                            else {\r\n                                badge.textContent = `(${item.childCount})`;\r\n                                badge.hidden = false;\r\n                            }\r\n                            break;\r\n                        }\r\n                        case \"childCount\": {\r\n                            badge.textContent = `(${newValue})`;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            )\r\n        );\r\n    }\r\n\r\n    override itemToolbarDelegate(this: MyTreeView, item: MyTreeItemModel): HTMLEToolBarElement {\r\n        return reactiveElement(\r\n            item,\r\n            element(\"e-toolbar\", {\r\n                children: [\r\n                    element(\"e-toolbaritem\", {\r\n                        attributes: {\r\n                            name: \"type\",\r\n                            type: \"select\"\r\n                        },\r\n                        children: [\r\n                            element(\"e-select\", {\r\n                                attributes: {\r\n                                    slot: \"select\"\r\n                                },\r\n                                children: [\"parent\", \"leaf\"].map(\r\n                                    type => element(\"e-option\", {\r\n                                        attributes: {\r\n                                            label: type,\r\n                                            value: type\r\n                                        }\r\n                                    })\r\n                                ),\r\n                                listeners: {\r\n                                    click: (event) => {\r\n                                        const {currentTarget} = event;\r\n                                        const select = <HTMLESelectElement>currentTarget;\r\n                                        const {selectedOption} = select;\r\n                                        if (selectedOption) {\r\n                                            const {value} = selectedOption;\r\n                                            item.type = <\"parent\" | \"leaf\">value;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            })\r\n                        ]\r\n                    }),\r\n                    element(\"e-toolbaritem\", {\r\n                        attributes: {\r\n                            name: \"edit\",\r\n                            type: \"button\",\r\n                            label: \"Edit\",\r\n                            iconed: true\r\n                        },\r\n                        listeners: {\r\n                            click: <EventListener>(\r\n                                function(this: MyTreeView) {\r\n                                    this.showEditItemDialog(item);\r\n                                }\r\n                            ).bind(this)\r\n                        }\r\n                    }),\r\n                    element(\"e-toolbaritem\", {\r\n                        attributes: {\r\n                            name: \"visibility\",\r\n                            type: \"checkbox\",\r\n                            label: \"Visibility\",\r\n                            iconed: true\r\n                        },\r\n                        listeners: {\r\n                            click: <EventListener>(\r\n                                function(this: MyTreeView, event) {\r\n                                    item.visibility ?\r\n                                        item.hide() :\r\n                                        item.show();\r\n                                    event.stopPropagation();\r\n                                }\r\n                            )\r\n                        }\r\n                    })\r\n                ]\r\n            }),\r\n            [\"visibility\", \"type\"],\r\n            (toolbar, property, oldValue, newValue) => {\r\n                switch (property) {\r\n                    case \"visibility\": {\r\n                        const visibilityItem = toolbar\r\n                            .querySelector<HTMLEToolBarItemElement>(\"e-toolbaritem[name=visibility]\");\r\n                        if (visibilityItem) {\r\n                            const label = newValue ? \"Hide\" : \"Show\";\r\n                            visibilityItem.label = label;\r\n                            visibilityItem.title = label;\r\n                            visibilityItem.pressed = newValue;\r\n                        }\r\n                        break;\r\n                    }\r\n                    case \"type\": {\r\n                        const typeSelect = toolbar\r\n                            .querySelector<HTMLESelectElement>(\"e-toolbaritem[name=type] e-select\");\r\n                        if (typeSelect) {\r\n                            typeSelect\r\n                                .querySelector<HTMLEOptionElement>(`e-option[value=\"${newValue}\"]`)!\r\n                                .selected = true;\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    override itemMenuDelegate(this: MyTreeView): HTMLEMenuElement {\r\n        console.log(\"here\");\r\n        const {treeElement} = this;\r\n        const {activeItem: activeItemElement} = treeElement!;\r\n        const selectedItems = <MyTreeItemModel[]>this.selectedItems();\r\n        const activeItem = <MyTreeItemModel>this.activeItem();\r\n        return element(\"e-menu\", {\r\n            attributes: {\r\n                contextual: true\r\n            },\r\n            children: [\r\n                element(\"e-menuitemgroup\", {\r\n                    children: [\r\n                        element(\"e-menuitem\", {\r\n                            attributes: {\r\n                                type: \"button\",\r\n                                label: \"Edit\"\r\n                            },\r\n                            children: \"Edit\",\r\n                            listeners: {\r\n                                click: <EventListener>(\r\n                                    function(this: MyTreeView) {\r\n                                        selectedItems.forEach((selectItem) => {\r\n                                            this.showEditItemDialog(selectItem);\r\n                                        });\r\n                                    }\r\n                                ).bind(this)\r\n                            }\r\n                        }),\r\n                        element(\"e-menuitem\", {\r\n                            attributes: {\r\n                                type: \"checkbox\",\r\n                                label: activeItem.visibility ? \"Hide\" : \"Show\"\r\n                            },\r\n                            children: activeItem.visibility ? \"Hide\" : \"Show\",\r\n                            listeners: {\r\n                                click: () => {\r\n                                    const selectedItemsList = selectedItems.includes(activeItem) ?\r\n                                        new MyTreeItemModelList(selectedItems) : new MyTreeItemModelList([activeItem]);\r\n                                    activeItem.visibility ?\r\n                                        selectedItemsList.hide() :\r\n                                        selectedItemsList.show();\r\n                                    activeItemElement!.focus();\r\n                                }\r\n                            }\r\n                        })\r\n                    ]\r\n                }),\r\n                element(\"e-separator\"),\r\n                element(\"e-menuitemgroup\", {\r\n                    children: [\r\n                        element(\"e-menuitem\", {\r\n                            attributes: {\r\n                                label: \"Delete\"\r\n                            },\r\n                            children: \"Delete\",\r\n                            listeners: {\r\n                                click: () => {\r\n                                    const selectedItemsList = selectedItems.includes(activeItem) ?\r\n                                        new MyTreeItemModelList(selectedItems) : new MyTreeItemModelList([activeItem]);\r\n                                    const {count} = selectedItemsList;\r\n                                    const doRemove = confirm(`Remove ${count} items?`);\r\n                                    if (doRemove) {\r\n                                        selectedItemsList.remove();\r\n                                    }\r\n                                    treeElement!.focus();\r\n                                }\r\n                            }\r\n                        })\r\n                    ]\r\n                })\r\n            ]\r\n        });\r\n    }\r\n\r\n    #handleKeyDownEvent(event: KeyboardEvent) {\r\n        const {currentTarget, key} = event;\r\n        const targetTree = <HTMLETreeElement>currentTarget;\r\n        const {activeItem} = targetTree;\r\n        if (activeItem) {\r\n            const activeItemModel = <MyTreeItemModel>this.treeItem(activeItem!)!;\r\n            switch (key) {\r\n                case \"Delete\": {\r\n                    const selectedItems = this.selectedItems();\r\n                    const selectedItemsList = selectedItems.includes(activeItemModel) ?\r\n                        new TreeItemModelList(selectedItems) : new TreeItemModelList([activeItemModel]);\r\n                    const {count} = selectedItemsList;\r\n                    const doRemove = confirm(`Remove ${count} items?`);\r\n                    if (doRemove) {\r\n                        selectedItemsList.remove();\r\n                    }\r\n                    targetTree.focus();\r\n                    event.preventDefault();\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    showEditItemDialog(item: MyTreeItemModel): void {\r\n        const {shadowRoot} = this;\r\n        const {visibility, id, type} = item;\r\n        const dialog = element(\"dialog\", {\r\n            children: [\r\n                element(\"form\", {\r\n                    attributes: {\r\n                        method: \"dialog\"\r\n                    },\r\n                    children: [\r\n                        element(\"e-menubar\", {\r\n                            attributes: {\r\n                                tabindex: 0\r\n                            },\r\n                            children: [\r\n                                element(\"e-menuitem\", {\r\n                                    attributes: {\r\n                                        type: \"menu\",\r\n                                        label: \"Menu 1\"\r\n                                    },\r\n                                    children: [\r\n                                        \"Menu 1\",\r\n                                        element(\"e-menu\", {\r\n                                            attributes: {\r\n                                                slot: \"menu\"\r\n                                            },\r\n                                            children: [\r\n                                                element(\"e-menuitem\", {\r\n                                                    attributes: {\r\n                                                        type: \"checkbox\"\r\n                                                    },\r\n                                                    children: \"Menuitem 1\"\r\n                                                }),\r\n                                                element(\"e-menuitem\", {\r\n                                                    attributes: {\r\n                                                        type: \"checkbox\"\r\n                                                    },\r\n                                                    children: \"Menuitem 2\"\r\n                                                }),\r\n                                                element(\"e-menuitem\", {\r\n                                                    attributes: {\r\n                                                        type: \"submenu\"\r\n                                                    },\r\n                                                    children: [\r\n                                                        \"Submenu 1\",\r\n                                                        element(\"e-menu\", {\r\n                                                            attributes: {\r\n                                                                slot: \"menu\"\r\n                                                            },\r\n                                                            children: [\r\n                                                                element(\"e-menuitem\", {\r\n                                                                    attributes: {\r\n                                                                        label: \"SubmenuItem 1\",\r\n                                                                        name: \"radio\",\r\n                                                                        value: String(0),\r\n                                                                        type: \"radio\"\r\n                                                                    },\r\n                                                                    children: \"SubmenuItem 1\"\r\n                                                                }),\r\n                                                                element(\"e-menuitem\", {\r\n                                                                    attributes: {\r\n                                                                        label: \"SubmenuItem 2\",\r\n                                                                        name: \"radio\",\r\n                                                                        value: String(1),\r\n                                                                        type: \"radio\"\r\n                                                                    },\r\n                                                                    children: \"SubmenuItem 2\"\r\n                                                                }),\r\n                                                                element(\"e-menuitem\", {\r\n                                                                    attributes: {\r\n                                                                        label: \"SubmenuItem 3\",\r\n                                                                        name: \"radio\",\r\n                                                                        value: String(3),\r\n                                                                        type: \"radio\"\r\n                                                                    },\r\n                                                                    children: \"SubmenuItem 3\"\r\n                                                                })\r\n                                                            ]\r\n                                                        })\r\n                                                    ]\r\n                                                })\r\n                                            ]\r\n                                        })\r\n                                    ]\r\n                                })\r\n                            ]\r\n                        }),\r\n                        element(\"e-tablist\", {\r\n                            attributes: {\r\n                                tabindex: 0\r\n                            },\r\n                            children: [\r\n                                element(\"e-tab\", {\r\n                                    attributes: {\r\n                                        controls: \"properties\"\r\n                                    },\r\n                                    children: \"Properties\"\r\n                                })\r\n                            ]\r\n                        }),\r\n                        element(\"e-tabpanel\", {\r\n                            attributes: {\r\n                                id: \"properties\"\r\n                            },\r\n                            children: [\r\n                                element(\"fieldset\", {\r\n                                    children: [\r\n                                        element(\"legend\", {\r\n                                            children: \"Item information\"\r\n                                        }),\r\n                                        element(\"div\", {\r\n                                            attributes: {\r\n                                                class: \"form-content\"\r\n                                            },\r\n                                            children: [\r\n                                                element(\"label\", {\r\n                                                    attributes: {\r\n                                                        for: \"visibility\"\r\n                                                    },\r\n                                                    children: \"Visibility\"\r\n                                                }),\r\n                                                element(\"input\", {\r\n                                                    attributes: {\r\n                                                        id: \"visibility\",\r\n                                                        type: \"checkbox\",\r\n                                                        name: \"visibility\",\r\n                                                        checked: visibility,\r\n                                                        tabindex: 0,\r\n                                                        autofocus: true\r\n                                                    }\r\n                                                }),\r\n                                                element(\"label\", {\r\n                                                    attributes: {\r\n                                                        for: \"id\"\r\n                                                    },\r\n                                                    children: \"ID\"\r\n                                                }),\r\n                                                element(\"input\", {\r\n                                                    attributes: {\r\n                                                        id: \"id\",\r\n                                                        type: \"text\",\r\n                                                        name: \"id\",\r\n                                                        value: id,\r\n                                                        tabindex: 0\r\n                                                    }\r\n                                                }),\r\n                                                element(\"label\", {\r\n                                                    attributes: {\r\n                                                        for: \"type\"\r\n                                                    },\r\n                                                    children: \"Type\"\r\n                                                }),\r\n                                                element(\"select\", {\r\n                                                    attributes: {\r\n                                                        id: \"type\",\r\n                                                        name: \"type\",\r\n                                                        tabindex: 0\r\n                                                    },\r\n                                                    children: [\"parent\", \"leaf\"].map(\r\n                                                        type_i => element(\"option\", {\r\n                                                            attributes: {\r\n                                                                label: type_i,\r\n                                                                value: type_i,\r\n                                                                selected: type === type_i\r\n                                                            }\r\n                                                        })\r\n                                                    )\r\n                                                })\r\n                                            ]\r\n                                        })\r\n                                    ]\r\n                                })\r\n                            ]\r\n                        }),\r\n                        element(\"footer\", {\r\n                            attributes: {\r\n                                class: \"dialog-footer\"\r\n                            },\r\n                            children: [\r\n                                element(\"button\", {\r\n                                    attributes: {\r\n                                        type: \"submit\",\r\n                                        value: \"confirm\"\r\n                                    },\r\n                                    children: \"Confirm\"\r\n                                }),\r\n                                element(\"button\", {\r\n                                    attributes: {\r\n                                        value: \"cancel\"\r\n                                    },\r\n                                    children: \"Cancel\"\r\n                                })\r\n                            ]\r\n                        })\r\n                    ]\r\n                })\r\n            ],\r\n            listeners: {\r\n                close: (event) => {\r\n                    const {currentTarget} = event;\r\n                    const targetDialog = <HTMLDialogElement>currentTarget;\r\n                    if (targetDialog.returnValue === \"confirm\") {\r\n                        const form = targetDialog.querySelector(\"form\")!;\r\n                        const formData = new FormData(form);\r\n                        item.visibility = Boolean(formData.get(\"visibility\"));\r\n                        item.type = <\"leaf\" | \"parent\">String(formData.get(\"type\"));\r\n                        item.id = String(formData.get(\"id\"));\r\n                    }\r\n                    targetDialog.remove();\r\n                }\r\n            }\r\n        });\r\n        shadowRoot.append(dialog);\r\n        dialog.showModal();\r\n    }\r\n};","import { CustomElement, element } from \"editor/lib/elements/Element\";\r\nimport { ReactiveProperty } from \"editor/lib/models/Model\";\r\nimport { GridRowFilter, GridRowModel, GridView } from \"editor/lib/views/GridView\";\r\n\r\nexport { MyGridRowModel };\r\nexport { MyGridView };\r\n\r\nclass MyGridRowModel extends GridRowModel {\r\n    @ReactiveProperty()\r\n    name: string;\r\n\r\n    @ReactiveProperty()\r\n    age: number;\r\n\r\n    @ReactiveProperty()\r\n    color: string;\r\n    \r\n    constructor(init: {\r\n        id: number;\r\n        name: string;\r\n        age: number;\r\n        color: string;\r\n    }) {\r\n        super(init);\r\n        const {name, age, color} = init;\r\n        this.name = name;\r\n        this.age = age;\r\n        this.color = color;\r\n    }\r\n}\r\n\r\nvar style: string;\r\n\r\n@CustomElement({\r\n    name: \"e-mygridview\"\r\n})\r\nclass MyGridView extends GridView {\r\n\r\n    #searchFilter: GridRowFilter | null;\r\n\r\n    static {\r\n        style = /*css*/`\r\n            e-gridcell[headers=\"age\"] {\r\n                text-align: right;\r\n            }\r\n        `;\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n        this.#searchFilter = null;\r\n        const {shadowRoot} = this\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [\r\n            ...shadowRoot.adoptedStyleSheets, adoptedStylesheet\r\n        ];\r\n    }\r\n\r\n    override renderShadow(): Node {\r\n        const shadowNode = super.renderShadow();\r\n        shadowNode.insertBefore(\r\n            element(\"div\", {\r\n                children: element(\"input\", {\r\n                    attributes: {\r\n                        type: \"search\"\r\n                    },\r\n                    listeners: {\r\n                        input: <EventListener>this.#handleSearchInputEvent.bind(this)\r\n                    }\r\n                })\r\n            }),\r\n            shadowNode.firstChild\r\n        );\r\n        return shadowNode;\r\n    }\r\n\r\n    filter(row: GridRowModel): boolean {\r\n        const searchFilter = this.#searchFilter;\r\n        return super.filter(row) &&\r\n        (searchFilter ? searchFilter.filter(row) : true);\r\n    }\r\n\r\n    setSearchFilter(filter: GridRowFilter | null): void {\r\n        const {model, gridElement} = this;\r\n        const {rows} = model;\r\n        this.#searchFilter = filter;\r\n        Array.from(rows.values()).forEach((row_i) => {\r\n            const rowElement = this.getRowElement(row_i);\r\n            if (rowElement) {\r\n                rowElement.hidden = !this.filter(row_i);\r\n            }\r\n        });\r\n        gridElement.clearSelection();\r\n    }\r\n\r\n    #handleSearchInputEvent(event: InputEvent) {\r\n        const {target} = event;\r\n        if (target instanceof HTMLInputElement) {\r\n            const {value} = target;\r\n            if (value !== \"\") {\r\n                this.setSearchFilter({\r\n                    filter: (row) => (<MyGridRowModel>row).name.toLowerCase().includes(value.toLowerCase())\r\n                });\r\n            }\r\n            else {\r\n                this.setSearchFilter(null);\r\n            }\r\n        }\r\n    }\r\n}","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_ACTIVATED_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element, QueryProperty } from \"../../Element\";\r\nexport { HTMLEToolBarItemElement };\r\nexport { EToolBarItem };\r\nvar shadowTemplate;\r\nvar style;\r\nvar iconPartTemplate;\r\nlet HTMLEToolBarItemElementBase = class HTMLEToolBarItemElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"), element(\"slot\", {\r\n            attributes: {\r\n                name: \"select\"\r\n            }\r\n        }), element(\"slot\", {\r\n            attributes: {\r\n                name: \"menubutton\"\r\n            }\r\n        }));\r\n        iconPartTemplate = element(\"span\", {\r\n            attributes: {\r\n                part: \"icon\"\r\n            }\r\n        });\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                user-select: none;\r\n                white-space: nowrap;\r\n                cursor: pointer;\r\n                line-height: 22px;\r\n            }\r\n            \r\n            :host([disabled]) {\r\n                opacity: 0.38;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host(:hover) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([pressed]),\r\n            :host(:active) {\r\n                background-color: var(--theme-activated-item-color, ${DEFAULT_THEME_ACTIVATED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host(:not([iconed])) [part=\"icon\"] {\r\n                display: none;\r\n            }\r\n\r\n            [part=\"icon\"] {\r\n                flex: none;\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                padding: 2px;\r\n                overflow: hidden;\r\n            }\r\n            \r\n            [part=\"icon\"]::before {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n                content: \"\";\r\n                mask-size: 18px 18px;\r\n                -webkit-mask-size: 18px 18px;\r\n                background-color: none;\r\n                -webkit-mask-image: none;\r\n                mask-image: none;\r\n                filter: none;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            :host([type=\"select\"]:focus) ::slotted(e-select) {\r\n                border-color: transparent;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"label\": {\r\n                //...\r\n                break;\r\n            }\r\n            case \"iconed\": {\r\n                const { shadowRoot } = this;\r\n                if (newValue !== null) {\r\n                    shadowRoot.prepend(iconPartTemplate.cloneNode(true));\r\n                }\r\n                else {\r\n                    const iconPart = this.#icon();\r\n                    if (iconPart) {\r\n                        iconPart.remove();\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #icon() {\r\n        return this.shadowRoot.querySelector(\"[part=icon]\");\r\n    }\r\n};\r\n__decorate([\r\n    QueryProperty({ selector: \":scope > e-menubutton[slot=menubutton]\" })\r\n], HTMLEToolBarItemElementBase.prototype, \"menubutton\", void 0);\r\n__decorate([\r\n    QueryProperty({ selector: \":scope > e-select[slot=select]\" })\r\n], HTMLEToolBarItemElementBase.prototype, \"select\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEToolBarItemElementBase.prototype, \"active\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEToolBarItemElementBase.prototype, \"pressed\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEToolBarItemElementBase.prototype, \"expanded\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLEToolBarItemElementBase.prototype, \"iconed\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEToolBarItemElementBase.prototype, \"value\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEToolBarItemElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEToolBarItemElementBase.prototype, \"label\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEToolBarItemElementBase.prototype, \"type\", void 0);\r\nHTMLEToolBarItemElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-toolbaritem\"\r\n    })\r\n], HTMLEToolBarItemElementBase);\r\nvar HTMLEToolBarItemElement = HTMLEToolBarItemElementBase;\r\nvar EToolBarItem = Object.assign(function (init) {\r\n    const { label, name, type, value, trigger, menubutton, select } = init;\r\n    if (menubutton) {\r\n        menubutton.slot = \"menubutton\";\r\n    }\r\n    if (select) {\r\n        select.slot = \"select\";\r\n    }\r\n    return element(\"e-toolbaritem\", {\r\n        attributes: {\r\n            tabindex: -1,\r\n            title: label,\r\n            name: name,\r\n            value: value,\r\n            type: type\r\n        },\r\n        children: menubutton ? [menubutton] : select ? [select] : undefined,\r\n        listeners: {\r\n            click: trigger\r\n        }\r\n    });\r\n}, {\r\n    prototype: HTMLEToolBarItemElement.prototype,\r\n    button(init) {\r\n        return new EToolBarItem({\r\n            ...init, type: \"button\"\r\n        });\r\n    },\r\n    checkbox(init) {\r\n        return new EToolBarItem({\r\n            ...init, type: \"checkbox\"\r\n        });\r\n    },\r\n    radio(init) {\r\n        return new EToolBarItem({\r\n            ...init, type: \"radio\"\r\n        });\r\n    },\r\n    menubutton(init) {\r\n        return new EToolBarItem({\r\n            ...init, type: \"menubutton\"\r\n        });\r\n    },\r\n    select(init) {\r\n        return new EToolBarItem({\r\n            ...init, type: \"select\"\r\n        });\r\n    },\r\n});\r\n//# sourceMappingURL=ToolBarItem.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { element, CustomElement, AttributeProperty } from \"../../Element\";\r\nimport \"./ToolBarItem\";\r\nexport { HTMLEToolBarItemGroupElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEToolBarItemGroupElementBase = class HTMLEToolBarItemGroupElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                width: max-content;\r\n                flex-direction: row;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"label\": {\r\n                const label = this.shadowRoot.querySelector(\"[part='label']\");\r\n                if (label) {\r\n                    label.textContent = newValue;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEToolBarItemGroupElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEToolBarItemGroupElementBase.prototype, \"label\", void 0);\r\nHTMLEToolBarItemGroupElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-toolbaritemgroup\"\r\n    })\r\n], HTMLEToolBarItemGroupElementBase);\r\nvar HTMLEToolBarItemGroupElement = HTMLEToolBarItemGroupElementBase;\r\n//# sourceMappingURL=ToolBarItemGroup.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLEToolBarItemElement } from \"./ToolBarItem\";\r\nimport { HTMLEToolBarItemGroupElement } from \"./ToolBarItemGroup\";\r\nimport \"./ToolBarItem\";\r\nimport \"./ToolBarItemGroup\";\r\nexport { HTMLEToolBarElement };\r\nvar shadowTemplate;\r\nvar style;\r\nvar wasExpandedOnMouseDown;\r\nlet HTMLEToolBarElementBase = class HTMLEToolBarElementBase extends HTMLElement {\r\n    get activeItem() {\r\n        return this.querySelector(\"e-toolbaritem[active]\");\r\n    }\r\n    items() {\r\n        return Array.from(this.querySelectorAll(\":is(:scope, :scope > e-toolbaritemgroup) > e-toolbaritem\"));\r\n    }\r\n    #walker;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        wasExpandedOnMouseDown = new WeakMap();\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                flex-direction: row;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#nodeFilter.bind(this));\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"contextmenu\", this.#handleContextMenuEvent.bind(this));\r\n        this.addEventListener(\"dblclick\", this.#handleDblClickEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n        this.addEventListener(\"mousedown\", this.#handleMouseDownEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    #nodeFilter(node) {\r\n        if (node instanceof HTMLEToolBarItemElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEToolBarItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    firstItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.firstChild();\r\n    }\r\n    #lastItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.lastChild();\r\n    }\r\n    #previousItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const previousItem = walker.previousSibling();\r\n        return previousItem;\r\n    }\r\n    #nextItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.nextSibling();\r\n    }\r\n    #setActiveItem(item) {\r\n        const { activeItem } = this;\r\n        if (activeItem !== null && activeItem !== item) {\r\n            activeItem.active = false;\r\n        }\r\n        if (item !== null) {\r\n            item.active = true;\r\n        }\r\n    }\r\n    #handleClickEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-toolbaritem\");\r\n        if (targetItem) {\r\n            const { type, pressed } = targetItem;\r\n            switch (type) {\r\n                case \"checkbox\": {\r\n                    targetItem.pressed = !pressed;\r\n                    break;\r\n                }\r\n                case \"radio\": {\r\n                    targetItem.pressed = true;\r\n                    break;\r\n                }\r\n                case \"menubutton\": {\r\n                    const { menubutton } = targetItem;\r\n                    if (menubutton && !menubutton.contains(target)) {\r\n                        const expand = !wasExpandedOnMouseDown.get(targetItem);\r\n                        menubutton.toggle(expand);\r\n                        if (expand) {\r\n                            menubutton.firstItem?.focus({ preventScroll: true });\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                case \"select\": {\r\n                    const { select } = targetItem;\r\n                    if (select && !select.contains(target)) {\r\n                        const expand = !wasExpandedOnMouseDown.get(targetItem);\r\n                        select.toggle(expand);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n    #handleContextMenuEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleDblClickEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const { activeItem } = this;\r\n        if (!this.contains(relatedTarget)) {\r\n            (activeItem ?? this.firstItem())?.focus();\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-toolbaritem\");\r\n        if (targetItem) {\r\n            this.#setActiveItem(targetItem);\r\n            this.tabIndex = -1;\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const lostFocusWithin = !this.contains(relatedTarget);\r\n        if (lostFocusWithin) {\r\n            this.tabIndex = 0;\r\n        }\r\n    }\r\n    #handleMouseDownEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-toolbaritem\");\r\n        if (targetItem) {\r\n            const { type } = targetItem;\r\n            switch (type) {\r\n                case \"menubutton\": {\r\n                    const { menubutton } = targetItem;\r\n                    if (menubutton && !menubutton.contains(target)) {\r\n                        wasExpandedOnMouseDown.set(targetItem, menubutton.expanded);\r\n                    }\r\n                    break;\r\n                }\r\n                case \"select\": {\r\n                    const { select } = targetItem;\r\n                    if (select && !select.contains(target)) {\r\n                        wasExpandedOnMouseDown.set(targetItem, select.expanded);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { activeItem } = this;\r\n        switch (key) {\r\n            case \"Enter\":\r\n            case \" \": {\r\n                if (activeItem) {\r\n                    const { type } = activeItem;\r\n                    switch (type) {\r\n                        case \"menubutton\": {\r\n                            const { menubutton } = activeItem;\r\n                            if (menubutton) {\r\n                                menubutton.expand();\r\n                                menubutton.firstItem?.focus({ preventScroll: true });\r\n                            }\r\n                            break;\r\n                        }\r\n                        case \"select\": {\r\n                            const { select } = activeItem;\r\n                            if (select) {\r\n                                select.expand();\r\n                            }\r\n                            break;\r\n                        }\r\n                        default: {\r\n                            activeItem.click();\r\n                            break;\r\n                        }\r\n                    }\r\n                    event.stopPropagation();\r\n                }\r\n                break;\r\n            }\r\n            case \"ArrowLeft\": {\r\n                if (activeItem) {\r\n                    const previousItem = this.#previousItem(activeItem);\r\n                    if (previousItem) {\r\n                        previousItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                else {\r\n                    const firstItem = this.firstItem();\r\n                    if (firstItem) {\r\n                        firstItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                if (activeItem) {\r\n                    const nextItem = this.#nextItem(activeItem);\r\n                    if (nextItem) {\r\n                        nextItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                else {\r\n                    const lastItem = this.#lastItem();\r\n                    if (lastItem) {\r\n                        lastItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowDown\": {\r\n                if (activeItem) {\r\n                    const { type } = activeItem;\r\n                    switch (type) {\r\n                        case \"select\": {\r\n                            activeItem.select?.expand();\r\n                            event.stopPropagation();\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.firstItem();\r\n                if (firstItem) {\r\n                    firstItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                if (lastItem) {\r\n                    lastItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEToolBarElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEToolBarElementBase.prototype, \"orientation\", void 0);\r\nHTMLEToolBarElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-toolbar\"\r\n    })\r\n], HTMLEToolBarElementBase);\r\nvar HTMLEToolBarElement = HTMLEToolBarElementBase;\r\n//# sourceMappingURL=ToolBar.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_DROPTARGET_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR, DEFAULT_THEME_HOVERED_ITEM_COLOR, DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, element, AttributeProperty } from \"../../Element\";\r\nimport { HTMLEMenuElement } from \"../menus/Menu\";\r\nimport { HTMLEToolBarElement } from \"../toolbars/ToolBar\";\r\nexport { HTMLEListItemElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEListItemElementBase = class HTMLEListItemElementBase extends HTMLElement {\r\n    get badge() {\r\n        return this.#badge;\r\n    }\r\n    get toolbar() {\r\n        return this.#toolbar;\r\n    }\r\n    get menu() {\r\n        return this.#menu;\r\n    }\r\n    #badge;\r\n    #toolbar;\r\n    #menu;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                user-select: none;\r\n                line-height: 22px;\r\n            }\r\n            \r\n            :host([droptarget]) {\r\n                background-color: var(--theme-droptarget-item-color, ${DEFAULT_THEME_DROPTARGET_ITEM_COLOR});\r\n            }\r\n            \r\n            :host(:hover) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([active]) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                background-color: var(--theme-focused-item-color, ${DEFAULT_THEME_FOCUSED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host([selected]) {\r\n                background-color: var(--theme-selected-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.#badge = null;\r\n        this.#menu = null;\r\n        this.#toolbar = null;\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"selected\": {\r\n                this.dispatchEvent(new Event(\"select\", { bubbles: true }));\r\n                break;\r\n            }\r\n            case \"label\": {\r\n                const { shadowRoot } = this;\r\n                const labelPart = shadowRoot.querySelector(\"[part=label]\");\r\n                if (labelPart) {\r\n                    labelPart.textContent = newValue;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const { name: slotName } = target;\r\n        switch (slotName) {\r\n            case \"toolbar\": {\r\n                const element = target.assignedElements()[0];\r\n                this.#toolbar = element instanceof HTMLEToolBarElement ? element : null;\r\n                break;\r\n            }\r\n            case \"badge\": {\r\n                const element = target.assignedElements()[0];\r\n                this.#badge = element instanceof HTMLSpanElement ? element : null;\r\n                break;\r\n            }\r\n            case \"menu\": {\r\n                const element = target.assignedElements()[0];\r\n                this.#menu = element instanceof HTMLEMenuElement ? element : null;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEListItemElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Number })\r\n], HTMLEListItemElementBase.prototype, \"posinset\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEListItemElementBase.prototype, \"label\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEListItemElementBase.prototype, \"droptarget\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEListItemElementBase.prototype, \"active\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLEListItemElementBase.prototype, \"selected\", void 0);\r\nHTMLEListItemElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-listitem\"\r\n    })\r\n], HTMLEListItemElementBase);\r\nvar HTMLEListItemElement = HTMLEListItemElementBase;\r\n//# sourceMappingURL=ListItem.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, element } from \"../../Element\";\r\nimport { HTMLEListItemElement } from \"./ListItem\";\r\nimport \"./ListItem\";\r\nexport { HTMLEListItemGroupElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEListItemGroupElementBase = class HTMLEListItemGroupElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const assignedItems = target\r\n            .assignedElements()\r\n            .filter(element_i => element_i instanceof HTMLEListItemElement);\r\n        assignedItems.forEach((item_i, i) => {\r\n            item_i.posinset = i;\r\n        });\r\n    }\r\n};\r\nHTMLEListItemGroupElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-listitemgroup\"\r\n    })\r\n], HTMLEListItemGroupElementBase);\r\nvar HTMLEListItemGroupElement = HTMLEListItemGroupElementBase;\r\n//# sourceMappingURL=ListItemGroup.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport { HTMLEListItemElement } from \"./ListItem\";\r\nimport { HTMLEListItemGroupElement } from \"./ListItemGroup\";\r\nimport \"./ListItem\";\r\nimport \"./ListItemGroup\";\r\nexport { HTMLEListElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEListElementBase = class HTMLEListElementBase extends HTMLElement {\r\n    get activeItem() {\r\n        return this.querySelector(\"e-listitem[active]\");\r\n    }\r\n    get dropTargetItem() {\r\n        return this.querySelector(\"e-listitem[droptarget]\");\r\n    }\r\n    #onSelection;\r\n    #hasSelectionChanged;\r\n    #walker;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"style\", {\r\n            children: [\r\n                /*css*/ `\r\n\r\n                    `\r\n            ]\r\n        }), element(\"slot\", {\r\n            children: [\r\n                element(\"slot\")\r\n            ]\r\n        }));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n            }\r\n            \r\n            :host(:focus) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n        `;\r\n    }\r\n    items() {\r\n        return Array.from(this.querySelectorAll(\":is(:scope, :scope > e-listitemgroup) > e-listitem\"));\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this));\r\n        this.#onSelection = false;\r\n        this.#hasSelectionChanged = false;\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"contextmenu\", this.#handleContextMenuEvent.bind(this));\r\n        this.addEventListener(\"dragend\", this.#handleDragEndEvent.bind(this));\r\n        this.addEventListener(\"dragenter\", this.#handleDragEnterEvent.bind(this));\r\n        this.addEventListener(\"dragover\", this.#handleDragOverEvent.bind(this));\r\n        this.addEventListener(\"dragleave\", this.#handleDragLeaveEvent.bind(this));\r\n        this.addEventListener(\"dragstart\", this.#handleDragStartEvent.bind(this));\r\n        this.addEventListener(\"drop\", this.#handleDropEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n        this.addEventListener(\"mousedown\", this.#handleMouseDownEvent.bind(this));\r\n        this.addEventListener(\"select\", this.#handleSelectEvent.bind(this));\r\n        shadowRoot.addEventListener(\"slotchange\", this.#handleSlotChangeEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const tabIndex = this.getAttribute(\"tabindex\");\r\n        this.tabIndex = tabIndex === null ? 0 : parseInt(tabIndex);\r\n    }\r\n    beginSelection() {\r\n        this.#onSelection = true;\r\n    }\r\n    endSelection() {\r\n        this.#onSelection = false;\r\n        if (this.#hasSelectionChanged) {\r\n            this.dispatchEvent(new Event(\"selectionchange\", { bubbles: true }));\r\n            this.#hasSelectionChanged = false;\r\n        }\r\n    }\r\n    selectedItems() {\r\n        const selectedItems = [];\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        let item = this.#firstItem();\r\n        while (item !== null) {\r\n            if (item.selected) {\r\n                selectedItems.push(item);\r\n            }\r\n            item = this.#nextItem(item);\r\n        }\r\n        return selectedItems;\r\n    }\r\n    #walkerNodeFilter(node) {\r\n        if (node instanceof HTMLEListItemElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEListItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    #getItemsRange(from, to) {\r\n        const items = this.items();\r\n        const fromIndex = items.indexOf(from);\r\n        const toIndex = items.indexOf(to);\r\n        if (fromIndex > -1 && toIndex > -1) {\r\n            if (from == to) {\r\n                return [from];\r\n            }\r\n            return items.slice(Math.min(fromIndex, toIndex), Math.max(fromIndex, toIndex) + 1);\r\n        }\r\n        return [];\r\n    }\r\n    #setSelection(...items) {\r\n        this.beginSelection();\r\n        const selectedItems = this.selectedItems();\r\n        selectedItems.forEach((selectedItem_i) => {\r\n            if (!items.includes(selectedItem_i)) {\r\n                selectedItem_i.selected = false;\r\n            }\r\n        });\r\n        items.forEach((item_i) => {\r\n            if (this.contains(item_i) && !item_i.selected) {\r\n                item_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #addToSelection(...items) {\r\n        this.beginSelection();\r\n        items.forEach((item_i) => {\r\n            if (!item_i.selected) {\r\n                item_i.selected = true;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #removeFromSelection(...items) {\r\n        this.beginSelection();\r\n        const selectedItems = this.selectedItems();\r\n        items.forEach((item_i) => {\r\n            if (selectedItems.includes(item_i)) {\r\n                item_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #clearSelection() {\r\n        this.beginSelection();\r\n        const selectedItems = this.selectedItems();\r\n        selectedItems.forEach((item_i) => {\r\n            if (item_i.selected) {\r\n                item_i.selected = false;\r\n            }\r\n        });\r\n        this.endSelection();\r\n    }\r\n    #setActiveItem(item) {\r\n        const { activeItem, items } = this;\r\n        if (activeItem !== null && activeItem !== item) {\r\n            activeItem.active = false;\r\n            activeItem.tabIndex = -1;\r\n        }\r\n        if (item !== null) {\r\n            item.active = true;\r\n            item.tabIndex = 0;\r\n        }\r\n    }\r\n    #setDropTargetItem(item) {\r\n        const { dropTargetItem } = this;\r\n        if (dropTargetItem !== null && dropTargetItem !== item) {\r\n            dropTargetItem.droptarget = false;\r\n        }\r\n        if (item !== null) {\r\n            this.droptarget = true;\r\n            item.droptarget = true;\r\n        }\r\n        else {\r\n            this.droptarget = false;\r\n        }\r\n    }\r\n    #firstItem() {\r\n        const walker = this.#walker;\r\n        const { root } = walker;\r\n        walker.currentNode = root;\r\n        return walker.firstChild();\r\n    }\r\n    #lastItem() {\r\n        const walker = this.#walker;\r\n        const { root } = walker;\r\n        walker.currentNode = root;\r\n        return walker.lastChild();\r\n    }\r\n    #previousItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const previousItem = walker.previousNode();\r\n        return previousItem;\r\n    }\r\n    #nextItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const nextItem = walker.nextNode();\r\n        return nextItem;\r\n    }\r\n    #handleContextMenuEvent(event) {\r\n        const { target } = event;\r\n        if (target instanceof HTMLEListItemElement) {\r\n            const selectedItems = this.selectedItems();\r\n            if (!selectedItems.includes(target)) {\r\n                this.#setSelection(target);\r\n            }\r\n            target.focus({ preventScroll: true });\r\n            event.preventDefault();\r\n        }\r\n    }\r\n    #handleDragEndEvent() {\r\n        this.#setDropTargetItem(null);\r\n    }\r\n    #handleDragEnterEvent(event) {\r\n        const { target } = event;\r\n        if (target instanceof HTMLEListItemElement) {\r\n            this.#setDropTargetItem(target);\r\n        }\r\n        event.preventDefault();\r\n    }\r\n    #handleDragOverEvent(event) {\r\n        event.preventDefault();\r\n    }\r\n    #handleDragLeaveEvent(event) {\r\n        const { relatedTarget } = event;\r\n        if (relatedTarget instanceof Element) {\r\n            const parentItem = relatedTarget.closest(\"e-listitem\");\r\n            if (!parentItem) {\r\n                let rootNode = relatedTarget;\r\n                while (!(rootNode instanceof HTMLEListItemElement || rootNode instanceof Document)) {\r\n                    rootNode = rootNode.getRootNode();\r\n                    if (rootNode instanceof ShadowRoot) {\r\n                        rootNode = rootNode.host;\r\n                    }\r\n                }\r\n                if (rootNode instanceof Document) {\r\n                    this.#setDropTargetItem(null);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleDragStartEvent(event) {\r\n        const { target } = event;\r\n        if (target instanceof HTMLEListItemElement) {\r\n            const selectedItems = this.selectedItems();\r\n            if (!selectedItems.includes(target)) {\r\n                this.#setSelection(target);\r\n            }\r\n        }\r\n    }\r\n    #handleDropEvent() {\r\n        this.#setDropTargetItem(null);\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const { activeItem } = this;\r\n        if (activeItem && relatedTarget !== activeItem) {\r\n            activeItem.focus();\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        if (target instanceof HTMLEListItemElement) {\r\n            this.#setActiveItem(target);\r\n        }\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { activeItem } = this;\r\n        switch (key) {\r\n            case \"a\": {\r\n                const { ctrlKey } = event;\r\n                if (ctrlKey) {\r\n                    const walker = this.#walker;\r\n                    const { root } = walker;\r\n                    const firstItem = (walker.currentNode = walker.parentNode() ?? root, walker.firstChild());\r\n                    const lastItem = (walker.currentNode = walker.parentNode() ?? root, walker.lastChild());\r\n                    const range = this.#getItemsRange(firstItem, lastItem);\r\n                    if (range) {\r\n                        this.#setSelection(...range);\r\n                    }\r\n                }\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case \"ArrowUp\": {\r\n                if (activeItem) {\r\n                    const previousItem = this.#previousItem(activeItem);\r\n                    if (previousItem) {\r\n                        previousItem.focus({ preventScroll: true });\r\n                        const { shiftKey } = event;\r\n                        if (shiftKey) {\r\n                            previousItem.selected ?\r\n                                this.#removeFromSelection(previousItem) :\r\n                                this.#addToSelection(previousItem);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    const firstItem = this.#firstItem();\r\n                    if (firstItem) {\r\n                        firstItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowDown\": {\r\n                if (activeItem) {\r\n                    const nextItem = this.#nextItem(activeItem);\r\n                    if (nextItem) {\r\n                        nextItem.focus({ preventScroll: true });\r\n                        const { shiftKey } = event;\r\n                        if (shiftKey) {\r\n                            nextItem.selected ?\r\n                                this.#removeFromSelection(nextItem) :\r\n                                this.#addToSelection(nextItem);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    const lastItem = this.#lastItem();\r\n                    if (lastItem) {\r\n                        lastItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.#firstItem();\r\n                if (firstItem) {\r\n                    firstItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                if (lastItem) {\r\n                    lastItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Enter\": {\r\n                const { activeItem } = this;\r\n                if (activeItem) {\r\n                    this.#setSelection(activeItem);\r\n                    activeItem.click();\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Escape\": {\r\n                this.#clearSelection();\r\n                this.#setActiveItem(null);\r\n                this.focus();\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleMouseDownEvent(event) {\r\n        const { target, ctrlKey, shiftKey } = event;\r\n        const selectedItems = this.selectedItems();\r\n        if (target instanceof HTMLEListItemElement) {\r\n            if (!shiftKey && !ctrlKey) {\r\n                this.#setSelection(target);\r\n            }\r\n            else if (ctrlKey) {\r\n                (!target.selected) ?\r\n                    this.#addToSelection(target) :\r\n                    this.#removeFromSelection(target);\r\n                event.stopPropagation();\r\n            }\r\n            else if (shiftKey) {\r\n                const lastSelectedItem = selectedItems[selectedItems.length - 1];\r\n                if (lastSelectedItem) {\r\n                    const range = this.#getItemsRange(lastSelectedItem, target);\r\n                    if (range) {\r\n                        if (selectedItems.includes(target)) {\r\n                            this.#removeFromSelection(...range);\r\n                        }\r\n                        else {\r\n                            this.#addToSelection(...range);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    this.#setSelection(target);\r\n                }\r\n                event.stopPropagation();\r\n            }\r\n        }\r\n    }\r\n    #handleSelectEvent() {\r\n        if (!this.#onSelection) {\r\n            this.dispatchEvent(new Event(\"selectionchange\", { bubbles: true }));\r\n        }\r\n    }\r\n    #handleSlotChangeEvent(event) {\r\n        const { target } = event;\r\n        const assignedItems = target\r\n            .assignedElements()\r\n            .filter(element_i => element_i instanceof HTMLEListItemElement);\r\n        assignedItems.forEach((item_i, i) => {\r\n            item_i.posinset = i;\r\n        });\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEListElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEListElementBase.prototype, \"droptarget\", void 0);\r\nHTMLEListElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-list\"\r\n    })\r\n], HTMLEListElementBase);\r\nvar HTMLEListElement = HTMLEListElementBase;\r\n//# sourceMappingURL=List.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, element } from \"../../Element\";\r\nexport { HTMLETabPanelElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLETabPanelElementBase = class HTMLETabPanelElementBase extends HTMLElement {\r\n    get tab() {\r\n        const { id } = this;\r\n        return this.getRootNode().querySelector(`e-tab[controls=${id}]`);\r\n    }\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n                padding: 4px;\r\n            }\r\n            \r\n            :host([hidden]) {\r\n                display: none;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    connectedCallback() {\r\n        const { tab } = this;\r\n        if (tab) {\r\n            customElements.upgrade(tab);\r\n            const { selected } = tab;\r\n            this.hidden = !selected;\r\n        }\r\n    }\r\n};\r\nHTMLETabPanelElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-tabpanel\"\r\n    })\r\n], HTMLETabPanelElementBase);\r\nvar HTMLETabPanelElement = HTMLETabPanelElementBase;\r\n//# sourceMappingURL=TabPanel.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_HOVERED_ITEM_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nimport \"./TabPanel\";\r\nexport { HTMLETabElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLETabElementBase = class HTMLETabElementBase extends HTMLElement {\r\n    get panel() {\r\n        const { controls } = this;\r\n        const rootNode = this.getRootNode();\r\n        if (rootNode instanceof Document || rootNode instanceof ShadowRoot) {\r\n            return rootNode.querySelector(`e-tabpanel[id='${controls}']`);\r\n        }\r\n        return null;\r\n    }\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: inline-block;\r\n                user-select: none;\r\n                white-space: nowrap;\r\n                padding: 4px;\r\n            }\r\n            \r\n            :host([disabled]) {\r\n                opacity: 0.38;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host(:hover) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"selected\": {\r\n                this.dispatchEvent(new Event(\"select\", { bubbles: true }));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    select() {\r\n        this.selected = true;\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLETabElementBase.prototype, \"name\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLETabElementBase.prototype, \"disabled\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLETabElementBase.prototype, \"controls\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLETabElementBase.prototype, \"active\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean, observed: true })\r\n], HTMLETabElementBase.prototype, \"selected\", void 0);\r\nHTMLETabElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-tab\"\r\n    })\r\n], HTMLETabElementBase);\r\nvar HTMLETabElement = HTMLETabElementBase;\r\n//# sourceMappingURL=Tab.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, element } from \"../../Element\";\r\nimport { HTMLETabElement } from \"./Tab\";\r\nimport \"./Tab\";\r\nimport \"./TabPanel\";\r\nexport { HTMLETabListElement };\r\nvar shadowTemplate;\r\nvar style;\r\nvar SELECT_ANIMATION_DURATION = 200;\r\nlet HTMLETabListElementBase = class HTMLETabListElementBase extends HTMLElement {\r\n    #walker;\r\n    get tabs() {\r\n        return Array.from(this.querySelectorAll(\"e-tab\"));\r\n    }\r\n    get activeTab() {\r\n        return this.querySelector(\"e-tab[active]\");\r\n    }\r\n    get selectedTab() {\r\n        return this.querySelector(\"e-tab[selected]\");\r\n    }\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                position: relative;\r\n                display: flex;\r\n            }\r\n\r\n            :host::after {\r\n                position: absolute;\r\n                display: inline-block;\r\n                content: \"\";\r\n                z-index: -1;\r\n                transform: translateY(-100%);\r\n                box-sizing: border-box;\r\n                border-top: 2px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this));\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"click\", this.#handleClickEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n        this.addEventListener(\"select\", this.#handleSelectEvent.bind(this));\r\n        this.addEventListener(\"select\", this.#handleSelectEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex, selectedTab } = this;\r\n        this.tabIndex = tabIndex;\r\n        customElements.upgrade(this);\r\n        const tabToSelect = selectedTab ?? this.firstItem();\r\n        if (tabToSelect) {\r\n            this.#selectTab(tabToSelect);\r\n            setTimeout(() => {\r\n                const { width: tabWidth, height: tabHeight } = tabToSelect.getBoundingClientRect();\r\n                const { offsetLeft } = tabToSelect;\r\n                this.animate([{\r\n                        width: `${tabWidth}px`,\r\n                        left: `${offsetLeft}px`,\r\n                        top: `${tabHeight}px`\r\n                    }], {\r\n                    duration: 0,\r\n                    fill: \"forwards\",\r\n                    easing: \"ease-in-out\",\r\n                    pseudoElement: \"::after\"\r\n                });\r\n            });\r\n        }\r\n    }\r\n    #walkerNodeFilter(node) {\r\n        if (node instanceof HTMLETabElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    firstItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.firstChild();\r\n    }\r\n    #lastItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.lastChild();\r\n    }\r\n    #previousItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.previousNode();\r\n    }\r\n    #nextItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.nextNode();\r\n    }\r\n    #setActiveTab(item) {\r\n        const { activeTab } = this;\r\n        if (activeTab !== null && activeTab !== item) {\r\n            activeTab.active = false;\r\n        }\r\n        if (item !== null) {\r\n            item.active = true;\r\n        }\r\n    }\r\n    #selectTab(tab) {\r\n        const { selectedTab } = this;\r\n        if (tab !== selectedTab) {\r\n            tab.selected = true;\r\n        }\r\n    }\r\n    #handleClickEvent(event) {\r\n        const { target } = event;\r\n        const targetTab = target.closest(\"e-tab\");\r\n        if (targetTab) {\r\n            targetTab.select();\r\n            const { width: tabWidth, height: tabHeight } = targetTab.getBoundingClientRect();\r\n            const { offsetLeft } = targetTab;\r\n            this.animate([{\r\n                    width: `${tabWidth}px`,\r\n                    left: `${offsetLeft}px`,\r\n                    top: `${tabHeight}px`\r\n                }], {\r\n                duration: SELECT_ANIMATION_DURATION,\r\n                fill: \"forwards\",\r\n                easing: \"ease-in-out\",\r\n                pseudoElement: \"::after\"\r\n            });\r\n        }\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const { selectedTab } = this;\r\n        if (!this.contains(relatedTarget)) {\r\n            (selectedTab ?? this.firstItem())?.focus();\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        const targetTab = target.closest(\"e-tab\");\r\n        if (targetTab) {\r\n            this.#setActiveTab(targetTab);\r\n            this.tabIndex = -1;\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const lostFocusWithin = !this.contains(relatedTarget);\r\n        if (lostFocusWithin) {\r\n            this.tabIndex = 0;\r\n        }\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { activeTab } = this;\r\n        switch (key) {\r\n            case \"ArrowLeft\": {\r\n                const previousTab = activeTab ?\r\n                    this.#previousItem(activeTab) ?? this.#lastItem() :\r\n                    this.firstItem();\r\n                previousTab?.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                const nextTab = activeTab ?\r\n                    this.#nextItem(activeTab) ?? this.firstItem() :\r\n                    this.#lastItem();\r\n                nextTab?.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.firstItem();\r\n                if (firstItem) {\r\n                    firstItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                if (lastItem) {\r\n                    lastItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Enter\": {\r\n                activeTab?.click();\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handleSelectEvent(event) {\r\n        const { target } = event;\r\n        const targetTab = target;\r\n        if (targetTab.selected) {\r\n            const { tabs } = this;\r\n            tabs.forEach((tab_i) => {\r\n                if (tab_i !== targetTab) {\r\n                    tab_i.selected = false;\r\n                    const { panel } = tab_i;\r\n                    if (panel) {\r\n                        panel.hidden = true;\r\n                    }\r\n                }\r\n            });\r\n            const { panel } = targetTab;\r\n            if (panel) {\r\n                panel.hidden = false;\r\n            }\r\n        }\r\n    }\r\n};\r\nHTMLETabListElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-tablist\"\r\n    })\r\n], HTMLETabListElementBase);\r\nvar HTMLETabListElement = HTMLETabListElementBase;\r\n//# sourceMappingURL=TabList.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_HOVERED_ITEM_COLOR, DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element } from \"../../Element\";\r\nexport { HTMLEStatusItemElement };\r\nexport { EStatusItem };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEStatusItemElementBase = class HTMLEStatusItemElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"span\", {\r\n            attributes: {\r\n                part: \"content\"\r\n            },\r\n            children: element(\"slot\")\r\n        }));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                user-select: none;\r\n                white-space: nowrap;\r\n                cursor: pointer;\r\n                line-height: 22px;\r\n            }\r\n            \r\n            :host([disabled]) {\r\n                opacity: 0.38;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host(:hover) {\r\n                background-color: var(--theme-hovered-item-color, ${DEFAULT_THEME_HOVERED_ITEM_COLOR});\r\n            }\r\n            \r\n            :host(:focus-within):host-context(e-statusbar:focus-within) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n            \r\n            [part=\"content\"] {\r\n                padding: 0 4px;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEStatusItemElementBase.prototype, \"active\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEStatusItemElementBase.prototype, \"name\", void 0);\r\nHTMLEStatusItemElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-statusitem\"\r\n    })\r\n], HTMLEStatusItemElementBase);\r\nvar HTMLEStatusItemElement = HTMLEStatusItemElementBase;\r\nvar EStatusItem = Object.assign(function (init) {\r\n    const { label, name, onclick } = init;\r\n    return element(\"e-statusitem\", {\r\n        attributes: {\r\n            title: label,\r\n            name: name,\r\n        },\r\n        children: label,\r\n        listeners: {\r\n            click: onclick\r\n        }\r\n    });\r\n}, {\r\n    prototype: HTMLEStatusItemElement.prototype\r\n});\r\n//# sourceMappingURL=StatusItem.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { element, CustomElement, AttributeProperty } from \"../../Element\";\r\nimport \"./StatusItem\";\r\nexport { HTMLEStatusItemGroupElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEStatusItemGroupElementBase = class HTMLEStatusItemGroupElementBase extends HTMLElement {\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                width: max-content;\r\n                flex-direction: row;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"label\": {\r\n                const label = this.shadowRoot.querySelector(\"[part='label']\");\r\n                if (label) {\r\n                    label.textContent = newValue;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEStatusItemGroupElementBase.prototype, \"name\", void 0);\r\nHTMLEStatusItemGroupElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-statusitemgroup\"\r\n    })\r\n], HTMLEStatusItemGroupElementBase);\r\nvar HTMLEStatusItemGroupElement = HTMLEStatusItemGroupElementBase;\r\n//# sourceMappingURL=StatusItemGroup.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR } from \"../../../stylesheets/Theme\";\r\nimport { CustomElement, element } from \"../../Element\";\r\nimport { HTMLEStatusItemElement } from \"./StatusItem\";\r\nimport { HTMLEStatusItemGroupElement } from \"./StatusItemGroup\";\r\nimport \"./StatusItem\";\r\nimport \"./StatusItemGroup\";\r\nexport { HTMLEStatusBarElement };\r\nvar shadowTemplate;\r\nvar style;\r\nlet HTMLEStatusBarElementBase = class HTMLEStatusBarElementBase extends HTMLElement {\r\n    get activeItem() {\r\n        return this.querySelector(\"e-statusitem[active]\");\r\n    }\r\n    items() {\r\n        return Array.from(this.querySelectorAll(\":is(:scope, :scope > e-statusitemgroup) > e-statusitem\"));\r\n    }\r\n    #walker;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"slot\"));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: flex;\r\n                flex-direction: row;\r\n            }\r\n\r\n            :host(:focus) {\r\n                outline: 1px solid var(--theme-focused-item-outline-color, ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});\r\n                outline-offset: -1px;\r\n            }\r\n\r\n            ::slotted(e-statusitem:not(:first-child)) {\r\n                margin-left: 4px;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#nodeFilter.bind(this));\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.addEventListener(\"contextmenu\", this.#handleContextMenuEvent.bind(this));\r\n        this.addEventListener(\"dblclick\", this.#handleDblClickEvent.bind(this));\r\n        this.addEventListener(\"focus\", this.#handleFocusEvent.bind(this));\r\n        this.addEventListener(\"focusin\", this.#handleFocusInEvent.bind(this));\r\n        this.addEventListener(\"focusout\", this.#handleFocusOutEvent.bind(this));\r\n        this.addEventListener(\"keydown\", this.#handleKeyDownEvent.bind(this));\r\n    }\r\n    connectedCallback() {\r\n        const { tabIndex } = this;\r\n        this.tabIndex = tabIndex;\r\n    }\r\n    #nodeFilter(node) {\r\n        if (node instanceof HTMLEStatusItemElement) {\r\n            return NodeFilter.FILTER_ACCEPT;\r\n        }\r\n        if (node instanceof HTMLEStatusItemGroupElement) {\r\n            return NodeFilter.FILTER_SKIP;\r\n        }\r\n        return NodeFilter.FILTER_REJECT;\r\n    }\r\n    firstItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.firstChild();\r\n    }\r\n    #lastItem() {\r\n        const walker = this.#walker;\r\n        walker.currentNode = walker.root;\r\n        return walker.lastChild();\r\n    }\r\n    #previousItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        const previousItem = walker.previousSibling();\r\n        return previousItem;\r\n    }\r\n    #nextItem(item) {\r\n        const walker = this.#walker;\r\n        walker.currentNode = item;\r\n        return walker.nextSibling();\r\n    }\r\n    #setActiveItem(item) {\r\n        const { activeItem } = this;\r\n        if (activeItem !== null && activeItem !== item) {\r\n            activeItem.active = false;\r\n        }\r\n        if (item !== null) {\r\n            item.active = true;\r\n        }\r\n    }\r\n    #handleContextMenuEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleDblClickEvent(event) {\r\n        event.stopPropagation();\r\n    }\r\n    #handleFocusEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const { activeItem } = this;\r\n        if (!this.contains(relatedTarget)) {\r\n            (activeItem ?? this.firstItem())?.focus();\r\n        }\r\n    }\r\n    #handleFocusInEvent(event) {\r\n        const { target } = event;\r\n        const targetItem = target.closest(\"e-statusitem\");\r\n        if (targetItem) {\r\n            this.#setActiveItem(targetItem);\r\n            this.tabIndex = -1;\r\n        }\r\n    }\r\n    #handleFocusOutEvent(event) {\r\n        const { relatedTarget } = event;\r\n        const lostFocusWithin = !this.contains(relatedTarget);\r\n        if (lostFocusWithin) {\r\n            this.tabIndex = 0;\r\n        }\r\n    }\r\n    #handleKeyDownEvent(event) {\r\n        const { key } = event;\r\n        const { activeItem } = this;\r\n        switch (key) {\r\n            case \"Enter\": {\r\n                if (activeItem) {\r\n                    activeItem.click();\r\n                    event.stopPropagation();\r\n                }\r\n                break;\r\n            }\r\n            case \"ArrowLeft\": {\r\n                if (activeItem) {\r\n                    const previousItem = this.#previousItem(activeItem);\r\n                    if (previousItem) {\r\n                        previousItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                else {\r\n                    const firstItem = this.firstItem();\r\n                    if (firstItem) {\r\n                        firstItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"ArrowRight\": {\r\n                if (activeItem) {\r\n                    const nextItem = this.#nextItem(activeItem);\r\n                    if (nextItem) {\r\n                        nextItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                else {\r\n                    const lastItem = this.#lastItem();\r\n                    if (lastItem) {\r\n                        lastItem.focus({ preventScroll: true });\r\n                    }\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Home\": {\r\n                const firstItem = this.firstItem();\r\n                if (firstItem) {\r\n                    firstItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"End\": {\r\n                const lastItem = this.#lastItem();\r\n                if (lastItem) {\r\n                    lastItem.focus({ preventScroll: true });\r\n                }\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n            case \"Escape\": {\r\n                this.focus({ preventScroll: true });\r\n                event.stopPropagation();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\nHTMLEStatusBarElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-statusbar\"\r\n    })\r\n], HTMLEStatusBarElementBase);\r\nvar HTMLEStatusBarElement = HTMLEStatusBarElementBase;\r\n//# sourceMappingURL=StatusBar.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty } from \"../Element\";\r\nexport { HTMLEHandleElement };\r\nvar style;\r\nlet HTMLEHandleElementBase = class HTMLEHandleElementBase extends HTMLElement {\r\n    #target;\r\n    #onCapture;\r\n    static {\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n                            \r\n                width: 24px;\r\n                height: 12px;\r\n                \r\n                background-color: var(--theme-selected-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n\r\n                -webkit-mask-image: url(\"/assets/dots.png\");\r\n                mask-image: url(\"/assets/dots.png\");\r\n\r\n                -webkit-mask-repeat: repeat;\r\n                mask-repeat: repeat;\r\n                cursor: move;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        this.#target = null;\r\n        this.#onCapture = false;\r\n        this.addEventListener(\"pointerdown\", this.#handlePointerDownEvent.bind(this));\r\n        this.addEventListener(\"pointermove\", this.#handlePointerMoveEvent.bind(this));\r\n        this.addEventListener(\"pointerup\", this.#handlePointerUpEvent.bind(this));\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"controls\": {\r\n                const { controls } = this;\r\n                this.#target = document.getElementById(controls);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #handlePointerUpEvent(event) {\r\n        const { pointerId } = event;\r\n        this.releasePointerCapture(pointerId);\r\n        this.#onCapture = false;\r\n    }\r\n    #handlePointerDownEvent(event) {\r\n        const { pointerId } = event;\r\n        const { controls } = this;\r\n        this.#target = document.getElementById(controls);\r\n        this.setPointerCapture(pointerId);\r\n        this.#onCapture = true;\r\n    }\r\n    #handlePointerMoveEvent(event) {\r\n        if (this.#onCapture) {\r\n            const target = this.#target;\r\n            if (target !== null) {\r\n                const targetComputedStyle = window.getComputedStyle(target);\r\n                const { movementX, movementY } = event;\r\n                const { width: rectWidth, height: rectHeight } = target.getBoundingClientRect();\r\n                const outerElement = target.parentElement ?? document.body;\r\n                const { left: outerRectLeft, right: outerRectRight, top: outerRectTop, bottom: outerRectBottom } = outerElement.getBoundingClientRect();\r\n                const left = parseFloat(targetComputedStyle.getPropertyValue(\"left\"));\r\n                const newLeft = Math.max(outerRectLeft, Math.min(Math.trunc(left + movementX), outerRectRight - rectWidth));\r\n                const top = parseFloat(targetComputedStyle.getPropertyValue(\"top\"));\r\n                const newTop = Math.max(outerRectTop, Math.min(Math.trunc(top + movementY), outerRectBottom - rectHeight));\r\n                target.style.setProperty(\"left\", `${newLeft}px`);\r\n                target.style.setProperty(\"top\", `${newTop}px`);\r\n                this.dispatchEvent(new CustomEvent(\"move\"));\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true })\r\n], HTMLEHandleElementBase.prototype, \"controls\", void 0);\r\nHTMLEHandleElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-handle\"\r\n    })\r\n], HTMLEHandleElementBase);\r\nvar HTMLEHandleElement = HTMLEHandleElementBase;\r\n//# sourceMappingURL=Handle.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, AttributeProperty } from \"../Element\";\r\nexport { HTMLEImportElement };\r\nlet HTMLEImportElementBase = class HTMLEImportElementBase extends HTMLElement {\r\n    connectedCallback() {\r\n        const { src } = this;\r\n        if (src) {\r\n            this.#importRequest(src);\r\n        }\r\n    }\r\n    async #importRequest(src) {\r\n        this.outerHTML = await fetch(src).then((response) => {\r\n            if (response.ok) {\r\n                return response.text();\r\n            }\r\n            else {\r\n                throw new Error(response.statusText);\r\n            }\r\n        });\r\n        this.dispatchEvent(new Event(\"load\", { bubbles: true }));\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String })\r\n], HTMLEImportElementBase.prototype, \"src\", void 0);\r\nHTMLEImportElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-import\"\r\n    })\r\n], HTMLEImportElementBase);\r\nvar HTMLEImportElement = HTMLEImportElementBase;\r\n//# sourceMappingURL=Import.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { DEFAULT_THEME_SELECTED_ITEM_COLOR } from \"../../stylesheets/Theme\";\r\nimport { CustomElement, AttributeProperty, element } from \"../Element\";\r\nexport { HTMLELoaderElement };\r\nvar barShadowTemplate;\r\nvar spinnerShadowTemplate;\r\nvar style;\r\nlet HTMLELoaderElementBase = class HTMLELoaderElementBase extends HTMLElement {\r\n    static {\r\n        barShadowTemplate = element(\"template\");\r\n        barShadowTemplate.content.append(element(\"div\", {\r\n            attributes: {\r\n                part: \"bar\"\r\n            },\r\n            children: [\r\n                element(\"div\", {\r\n                    attributes: {\r\n                        part: \"slider\"\r\n                    },\r\n                    children: [\r\n                        element(\"div\", {\r\n                            attributes: {\r\n                                part: \"cursor\"\r\n                            }\r\n                        })\r\n                    ]\r\n                })\r\n            ]\r\n        }));\r\n        spinnerShadowTemplate = element(\"template\");\r\n        spinnerShadowTemplate.content.append(element(\"div\", {\r\n            attributes: {\r\n                part: \"spinner\"\r\n            }\r\n        }));\r\n        style = /*css*/ `\r\n            :host {\r\n                display: inline-block;\r\n            }\r\n\r\n            :host(:is(:not([type]), [type=\"bar\"])) {\r\n                border: 1px solid gainsboro;\r\n                border-radius: 4px;\r\n            }\r\n        \r\n            [part=\"bar\"] {\r\n                position: relative;\r\n                overflow: hidden;\r\n                height: 6px;\r\n                width: 100%;\r\n                width: 86px;\r\n                border-radius: 4px;\r\n                background-color: whitesmoke;\r\n            }\r\n        \r\n            [part=\"slider\"] {\r\n                display: flex;\r\n                position: absolute;\r\n                width: 100%;\r\n                height: 100%;\r\n                animation-name: slider;\r\n            }\r\n        \r\n            [part=\"slider\"],\r\n            [part=\"cursor\"] {\r\n                border-radius: 4px;\r\n                will-change: transform;\r\n                animation-duration: 1s;\r\n                animation-timing-function: linear;\r\n                animation-iteration-count: infinite;\r\n            }\r\n        \r\n            [part=\"cursor\"] {\r\n                display: block;\r\n                width: 32px;\r\n                background-color: var(--theme-activated-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n                animation-name: cursor;\r\n            }\r\n        \r\n            :host([type=\"spinner\"]) {\r\n                display: inline-block;\r\n                width: 20px;\r\n                height: 20px;\r\n            }\r\n        \r\n            [part=\"spinner\"] {\r\n                display: inline-block;\r\n                width: 18px;\r\n                height: 18px;\r\n            }\r\n        \r\n            [part=\"spinner\"]::after {\r\n                content: \"\";\r\n                display: block;\r\n                width: 12px;\r\n                height: 12px;\r\n                border-radius: 50%;\r\n                border-width: 4px;\r\n                border-style: solid;\r\n                border-color: transparent var(--theme-activated-item-color, ${DEFAULT_THEME_SELECTED_ITEM_COLOR});\r\n                animation: spin 1.2s linear infinite;\r\n            }\r\n        \r\n            @keyframes slider {\r\n                0% {\r\n                    transform: translateX(0%);\r\n                }\r\n                100% {\r\n                    transform: translateX(100%);\r\n                }\r\n            }\r\n        \r\n            @keyframes cursor {\r\n                0% {\r\n                    transform: translateX(-100%);\r\n                }\r\n                100% {\r\n                    transform: translateX(100%);\r\n                }\r\n            }\r\n        \r\n            @keyframes spin {\r\n                0% {\r\n                    transform: rotate(0);\r\n                }\r\n                100% {\r\n                    transform: rotate(360deg);\r\n                }\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.replaceChildren(barShadowTemplate.content.cloneNode(true));\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"type\": {\r\n                this.#updateTemplate();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #updateTemplate() {\r\n        const { type, shadowRoot } = this;\r\n        switch (type) {\r\n            case \"spinner\": {\r\n                shadowRoot.replaceChildren(spinnerShadowTemplate.content.cloneNode(true));\r\n                break;\r\n            }\r\n            case \"bar\": {\r\n                shadowRoot.replaceChildren(barShadowTemplate.content.cloneNode(true));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String, defaultValue: \"bar\", observed: true })\r\n], HTMLELoaderElementBase.prototype, \"type\", void 0);\r\nHTMLELoaderElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-loader\"\r\n    })\r\n], HTMLELoaderElementBase);\r\nvar HTMLELoaderElement = HTMLELoaderElementBase;\r\n//# sourceMappingURL=Loader.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement } from \"../Element\";\r\nexport { HTMLESeparatorElement };\r\nvar style;\r\nlet HTMLESeparatorElementBase = class HTMLESeparatorElementBase extends HTMLElement {\r\n    #internals;\r\n    static {\r\n        style = /*css*/ `\r\n            :host {\r\n                display: block;\r\n                margin: 10px 0 10px 27px;\r\n                border: none;\r\n                border-top: 1px solid lightgrey;\r\n            }\r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        this.#internals = this.attachInternals();\r\n        this.#internals.role = \"separator\";\r\n    }\r\n};\r\nHTMLESeparatorElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-separator\"\r\n    })\r\n], HTMLESeparatorElementBase);\r\nvar HTMLESeparatorElement = HTMLESeparatorElementBase;\r\n//# sourceMappingURL=Separator.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CustomElement, AttributeProperty, element } from \"../Element\";\r\nexport { HTMLEToolTipElement };\r\nvar shadowTemplate;\r\nvar style;\r\nvar HIDE_DELAY_MS = 100;\r\nvar SHOW_DELAY_MS = 200;\r\nvar ANIMATION_DURATION = 100;\r\nlet HTMLEToolTipElementBase = class HTMLEToolTipElementBase extends HTMLElement {\r\n    get target() {\r\n        return this.#target;\r\n    }\r\n    #target;\r\n    #targetListenerObject;\r\n    #documentListenerObject;\r\n    #toggleAnimation;\r\n    static {\r\n        shadowTemplate = element(\"template\");\r\n        shadowTemplate.content.append(element(\"div\", {\r\n            attributes: {\r\n                part: \"container\"\r\n            },\r\n            children: [\r\n                element(\"span\", {\r\n                    attributes: {\r\n                        part: \"arrow\"\r\n                    }\r\n                }),\r\n                element(\"slot\")\r\n            ]\r\n        }));\r\n        style = /*css*/ `\r\n            :host {\r\n                position: fixed;\r\n                display: inline-block;\r\n                z-index: 1;\r\n                padding: 4px;\r\n                border-radius: 3px;\r\n                box-sizing: border-box;\r\n                background-color: white;\r\n                border: 1px solid black;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            :host([hidden]) {\r\n                display: none;\r\n            }\r\n\r\n            :host(:not([visible])) {\r\n                opacity: 0;\r\n            }\r\n            \r\n            [part=\"arrow\"] {\r\n                display: inline-block;\r\n                position: fixed;\r\n                z-index: 1;\r\n                width: 4px;\r\n                height: 4px;\r\n                box-sizing: border-box;\r\n                background-color: white;\r\n                border: 1px solid black;\r\n                border-width: 0 1px 1px 0;\r\n            }\r\n            \r\n            :host(:is(:not([position]), [position=\"top\"])) [part=\"arrow\"] {\r\n                transform: translate(-2px, -2px) rotate(45deg);\r\n            }\r\n            \r\n            :host(:is([position=\"bottom\"])) [part=\"arrow\"] {\r\n                transform: translate(-2px, -2px) rotate(225deg);\r\n            }\r\n            \r\n            :host(:is([position=\"left\"])) [part=\"arrow\"] {\r\n                transform: translate(-2px, -2px) rotate(315deg);\r\n            }\r\n            \r\n            :host(:is([position=\"right\"])) [part=\"arrow\"] {\r\n                transform: translate(-2px, -2px) rotate(135deg);\r\n            }        \r\n        `;\r\n    }\r\n    constructor() {\r\n        super();\r\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        const adoptedStylesheet = new CSSStyleSheet();\r\n        adoptedStylesheet.replace(style);\r\n        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];\r\n        shadowRoot.append(shadowTemplate.content.cloneNode(true));\r\n        this.#target = null;\r\n        this.#toggleAnimation = null;\r\n        this.#targetListenerObject = (function (tooltip) {\r\n            return {\r\n                handleEvent(event) {\r\n                    const { type } = event;\r\n                    switch (type) {\r\n                        case \"mouseenter\": {\r\n                            tooltip.#handleTargetMouseEnterEvent();\r\n                            break;\r\n                        }\r\n                        case \"mouseleave\": {\r\n                            tooltip.#handleTargetMouseLeaveEvent();\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n        })(this);\r\n        this.#documentListenerObject = (function (tooltip) {\r\n            return {\r\n                handleEvent(event) {\r\n                    const { type } = event;\r\n                    switch (type) {\r\n                        case \"keydown\": {\r\n                            tooltip.#handleDocumentKeyDownEvent(event);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n        })(this);\r\n    }\r\n    connectedCallback() {\r\n        this.#setTarget();\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        switch (name) {\r\n            case \"for\": {\r\n                this.#setTarget();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    #setTarget() {\r\n        const { htmlFor } = this;\r\n        if (htmlFor) {\r\n            const rootNode = this.getRootNode();\r\n            if (rootNode instanceof Document || rootNode instanceof ShadowRoot) {\r\n                const target = rootNode.getElementById(htmlFor);\r\n                if (target !== null) {\r\n                    const oldTarget = this.#target;\r\n                    const targetListenerObject = this.#targetListenerObject;\r\n                    if (oldTarget) {\r\n                        oldTarget.removeEventListener(\"mouseenter\", targetListenerObject);\r\n                        oldTarget.removeEventListener(\"mouseleave\", targetListenerObject);\r\n                    }\r\n                    target.addEventListener(\"mouseenter\", targetListenerObject);\r\n                    target.addEventListener(\"mouseleave\", targetListenerObject);\r\n                }\r\n                this.#target = target;\r\n            }\r\n        }\r\n    }\r\n    show(options) {\r\n        const { immediate = false } = options ?? {};\r\n        let toggleAnimation = this.#toggleAnimation;\r\n        if (toggleAnimation !== null) {\r\n            const { id } = toggleAnimation;\r\n            if (id === \"hide\") {\r\n                toggleAnimation.cancel();\r\n            }\r\n        }\r\n        if (!this.visible) {\r\n            this.hidden = false;\r\n            toggleAnimation = this.animate([\r\n                { opacity: 0 },\r\n                { opacity: 1 }\r\n            ], {\r\n                id: \"show\",\r\n                delay: immediate ? 0 : SHOW_DELAY_MS,\r\n                duration: immediate ? 0 : ANIMATION_DURATION\r\n            });\r\n            const { finished } = toggleAnimation;\r\n            finished.then(() => {\r\n                this.visible = true;\r\n            }).catch(_ => void 0);\r\n            this.#toggleAnimation = toggleAnimation;\r\n            this.#position();\r\n        }\r\n        else {\r\n            this.#toggleAnimation = null;\r\n        }\r\n    }\r\n    hide(options) {\r\n        const { immediate = false } = options ?? {};\r\n        let toggleAnimation = this.#toggleAnimation;\r\n        if (toggleAnimation !== null) {\r\n            const { id } = toggleAnimation;\r\n            if (id === \"show\") {\r\n                toggleAnimation.cancel();\r\n            }\r\n        }\r\n        if (this.visible) {\r\n            toggleAnimation = this.animate([\r\n                { opacity: 1 },\r\n                { opacity: 0 }\r\n            ], {\r\n                id: \"hide\",\r\n                delay: immediate ? 0 : HIDE_DELAY_MS,\r\n                duration: immediate ? 0 : ANIMATION_DURATION\r\n            });\r\n            const { finished } = toggleAnimation;\r\n            finished.then(() => {\r\n                this.visible = false;\r\n                this.hidden = true;\r\n            }).catch(_ => void 0);\r\n            this.#toggleAnimation = toggleAnimation;\r\n        }\r\n        else {\r\n            this.#toggleAnimation = null;\r\n        }\r\n    }\r\n    #arrow() {\r\n        return this.shadowRoot.querySelector(\"[part=arrow]\");\r\n    }\r\n    #position() {\r\n        const target = this.#target;\r\n        if (target !== null) {\r\n            const { top: targetTop, bottom: targetBottom, left: targetLeft, right: targetRight } = target.getBoundingClientRect();\r\n            const { width: tooltipWidth, height: tooltipHeight } = this.getBoundingClientRect();\r\n            const tooltipHalfWidth = tooltipWidth / 2;\r\n            const tooltipHalfHeight = tooltipHeight / 2;\r\n            const targetCenter = (targetRight + targetLeft) / 2;\r\n            const targetMiddle = (targetBottom + targetTop) / 2;\r\n            const { position, style: tooltipStyle } = this;\r\n            const arrow = this.#arrow();\r\n            const { style: arrowStyle } = arrow;\r\n            const { width: arrowWidth, height: arrowHeight } = arrow.getBoundingClientRect();\r\n            const arrowHalfWidth = arrowWidth / 2;\r\n            const arrowHalfHeight = arrowHeight / 2;\r\n            const { clientWidth } = document.body;\r\n            switch (position) {\r\n                case \"top\": {\r\n                    tooltipStyle.setProperty(\"top\", `${targetTop - tooltipHeight - arrowHalfHeight}px`);\r\n                    tooltipStyle.setProperty(\"left\", `${Math.max(0, Math.min(targetCenter - tooltipHalfWidth, clientWidth - tooltipWidth))}px`);\r\n                    arrowStyle.setProperty(\"top\", `${targetTop - arrowHalfHeight}px`);\r\n                    arrowStyle.setProperty(\"left\", `${targetCenter}px`);\r\n                    break;\r\n                }\r\n                case \"bottom\": {\r\n                    tooltipStyle.setProperty(\"top\", `${targetBottom + arrowHalfHeight}px`);\r\n                    tooltipStyle.setProperty(\"left\", `${Math.max(0, Math.min(targetCenter - tooltipHalfWidth, clientWidth - tooltipWidth))}px`);\r\n                    arrowStyle.setProperty(\"top\", `${targetBottom + arrowHalfHeight}px`);\r\n                    arrowStyle.setProperty(\"left\", `${targetCenter}px`);\r\n                    break;\r\n                }\r\n                case \"left\": {\r\n                    tooltipStyle.setProperty(\"top\", `${targetMiddle - tooltipHalfHeight}px`);\r\n                    tooltipStyle.setProperty(\"left\", `${targetLeft - tooltipWidth - arrowHalfWidth}px`);\r\n                    arrowStyle.setProperty(\"top\", `${targetMiddle}px`);\r\n                    arrowStyle.setProperty(\"left\", `${targetLeft - arrowHalfWidth}px`);\r\n                    break;\r\n                }\r\n                case \"right\": {\r\n                    tooltipStyle.setProperty(\"top\", `${targetMiddle - tooltipHalfHeight}px`);\r\n                    tooltipStyle.setProperty(\"left\", `${targetRight + arrowHalfWidth}px`);\r\n                    arrowStyle.setProperty(\"top\", `${targetMiddle}px`);\r\n                    arrowStyle.setProperty(\"left\", `${targetRight + arrowHalfWidth}px`);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    #handleTargetMouseEnterEvent() {\r\n        this.show();\r\n        const toggleAnimation = this.#toggleAnimation;\r\n        if (toggleAnimation) {\r\n            const documentListenerObject = this.#documentListenerObject;\r\n            const { finished } = toggleAnimation;\r\n            finished.then(() => {\r\n                document.addEventListener(\"keydown\", documentListenerObject);\r\n            }).catch(_ => void 0);\r\n        }\r\n    }\r\n    #handleTargetMouseLeaveEvent() {\r\n        this.hide();\r\n        const toggleAnimation = this.#toggleAnimation;\r\n        if (toggleAnimation) {\r\n            const documentListenerObject = this.#documentListenerObject;\r\n            const { finished } = toggleAnimation;\r\n            finished.then(() => {\r\n                document.removeEventListener(\"keydown\", documentListenerObject);\r\n            }).catch(_ => void 0);\r\n        }\r\n    }\r\n    #handleDocumentKeyDownEvent(event) {\r\n        const { key } = event;\r\n        switch (key) {\r\n            case \"Escape\": {\r\n                this.hide({\r\n                    immediate: true\r\n                });\r\n                break;\r\n            }\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AttributeProperty({ type: String, observed: true, name: \"for\" })\r\n], HTMLEToolTipElementBase.prototype, \"htmlFor\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: String, defaultValue: \"top\" })\r\n], HTMLEToolTipElementBase.prototype, \"position\", void 0);\r\n__decorate([\r\n    AttributeProperty({ type: Boolean })\r\n], HTMLEToolTipElementBase.prototype, \"visible\", void 0);\r\nHTMLEToolTipElementBase = __decorate([\r\n    CustomElement({\r\n        name: \"e-tooltip\"\r\n    })\r\n], HTMLEToolTipElementBase);\r\nvar HTMLEToolTipElement = HTMLEToolTipElementBase;\r\n//# sourceMappingURL=ToolTip.js.map","import { element } from \"editor/lib/elements/Element\";\r\nimport { GridColumnModel, GridModel, GridRowModel } from \"editor/lib/views/GridView\";\r\nimport { TreeModel } from \"editor/lib/views/TreeView\";\r\n\r\nimport { theme } from \"editor/lib/stylesheets/Theme\";\r\n\r\nimport { MyTreeItemModel, MyTreeView } from \"./src/MyTreeView\";\r\nimport { MyGridRowModel, MyGridView } from \"./src/MyGridView\";\r\n\r\nimport \"editor/lib/elements/containers/lists\";\r\nimport \"editor/lib/elements/containers/tabs\";\r\nimport \"editor/lib/elements/containers/menus\";\r\nimport \"editor/lib/elements/containers/status\";\r\nimport \"editor/lib/elements/misc\";\r\n\r\nexport async function main() {\r\n    document.adoptedStyleSheets = [theme.stylesheet];\r\n    document.head.append(\r\n        ...Object.values(theme.images()).map(\r\n            (img) => element(\"link\", {\r\n                attributes: {\r\n                    rel: \"preload\",\r\n                    as: \"image\",\r\n                    href: img,\r\n                    crossorigin: \"anonymous\"\r\n                }\r\n            })\r\n        )\r\n    );\r\n    \r\n    const gridView = new MyGridView();\r\n    gridView.setModel(\r\n        new GridModel({\r\n            columns: [\r\n                new GridColumnModel({\r\n                    name: \"name\",\r\n                    type: String,\r\n                    label: \"Nom\",\r\n                    extract: (row) => (<MyGridRowModel>row).name\r\n                }),\r\n                new GridColumnModel({\r\n                    name: \"color\",\r\n                    type: String,\r\n                    label: \"Couleur\",\r\n                    extract: (row) => (<MyGridRowModel>row).color\r\n                }),\r\n                new GridColumnModel({\r\n                    name: \"age\",\r\n                    type: Number,\r\n                    label: \"Age\",\r\n                    extract: (row) => String((<MyGridRowModel>row).age),\r\n                    filters: [{\r\n                        name: \"Minors\",\r\n                        filter: (row) => (<MyGridRowModel>row).age < 18\r\n                    },{\r\n                        name: \"Majors\",\r\n                        filter: (row) => (<MyGridRowModel>row).age >= 18\r\n                    }]\r\n                })\r\n            ],\r\n            rows: [\r\n                new MyGridRowModel({\r\n                    id: 1,\r\n                    name: \"Louis\",\r\n                    age: 13,\r\n                    color: \"bleu\"\r\n                }),\r\n                new MyGridRowModel({\r\n                    id: 2,\r\n                    name: \"Marine\",\r\n                    age: 21,\r\n                    color: \"bleu\"\r\n                }),\r\n                new MyGridRowModel({\r\n                    id: 3,\r\n                    name: \"Jean-Christophe\",\r\n                    age: 32,\r\n                    color: \"rouge\"\r\n                }),\r\n                new MyGridRowModel({\r\n                    id: 4,\r\n                    name: \"Anne\",\r\n                    age: 54,\r\n                    color: \"jaune\"\r\n                }),\r\n                new MyGridRowModel({\r\n                    id: 5,\r\n                    name: \"Claude\",\r\n                    age: 61,\r\n                    color: \"noir\"\r\n                }),\r\n                new MyGridRowModel({\r\n                    id: 6,\r\n                    name: \"Benoît\",\r\n                    age: 38,\r\n                    color: \"vert\"\r\n                })\r\n            ]\r\n        })\r\n    );\r\n    document.body.append(gridView);\r\n    gridView.render();\r\n\r\n    const treeModel = new TreeModel({\r\n        items: [\r\n            new MyTreeItemModel({\r\n                id: \"TI 0\",\r\n                type: \"parent\",\r\n                items: [\r\n                    new MyTreeItemModel({\r\n                        id: \"TI 1A\",\r\n                        type: \"parent\",\r\n                        items: [\r\n                            new MyTreeItemModel({\r\n                                type: \"leaf\",\r\n                                id: \"TI 1AX\"\r\n                            }),\r\n                        ]\r\n                    }),\r\n                    new MyTreeItemModel({\r\n                        type: \"parent\",\r\n                        id: \"TI 1B\"\r\n                    })\r\n                ]\r\n            }),\r\n            new MyTreeItemModel({\r\n                id: \"TI 1\",\r\n                type: \"parent\",\r\n                items: [\r\n                    new MyTreeItemModel({\r\n                        id: \"TI 1A\",\r\n                        type: \"parent\",\r\n                        items: [\r\n                            new MyTreeItemModel({\r\n                                type: \"leaf\",\r\n                                id: \"TI 1AX\"\r\n                            }),\r\n                        ]\r\n                    }),\r\n                    new MyTreeItemModel({\r\n                        type: \"parent\",\r\n                        id: \"TI 1B\"\r\n                    })\r\n                ]\r\n            }),\r\n            new MyTreeItemModel({\r\n                type: \"leaf\",\r\n                id: \"TI 2\"\r\n            }),\r\n            new MyTreeItemModel({\r\n                type: \"leaf\",\r\n                id: \"TI 3\"\r\n            })\r\n        ]\r\n    });\r\n\r\n    const treeView = new MyTreeView();\r\n    treeView.draggable = true;\r\n    treeView.setModel(treeModel);\r\n    treeView.render();\r\n    document.body.append(treeView);\r\n\r\n    document.body.append(\r\n        ...[\r\n            \"builtins\",\r\n            \"tablist\",\r\n            \"sash\",\r\n            \"loaders\",\r\n            \"tree\",\r\n            \"menus\",\r\n            \"list\",\r\n            \"status\"\r\n        ].map(example => {\r\n            return element(\"details\", {\r\n                children: [\r\n                    element(\"summary\", {\r\n                        children: `${example}.html`\r\n                    }),\r\n                    element(\"e-import\", {\r\n                        attributes: {\r\n                            src: `example/${example}.html`\r\n                        }\r\n                    })\r\n                ]\r\n            })\r\n        })\r\n    );\r\n}"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","g","globalThis","this","Function","e","window","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","length","Error","replace","p","ModelChangeRecordBase","target","changeType","propertyName","oldValue","newValue","removedIndex","removedItems","insertedIndex","insertedItems","sortedIndices","constructor","init","undefined","ModelNodesList","PROPERTY_CHANGE","LIST_REMOVE","LIST_INSERT","LIST_SORT","ModelChangeRecord","items","slice","item","index","values","ModelEventBase","type","currentTarget","static","setCurrentTarget","event","setTarget","ModelEventTargetAccessor","ModelEvent","ModelEventTargetBase","Map","receiveEvent","callbacks","forEach","callback_i","addEventListener","callback","push","set","removeEventListener","callbackIndex","findIndex","splice","delete","dispatchEvent","ModelNodeBase","super","parentNode","setParent","isCyclicReference","ancestorNode","TypeError","beginChanges","endChanges","getRecords","property","records","record","triggerChange","node","handleRecord","ModelNodeRecordsAccessor","ModelNode","ReactiveProperty","ModelReactivePropertiesAccessor","getProperty","setProperty","ModelObjectBase","ModelObject","ModelList","item_i","indexOf","sort","compareFunction","indexedItems","map","i","indexedItem_a","indexedItem_b","indexedItem_i","prepend","_items","append","insert","Math","abs","remove","clear","removedItem_i","ModelChangeObserver","WeakMap","observe","options","references","reference","listener","bind","unobserve","disconnect","properties","propertiesFilter","childList","subtree","filter","record_i","includes","camelToTrain","str","toLowerCase","AttributeProperty","String","defaultValue","observed","name","observedAttributes","Reflect","Array","isArray","writable","Boolean","hasAttribute","setAttribute","removeAttribute","val","getAttribute","JSON","parse","stringify","Number","parseFloat","CustomElement","elementCtor","customElements","define","QueryProperty","propertyKey","selector","getter","withinShadowRoot","shadowRoot","querySelector","fragment","nodes","createDocumentFragment","tagName","attributes","dataset","children","listeners","element","createElement","entries","attributeName","attributeValue","toggleAttribute","elementDataset","keys","datasetEntry_i","from","name_i","listener_i","reactiveElementsMap","reactiveElementsFinalizationRegistry","FinalizationRegistry","heldValue","model","reactiveElement","reactiveElementsMapEntry","reactiveElementsArray","reactiveElementsPropertyObserver","reactiveElement_i","elementRef","react","deref","WeakRef","register","observerOptions","concat","property_i","reactiveChildElementsMap","reactiveChildElementsFinalizationRegistry","list","reactiveChildElement","reactiveChildrenElementsMapEntry","reactiveChildElementsArray","reactiveChildElementsObserver","range","listLength","reactiveChildElements_i","parentRef","mapping","placeholder","parent","firstChild","childrenCount","removeChild","insertedItemsArray","before","removedCount","createRange","removeEndIndex","setStartBefore","setEndAfter","deleteContents","childrenArray","index_i","reactiveChildElements","reactiveChildElementsMapEntry","replaceChildren","ViewBase","HTMLElement","setModel","renderLight","renderShadow","render","shadow","light","View","__decorate","decorators","desc","d","c","arguments","getOwnPropertyDescriptor","decorate","DEFAULT_THEME_HOVERED_ITEM_COLOR","DEFAULT_THEME_FOCUSED_ITEM_COLOR","DEFAULT_THEME_SELECTED_ITEM_COLOR","DEFAULT_THEME_ACTIVATED_ITEM_COLOR","DEFAULT_THEME_DROPTARGET_ITEM_COLOR","Theme","stylesheet","images","checkedImage","arrowRightImage","arrowDropDownImage","arrowDropUpImage","CSSStyleSheet","tint","variablesMap","cssRules","styleMap","theme","resetStylesheet","style","HTMLEHeightSashElementBase","attachShadow","mode","adoptedStylesheet","adoptedStyleSheets","targetComputedStyle","getComputedStyle","growdir","movementY","height","getPropertyValue","newHeight","trunc","computedNewHeight","Event","pointerId","controls","rootNode","getRootNode","getElementById","setPointerCapture","requestAnimationFrame","releasePointerCapture","HTMLEWidthSashElementBase","setWidth","width","max","movementX","newWidth","shadowTemplate","HTMLEGridCellElementBase","content","cloneNode","attributeChangedCallback","bubbles","HTMLEGridCellElement","HTMLEGridRowElementBase","cells","querySelectorAll","assignedElements","element_i","cell_i","posinset","HTMLEGridRowElement","HTMLEGridBodyElementBase","rows","HTMLEGridBodyElement","HTMLEGridHeadElementBase","HTMLEGridRowGroupElementBase","HTMLEGridRowGroupElement","HTMLEGridElementBase","activeCell","activeRow","body","head","createTreeWalker","NodeFilter","SHOW_ELEMENT","connectedCallback","tabIndex","beginSelection","endSelection","clearSelection","selectedCells","selectedRows","hidden","FILTER_ACCEPT","FILTER_SKIP","FILTER_REJECT","to","fromIndex","toIndex","min","position","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","nextVisibleRow","DOCUMENT_POSITION_PRECEDING","previousVisibleRow","selectedCell_i","selected","selectedRow_i","row_i","cell","active","currentNode","row","cellsWalker","lastChild","previousNode","nextNode","rowsWalker","root","closestRow","cellIndex","previousRow","previousRowCells","nextRow","nextRowCells","ctrlKey","shiftKey","selectby","composedPath","targetCell","find","target_i","lastSelectedCell","targetRow","lastSelectedRow","stopPropagation","firstRow","firstCell","lastRow","lastCell","preventDefault","previousCell","focus","preventScroll","nextCell","topCell","bottomCell","click","relatedTarget","closest","HTMLEMenuItemElementBase","internals","part","attachInternals","role","ariaChecked","ariaDisabled","ariaExpanded","ariaLabel","toggle","force","expanded","expand","collapse","menu","getBoundingClientRect","menuStyle","menuWidth","menuHeight","clientWidth","clientHeight","offsetLeft","offsetTop","overflowX","overflowY","HTMLEMenuItemElement","EMenuItem","assign","label","trigger","slot","tabindex","title","button","checkbox","radio","submenu","HTMLEMenuItemGroupElementBase","HTMLEMenuElementBase_1","toggleAnimations","HTMLEMenuItemGroupElement","radios","HTMLEMenuElementBase","activeIndex","activeItem","parseInt","positionContextual","x","y","scrollX","scrollY","left","top","contains","firstItem","walker","targetItem","checked","radio_i","nearestItem","contextual","error","HTMLEMenuElement","blur","cancel","toggleAnimation","animate","duration","finished","then","catch","finally","right","bottom","parentItem","menuRect","clientX","clientY","intersectsWithMouse","containsRelatedTarget","HTMLEMenuBarElementBase","disabled","previousSibling","nextSibling","Element","isExpanded","HTMLEMenuButtonElementBase","HTMLEMenuButtonElement","GridModel","columns","initRows","initColumns","getColumnByName","column_i","sortByColumn","column","sortOrder","sortorder","sortTest","row_1","row_2","cell_1","extract","cell_2","localeCompare","sign","GridColumnModel","filters","GridRowModel","id","GridViewBase","gridElement","setColumnDelegate","delegate","setCellDelegate","getRowElement","getColumnHeaderElement","getColumnCellsElements","multisectable","contextmenu","displayFilters","some","filter_i","addDisplayFilter","rowElement","removeDisplayFilter","filterIndex","removeAllDisplayFilters","class","toString","headers","targetHead","targetHeader","contextMenu","columnHeaderElement","maxWidth","reduce","removeProperty","matches","targetColumn","GridView","HTMLETreeItemElementBase","labelPart","textContent","HTMLETreeItemElement","HTMLETreeItemGroupElementBase","HTMLETreeItemGroupElement","HTMLETreeElementBase","dropTargetItem","selectedItems","nextVisibleItem","previousVisibleItem","selectedItem_i","droptarget","lastItem","Document","ShadowRoot","host","previousItem","nextItem","TreeModel","childItems","sortFunction","subtreeItems","item_a","item_b","flattenedInsertedItems","flatMap","insertedItem_i","of","flattenedRemovedItems","treeItem_i","getItemByUri","uri","itemsCount","uriLength","itemUri","itemUriLength","startsWith","TreeItemModelList","count","removedItemsGroups","TreeItemModel","group","list_i","children_i","child_i","level","TreeViewBase","treeElement","draggable","treeItemElement","closestItem","parentElement","treeItem","dragstart","drop","focusin","focusout","itemContentDelegate","itemToolbarDelegate","itemMenuDelegate","toolbar","treeitem","dragImageElement","span","targetTree","dataTransfer","selectedElements","selectedCount","selectedUris","uri_i","_","uris","uri_j","selectedUrisString","join","lastUri","dropEffect","setData","dragImage","setDragImage","targetUri","targetItemModel","transferedUris","getData","split","transferedItems","targetType","targetParentItem","targetList","sameLabelIndex","item_j","confirm","copyWithin","newElements","relatedPosition","DOCUMENT_POSITION_DISCONNECTED","itemToolbar","TreeView","MyTreeItemModel","childCount","visibility","show","hide","display","console","log","MyTreeItemModelList","result","MyTreeView","rel","href","badge","select","selectedOption","iconed","showEditItemDialog","visibilityItem","pressed","typeSelect","activeItemElement","selectItem","selectedItemsList","dialog","method","for","autofocus","type_i","close","targetDialog","returnValue","form","formData","FormData","showModal","activeItemModel","MyGridRowModel","age","color","MyGridView","shadowNode","insertBefore","input","searchFilter","setSearchFilter","HTMLInputElement","iconPartTemplate","HTMLEToolBarItemElementBase","iconPart","HTMLEToolBarItemElement","EToolBarItem","menubutton","HTMLEToolBarItemGroupElementBase","wasExpandedOnMouseDown","HTMLEToolBarItemGroupElement","HTMLEToolBarElementBase","HTMLEToolBarElement","HTMLEListItemElementBase","slotName","HTMLSpanElement","HTMLEListItemElement","HTMLEListItemGroupElementBase","HTMLEListItemGroupElement","HTMLEListElementBase","lastSelectedItem","HTMLETabPanelElementBase","tab","upgrade","HTMLETabElementBase","panel","HTMLETabElement","HTMLETabListElementBase","tabs","activeTab","selectedTab","tabToSelect","setTimeout","tabWidth","tabHeight","fill","easing","pseudoElement","targetTab","tab_i","HTMLEStatusItemElementBase","HTMLEStatusItemElement","onclick","HTMLEStatusItemGroupElementBase","HTMLEStatusItemGroupElement","HTMLEStatusBarElementBase","HTMLEHandleElementBase","rectWidth","rectHeight","outerElement","outerRectLeft","outerRectRight","outerRectTop","outerRectBottom","newLeft","newTop","CustomEvent","HTMLEImportElementBase","async","outerHTML","fetch","response","ok","text","statusText","barShadowTemplate","spinnerShadowTemplate","HTMLELoaderElementBase","HTMLESeparatorElementBase","HTMLEToolTipElementBase","tooltip","handleEvent","htmlFor","oldTarget","targetListenerObject","immediate","visible","opacity","delay","targetTop","targetBottom","targetLeft","targetRight","tooltipWidth","tooltipHeight","tooltipHalfWidth","tooltipHalfHeight","targetCenter","targetMiddle","tooltipStyle","arrow","arrowStyle","arrowWidth","arrowHeight","arrowHalfWidth","arrowHalfHeight","documentListenerObject","main","img","as","crossorigin","gridView","treeModel","treeView","example"],"sourceRoot":""}