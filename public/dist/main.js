var main;
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/css-loader/dist/cjs.js!../editor/css/elements/containers/container.css":
/*!*********************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!../editor/css/elements/containers/container.css ***!
  \*********************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _editor_samples_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../editor-samples/node_modules/css-loader/dist/runtime/sourceMaps.js */ "./node_modules/css-loader/dist/runtime/sourceMaps.js");
/* harmony import */ var _editor_samples_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_editor_samples_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _editor_samples_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../editor-samples/node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _editor_samples_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_editor_samples_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _editor_samples_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_editor_samples_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, ":host([droptarget]) {\r\n    background-color: var(--theme-droptarget-item-color);\r\n}", "",{"version":3,"sources":["webpack://./../editor/css/elements/containers/container.css"],"names":[],"mappings":"AAAA;IACI,oDAAoD;AACxD","sourcesContent":[":host([droptarget]) {\r\n    background-color: var(--theme-droptarget-item-color);\r\n}"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "../editor/css/elements/containers/trees/treeitem.css":
/*!************************************************************!*\
  !*** ../editor/css/elements/containers/trees/treeitem.css ***!
  \************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _editor_samples_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../editor-samples/node_modules/css-loader/dist/runtime/sourceMaps.js */ "./node_modules/css-loader/dist/runtime/sourceMaps.js");
/* harmony import */ var _editor_samples_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_editor_samples_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _editor_samples_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../editor-samples/node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _editor_samples_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_editor_samples_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _editor_samples_node_modules_css_loader_dist_cjs_js_container_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! -!../../../../../editor-samples/node_modules/css-loader/dist/cjs.js!../container.css */ "./node_modules/css-loader/dist/cjs.js!../editor/css/elements/containers/container.css");
// Imports



var ___CSS_LOADER_EXPORT___ = _editor_samples_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_editor_samples_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
___CSS_LOADER_EXPORT___.i(_editor_samples_node_modules_css_loader_dist_cjs_js_container_css__WEBPACK_IMPORTED_MODULE_2__["default"]);
// Module
___CSS_LOADER_EXPORT___.push([module.id, ":host {\r\n    display: block;\r\n    user-select: none;\r\n}\r\n\r\n/* \r\nAdded from container.css\r\n:host([droptarget]) {\r\n    background-color: var(--theme-droptarget-item-color);\r\n}\r\n*/\r\n\r\n:host(:focus-visible) {\r\n    outline: none;\r\n}\r\n\r\n:host([active]):host-context(e-tree:focus-within) [part=\"content\"] {\r\n    outline: 1px solid var(--theme-focused-item-outline-color);\r\n    outline-offset: -1px;\r\n}\r\n\r\n[part=\"content\"]:hover {\r\n    background-color: var(--theme-hovered-item-color);\r\n}\r\n\r\n:host([selected]) [part=\"content\"] {\r\n    background-color: var(--theme-selected-item-color);\r\n}\r\n\r\n[part=\"content\"] {\r\n    display: flex;\r\n    line-height: 22px;\r\n    padding-left: 12px;\r\n}\r\n\r\n:host(:not([type=\"parent\"])) ::slotted([slot=\"group\"]),\r\n:host(:not([expanded])) ::slotted([slot=\"group\"]) {\r\n    display: none;\r\n}\r\n\r\n:host(:not([type=\"parent\"])) [part=\"arrow\"]::before {\r\n    visibility: hidden;\r\n}\r\n\r\n[part=\"arrow\"] {\r\n    display: inline-block;\r\n    width: 18px;\r\n    height: 18px;\r\n    margin: 1px 4px 1px 1px;\r\n}\r\n\r\n[part=\"arrow\"]::before {\r\n    display: inline-block;\r\n    width: 18px;\r\n    height: 18px;\r\n    margin: 1px;\r\n    content: \"\";\r\n\r\n    mask-size: 18px 18px;\r\n    -webkit-mask-size: 18px 18px;\r\n    background-color: none;\r\n}\r\n\r\n:host(:not([expanded])) [part=\"arrow\"]::before {\r\n    -webkit-mask-image: var(--theme-arrow-right-image);\r\n    mask-image: var(--theme-arrow-right-image);\r\n    background-color: black;\r\n}\r\n\r\n:host([expanded]) [part=\"arrow\"]::before {\r\n    -webkit-mask-image: var(--theme-arrow-dropdown-image);\r\n    mask-image: var(--theme-arrow-dropdown-image);\r\n    background-color: black;\r\n}", "",{"version":3,"sources":["webpack://./../editor/css/elements/containers/trees/treeitem.css"],"names":[],"mappings":"AAEA;IACI,cAAc;IACd,iBAAiB;AACrB;;AAEA;;;;;CAKC;;AAED;IACI,aAAa;AACjB;;AAEA;IACI,0DAA0D;IAC1D,oBAAoB;AACxB;;AAEA;IACI,iDAAiD;AACrD;;AAEA;IACI,kDAAkD;AACtD;;AAEA;IACI,aAAa;IACb,iBAAiB;IACjB,kBAAkB;AACtB;;AAEA;;IAEI,aAAa;AACjB;;AAEA;IACI,kBAAkB;AACtB;;AAEA;IACI,qBAAqB;IACrB,WAAW;IACX,YAAY;IACZ,uBAAuB;AAC3B;;AAEA;IACI,qBAAqB;IACrB,WAAW;IACX,YAAY;IACZ,WAAW;IACX,WAAW;;IAEX,oBAAoB;IACpB,4BAA4B;IAC5B,sBAAsB;AAC1B;;AAEA;IACI,kDAAkD;IAClD,0CAA0C;IAC1C,uBAAuB;AAC3B;;AAEA;IACI,qDAAqD;IACrD,6CAA6C;IAC7C,uBAAuB;AAC3B","sourcesContent":["@import \"../container.css\";\r\n\r\n:host {\r\n    display: block;\r\n    user-select: none;\r\n}\r\n\r\n/* \r\nAdded from container.css\r\n:host([droptarget]) {\r\n    background-color: var(--theme-droptarget-item-color);\r\n}\r\n*/\r\n\r\n:host(:focus-visible) {\r\n    outline: none;\r\n}\r\n\r\n:host([active]):host-context(e-tree:focus-within) [part=\"content\"] {\r\n    outline: 1px solid var(--theme-focused-item-outline-color);\r\n    outline-offset: -1px;\r\n}\r\n\r\n[part=\"content\"]:hover {\r\n    background-color: var(--theme-hovered-item-color);\r\n}\r\n\r\n:host([selected]) [part=\"content\"] {\r\n    background-color: var(--theme-selected-item-color);\r\n}\r\n\r\n[part=\"content\"] {\r\n    display: flex;\r\n    line-height: 22px;\r\n    padding-left: 12px;\r\n}\r\n\r\n:host(:not([type=\"parent\"])) ::slotted([slot=\"group\"]),\r\n:host(:not([expanded])) ::slotted([slot=\"group\"]) {\r\n    display: none;\r\n}\r\n\r\n:host(:not([type=\"parent\"])) [part=\"arrow\"]::before {\r\n    visibility: hidden;\r\n}\r\n\r\n[part=\"arrow\"] {\r\n    display: inline-block;\r\n    width: 18px;\r\n    height: 18px;\r\n    margin: 1px 4px 1px 1px;\r\n}\r\n\r\n[part=\"arrow\"]::before {\r\n    display: inline-block;\r\n    width: 18px;\r\n    height: 18px;\r\n    margin: 1px;\r\n    content: \"\";\r\n\r\n    mask-size: 18px 18px;\r\n    -webkit-mask-size: 18px 18px;\r\n    background-color: none;\r\n}\r\n\r\n:host(:not([expanded])) [part=\"arrow\"]::before {\r\n    -webkit-mask-image: var(--theme-arrow-right-image);\r\n    mask-image: var(--theme-arrow-right-image);\r\n    background-color: black;\r\n}\r\n\r\n:host([expanded]) [part=\"arrow\"]::before {\r\n    -webkit-mask-image: var(--theme-arrow-dropdown-image);\r\n    mask-image: var(--theme-arrow-dropdown-image);\r\n    background-color: black;\r\n}"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {



/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
module.exports = function (cssWithMappingToString) {
  var list = [];

  // return the list of modules as css string
  list.toString = function toString() {
    return this.map(function (item) {
      var content = "";
      var needLayer = typeof item[5] !== "undefined";
      if (item[4]) {
        content += "@supports (".concat(item[4], ") {");
      }
      if (item[2]) {
        content += "@media ".concat(item[2], " {");
      }
      if (needLayer) {
        content += "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {");
      }
      content += cssWithMappingToString(item);
      if (needLayer) {
        content += "}";
      }
      if (item[2]) {
        content += "}";
      }
      if (item[4]) {
        content += "}";
      }
      return content;
    }).join("");
  };

  // import a list of modules into the list
  list.i = function i(modules, media, dedupe, supports, layer) {
    if (typeof modules === "string") {
      modules = [[null, modules, undefined]];
    }
    var alreadyImportedModules = {};
    if (dedupe) {
      for (var k = 0; k < this.length; k++) {
        var id = this[k][0];
        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }
    for (var _k = 0; _k < modules.length; _k++) {
      var item = [].concat(modules[_k]);
      if (dedupe && alreadyImportedModules[item[0]]) {
        continue;
      }
      if (typeof layer !== "undefined") {
        if (typeof item[5] === "undefined") {
          item[5] = layer;
        } else {
          item[1] = "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {").concat(item[1], "}");
          item[5] = layer;
        }
      }
      if (media) {
        if (!item[2]) {
          item[2] = media;
        } else {
          item[1] = "@media ".concat(item[2], " {").concat(item[1], "}");
          item[2] = media;
        }
      }
      if (supports) {
        if (!item[4]) {
          item[4] = "".concat(supports);
        } else {
          item[1] = "@supports (".concat(item[4], ") {").concat(item[1], "}");
          item[4] = supports;
        }
      }
      list.push(item);
    }
  };
  return list;
};

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/sourceMaps.js":
/*!************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/sourceMaps.js ***!
  \************************************************************/
/***/ ((module) => {



module.exports = function (item) {
  var content = item[1];
  var cssMapping = item[3];
  if (!cssMapping) {
    return content;
  }
  if (typeof btoa === "function") {
    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));
    var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
    var sourceMapping = "/*# ".concat(data, " */");
    return [content].concat([sourceMapping]).join("\n");
  }
  return [content].join("\n");
};

/***/ }),

/***/ "./src/MyGridView.ts":
/*!***************************!*\
  !*** ./src/MyGridView.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MyGridRowModel": () => (/* binding */ MyGridRowModel),
/* harmony export */   "MyGridView": () => (/* binding */ MyGridView)
/* harmony export */ });
/* harmony import */ var editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! editor/lib/elements/Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var editor_lib_models_Model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! editor/lib/models/Model */ "../editor/lib/models/Model.js");
/* harmony import */ var editor_lib_views_GridView__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! editor/lib/views/GridView */ "../editor/lib/views/GridView.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





class MyGridRowModel extends editor_lib_views_GridView__WEBPACK_IMPORTED_MODULE_2__.GridRowModel {
    name;
    age;
    color;
    constructor(init) {
        super(init);
        const { name, age, color } = init;
        this.name = name;
        this.age = age;
        this.color = color;
    }
}
__decorate([
    (0,editor_lib_models_Model__WEBPACK_IMPORTED_MODULE_1__.ReactiveProperty)()
], MyGridRowModel.prototype, "name", void 0);
__decorate([
    (0,editor_lib_models_Model__WEBPACK_IMPORTED_MODULE_1__.ReactiveProperty)()
], MyGridRowModel.prototype, "age", void 0);
__decorate([
    (0,editor_lib_models_Model__WEBPACK_IMPORTED_MODULE_1__.ReactiveProperty)()
], MyGridRowModel.prototype, "color", void 0);
var style;
let MyGridView = class MyGridView extends editor_lib_views_GridView__WEBPACK_IMPORTED_MODULE_2__.GridView {
    #searchFilter;
    static {
        style = /*css*/ `
            e-gridcell[headers="age"] {
                text-align: right;
            }
        `;
    }
    constructor() {
        super();
        this.#searchFilter = null;
        const { shadowRoot } = this;
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [
            ...shadowRoot.adoptedStyleSheets, adoptedStylesheet
        ];
    }
    renderShadow() {
        const shadowNode = super.renderShadow();
        shadowNode.insertBefore((0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("div", {
            children: (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("input", {
                attributes: {
                    type: "search"
                },
                listeners: {
                    input: this.#handleSearchInputEvent.bind(this)
                }
            })
        }), shadowNode.firstChild);
        return shadowNode;
    }
    filter(row) {
        const searchFilter = this.#searchFilter;
        return super.filter(row) &&
            (searchFilter ? searchFilter.filter(row) : true);
    }
    setSearchFilter(filter) {
        const { model, gridElement } = this;
        const { rows } = model;
        this.#searchFilter = filter;
        Array.from(rows.values()).forEach((row_i) => {
            const rowElement = this.getRowElement(row_i);
            if (rowElement) {
                rowElement.hidden = !this.filter(row_i);
            }
        });
        gridElement.clearSelection();
    }
    #handleSearchInputEvent(event) {
        const { target } = event;
        if (target instanceof HTMLInputElement) {
            const { value } = target;
            if (value !== "") {
                this.setSearchFilter({
                    filter: (row) => row.name.toLowerCase().includes(value.toLowerCase())
                });
            }
            else {
                this.setSearchFilter(null);
            }
        }
    }
};
MyGridView = __decorate([
    (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-mygridview"
    })
], MyGridView);


/***/ }),

/***/ "./src/MyTreeView.ts":
/*!***************************!*\
  !*** ./src/MyTreeView.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MyTreeItemModel": () => (/* binding */ MyTreeItemModel),
/* harmony export */   "MyTreeItemModelList": () => (/* binding */ MyTreeItemModelList),
/* harmony export */   "MyTreeView": () => (/* binding */ MyTreeView)
/* harmony export */ });
/* harmony import */ var editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! editor/lib/elements/Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var editor_lib_models_Model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! editor/lib/models/Model */ "../editor/lib/models/Model.js");
/* harmony import */ var editor_lib_views_TreeView__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! editor/lib/views/TreeView */ "../editor/lib/views/TreeView.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};






class MyTreeItemModel extends editor_lib_views_TreeView__WEBPACK_IMPORTED_MODULE_2__.TreeItemModel {
    childCount;
    visibility;
    constructor(init) {
        super(init);
        this.childCount = this.childItems.length;
        this.visibility = true;
        this.addEventListener("modelchange", this.#handleModelChangeEvent.bind(this));
    }
    show() {
        this.visibility = true;
    }
    hide() {
        this.visibility = false;
    }
    display() {
        console.log(this.id);
    }
    #handleModelChangeEvent(event) {
        const { target } = event;
        const { childItems } = this;
        if (target == childItems) {
            this.childCount = childItems.length;
        }
    }
}
__decorate([
    (0,editor_lib_models_Model__WEBPACK_IMPORTED_MODULE_1__.ReactiveProperty)()
], MyTreeItemModel.prototype, "childCount", void 0);
__decorate([
    (0,editor_lib_models_Model__WEBPACK_IMPORTED_MODULE_1__.ReactiveProperty)()
], MyTreeItemModel.prototype, "visibility", void 0);
class MyTreeItemModelList extends editor_lib_views_TreeView__WEBPACK_IMPORTED_MODULE_2__.TreeItemModelList {
    constructor(items) {
        super(items);
    }
    get count() {
        return this.items.length;
    }
    show() {
        this.items.forEach(item_i => item_i.show());
    }
    hide() {
        this.items.forEach(item_i => item_i.hide());
    }
    display() {
        const result = this.items.map(item_i => item_i.id).join(" ");
        console.log(result);
    }
}
let MyTreeView = class MyTreeView extends editor_lib_views_TreeView__WEBPACK_IMPORTED_MODULE_2__.TreeView {
    render() {
        super.render();
        const { shadowRoot, treeElement } = this;
        const stylesheet = new CSSStyleSheet();
        (async () => {
            stylesheet.replace((await __webpack_require__.e(/*! import() */ "public_css_mytreeview_css").then(__webpack_require__.bind(__webpack_require__, /*! ../public/css/mytreeview.css */ "./public/css/mytreeview.css"))).default[0][1]);
        })();
        shadowRoot.adoptedStyleSheets = [stylesheet];
        treeElement.addEventListener("keydown", this.#handleKeyDownEvent.bind(this));
    }
    itemContentDelegate(item) {
        return (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.fragment)((0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.reactiveElement)(item, (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("span", {
            attributes: {
                class: "label"
            }
        }), ["id"], (label, property, oldValue, newValue) => {
            label.textContent = newValue;
        }), (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.reactiveElement)(item, (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("span", {
            attributes: {
                class: "badge"
            }
        }), ["childCount", "type"], (badge, property, oldValue, newValue) => {
            switch (property) {
                case "type": {
                    if (newValue === "leaf") {
                        badge.textContent = null;
                        badge.hidden = true;
                    }
                    else {
                        badge.textContent = `(${item.childCount})`;
                        badge.hidden = false;
                    }
                    break;
                }
                case "childCount": {
                    badge.textContent = `(${newValue})`;
                    break;
                }
            }
        }));
    }
    itemToolbarDelegate(item) {
        return (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.reactiveElement)(item, (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-toolbar", {
            children: [
                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-toolbaritem", {
                    attributes: {
                        name: "edit",
                        type: "button",
                        label: "Edit",
                        iconed: true
                    },
                    listeners: {
                        click: () => {
                            this.showEditItemDialog(item);
                        }
                    }
                }),
                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-toolbaritem", {
                    attributes: {
                        name: "visibility",
                        type: "checkbox",
                        label: "Visibility",
                        iconed: true
                    },
                    listeners: {
                        click: (event) => {
                            item.visibility ?
                                item.hide() :
                                item.show();
                            event.stopPropagation();
                        }
                    }
                })
            ]
        }), ["visibility", "type"], (toolbar, property, oldValue, newValue) => {
            switch (property) {
                case "visibility": {
                    const visibilityItem = toolbar
                        .querySelector("e-toolbaritem[name=visibility]");
                    if (visibilityItem) {
                        const label = newValue ? "Hide" : "Show";
                        visibilityItem.label = label;
                        visibilityItem.title = label;
                        visibilityItem.pressed = newValue;
                    }
                    break;
                }
                case "type": {
                    const typeSelect = toolbar
                        .querySelector("e-toolbaritem[name=type] e-select");
                    if (typeSelect) {
                        typeSelect
                            .querySelector(`e-option[value="${newValue}"]`)
                            .selected = true;
                    }
                    break;
                }
            }
        });
    }
    itemMenuDelegate() {
        console.log("here");
        const { treeElement } = this;
        const { activeItem: activeItemElement } = treeElement;
        const selectedItems = this.selectedItems();
        const activeItem = this.activeItem();
        return (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menu", {
            attributes: {
                contextual: true
            },
            children: [
                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitemgroup", {
                    children: [
                        (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                            attributes: {
                                type: "button",
                                label: "Edit"
                            },
                            children: "Edit",
                            listeners: {
                                click: (function () {
                                    selectedItems.forEach((selectItem) => {
                                        this.showEditItemDialog(selectItem);
                                    });
                                }).bind(this)
                            }
                        }),
                        (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                            attributes: {
                                type: "checkbox",
                                label: activeItem.visibility ? "Hide" : "Show"
                            },
                            children: activeItem.visibility ? "Hide" : "Show",
                            listeners: {
                                click: () => {
                                    const selectedItemsList = selectedItems.includes(activeItem) ?
                                        new MyTreeItemModelList(selectedItems) : new MyTreeItemModelList([activeItem]);
                                    activeItem.visibility ?
                                        selectedItemsList.hide() :
                                        selectedItemsList.show();
                                    activeItemElement.focus();
                                }
                            }
                        })
                    ]
                }),
                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-separator"),
                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitemgroup", {
                    children: [
                        (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                            attributes: {
                                label: "Delete"
                            },
                            children: "Delete",
                            listeners: {
                                click: () => {
                                    const selectedItemsList = selectedItems.includes(activeItem) ?
                                        new MyTreeItemModelList(selectedItems) : new MyTreeItemModelList([activeItem]);
                                    const { count } = selectedItemsList;
                                    const doRemove = confirm(`Remove ${count} items?`);
                                    if (doRemove) {
                                        selectedItemsList.remove();
                                    }
                                    treeElement.focus();
                                }
                            }
                        })
                    ]
                })
            ]
        });
    }
    #handleKeyDownEvent(event) {
        const { currentTarget, key } = event;
        const targetTree = currentTarget;
        const { activeItem } = targetTree;
        if (activeItem) {
            const activeItemModel = this.treeItem(activeItem);
            switch (key) {
                case "Delete": {
                    const selectedItems = this.selectedItems();
                    const selectedItemsList = selectedItems.includes(activeItemModel) ?
                        new editor_lib_views_TreeView__WEBPACK_IMPORTED_MODULE_2__.TreeItemModelList(selectedItems) : new editor_lib_views_TreeView__WEBPACK_IMPORTED_MODULE_2__.TreeItemModelList([activeItemModel]);
                    const { count } = selectedItemsList;
                    const doRemove = confirm(`Remove ${count} items?`);
                    if (doRemove) {
                        selectedItemsList.remove();
                    }
                    targetTree.focus();
                    event.preventDefault();
                    break;
                }
            }
        }
    }
    showEditItemDialog(item) {
        const { shadowRoot } = this;
        const { visibility, id, type } = item;
        const dialog = (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("dialog", {
            children: [
                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("form", {
                    attributes: {
                        method: "dialog"
                    },
                    children: [
                        (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menubar", {
                            attributes: {
                                tabindex: 0
                            },
                            children: [
                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                                    attributes: {
                                        type: "menu",
                                        label: "Menu 1"
                                    },
                                    children: [
                                        "Menu 1",
                                        (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menu", {
                                            attributes: {
                                                slot: "menu"
                                            },
                                            children: [
                                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                                                    attributes: {
                                                        type: "checkbox"
                                                    },
                                                    children: "Menuitem 1"
                                                }),
                                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                                                    attributes: {
                                                        type: "checkbox"
                                                    },
                                                    children: "Menuitem 2"
                                                }),
                                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                                                    attributes: {
                                                        type: "submenu"
                                                    },
                                                    children: [
                                                        "Submenu 1",
                                                        (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menu", {
                                                            attributes: {
                                                                slot: "menu"
                                                            },
                                                            children: [
                                                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                                                                    attributes: {
                                                                        label: "SubmenuItem 1",
                                                                        name: "radio",
                                                                        value: String(0),
                                                                        type: "radio"
                                                                    },
                                                                    children: "SubmenuItem 1"
                                                                }),
                                                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                                                                    attributes: {
                                                                        label: "SubmenuItem 2",
                                                                        name: "radio",
                                                                        value: String(1),
                                                                        type: "radio"
                                                                    },
                                                                    children: "SubmenuItem 2"
                                                                }),
                                                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                                                                    attributes: {
                                                                        label: "SubmenuItem 3",
                                                                        name: "radio",
                                                                        value: String(3),
                                                                        type: "radio"
                                                                    },
                                                                    children: "SubmenuItem 3"
                                                                })
                                                            ]
                                                        })
                                                    ]
                                                })
                                            ]
                                        })
                                    ]
                                })
                            ]
                        }),
                        (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-tablist", {
                            attributes: {
                                tabindex: 0
                            },
                            children: [
                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-tab", {
                                    attributes: {
                                        controls: "properties"
                                    },
                                    children: "Properties"
                                })
                            ]
                        }),
                        (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-tabpanel", {
                            attributes: {
                                id: "properties"
                            },
                            children: [
                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("fieldset", {
                                    children: [
                                        (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("legend", {
                                            children: "Item information"
                                        }),
                                        (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("div", {
                                            attributes: {
                                                class: "form-content"
                                            },
                                            children: [
                                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("label", {
                                                    attributes: {
                                                        for: "visibility"
                                                    },
                                                    children: "Visibility"
                                                }),
                                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("input", {
                                                    attributes: {
                                                        id: "visibility",
                                                        type: "checkbox",
                                                        name: "visibility",
                                                        checked: visibility,
                                                        tabindex: 0,
                                                        autofocus: true
                                                    }
                                                }),
                                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("label", {
                                                    attributes: {
                                                        for: "id"
                                                    },
                                                    children: "ID"
                                                }),
                                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("input", {
                                                    attributes: {
                                                        id: "id",
                                                        type: "text",
                                                        name: "id",
                                                        value: id,
                                                        tabindex: 0
                                                    }
                                                }),
                                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("label", {
                                                    attributes: {
                                                        for: "type"
                                                    },
                                                    children: "Type"
                                                }),
                                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("select", {
                                                    attributes: {
                                                        id: "type",
                                                        name: "type",
                                                        tabindex: 0
                                                    },
                                                    children: ["parent", "leaf"].map(type_i => (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("option", {
                                                        attributes: {
                                                            label: type_i,
                                                            value: type_i,
                                                            selected: type === type_i
                                                        }
                                                    }))
                                                })
                                            ]
                                        })
                                    ]
                                })
                            ]
                        }),
                        (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("footer", {
                            attributes: {
                                class: "dialog-footer"
                            },
                            children: [
                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("button", {
                                    attributes: {
                                        type: "submit",
                                        value: "confirm"
                                    },
                                    children: "Confirm"
                                }),
                                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("button", {
                                    attributes: {
                                        value: "cancel"
                                    },
                                    children: "Cancel"
                                })
                            ]
                        })
                    ]
                })
            ],
            listeners: {
                close: (event) => {
                    const { currentTarget } = event;
                    const targetDialog = currentTarget;
                    if (targetDialog.returnValue === "confirm") {
                        const form = targetDialog.querySelector("form");
                        const formData = new FormData(form);
                        item.visibility = Boolean(formData.get("visibility"));
                        item.type = String(formData.get("type"));
                        item.id = String(formData.get("id"));
                    }
                    targetDialog.remove();
                }
            }
        });
        shadowRoot.append(dialog);
        dialog.showModal();
    }
};
MyTreeView = __decorate([
    (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-mytreeview"
    })
], MyTreeView);
;


/***/ }),

/***/ "../editor/lib/elements/Element.js":
/*!*****************************************!*\
  !*** ../editor/lib/elements/Element.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AttributeMutationMixinBase": () => (/* binding */ AttributeMutationMixinBase),
/* harmony export */   "AttributeProperty": () => (/* binding */ AttributeProperty),
/* harmony export */   "CustomElement": () => (/* binding */ CustomElement),
/* harmony export */   "QueryAllProperty": () => (/* binding */ QueryAllProperty),
/* harmony export */   "QueryProperty": () => (/* binding */ QueryProperty),
/* harmony export */   "Stylesheet": () => (/* binding */ Stylesheet),
/* harmony export */   "areAttributesMatching": () => (/* binding */ areAttributesMatching),
/* harmony export */   "element": () => (/* binding */ element),
/* harmony export */   "fragment": () => (/* binding */ fragment),
/* harmony export */   "reactiveChildElements": () => (/* binding */ reactiveChildElements),
/* harmony export */   "reactiveElement": () => (/* binding */ reactiveElement),
/* harmony export */   "reactiveElementsMap": () => (/* binding */ reactiveElementsMap),
/* harmony export */   "revokeReactiveChildElements": () => (/* binding */ revokeReactiveChildElements),
/* harmony export */   "revokeReactiveElement": () => (/* binding */ revokeReactiveElement),
/* harmony export */   "textNode": () => (/* binding */ textNode),
/* harmony export */   "trimMultilineIndent": () => (/* binding */ trimMultilineIndent)
/* harmony export */ });
/* harmony import */ var _models_Model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../models/Model */ "../editor/lib/models/Model.js");
/* harmony import */ var _Snippets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Snippets */ "../editor/lib/elements/Snippets.js");


















const AttributeProperty = function (init) {
    return (target, property) => {
        const { constructor } = target;
        const { prototype } = constructor;
        const propertyName = String(property);
        const { defaultValue = null, observed = false, name = (0,_Snippets__WEBPACK_IMPORTED_MODULE_1__.camelToTrain)(propertyName) } = init;
        if (observed) {
            const observedAttributes = Reflect.get(constructor, "observedAttributes", constructor);
            if (Array.isArray(observedAttributes)) {
                observedAttributes.push(name);
            }
            else {
                Object.defineProperty(constructor, "observedAttributes", {
                    value: [name],
                    writable: false
                });
            }
        }
        const { type } = init;
        switch (type) {
            case Boolean: {
                Object.defineProperty(prototype, propertyName, {
                    get: function () {
                        return this.hasAttribute(name);
                    },
                    set: function (value) {
                        if (value) {
                            this.setAttribute(name, "");
                        }
                        else {
                            this.removeAttribute(name);
                        }
                    }
                });
                break;
            }
            case Object: {
                Object.defineProperty(prototype, propertyName, {
                    get: function () {
                        const val = this.getAttribute(name);
                        return (val !== null) ? JSON.parse(val) : defaultValue;
                    },
                    set: function (value) {
                        if (value !== null) {
                            this.setAttribute(name, JSON.stringify(value));
                        }
                        else {
                            this.removeAttribute(name);
                        }
                    }
                });
                break;
            }
            case Number: {
                Object.defineProperty(prototype, propertyName, {
                    get: function () {
                        const val = this.getAttribute(name);
                        return (val !== null) ? parseFloat(val) : defaultValue;
                    },
                    set: function (value) {
                        if (value !== null) {
                            this.setAttribute(name, value);
                        }
                        else {
                            this.removeAttribute(name);
                        }
                    }
                });
                break;
            }
            case String:
            default: {
                Object.defineProperty(prototype, propertyName, {
                    get: function () {
                        const val = this.getAttribute(name);
                        return (val !== null) ? val : defaultValue;
                    },
                    set: function (value) {
                        if (value !== null) {
                            this.setAttribute(name, value);
                        }
                        else {
                            this.removeAttribute(name);
                        }
                    }
                });
                break;
            }
        }
    };
};
function Stylesheet(text) {
    const stylesheet = new CSSStyleSheet();
    stylesheet.replaceSync(text);
    return stylesheet;
}
function trimMultilineIndent(text) {
    const newlineIndex = text.indexOf("\n");
    text = text.substring(newlineIndex + 1);
    const indentMatch = text.match(/^[\s]*/);
    if (indentMatch) {
        const indent = text.substring(0, indentMatch[0].length);
        text = text.replaceAll(indent, "").trimEnd();
    }
    return text;
}
const CustomElement = function (init) {
    return (elementCtor) => {
        const { name, options } = init;
        if (!customElements.get(name)) {
            customElements.define(name, elementCtor, options);
        }
        return elementCtor;
    };
};
const QueryProperty = function (init) {
    return (target, propertyKey) => {
        const { constructor } = target;
        const { prototype } = constructor;
        const propertyName = String(propertyKey);
        const { selector } = init;
        const withinShadowRoot = init.withinShadowRoot ?? false;
        const getter = withinShadowRoot ? function () {
            return this.shadowRoot.querySelector(selector);
        } : function () {
            return this.querySelector(selector);
        };
        Object.defineProperty(prototype, propertyName, {
            get: getter
        });
    };
};
const QueryAllProperty = function (init) {
    return (target, propertyKey) => {
        const { constructor } = target;
        const { prototype } = constructor;
        const propertyName = String(propertyKey);
        const { selector } = init;
        const withinShadowRoot = init.withinShadowRoot ?? false;
        const getter = withinShadowRoot ? function () {
            return Array.from(this.shadowRoot.querySelectorAll(selector));
        } : function () {
            return Array.from(this.querySelectorAll(selector));
        };
        Object.defineProperty(prototype, propertyName, {
            get: getter
        });
    };
};
function fragment(...nodes) {
    const fragment = document.createDocumentFragment();
    fragment.append(...nodes);
    return fragment;
}
function textNode(text) {
    return document.createTextNode(text);
}
function element(tagName, init) {
    if (init) {
        const { options, attributes, dataset, children, listeners } = init;
        const element = document.createElement(tagName, options);
        if (attributes) {
            Object.entries(attributes).forEach(([attributeName, attributeValue]) => {
                if (attributeValue !== undefined) {
                    if (typeof attributeValue === "boolean") {
                        element.toggleAttribute((0,_Snippets__WEBPACK_IMPORTED_MODULE_1__.camelToTrain)(attributeName), attributeValue);
                    }
                    else {
                        element.setAttribute((0,_Snippets__WEBPACK_IMPORTED_MODULE_1__.camelToTrain)(attributeName), String(attributeValue));
                    }
                }
            });
        }
        if (dataset) {
            const { dataset: elementDataset } = element;
            Object.entries(dataset).forEach(([attributeName, attributeValue]) => {
                if (typeof attributeValue === "boolean") {
                    if (attributeValue) {
                        elementDataset[(0,_Snippets__WEBPACK_IMPORTED_MODULE_1__.camelToTrain)(attributeName)] = "";
                    }
                    else {
                        delete elementDataset[(0,_Snippets__WEBPACK_IMPORTED_MODULE_1__.camelToTrain)(attributeName)];
                    }
                }
                else {
                    elementDataset[(0,_Snippets__WEBPACK_IMPORTED_MODULE_1__.camelToTrain)(attributeName)] = String(attributeValue);
                }
            });
        }
        if (children) {
            if (typeof children === "function") {
                children(element);
            }
            else if (typeof children === "object" && "length" in children) {
                element.append(...Array.from(children));
            }
            else {
                element.append(children);
            }
        }
        if (listeners) {
            Object.entries(listeners).forEach(([name_i, listener_i]) => {
                if (Array.isArray(listener_i)) {
                    element.addEventListener(name_i, listener_i[0], listener_i[1]);
                }
                else {
                    element.addEventListener(name_i, listener_i);
                }
            });
        }
        return element;
    }
    return document.createElement(tagName);
}
const reactiveElementsMap = new WeakMap();
const reactiveElementsFinalizationRegistry = new FinalizationRegistry((heldValue) => {
    const { model, reactiveElement } = heldValue;
    const reactiveElementsMapEntry = reactiveElementsMap.get(model);
    if (reactiveElementsMapEntry !== undefined) {
        const { reactiveElementsArray } = reactiveElementsMapEntry;
        reactiveElementsArray.splice(reactiveElementsArray.indexOf(reactiveElement), 1);
    }
});
const reactiveElementsPropertyObserver = new _models_Model__WEBPACK_IMPORTED_MODULE_0__.ModelChangeObserver((records) => {
    records.forEach((record_i) => {
        const { target, propertyName, oldValue, newValue } = record_i;
        const { reactiveElementsArray } = reactiveElementsMap.get(target);
        reactiveElementsArray.forEach(reactiveElement_i => {
            const { elementRef, react, properties } = reactiveElement_i;
            const element = elementRef.deref();
            if (element) {
                if (properties.includes(propertyName)) {
                    react(element, propertyName, oldValue, newValue);
                }
            }
        });
    });
});
function reactiveElement(model, element, properties, react) {
    const elementRef = new WeakRef(element);
    const reactiveElement = { elementRef, react, properties };
    const reactiveElementsMapEntry = reactiveElementsMap.get(model);
    reactiveElementsFinalizationRegistry.register(element, { model, reactiveElement });
    if (!reactiveElementsMapEntry) {
        const observerOptions = {
            properties: true,
            propertiesFilter: properties
        };
        const reactiveElementsArray = [reactiveElement];
        reactiveElementsMap.set(model, { observerOptions, reactiveElementsArray });
        reactiveElementsPropertyObserver.observe(model, observerOptions);
    }
    else {
        const { reactiveElementsArray, observerOptions } = reactiveElementsMapEntry;
        const { propertiesFilter } = observerOptions;
        reactiveElementsArray.push(reactiveElement);
        observerOptions.propertiesFilter = propertiesFilter ?
            propertiesFilter.concat(properties.filter(property_i => !propertiesFilter.includes(property_i))) : properties.filter((property_i, i, properties) => properties.indexOf(property_i) === i);
    }
    properties.forEach((property_i) => {
        if (property_i in model) {
            const value = Reflect.get(model, property_i, model);
            react(element, property_i, undefined, value);
        }
    });
    return element;
}
function revokeReactiveElement(model, element) {
    const reactiveElementsMapEntry = reactiveElementsMap.get(model);
    if (reactiveElementsMapEntry) {
        const { reactiveElementsArray } = reactiveElementsMapEntry;
        const reactiveElementIndex = reactiveElementsArray.findIndex(reactiveElement => reactiveElement.elementRef.deref() === element);
        if (reactiveElementIndex > -1) {
            reactiveElementsArray.splice(reactiveElementIndex, 1);
        }
        if (reactiveElementsArray.length === 0) {
            reactiveElementsMap.delete(model);
        }
    }
}
const reactiveChildElementsMap = new WeakMap();
const reactiveChildElementsFinalizationRegistry = new FinalizationRegistry((heldValue) => {
    const { list, reactiveChildElement } = heldValue;
    const reactiveChildrenElementsMapEntry = reactiveChildElementsMap.get(list);
    if (reactiveChildrenElementsMapEntry) {
        const { reactiveChildElementsArray } = reactiveChildrenElementsMapEntry;
        reactiveChildElementsArray.splice(reactiveChildElementsArray.indexOf(reactiveChildElement), 1);
    }
});
const reactiveChildElementsObserver = new _models_Model__WEBPACK_IMPORTED_MODULE_0__.ModelChangeObserver((records) => {
    let range = null;
    Array.from(records.values()).forEach((record_i) => {
        const { target } = record_i;
        const list = target;
        const { length: listLength } = list;
        const { reactiveChildElementsArray } = reactiveChildElementsMap.get(list);
        reactiveChildElementsArray.forEach((reactiveChildElements_i) => {
            const { parentRef, mapping, placeholder } = reactiveChildElements_i;
            const parent = parentRef.deref();
            if (parent) {
                const { firstChild, children } = parent;
                const { length: childrenCount } = children;
                if (placeholder && listLength > 0 && firstChild == placeholder) {
                    parent.removeChild(placeholder);
                }
                const { changeType, LIST_INSERT, LIST_REMOVE, LIST_SORT } = record_i;
                switch (changeType) {
                    case LIST_INSERT: {
                        const { insertedIndex, insertedItems } = record_i;
                        const insertedItemsArray = Array.from(insertedItems.values()).map(mapping);
                        const { length: childrenCount } = children;
                        if (insertedIndex < childrenCount) {
                            children[insertedIndex].before(...insertedItemsArray);
                        }
                        else {
                            parent.append(...insertedItemsArray);
                        }
                        break;
                    }
                    case LIST_REMOVE: {
                        const { removedIndex, removedItems } = record_i;
                        const { length: removedCount } = removedItems;
                        range = range ?? document.createRange();
                        const removeEndIndex = removedIndex + (removedCount - 1);
                        if (removeEndIndex < childrenCount) {
                            range.setStartBefore(children[removedIndex]);
                            range.setEndAfter(children[removeEndIndex]);
                            range.deleteContents();
                        }
                        break;
                    }
                    case LIST_SORT: {
                        const { sortedIndices } = record_i;
                        const childrenArray = Array.from(children);
                        parent.append(...sortedIndices.filter(index_i => index_i < childrenCount).map(index_i => childrenArray[index_i]));
                        break;
                    }
                }
                if (listLength == 0 && placeholder) {
                    parent.append(placeholder);
                }
            }
        });
    });
});
function reactiveChildElements(list, mapping, placeholder) {
    return (parent) => {
        const parentRef = new WeakRef(parent);
        const reactiveChildElementsMapEntry = reactiveChildElementsMap.get(list);
        const reactiveChildElement = { parentRef, mapping, placeholder };
        reactiveChildElementsFinalizationRegistry.register(parent, { list, reactiveChildElement });
        if (!reactiveChildElementsMapEntry) {
            const reactiveChildElementsArray = [reactiveChildElement];
            reactiveChildElementsMap.set(list, { reactiveChildElementsArray });
            reactiveChildElementsObserver.observe(list, {
                childList: true
            });
        }
        else {
            const { reactiveChildElementsArray } = reactiveChildElementsMapEntry;
            reactiveChildElementsArray.push(reactiveChildElement);
        }
        const children = list.length == 0 && placeholder ?
            [placeholder] : Array.from(list.values()).map(mapping);
        parent.replaceChildren(...children);
    };
}
function revokeReactiveChildElements(list, parent) {
    const reactiveChildElementsMapEntry = reactiveChildElementsMap.get(list);
    if (reactiveChildElementsMapEntry) {
        const { reactiveChildElementsArray } = reactiveChildElementsMapEntry;
        const reactiveChildElementsIndex = reactiveChildElementsArray.findIndex(reactiveChildElement => reactiveChildElement.parentRef.deref() === parent);
        if (reactiveChildElementsIndex > -1) {
            reactiveChildElementsArray.splice(reactiveChildElementsIndex, 1);
        }
        if (reactiveChildElementsArray.length === 0) {
            reactiveChildElementsMap.delete(list);
        }
    }
}
function areAttributesMatching(referenceAttributeType, referenceAttributeName, referenceAttributeValue, attributeName, attributeValue) {
    if (referenceAttributeName == attributeName) {
        switch (referenceAttributeType) {
            case "boolean":
                return referenceAttributeValue == "" && attributeValue == "";
            case "string":
                return referenceAttributeValue !== "" && (referenceAttributeValue == attributeValue);
            case "list":
                return (referenceAttributeValue !== "" && attributeValue !== null) && new RegExp(`${referenceAttributeValue}\s*?`, "g").test(attributeValue);
        }
    }
    return false;
}
class AttributeMutationMixinBase {
    attributeName;
    attributeValue;
    attributeType;
    constructor(attributeName, attributeType = "boolean", attributeValue = "") {
        this.attributeName = attributeName;
        this.attributeType = attributeType;
        this.attributeValue = attributeValue;
    }
    attach() {
        throw new TypeError("Not implemented method.");
    }
    detach() {
        throw new TypeError("Not implemented method.");
    }
}
//# sourceMappingURL=Element.js.map

/***/ }),

/***/ "../editor/lib/elements/Snippets.js":
/*!******************************************!*\
  !*** ../editor/lib/elements/Snippets.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "camelToSnake": () => (/* binding */ camelToSnake),
/* harmony export */   "camelToTrain": () => (/* binding */ camelToTrain),
/* harmony export */   "constructor": () => (/* binding */ constructor),
/* harmony export */   "snakeToCamel": () => (/* binding */ snakeToCamel),
/* harmony export */   "trainToCamel": () => (/* binding */ trainToCamel)
/* harmony export */ });





function snakeToCamel(str) {
    return str.split('_').map(str => str.charAt(0).toUpperCase() + str.substring(1).toLowerCase()).join("");
}
function camelToSnake(str) {
    return str.replace(/(?<!^)(?=[A-Z])/g, '_').toLowerCase();
}
function trainToCamel(str) {
    return str.split('-').map(str => str.charAt(0).toUpperCase() + str.substring(1).toLowerCase()).join("");
}
function camelToTrain(str) {
    return str.replace(/(?<!^)(?=[A-Z])/g, '-').toLowerCase();
}
const constructor = (prototype, construct, constructors) => {
    return Object.assign(construct, {
        prototype,
        ...constructors
    });
};
//# sourceMappingURL=Snippets.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/grid/Grid.js":
/*!******************************************************!*\
  !*** ../editor/lib/elements/containers/grid/Grid.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEGridElement": () => (/* binding */ HTMLEGridElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _GridBody__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GridBody */ "../editor/lib/elements/containers/grid/GridBody.js");
/* harmony import */ var _GridCell__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./GridCell */ "../editor/lib/elements/containers/grid/GridCell.js");
/* harmony import */ var _GridHead__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GridHead */ "../editor/lib/elements/containers/grid/GridHead.js");
/* harmony import */ var _GridRow__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./GridRow */ "../editor/lib/elements/containers/grid/GridRow.js");
/* harmony import */ var _GridRowGroup__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./GridRowGroup */ "../editor/lib/elements/containers/grid/GridRowGroup.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};













_GridHead__WEBPACK_IMPORTED_MODULE_4__.HTMLEGridHeadElement;
_GridBody__WEBPACK_IMPORTED_MODULE_2__.HTMLEGridBodyElement;
var shadowTemplate;
var style;
let HTMLEGridElementBase = class HTMLEGridElementBase extends HTMLElement {
    cells() {
        return Array.from(this.querySelectorAll("e-gridcell"));
    }
    rows() {
        return Array.from(this.querySelectorAll("e-gridrow"));
    }
    get activeCell() {
        return this.querySelector("e-gridcell[active]");
    }
    get activeRow() {
        return this.querySelector("e-gridrow[active]");
    }
    get body() {
        return this.querySelector(":scope > e-gridbody");
    }
    get head() {
        return this.querySelector(":scope > e-gridhead");
    }
    #onSelection;
    #hasSelectionChanged;
    #cellsWalker;
    #rowsWalker;
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot"));
        style = /*css*/ `
            :host {
                display: table;
                user-select: none;
                line-height: 22px;
            }
            
            :host(:focus) {
                outline: 1px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
                outline-offset: -1px;
            }
        `;
    }
    constructor() {
        super();
        this.#cellsWalker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#cellsWalkerNodeFilter.bind(this));
        this.#rowsWalker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#rowsWalkerNodeFilter.bind(this));
        this.#onSelection = false;
        this.#hasSelectionChanged = false;
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        this.addEventListener("click", this.#handleClickEvent.bind(this));
        this.addEventListener("contextmenu", this.#handleContextMenuEvent.bind(this));
        this.addEventListener("dblclick", this.#handleDblClickEvent.bind(this));
        this.addEventListener("focus", this.#handleFocusEvent.bind(this));
        this.addEventListener("focusin", this.#handleFocusInEvent.bind(this));
        this.addEventListener("keydown", this.#handleKeyDownEvent.bind(this));
        this.addEventListener("select", this.#handleSelectEvent.bind(this));
        shadowRoot.addEventListener("slotchange", this.#handleSlotChangeEvent.bind(this));
    }
    connectedCallback() {
        const { tabIndex } = this;
        this.tabIndex = tabIndex;
    }
    beginSelection() {
        this.#onSelection = true;
    }
    endSelection() {
        this.#onSelection = false;
        if (this.#hasSelectionChanged) {
            this.dispatchEvent(new Event("selectionchange", { bubbles: true }));
            this.#hasSelectionChanged = false;
        }
    }
    clearSelection() {
        this.#clearCellsSelection();
        this.#clearRowsSelection();
    }
    selectedCells() {
        return Array.from(this.querySelectorAll("e-gridcell[selected]"));
    }
    selectedRows() {
        return Array.from(this.querySelectorAll("e-gridrow[selected]"));
    }
    #cellsWalkerNodeFilter(node) {
        if (node instanceof _GridCell__WEBPACK_IMPORTED_MODULE_3__.HTMLEGridCellElement && !node.hidden) {
            return NodeFilter.FILTER_ACCEPT;
        }
        if (node instanceof _GridBody__WEBPACK_IMPORTED_MODULE_2__.HTMLEGridBodyElement || node instanceof _GridRowGroup__WEBPACK_IMPORTED_MODULE_6__.HTMLEGridRowGroupElement || node instanceof _GridRow__WEBPACK_IMPORTED_MODULE_5__.HTMLEGridRowElement) {
            return NodeFilter.FILTER_SKIP;
        }
        return NodeFilter.FILTER_REJECT;
    }
    #rowsWalkerNodeFilter(node) {
        if (node instanceof _GridRow__WEBPACK_IMPORTED_MODULE_5__.HTMLEGridRowElement && !node.hidden) {
            return NodeFilter.FILTER_ACCEPT;
        }
        if (node instanceof _GridBody__WEBPACK_IMPORTED_MODULE_2__.HTMLEGridBodyElement || node instanceof _GridRowGroup__WEBPACK_IMPORTED_MODULE_6__.HTMLEGridRowGroupElement) {
            return NodeFilter.FILTER_SKIP;
        }
        return NodeFilter.FILTER_REJECT;
    }
    #getCellsRange(from, to) {
        const cells = Array.from(this.cells());
        const fromIndex = cells.indexOf(from);
        const toIndex = cells.indexOf(to);
        if (fromIndex > -1 && toIndex > -1) {
            if (from == to) {
                return [from];
            }
            return cells.slice(Math.min(fromIndex, toIndex), Math.max(fromIndex, toIndex) + 1);
        }
        return [];
    }
    #getRowsRange(from, to) {
        if (from == to) {
            return [from];
        }
        const position = from.compareDocumentPosition(to);
        if (position & Node.DOCUMENT_POSITION_FOLLOWING) {
            const range = [from];
            let nextVisibleRow = this.#nextRow(from);
            while (nextVisibleRow && nextVisibleRow !== to) {
                range.push(nextVisibleRow);
                nextVisibleRow = this.#nextRow(nextVisibleRow);
            }
            range.push(to);
            return range;
        }
        else if (position & Node.DOCUMENT_POSITION_PRECEDING) {
            const range = [from];
            let previousVisibleRow = this.#previousRow(from);
            while (previousVisibleRow && previousVisibleRow !== to) {
                range.push(previousVisibleRow);
                previousVisibleRow = this.#previousRow(previousVisibleRow);
            }
            range.push(to);
            return range;
        }
        return [];
    }
    #setCellsSelection(...cells) {
        this.beginSelection();
        const selectedCells = this.selectedCells();
        selectedCells.forEach((selectedCell_i) => {
            if (!cells.includes(selectedCell_i)) {
                selectedCell_i.selected = false;
            }
        });
        cells.forEach((cell_i) => {
            if (!cell_i.selected) {
                cell_i.selected = true;
            }
        });
        this.endSelection();
    }
    #setRowsSelection(...rows) {
        this.beginSelection();
        const selectedRows = this.selectedRows();
        selectedRows.forEach((selectedRow_i) => {
            if (!rows.includes(selectedRow_i)) {
                selectedRow_i.selected = false;
            }
        });
        rows.forEach((row_i) => {
            if (!row_i.selected) {
                row_i.selected = true;
            }
        });
        this.endSelection();
    }
    #addCellsToSelection(...cells) {
        this.beginSelection();
        cells.forEach((cell_i) => {
            if (!cell_i.selected) {
                cell_i.selected = true;
            }
        });
        this.endSelection();
    }
    #addRowsToSelection(...rows) {
        this.beginSelection();
        rows.forEach((row_i) => {
            if (!row_i.selected) {
                row_i.selected = true;
            }
        });
        this.endSelection();
    }
    #removeCellsFromSelection(...cells) {
        this.beginSelection();
        const selectedCells = this.selectedCells();
        cells.forEach((cell_i) => {
            if (selectedCells.includes(cell_i)) {
                cell_i.selected = false;
            }
        });
        this.endSelection();
    }
    #removeRowsFromSelection(...rows) {
        this.beginSelection();
        const selectedRows = this.selectedRows();
        rows.forEach((row_i) => {
            if (selectedRows.includes(row_i)) {
                row_i.selected = false;
            }
        });
        this.endSelection();
    }
    #clearCellsSelection() {
        this.beginSelection();
        const selectedCells = this.selectedCells();
        selectedCells.forEach((cell_i) => {
            if (cell_i.selected) {
                cell_i.selected = false;
            }
        });
        this.endSelection();
    }
    #clearRowsSelection() {
        this.beginSelection();
        const selectedRows = this.selectedRows();
        selectedRows.forEach((row_i) => {
            if (row_i.selected) {
                row_i.selected = false;
            }
        });
        this.endSelection();
    }
    #setActiveCell(cell) {
        const { activeCell } = this;
        if (activeCell !== null && activeCell !== cell) {
            activeCell.active = false;
            activeCell.tabIndex = -1;
        }
        if (cell !== null) {
            const cellsWalker = this.#cellsWalker;
            cellsWalker.currentNode = cell;
            cell.active = true;
            cell.tabIndex = 0;
        }
    }
    #setActiveRow(row) {
        const { activeRow } = this;
        if (activeRow !== null && activeRow !== row) {
            activeRow.active = false;
            activeRow.tabIndex = -1;
        }
        if (row !== null) {
            const rowsWalker = this.#rowsWalker;
            rowsWalker.currentNode = row;
            row.active = true;
            row.tabIndex = 0;
        }
    }
    #firstCell(row) {
        const cellsWalker = this.#cellsWalker;
        cellsWalker.currentNode = row;
        return cellsWalker.firstChild();
    }
    #lastCell(row) {
        const cellsWalker = this.#cellsWalker;
        cellsWalker.currentNode = row;
        return cellsWalker.lastChild();
    }
    #previousCell(cell) {
        const cellsWalker = this.#cellsWalker;
        cellsWalker.currentNode = cell;
        return cellsWalker.previousNode();
    }
    #nextCell(cell) {
        const cellsWalker = this.#cellsWalker;
        cellsWalker.currentNode = cell;
        return cellsWalker.nextNode();
    }
    #closestRow(cell) {
        const rowsWalker = this.#rowsWalker;
        rowsWalker.currentNode = cell;
        return rowsWalker.parentNode();
    }
    #firstRow() {
        const rowsWalker = this.#rowsWalker;
        const { root } = rowsWalker;
        rowsWalker.currentNode = root;
        return rowsWalker.firstChild();
    }
    #lastRow() {
        const rowsWalker = this.#rowsWalker;
        const { root } = rowsWalker;
        rowsWalker.currentNode = root;
        return rowsWalker.lastChild();
    }
    #previousRow(row) {
        const rowsWalker = this.#rowsWalker;
        rowsWalker.currentNode = row;
        return rowsWalker.previousNode();
    }
    #nextRow(row) {
        const rowsWalker = this.#rowsWalker;
        rowsWalker.currentNode = row;
        return rowsWalker.nextNode();
    }
    #topCell(cell) {
        const closestRow = this.#closestRow(cell);
        if (closestRow) {
            const closestRowCells = closestRow.cells();
            const cellIndex = closestRowCells.indexOf(cell);
            const previousRow = this.#previousRow(closestRow);
            if (previousRow) {
                const previousRowCells = previousRow.cells();
                return previousRowCells[Math.min(cellIndex, previousRowCells.length)];
            }
        }
        return null;
    }
    #bottomCell(cell) {
        const closestRow = this.#closestRow(cell);
        if (closestRow) {
            const closestRowCells = closestRow.cells();
            const cellIndex = closestRowCells.indexOf(cell);
            const nextRow = this.#nextRow(closestRow);
            if (nextRow) {
                const nextRowCells = nextRow.cells();
                return nextRowCells[Math.min(cellIndex, nextRowCells.length)];
            }
        }
        return null;
    }
    #handleClickEvent(event) {
        const { ctrlKey, shiftKey } = event;
        const { selectby } = this;
        switch (selectby) {
            case "cell": {
                const composedPath = event.composedPath();
                const targetCell = composedPath.find(target_i => target_i instanceof _GridBody__WEBPACK_IMPORTED_MODULE_2__.HTMLEGridBodyElement) ? composedPath.find(target_i => target_i instanceof _GridCell__WEBPACK_IMPORTED_MODULE_3__.HTMLEGridCellElement) : null;
                const selectedCells = this.selectedCells();
                if (targetCell instanceof _GridCell__WEBPACK_IMPORTED_MODULE_3__.HTMLEGridCellElement) {
                    if (!shiftKey && !ctrlKey) {
                        this.#setCellsSelection(targetCell);
                    }
                    else if (ctrlKey) {
                        !targetCell.selected ?
                            this.#addCellsToSelection(targetCell) :
                            this.#removeCellsFromSelection(targetCell);
                    }
                    else if (shiftKey) {
                        const lastSelectedCell = selectedCells[selectedCells.length - 1];
                        if (lastSelectedCell) {
                            const range = this.#getCellsRange(lastSelectedCell, targetCell);
                            if (range) {
                                selectedCells.includes(targetCell) ?
                                    this.#removeCellsFromSelection(...range) :
                                    this.#addCellsToSelection(...range);
                            }
                        }
                        else {
                            this.#setCellsSelection(targetCell);
                        }
                    }
                }
                break;
            }
            case "row": {
                const selectedRows = this.selectedRows();
                const composedPath = event.composedPath();
                const targetRow = composedPath.find(target_i => target_i instanceof _GridBody__WEBPACK_IMPORTED_MODULE_2__.HTMLEGridBodyElement) ? composedPath.find(target_i => target_i instanceof _GridRow__WEBPACK_IMPORTED_MODULE_5__.HTMLEGridRowElement) : null;
                if (targetRow instanceof _GridRow__WEBPACK_IMPORTED_MODULE_5__.HTMLEGridRowElement) {
                    if (!shiftKey && !ctrlKey) {
                        this.#setRowsSelection(targetRow);
                    }
                    else if (ctrlKey) {
                        !targetRow.selected ?
                            this.#addRowsToSelection(targetRow) :
                            this.#removeRowsFromSelection(targetRow);
                    }
                    else if (shiftKey) {
                        const lastSelectedRow = selectedRows[selectedRows.length - 1];
                        if (lastSelectedRow) {
                            const range = this.#getRowsRange(lastSelectedRow, targetRow);
                            if (range) {
                                selectedRows.includes(targetRow) ?
                                    this.#removeRowsFromSelection(...range) :
                                    this.#addRowsToSelection(...range);
                            }
                        }
                        else {
                            this.#setRowsSelection(targetRow);
                        }
                    }
                }
                break;
            }
        }
        event.stopPropagation();
    }
    #handleContextMenuEvent(event) {
        event.stopPropagation();
    }
    #handleDblClickEvent(event) {
        event.stopPropagation();
    }
    #handleKeyDownEvent(event) {
        const { key } = event;
        const { selectby, activeCell, activeRow } = this;
        switch (key) {
            case "a": {
                const { ctrlKey } = event;
                if (ctrlKey) {
                    switch (selectby) {
                        case "cell": {
                            const firstRow = this.#firstRow();
                            const firstCell = firstRow ? this.#firstCell(firstRow) : null;
                            const lastRow = this.#lastRow();
                            const lastCell = lastRow ? this.#lastCell(lastRow) : null;
                            if (firstCell && lastCell) {
                                const range = this.#getCellsRange(firstCell, lastCell);
                                if (range) {
                                    this.#setCellsSelection(...range);
                                }
                            }
                            break;
                        }
                        case "row": {
                            const firstRow = this.#firstRow();
                            const lastRow = this.#lastRow();
                            if (firstRow && lastRow) {
                                const range = this.#getRowsRange(firstRow, lastRow);
                                if (range) {
                                    this.#setRowsSelection(...range);
                                }
                            }
                            break;
                        }
                    }
                }
                event.preventDefault();
                break;
            }
            case "ArrowLeft": {
                if (selectby == "cell") {
                    if (activeCell) {
                        const previousCell = this.#previousCell(activeCell);
                        if (previousCell) {
                            previousCell.focus({ preventScroll: true });
                            const { shiftKey } = event;
                            if (shiftKey) {
                                previousCell.selected ?
                                    this.#removeCellsFromSelection(previousCell) :
                                    this.#addCellsToSelection(previousCell);
                            }
                        }
                    }
                }
                event.stopPropagation();
                break;
            }
            case "ArrowRight": {
                if (selectby == "cell") {
                    if (activeCell) {
                        const nextCell = this.#nextCell(activeCell);
                        if (nextCell) {
                            nextCell.focus({ preventScroll: true });
                            const { shiftKey } = event;
                            if (shiftKey) {
                                nextCell.selected ?
                                    this.#removeCellsFromSelection(nextCell) :
                                    this.#addCellsToSelection(nextCell);
                            }
                        }
                    }
                }
                event.stopPropagation();
                break;
            }
            case "ArrowUp": {
                switch (selectby) {
                    case "cell": {
                        const firstRow = activeRow ?? this.#firstRow();
                        const topCell = activeCell ?
                            this.#topCell(activeCell) :
                            firstRow ?
                                this.#firstCell(firstRow) :
                                null;
                        if (topCell) {
                            topCell.focus({ preventScroll: true });
                            const { shiftKey } = event;
                            if (shiftKey) {
                                topCell.selected ?
                                    this.#removeCellsFromSelection(topCell) :
                                    this.#addCellsToSelection(topCell);
                            }
                        }
                        break;
                    }
                    case "row": {
                        const previousRow = activeRow ?
                            this.#previousRow(activeRow) :
                            this.#firstRow();
                        if (previousRow) {
                            previousRow.focus({ preventScroll: true });
                            const { shiftKey } = event;
                            if (shiftKey) {
                                previousRow.selected ?
                                    this.#removeRowsFromSelection(previousRow) :
                                    this.#addRowsToSelection(previousRow);
                            }
                        }
                        break;
                    }
                }
                event.stopPropagation();
                break;
            }
            case "ArrowDown": {
                switch (selectby) {
                    case "cell":
                        {
                            const lastRow = activeRow ?? this.#lastRow();
                            const bottomCell = activeCell ?
                                this.#bottomCell(activeCell) :
                                lastRow ?
                                    this.#lastCell(lastRow) :
                                    null;
                            if (bottomCell) {
                                bottomCell.focus({ preventScroll: true });
                                const { shiftKey } = event;
                                if (shiftKey) {
                                    bottomCell.selected ?
                                        this.#removeCellsFromSelection(bottomCell) :
                                        this.#addCellsToSelection(bottomCell);
                                }
                            }
                        }
                        break;
                    case "row": {
                        const nextRow = activeRow ?
                            this.#nextRow(activeRow) :
                            this.#lastRow();
                        if (nextRow) {
                            nextRow.focus({ preventScroll: true });
                            const { shiftKey } = event;
                            if (shiftKey) {
                                nextRow.selected ?
                                    this.#removeRowsFromSelection(nextRow) :
                                    this.#addRowsToSelection(nextRow);
                            }
                        }
                        break;
                    }
                }
                event.stopPropagation();
                break;
            }
            case "Home": {
                switch (selectby) {
                    case "cell": {
                        if (activeRow) {
                            const firstCell = this.#firstCell(activeRow);
                            if (firstCell) {
                                firstCell.focus({ preventScroll: true });
                            }
                        }
                        break;
                    }
                    case "row": {
                        const firstRow = this.#firstRow();
                        if (firstRow) {
                            firstRow.focus({ preventScroll: true });
                        }
                        break;
                    }
                }
                event.stopPropagation();
                break;
            }
            case "End": {
                switch (selectby) {
                    case "cell": {
                        if (activeRow) {
                            const lastCell = this.#lastCell(activeRow);
                            if (lastCell) {
                                lastCell.focus({ preventScroll: true });
                            }
                        }
                        break;
                    }
                    case "row": {
                        const lastRow = this.#lastRow();
                        if (lastRow) {
                            lastRow.focus({ preventScroll: true });
                        }
                        break;
                    }
                }
                event.stopPropagation();
                break;
            }
            case "Enter": {
                switch (selectby) {
                    case "cell": {
                        if (activeCell) {
                            this.#setCellsSelection(activeCell);
                            activeCell.click();
                        }
                        break;
                    }
                    case "row": {
                        if (activeRow) {
                            this.#setRowsSelection(activeRow);
                            activeRow.click();
                        }
                        break;
                    }
                }
                event.stopPropagation();
                break;
            }
            case "Escape": {
                switch (selectby) {
                    case "cell": {
                        this.#clearCellsSelection();
                        this.#setActiveCell(null);
                        break;
                    }
                    case "row": {
                        this.#clearRowsSelection();
                        this.#setActiveRow(null);
                        break;
                    }
                }
                this.focus();
                event.stopPropagation();
                break;
            }
        }
    }
    #handleFocusEvent(event) {
        const { relatedTarget } = event;
        const { selectby } = this;
        switch (selectby) {
            case "cell": {
                const { activeCell } = this;
                if (activeCell && relatedTarget !== activeCell) {
                    activeCell.focus();
                }
                break;
            }
            case "row": {
                const { activeRow } = this;
                if (activeRow && relatedTarget !== activeRow) {
                    activeRow.focus();
                }
                break;
            }
        }
    }
    #handleFocusInEvent(event) {
        const { target } = event;
        const { selectby } = this;
        switch (selectby) {
            case "cell": {
                const targetCell = target.closest("e-gridcell");
                if (targetCell) {
                    this.#setActiveCell(targetCell);
                }
                break;
            }
            case "row": {
                const targetRow = target.closest("e-gridrow");
                if (targetRow) {
                    this.#setActiveRow(targetRow);
                }
                break;
            }
        }
    }
    #handleSelectEvent() {
        if (this.#onSelection) {
            this.#hasSelectionChanged = true;
        }
        else {
            this.dispatchEvent(new Event("selectionchange", { bubbles: true }));
        }
    }
    #handleSlotChangeEvent(event) {
        const { target } = event;
        const assignedRows = target
            .assignedElements()
            .filter(element_i => element_i instanceof _GridRow__WEBPACK_IMPORTED_MODULE_5__.HTMLEGridRowElement);
        assignedRows.forEach((row_i, i) => {
            row_i.posinset = i;
        });
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEGridElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, defaultValue: "cell" })
], HTMLEGridElementBase.prototype, "selectby", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEGridElementBase.prototype, "multiselectable", void 0);
HTMLEGridElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-grid"
    })
], HTMLEGridElementBase);
var HTMLEGridElement = HTMLEGridElementBase;
//# sourceMappingURL=Grid.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/grid/GridBody.js":
/*!**********************************************************!*\
  !*** ../editor/lib/elements/containers/grid/GridBody.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEGridBodyElement": () => (/* binding */ HTMLEGridBodyElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _GridCell__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GridCell */ "../editor/lib/elements/containers/grid/GridCell.js");
/* harmony import */ var _GridRow__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GridRow */ "../editor/lib/elements/containers/grid/GridRow.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





var shadowTemplate;
var style;
let HTMLEGridBodyElementBase = class HTMLEGridBodyElementBase extends HTMLElement {
    cells() {
        return Array.from(this.querySelectorAll("e-gridcell"));
    }
    rows() {
        return Array.from(this.querySelectorAll("e-gridrow"));
    }
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot"));
        style = /*css*/ `
            :host {
                display: table-row-group;
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        shadowRoot.addEventListener("slotchange", this.#handleSlotChangeEvent.bind(this));
    }
    #handleSlotChangeEvent(event) {
        const { target } = event;
        const assignedItems = target
            .assignedElements()
            .filter(element_i => element_i instanceof _GridCell__WEBPACK_IMPORTED_MODULE_1__.HTMLEGridCellElement);
        assignedItems.forEach((item_i, i) => {
            item_i.posinset = i;
        });
    }
};
HTMLEGridBodyElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-gridbody"
    })
], HTMLEGridBodyElementBase);
var HTMLEGridBodyElement = HTMLEGridBodyElementBase;
//# sourceMappingURL=GridBody.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/grid/GridCell.js":
/*!**********************************************************!*\
  !*** ../editor/lib/elements/containers/grid/GridCell.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEGridCellElement": () => (/* binding */ HTMLEGridCellElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var shadowTemplate;
var style;
let HTMLEGridCellElementBase = class HTMLEGridCellElementBase extends HTMLElement {
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot"));
        style = /*css*/ `
            :host {
                display: table-cell;
                text-align: left;
            }
            
            :host([type="columnheader"]:hover) {
                background-color: var(--theme-hovered-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_HOVERED_ITEM_COLOR});
            }
            
            :host(:hover):host-context(e-grid:is(:not([selectby]), [selectby="cell"])) {
                background-color: var(--theme-hovered-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_HOVERED_ITEM_COLOR});
            }
            
            :host([type="columnheader"][active]) {
                background-color: var(--theme-focused-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_COLOR});
            }
            
            :host([active]):host-context(e-grid:focus-within:is(:not([selectby]), [selectby="cell"])) {
                outline: 1px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
                outline-offset: -1px;
            }
            
            :host([selected]):host-context(e-grid:is(:not([selectby]), [selectby="cell"])) {
                background-color: var(--theme-selected-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_SELECTED_ITEM_COLOR});
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
    }
    attributeChangedCallback(name, oldValue, newValue) {
        switch (name) {
            case "selected": {
                this.dispatchEvent(new Event("select", { bubbles: true }));
                break;
            }
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEGridCellElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEGridCellElementBase.prototype, "headers", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEGridCellElementBase.prototype, "type", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Number })
], HTMLEGridCellElementBase.prototype, "posinset", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEGridCellElementBase.prototype, "droptarget", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEGridCellElementBase.prototype, "active", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean, observed: true })
], HTMLEGridCellElementBase.prototype, "selected", void 0);
HTMLEGridCellElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-gridcell"
    })
], HTMLEGridCellElementBase);
var HTMLEGridCellElement = HTMLEGridCellElementBase;
//# sourceMappingURL=GridCell.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/grid/GridHead.js":
/*!**********************************************************!*\
  !*** ../editor/lib/elements/containers/grid/GridHead.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEGridHeadElement": () => (/* binding */ HTMLEGridHeadElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _GridCell__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GridCell */ "../editor/lib/elements/containers/grid/GridCell.js");
/* harmony import */ var _GridRow__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GridRow */ "../editor/lib/elements/containers/grid/GridRow.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





var shadowTemplate;
var style;
let HTMLEGridHeadElementBase = class HTMLEGridHeadElementBase extends HTMLElement {
    cells() {
        return Array.from(this.querySelectorAll("e-gridcell"));
    }
    rows() {
        return Array.from(this.querySelectorAll("e-gridrow"));
    }
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot"));
        style = /*css*/ `
            :host {
                display: table-header-group;
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        shadowRoot.addEventListener("slotchange", this.#handleSlotChangeEvent.bind(this));
    }
    #handleSlotChangeEvent(event) {
        const { target } = event;
        const assignedItems = target
            .assignedElements()
            .filter(element_i => element_i instanceof _GridCell__WEBPACK_IMPORTED_MODULE_1__.HTMLEGridCellElement);
        assignedItems.forEach((item_i, i) => {
            item_i.posinset = i;
        });
    }
};
HTMLEGridHeadElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-gridhead"
    })
], HTMLEGridHeadElementBase);
var HTMLEGridHeadElement = HTMLEGridHeadElementBase;
//# sourceMappingURL=GridHead.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/grid/GridRow.js":
/*!*********************************************************!*\
  !*** ../editor/lib/elements/containers/grid/GridRow.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEGridRowElement": () => (/* binding */ HTMLEGridRowElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _GridCell__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GridCell */ "../editor/lib/elements/containers/grid/GridCell.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





var shadowTemplate;
var style;
let HTMLEGridRowElementBase = class HTMLEGridRowElementBase extends HTMLElement {
    cells() {
        return Array.from(this.querySelectorAll("e-gridcell"));
    }
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot"));
        style = /*css*/ `
            :host {
                display: table-row;
            }
            
            :host(:hover):host-context(e-grid:is([selectby="row"])) {
                background-color: var(--theme-hovered-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_HOVERED_ITEM_COLOR});
            }
            
            :host([active]):host-context(e-grid:focus-within:is([selectby="row"])) {
                outline: 1px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
                outline-offset: -1px;
            }
            
            :host([selected]):host-context(e-grid:is([selectby="row"])) {
                background-color: var(--theme-selected-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_SELECTED_ITEM_COLOR});
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        shadowRoot.addEventListener("slotchange", this.#handleSlotChangeEvent.bind(this));
    }
    attributeChangedCallback(name, oldValue, newValue) {
        switch (name) {
            case "selected": {
                this.dispatchEvent(new Event("select", { bubbles: true }));
                break;
            }
        }
    }
    #handleSlotChangeEvent(event) {
        const { target } = event;
        const assignedCells = target
            .assignedElements()
            .filter(element_i => element_i instanceof _GridCell__WEBPACK_IMPORTED_MODULE_2__.HTMLEGridCellElement);
        assignedCells.forEach((cell_i, i) => {
            cell_i.posinset = i;
        });
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEGridRowElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEGridRowElementBase.prototype, "active", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEGridRowElementBase.prototype, "selected", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Number })
], HTMLEGridRowElementBase.prototype, "posinset", void 0);
HTMLEGridRowElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-gridrow"
    })
], HTMLEGridRowElementBase);
var HTMLEGridRowElement = HTMLEGridRowElementBase;
//# sourceMappingURL=GridRow.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/grid/GridRowGroup.js":
/*!**************************************************************!*\
  !*** ../editor/lib/elements/containers/grid/GridRowGroup.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEGridRowGroupElement": () => (/* binding */ HTMLEGridRowGroupElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _GridRow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GridRow */ "../editor/lib/elements/containers/grid/GridRow.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var shadowTemplate;
var style;
let HTMLEGridRowGroupElementBase = class HTMLEGridRowGroupElementBase extends HTMLElement {
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot"));
        style = /*css*/ `
            :host {
                display: table-row-group;
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        shadowRoot.addEventListener("slotchange", this.#handleSlotChangeEvent.bind(this));
    }
    #handleSlotChangeEvent(event) {
        const { target } = event;
        const assignedItems = target
            .assignedElements()
            .filter(element_i => element_i instanceof _GridRow__WEBPACK_IMPORTED_MODULE_1__.HTMLEGridRowElement);
        assignedItems.forEach((item_i, i) => {
            item_i.posinset = i;
        });
    }
};
HTMLEGridRowGroupElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-gridrowgroup"
    })
], HTMLEGridRowGroupElementBase);
var HTMLEGridRowGroupElement = HTMLEGridRowGroupElementBase;
//# sourceMappingURL=GridRowGroup.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/grid/index.js":
/*!*******************************************************!*\
  !*** ../editor/lib/elements/containers/grid/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEGridBodyElement": () => (/* reexport safe */ _GridBody__WEBPACK_IMPORTED_MODULE_1__.HTMLEGridBodyElement),
/* harmony export */   "HTMLEGridCellElement": () => (/* reexport safe */ _GridCell__WEBPACK_IMPORTED_MODULE_2__.HTMLEGridCellElement),
/* harmony export */   "HTMLEGridElement": () => (/* reexport safe */ _Grid__WEBPACK_IMPORTED_MODULE_0__.HTMLEGridElement),
/* harmony export */   "HTMLEGridHeadElement": () => (/* reexport safe */ _GridHead__WEBPACK_IMPORTED_MODULE_3__.HTMLEGridHeadElement),
/* harmony export */   "HTMLEGridRowElement": () => (/* reexport safe */ _GridRow__WEBPACK_IMPORTED_MODULE_4__.HTMLEGridRowElement),
/* harmony export */   "HTMLEGridRowGroupElement": () => (/* reexport safe */ _GridRowGroup__WEBPACK_IMPORTED_MODULE_5__.HTMLEGridRowGroupElement)
/* harmony export */ });
/* harmony import */ var _Grid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Grid */ "../editor/lib/elements/containers/grid/Grid.js");
/* harmony import */ var _GridBody__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GridBody */ "../editor/lib/elements/containers/grid/GridBody.js");
/* harmony import */ var _GridCell__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GridCell */ "../editor/lib/elements/containers/grid/GridCell.js");
/* harmony import */ var _GridHead__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./GridHead */ "../editor/lib/elements/containers/grid/GridHead.js");
/* harmony import */ var _GridRow__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GridRow */ "../editor/lib/elements/containers/grid/GridRow.js");
/* harmony import */ var _GridRowGroup__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./GridRowGroup */ "../editor/lib/elements/containers/grid/GridRowGroup.js");












//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/lists/List.js":
/*!*******************************************************!*\
  !*** ../editor/lib/elements/containers/lists/List.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEListElement": () => (/* binding */ HTMLEListElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _ListItem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ListItem */ "../editor/lib/elements/containers/lists/ListItem.js");
/* harmony import */ var _ListItemGroup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ListItemGroup */ "../editor/lib/elements/containers/lists/ListItemGroup.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};







var shadowTemplate;
var style;
let HTMLEListElementBase = class HTMLEListElementBase extends HTMLElement {
    get activeItem() {
        return this.querySelector("e-listitem[active]");
    }
    get dropTargetItem() {
        return this.querySelector("e-listitem[droptarget]");
    }
    #onSelection;
    #hasSelectionChanged;
    #walker;
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("style", {
            children: [
                /*css*/ `

                    `
            ]
        }), (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot", {
            children: [
                (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot")
            ]
        }));
        style = /*css*/ `
            :host {
                display: block;
            }
            
            :host(:focus) {
                outline: 1px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
                outline-offset: -1px;
            }
        `;
    }
    items() {
        return Array.from(this.querySelectorAll(":is(:scope, :scope > e-listitemgroup) > e-listitem"));
    }
    constructor() {
        super();
        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this));
        this.#onSelection = false;
        this.#hasSelectionChanged = false;
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        this.addEventListener("contextmenu", this.#handleContextMenuEvent.bind(this));
        this.addEventListener("dragend", this.#handleDragEndEvent.bind(this));
        this.addEventListener("dragenter", this.#handleDragEnterEvent.bind(this));
        this.addEventListener("dragover", this.#handleDragOverEvent.bind(this));
        this.addEventListener("dragleave", this.#handleDragLeaveEvent.bind(this));
        this.addEventListener("dragstart", this.#handleDragStartEvent.bind(this));
        this.addEventListener("drop", this.#handleDropEvent.bind(this));
        this.addEventListener("focus", this.#handleFocusEvent.bind(this));
        this.addEventListener("focusin", this.#handleFocusInEvent.bind(this));
        this.addEventListener("keydown", this.#handleKeyDownEvent.bind(this));
        this.addEventListener("mousedown", this.#handleMouseDownEvent.bind(this));
        this.addEventListener("select", this.#handleSelectEvent.bind(this));
        shadowRoot.addEventListener("slotchange", this.#handleSlotChangeEvent.bind(this));
    }
    connectedCallback() {
        const tabIndex = this.getAttribute("tabindex");
        this.tabIndex = tabIndex === null ? 0 : parseInt(tabIndex);
    }
    beginSelection() {
        this.#onSelection = true;
    }
    endSelection() {
        this.#onSelection = false;
        if (this.#hasSelectionChanged) {
            this.dispatchEvent(new Event("selectionchange", { bubbles: true }));
            this.#hasSelectionChanged = false;
        }
    }
    selectedItems() {
        const selectedItems = [];
        const walker = this.#walker;
        walker.currentNode = walker.root;
        let item = this.#firstItem();
        while (item !== null) {
            if (item.selected) {
                selectedItems.push(item);
            }
            item = this.#nextItem(item);
        }
        return selectedItems;
    }
    #walkerNodeFilter(node) {
        if (node instanceof _ListItem__WEBPACK_IMPORTED_MODULE_2__.HTMLEListItemElement) {
            return NodeFilter.FILTER_ACCEPT;
        }
        if (node instanceof _ListItemGroup__WEBPACK_IMPORTED_MODULE_3__.HTMLEListItemGroupElement) {
            return NodeFilter.FILTER_SKIP;
        }
        return NodeFilter.FILTER_REJECT;
    }
    #getItemsRange(from, to) {
        const items = this.items();
        const fromIndex = items.indexOf(from);
        const toIndex = items.indexOf(to);
        if (fromIndex > -1 && toIndex > -1) {
            if (from == to) {
                return [from];
            }
            return items.slice(Math.min(fromIndex, toIndex), Math.max(fromIndex, toIndex) + 1);
        }
        return [];
    }
    #setSelection(...items) {
        this.beginSelection();
        const selectedItems = this.selectedItems();
        selectedItems.forEach((selectedItem_i) => {
            if (!items.includes(selectedItem_i)) {
                selectedItem_i.selected = false;
            }
        });
        items.forEach((item_i) => {
            if (this.contains(item_i) && !item_i.selected) {
                item_i.selected = true;
            }
        });
        this.endSelection();
    }
    #addToSelection(...items) {
        this.beginSelection();
        items.forEach((item_i) => {
            if (!item_i.selected) {
                item_i.selected = true;
            }
        });
        this.endSelection();
    }
    #removeFromSelection(...items) {
        this.beginSelection();
        const selectedItems = this.selectedItems();
        items.forEach((item_i) => {
            if (selectedItems.includes(item_i)) {
                item_i.selected = false;
            }
        });
        this.endSelection();
    }
    #clearSelection() {
        this.beginSelection();
        const selectedItems = this.selectedItems();
        selectedItems.forEach((item_i) => {
            if (item_i.selected) {
                item_i.selected = false;
            }
        });
        this.endSelection();
    }
    #setActiveItem(item) {
        const { activeItem, items } = this;
        if (activeItem !== null && activeItem !== item) {
            activeItem.active = false;
            activeItem.tabIndex = -1;
        }
        if (item !== null) {
            item.active = true;
            item.tabIndex = 0;
        }
    }
    #setDropTargetItem(item) {
        const { dropTargetItem } = this;
        if (dropTargetItem !== null && dropTargetItem !== item) {
            dropTargetItem.droptarget = false;
        }
        if (item !== null) {
            this.droptarget = true;
            item.droptarget = true;
        }
        else {
            this.droptarget = false;
        }
    }
    #firstItem() {
        const walker = this.#walker;
        const { root } = walker;
        walker.currentNode = root;
        return walker.firstChild();
    }
    #lastItem() {
        const walker = this.#walker;
        const { root } = walker;
        walker.currentNode = root;
        return walker.lastChild();
    }
    #previousItem(item) {
        const walker = this.#walker;
        walker.currentNode = item;
        const previousItem = walker.previousNode();
        return previousItem;
    }
    #nextItem(item) {
        const walker = this.#walker;
        walker.currentNode = item;
        const nextItem = walker.nextNode();
        return nextItem;
    }
    #handleContextMenuEvent(event) {
        const { target } = event;
        if (target instanceof _ListItem__WEBPACK_IMPORTED_MODULE_2__.HTMLEListItemElement) {
            const selectedItems = this.selectedItems();
            if (!selectedItems.includes(target)) {
                this.#setSelection(target);
            }
            target.focus({ preventScroll: true });
            event.preventDefault();
        }
    }
    #handleDragEndEvent() {
        this.#setDropTargetItem(null);
    }
    #handleDragEnterEvent(event) {
        const { target } = event;
        if (target instanceof _ListItem__WEBPACK_IMPORTED_MODULE_2__.HTMLEListItemElement) {
            this.#setDropTargetItem(target);
        }
        event.preventDefault();
    }
    #handleDragOverEvent(event) {
        event.preventDefault();
    }
    #handleDragLeaveEvent(event) {
        const { relatedTarget } = event;
        if (relatedTarget instanceof Element) {
            const parentItem = relatedTarget.closest("e-listitem");
            if (!parentItem) {
                let rootNode = relatedTarget;
                while (!(rootNode instanceof _ListItem__WEBPACK_IMPORTED_MODULE_2__.HTMLEListItemElement || rootNode instanceof Document)) {
                    rootNode = rootNode.getRootNode();
                    if (rootNode instanceof ShadowRoot) {
                        rootNode = rootNode.host;
                    }
                }
                if (rootNode instanceof Document) {
                    this.#setDropTargetItem(null);
                }
            }
        }
    }
    #handleDragStartEvent(event) {
        const { target } = event;
        if (target instanceof _ListItem__WEBPACK_IMPORTED_MODULE_2__.HTMLEListItemElement) {
            const selectedItems = this.selectedItems();
            if (!selectedItems.includes(target)) {
                this.#setSelection(target);
            }
        }
    }
    #handleDropEvent() {
        this.#setDropTargetItem(null);
    }
    #handleFocusEvent(event) {
        const { relatedTarget } = event;
        const { activeItem } = this;
        if (activeItem && relatedTarget !== activeItem) {
            activeItem.focus();
        }
    }
    #handleFocusInEvent(event) {
        const { target } = event;
        if (target instanceof _ListItem__WEBPACK_IMPORTED_MODULE_2__.HTMLEListItemElement) {
            this.#setActiveItem(target);
        }
    }
    #handleKeyDownEvent(event) {
        const { key } = event;
        const { activeItem } = this;
        switch (key) {
            case "a": {
                const { ctrlKey } = event;
                if (ctrlKey) {
                    const walker = this.#walker;
                    const { root } = walker;
                    const firstItem = (walker.currentNode = walker.parentNode() ?? root, walker.firstChild());
                    const lastItem = (walker.currentNode = walker.parentNode() ?? root, walker.lastChild());
                    const range = this.#getItemsRange(firstItem, lastItem);
                    if (range) {
                        this.#setSelection(...range);
                    }
                }
                event.preventDefault();
                break;
            }
            case "ArrowUp": {
                if (activeItem) {
                    const previousItem = this.#previousItem(activeItem);
                    if (previousItem) {
                        previousItem.focus({ preventScroll: true });
                        const { shiftKey } = event;
                        if (shiftKey) {
                            previousItem.selected ?
                                this.#removeFromSelection(previousItem) :
                                this.#addToSelection(previousItem);
                        }
                    }
                }
                else {
                    const firstItem = this.#firstItem();
                    if (firstItem) {
                        firstItem.focus({ preventScroll: true });
                    }
                }
                event.stopPropagation();
                break;
            }
            case "ArrowDown": {
                if (activeItem) {
                    const nextItem = this.#nextItem(activeItem);
                    if (nextItem) {
                        nextItem.focus({ preventScroll: true });
                        const { shiftKey } = event;
                        if (shiftKey) {
                            nextItem.selected ?
                                this.#removeFromSelection(nextItem) :
                                this.#addToSelection(nextItem);
                        }
                    }
                }
                else {
                    const lastItem = this.#lastItem();
                    if (lastItem) {
                        lastItem.focus({ preventScroll: true });
                    }
                }
                event.stopPropagation();
                break;
            }
            case "Home": {
                const firstItem = this.#firstItem();
                if (firstItem) {
                    firstItem.focus({ preventScroll: true });
                }
                event.stopPropagation();
                break;
            }
            case "End": {
                const lastItem = this.#lastItem();
                if (lastItem) {
                    lastItem.focus({ preventScroll: true });
                }
                event.stopPropagation();
                break;
            }
            case "Enter": {
                const { activeItem } = this;
                if (activeItem) {
                    this.#setSelection(activeItem);
                    activeItem.click();
                }
                event.stopPropagation();
                break;
            }
            case "Escape": {
                this.#clearSelection();
                this.#setActiveItem(null);
                this.focus();
                event.stopPropagation();
                break;
            }
        }
    }
    #handleMouseDownEvent(event) {
        const { target, ctrlKey, shiftKey } = event;
        const selectedItems = this.selectedItems();
        if (target instanceof _ListItem__WEBPACK_IMPORTED_MODULE_2__.HTMLEListItemElement) {
            if (!shiftKey && !ctrlKey) {
                this.#setSelection(target);
            }
            else if (ctrlKey) {
                (!target.selected) ?
                    this.#addToSelection(target) :
                    this.#removeFromSelection(target);
                event.stopPropagation();
            }
            else if (shiftKey) {
                const lastSelectedItem = selectedItems[selectedItems.length - 1];
                if (lastSelectedItem) {
                    const range = this.#getItemsRange(lastSelectedItem, target);
                    if (range) {
                        if (selectedItems.includes(target)) {
                            this.#removeFromSelection(...range);
                        }
                        else {
                            this.#addToSelection(...range);
                        }
                    }
                }
                else {
                    this.#setSelection(target);
                }
                event.stopPropagation();
            }
        }
    }
    #handleSelectEvent() {
        if (!this.#onSelection) {
            this.dispatchEvent(new Event("selectionchange", { bubbles: true }));
        }
    }
    #handleSlotChangeEvent(event) {
        const { target } = event;
        const assignedItems = target
            .assignedElements()
            .filter(element_i => element_i instanceof _ListItem__WEBPACK_IMPORTED_MODULE_2__.HTMLEListItemElement);
        assignedItems.forEach((item_i, i) => {
            item_i.posinset = i;
        });
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEListElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEListElementBase.prototype, "droptarget", void 0);
HTMLEListElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-list"
    })
], HTMLEListElementBase);
var HTMLEListElement = HTMLEListElementBase;
//# sourceMappingURL=List.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/lists/ListItem.js":
/*!***********************************************************!*\
  !*** ../editor/lib/elements/containers/lists/ListItem.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEListItemElement": () => (/* binding */ HTMLEListItemElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _menus_Menu__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../menus/Menu */ "../editor/lib/elements/containers/menus/Menu.js");
/* harmony import */ var _toolbars_ToolBar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../toolbars/ToolBar */ "../editor/lib/elements/containers/toolbars/ToolBar.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





var shadowTemplate;
var style;
let HTMLEListItemElementBase = class HTMLEListItemElementBase extends HTMLElement {
    get badge() {
        return this.#badge;
    }
    get toolbar() {
        return this.#toolbar;
    }
    get menu() {
        return this.#menu;
    }
    #badge;
    #toolbar;
    #menu;
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot"));
        style = /*css*/ `
            :host {
                display: flex;
                user-select: none;
                line-height: 22px;
            }
            
            :host([droptarget]) {
                background-color: var(--theme-droptarget-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_DROPTARGET_ITEM_COLOR});
            }
            
            :host(:hover) {
                background-color: var(--theme-hovered-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_HOVERED_ITEM_COLOR});
            }
            
            :host([active]) {
                outline: 1px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
                outline-offset: -1px;
            }
            
            :host(:focus) {
                background-color: var(--theme-focused-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_COLOR});
            }
            
            :host([selected]) {
                background-color: var(--theme-selected-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_SELECTED_ITEM_COLOR});
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        this.#badge = null;
        this.#menu = null;
        this.#toolbar = null;
        shadowRoot.addEventListener("slotchange", this.#handleSlotChangeEvent.bind(this));
    }
    connectedCallback() {
        const { tabIndex } = this;
        this.tabIndex = tabIndex;
    }
    attributeChangedCallback(name, oldValue, newValue) {
        switch (name) {
            case "selected": {
                this.dispatchEvent(new Event("select", { bubbles: true }));
                break;
            }
            case "label": {
                const { shadowRoot } = this;
                const labelPart = shadowRoot.querySelector("[part=label]");
                if (labelPart) {
                    labelPart.textContent = newValue;
                }
                break;
            }
        }
    }
    #handleSlotChangeEvent(event) {
        const { target } = event;
        const { name: slotName } = target;
        switch (slotName) {
            case "toolbar": {
                const element = target.assignedElements()[0];
                this.#toolbar = element instanceof _toolbars_ToolBar__WEBPACK_IMPORTED_MODULE_3__.HTMLEToolBarElement ? element : null;
                break;
            }
            case "badge": {
                const element = target.assignedElements()[0];
                this.#badge = element instanceof HTMLSpanElement ? element : null;
                break;
            }
            case "menu": {
                const element = target.assignedElements()[0];
                this.#menu = element instanceof _menus_Menu__WEBPACK_IMPORTED_MODULE_2__.HTMLEMenuElement ? element : null;
                break;
            }
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEListItemElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Number })
], HTMLEListItemElementBase.prototype, "posinset", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, observed: true })
], HTMLEListItemElementBase.prototype, "label", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEListItemElementBase.prototype, "droptarget", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEListItemElementBase.prototype, "active", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean, observed: true })
], HTMLEListItemElementBase.prototype, "selected", void 0);
HTMLEListItemElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-listitem"
    })
], HTMLEListItemElementBase);
var HTMLEListItemElement = HTMLEListItemElementBase;
//# sourceMappingURL=ListItem.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/lists/ListItemGroup.js":
/*!****************************************************************!*\
  !*** ../editor/lib/elements/containers/lists/ListItemGroup.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEListItemGroupElement": () => (/* binding */ HTMLEListItemGroupElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _ListItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ListItem */ "../editor/lib/elements/containers/lists/ListItem.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var shadowTemplate;
var style;
let HTMLEListItemGroupElementBase = class HTMLEListItemGroupElementBase extends HTMLElement {
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot"));
        style = /*css*/ `
            :host {
                display: block;
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        shadowRoot.addEventListener("slotchange", this.#handleSlotChangeEvent.bind(this));
    }
    #handleSlotChangeEvent(event) {
        const { target } = event;
        const assignedItems = target
            .assignedElements()
            .filter(element_i => element_i instanceof _ListItem__WEBPACK_IMPORTED_MODULE_1__.HTMLEListItemElement);
        assignedItems.forEach((item_i, i) => {
            item_i.posinset = i;
        });
    }
};
HTMLEListItemGroupElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-listitemgroup"
    })
], HTMLEListItemGroupElementBase);
var HTMLEListItemGroupElement = HTMLEListItemGroupElementBase;
//# sourceMappingURL=ListItemGroup.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/lists/index.js":
/*!********************************************************!*\
  !*** ../editor/lib/elements/containers/lists/index.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEListElement": () => (/* reexport safe */ _List__WEBPACK_IMPORTED_MODULE_0__.HTMLEListElement),
/* harmony export */   "HTMLEListItemElement": () => (/* reexport safe */ _ListItem__WEBPACK_IMPORTED_MODULE_1__.HTMLEListItemElement),
/* harmony export */   "HTMLEListItemGroupElement": () => (/* reexport safe */ _ListItemGroup__WEBPACK_IMPORTED_MODULE_2__.HTMLEListItemGroupElement)
/* harmony export */ });
/* harmony import */ var _List__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./List */ "../editor/lib/elements/containers/lists/List.js");
/* harmony import */ var _ListItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ListItem */ "../editor/lib/elements/containers/lists/ListItem.js");
/* harmony import */ var _ListItemGroup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ListItemGroup */ "../editor/lib/elements/containers/lists/ListItemGroup.js");






//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/menus/Menu.js":
/*!*******************************************************!*\
  !*** ../editor/lib/elements/containers/menus/Menu.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EMenu": () => (/* binding */ EMenu),
/* harmony export */   "HTMLEMenuElement": () => (/* binding */ HTMLEMenuElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _MenuItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MenuItem */ "../editor/lib/elements/containers/menus/MenuItem.js");
/* harmony import */ var _MenuItemGroup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MenuItemGroup */ "../editor/lib/elements/containers/menus/MenuItemGroup.js");
/* harmony import */ var _Snippets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Snippets */ "../editor/lib/elements/Snippets.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var HTMLEMenuElementBase_1;








var shadowTemplate;
var style;
var toggleAnimations;
var HIDE_DELAY_MS = 200;
var SHOW_DELAY_MS = 400;
let HTMLEMenuElementBase = HTMLEMenuElementBase_1 = class HTMLEMenuElementBase extends HTMLElement {
    items() {
        return Array.from(this.querySelectorAll(":is(:scope, :scope > e-menuitemgroup) > e-menuitem"));
    }
    get activeIndex() {
        return this.#activeIndex;
    }
    get activeItem() {
        const { activeIndex } = this;
        return (this.querySelector(":is(:scope, :scope > e-menuitemgroup) > e-menuitem:focus-within") ?? activeIndex > -1) ? this.items()[activeIndex] ?? null : null;
    }
    #walker;
    #activeIndex;
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot"));
        style = /*css*/ `
            :host {
                display: flex;
                flex-direction: column;
            
                padding: 3px;
                background-color: white;
                width: max-content;
                box-sizing: border-box;
            
                -webkit-box-shadow: rgba(0, 0, 0, 0.2) 0 1px 3px;
                box-shadow: rgba(0, 0, 0, 0.2) 0 1px 3px;
            }
            
            :host([contextual]) {
                z-index: 1;
                position: absolute;
            }
        `;
        toggleAnimations = new WeakMap();
    }
    constructor() {
        super();
        this.#activeIndex = -1;
        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this));
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        this.addEventListener("click", this.#handleClickEvent.bind(this));
        this.addEventListener("mouseover", this.#handleMouseOverEvent.bind(this));
        this.addEventListener("mouseout", this.#handleMouseOutEvent.bind(this));
        this.addEventListener("focusin", this.#handleFocusInEvent.bind(this));
        this.addEventListener("focusout", this.#handleFocusOutEvent.bind(this));
        this.addEventListener("keydown", this.#handleKeyDownEvent.bind(this));
    }
    connectedCallback() {
        const tabindex = this.getAttribute("tabindex");
        this.tabIndex = tabindex !== null ? parseInt(tabindex) : -1;
    }
    positionContextual(x, y) {
        const { style } = this;
        const { width: menuWidth, height: menuHeight } = this.getBoundingClientRect();
        const { scrollX, scrollY } = window;
        const left = x + scrollX;
        const top = y + scrollY;
        const { clientWidth, clientHeight } = document.body;
        const overflowX = left + menuWidth - clientWidth;
        const overflowY = top + menuHeight - clientHeight;
        style.setProperty("left", `${overflowX > 0 ? left - menuWidth : left}px`);
        style.setProperty("top", `${overflowY > 0 ? top - menuHeight : top}px`);
    }
    #collapseSubmenus() {
        this.querySelectorAll(":is(:scope, :scope > e-menuitemgroup) > e-menuitem[expanded]")
            .forEach((item_i) => {
            item_i.collapse();
        });
    }
    #nearestItem(target) {
        return Array.from(this.querySelectorAll(":is(:scope, :scope > e-menuitemgroup) > e-menuitem")).find(item_i => item_i.contains(target)) ?? null;
    }
    #walkerNodeFilter(node) {
        if (node instanceof _MenuItem__WEBPACK_IMPORTED_MODULE_1__.HTMLEMenuItemElement) {
            return NodeFilter.FILTER_ACCEPT;
        }
        if (node instanceof _MenuItemGroup__WEBPACK_IMPORTED_MODULE_2__.HTMLEMenuItemGroupElement) {
            return NodeFilter.FILTER_SKIP;
        }
        return NodeFilter.FILTER_REJECT;
    }
    firstItem() {
        const walker = this.#walker;
        walker.currentNode = walker.root;
        return walker.firstChild();
    }
    #lastItem() {
        const walker = this.#walker;
        walker.currentNode = walker.root;
        return walker.lastChild();
    }
    #previousItem(item) {
        const walker = this.#walker;
        walker.currentNode = item;
        return walker.previousNode();
    }
    #nextItem(item) {
        const walker = this.#walker;
        walker.currentNode = item;
        return walker.nextNode();
    }
    #firstChildItem(item) {
        const { menu } = item;
        return menu instanceof HTMLEMenuElementBase_1 ?
            menu.firstItem() :
            null;
    }
    #setActiveItem(item) {
        if (item !== null) {
            this.#activeIndex = this.items().indexOf(item);
        }
    }
    #handleClickEvent(event) {
        const { target } = event;
        const targetItem = target.closest("e-menuitem");
        if (targetItem) {
            const { type, checked } = targetItem;
            switch (type) {
                case "checkbox": {
                    targetItem.checked = !checked;
                    break;
                }
                case "radio": {
                    const { name, value } = targetItem;
                    targetItem.checked = true;
                    this.querySelectorAll(`:is(:scope, :scope > e-menuitemgroup) > e-menuitem[type=radio][name=${name}]`)
                        .forEach((radio_i) => {
                        radio_i.checked = radio_i.value == value;
                    });
                    break;
                }
                case "menu":
                case "submenu": {
                    targetItem.toggle();
                    break;
                }
            }
        }
        event.stopPropagation();
    }
    #handleFocusInEvent(event) {
        const { target } = event;
        if (target instanceof _MenuItem__WEBPACK_IMPORTED_MODULE_1__.HTMLEMenuItemElement) {
            const nearestItem = this.#nearestItem(target);
            if (nearestItem) {
                this.#setActiveItem(nearestItem);
            }
        }
    }
    #handleFocusOutEvent(event) {
        const { relatedTarget } = event;
        const lostFocusWithin = !this.contains(relatedTarget);
        if (lostFocusWithin) {
            const { contextual } = this;
            if (contextual) {
                try {
                    this.remove();
                }
                catch (error) { }
                ;
            }
            else {
                const { activeItem } = this;
                if (activeItem?.expanded) {
                    activeItem.collapse();
                }
                this.#setActiveItem(null);
            }
        }
    }
    #handleKeyDownEvent(event) {
        const { key } = event;
        const { activeItem } = this;
        switch (key) {
            case "ArrowUp": {
                const previousItem = activeItem ?
                    this.#previousItem(activeItem) ?? this.#lastItem() :
                    this.firstItem();
                previousItem?.focus({ preventScroll: true });
                event.stopPropagation();
                break;
            }
            case "ArrowDown": {
                const nextItem = activeItem ?
                    this.#nextItem(activeItem) ?? this.firstItem() :
                    this.firstItem();
                nextItem?.focus({ preventScroll: true });
                event.stopPropagation();
                break;
            }
            case "Home": {
                const firstItem = this.firstItem();
                firstItem?.focus({ preventScroll: true });
                event.stopPropagation();
                break;
            }
            case "End": {
                const lastItem = this.#lastItem();
                lastItem?.focus({ preventScroll: true });
                event.stopPropagation();
                break;
            }
            case "Enter":
            case " ": {
                if (activeItem) {
                    const { type } = activeItem;
                    switch (type) {
                        case "menu":
                        case "submenu": {
                            activeItem.expand();
                            if (activeItem.expanded) {
                                const firstChildItem = this.#firstChildItem(activeItem);
                                firstChildItem?.focus({ preventScroll: true });
                            }
                            break;
                        }
                        default: {
                            activeItem.click();
                            break;
                        }
                    }
                    event.stopPropagation();
                }
                break;
            }
            case "Escape": {
                if (activeItem) {
                    const isClosestTargetMenu = event.composedPath().find(target_i => target_i instanceof HTMLEMenuElement) == this;
                    if (!isClosestTargetMenu) {
                        activeItem.collapse();
                        activeItem.focus({ preventScroll: true });
                        event.stopPropagation();
                    }
                    else {
                        const { contextual } = this;
                        if (contextual) {
                            this.blur();
                            this.dispatchEvent(new Event("close", { bubbles: true }));
                            event.stopPropagation();
                        }
                    }
                }
                break;
            }
            case "ArrowLeft": {
                if (activeItem) {
                    const isClosestTargetMenu = event.composedPath().find(target_i => target_i instanceof HTMLEMenuElement) == this;
                    if (!isClosestTargetMenu) {
                        activeItem.collapse();
                        activeItem.focus({ preventScroll: true });
                        event.stopPropagation();
                    }
                }
                break;
            }
            case "ArrowRight": {
                if (activeItem) {
                    const { type } = activeItem;
                    switch (type) {
                        case "submenu": {
                            if (!activeItem.expanded) {
                                activeItem.expand();
                                const firstChildItem = this.#firstChildItem(activeItem);
                                firstChildItem?.focus({ preventScroll: true });
                                event.stopPropagation();
                            }
                            break;
                        }
                    }
                }
                break;
            }
        }
    }
    #handleMouseOutEvent(event) {
        const { target, relatedTarget } = event;
        if (target instanceof _MenuItem__WEBPACK_IMPORTED_MODULE_1__.HTMLEMenuItemElement) {
            const nearestItem = this.#nearestItem(target);
            if (nearestItem !== null) {
                if (nearestItem.type == "submenu" &&
                    !nearestItem.expanded) {
                    toggleAnimations.get(nearestItem)?.cancel();
                }
                const isTargetClosestMenu = event.composedPath().find(target_i => target_i instanceof HTMLEMenuElement) == this;
                if (isTargetClosestMenu) {
                    const { activeItem } = this;
                    if (activeItem?.type == "submenu" &&
                        activeItem.expanded) {
                        let toggleAnimation = toggleAnimations.get(activeItem);
                        if (toggleAnimation) {
                            toggleAnimation.cancel();
                        }
                        toggleAnimation = activeItem.animate(null, {
                            duration: HIDE_DELAY_MS
                        });
                        toggleAnimations.set(activeItem, toggleAnimation);
                        const { finished } = toggleAnimation;
                        finished
                            .then(() => {
                            activeItem.collapse();
                        })
                            .catch(() => undefined)
                            .finally(() => {
                            toggleAnimations.delete(activeItem);
                        });
                    }
                    const { left, right, top, bottom } = (() => {
                        const parentItem = this.closest("e-menuitem");
                        if (parentItem && !parentItem.expanded) {
                            parentItem.expand();
                            const menuRect = this.getBoundingClientRect();
                            parentItem.collapse();
                            return menuRect;
                        }
                        else {
                            return this.getBoundingClientRect();
                        }
                    })();
                    const { clientX, clientY } = event;
                    const intersectsWithMouse = !(left > clientX || right < clientX || top > clientY || bottom < clientY);
                    const containsRelatedTarget = this.contains(relatedTarget);
                    if (intersectsWithMouse && containsRelatedTarget) {
                        if (relatedTarget instanceof HTMLEMenuElement && relatedTarget !== this) {
                            relatedTarget.focus({ preventScroll: true });
                        }
                        else {
                            this.focus({ preventScroll: true });
                            this.#setActiveItem(null);
                        }
                    }
                    if (!intersectsWithMouse) {
                        this.focus({ preventScroll: true });
                        this.#setActiveItem(null);
                    }
                }
            }
        }
    }
    #handleMouseOverEvent(event) {
        const { target } = event;
        if (target instanceof _MenuItem__WEBPACK_IMPORTED_MODULE_1__.HTMLEMenuItemElement) {
            const nearestItem = this.#nearestItem(target);
            if (nearestItem !== null) {
                if (nearestItem.type === "submenu" && nearestItem.expanded) {
                    toggleAnimations.get(nearestItem)?.cancel();
                }
                const isTargetClosestMenu = event.composedPath().find(target_i => target_i instanceof HTMLEMenuElement) == this;
                if (isTargetClosestMenu) {
                    const { activeItem } = this;
                    if (activeItem?.type === "submenu" &&
                        activeItem.expanded &&
                        !activeItem.contains(target)) {
                        let toggleAnimation = toggleAnimations.get(activeItem);
                        if (toggleAnimation) {
                            toggleAnimation.cancel();
                        }
                        toggleAnimation = activeItem.animate(null, {
                            duration: SHOW_DELAY_MS
                        });
                        toggleAnimations.set(activeItem, toggleAnimation);
                        const { finished } = toggleAnimation;
                        finished
                            .then(() => {
                            activeItem.collapse();
                        })
                            .catch(() => undefined)
                            .finally(() => {
                            toggleAnimations.delete(activeItem);
                        });
                    }
                    this.#setActiveItem(nearestItem);
                    nearestItem.focus({ preventScroll: true });
                    if (nearestItem.type === "submenu") {
                        if (!nearestItem.expanded) {
                            let toggleAnimation = toggleAnimations.get(nearestItem);
                            if (toggleAnimation) {
                                toggleAnimation.cancel();
                            }
                            toggleAnimation = nearestItem.animate(null, {
                                duration: HIDE_DELAY_MS
                            });
                            toggleAnimations.set(nearestItem, toggleAnimation);
                            const { finished } = toggleAnimation;
                            finished
                                .then(() => {
                                const { activeItem } = this;
                                this.#collapseSubmenus();
                                if (activeItem) {
                                    toggleAnimations.get(activeItem)?.cancel();
                                    activeItem.expand();
                                    activeItem.menu?.focus({ preventScroll: true });
                                }
                            })
                                .catch(() => undefined)
                                .finally(() => {
                                toggleAnimations.delete(nearestItem);
                            });
                        }
                        else {
                            nearestItem.menu?.focus({ preventScroll: true });
                        }
                    }
                }
            }
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: String })
], HTMLEMenuElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: Boolean })
], HTMLEMenuElementBase.prototype, "contextual", void 0);
HTMLEMenuElementBase = HTMLEMenuElementBase_1 = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-menu"
    })
], HTMLEMenuElementBase);
var HTMLEMenuElement = HTMLEMenuElementBase;
var EMenu = (0,_Snippets__WEBPACK_IMPORTED_MODULE_3__.constructor)(HTMLEMenuElement.prototype, (init) => {
    const { name, children } = init;
    return (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menu", {
        attributes: {
            name: name,
            tabindex: -1,
        },
        children: children
    });
});
//# sourceMappingURL=Menu.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/menus/MenuBar.js":
/*!**********************************************************!*\
  !*** ../editor/lib/elements/containers/menus/MenuBar.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEMenuBarElement": () => (/* binding */ HTMLEMenuBarElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _MenuItem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MenuItem */ "../editor/lib/elements/containers/menus/MenuItem.js");
/* harmony import */ var _MenuItemGroup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MenuItemGroup */ "../editor/lib/elements/containers/menus/MenuItemGroup.js");
/* harmony import */ var _Menu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Menu */ "../editor/lib/elements/containers/menus/Menu.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};








var shadowTemplate;
var style;
let HTMLEMenuBarElementBase = class HTMLEMenuBarElementBase extends HTMLElement {
    #activeIndex;
    #walker;
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot"));
        style = /*css*/ `
            :host {
                position: relative;
                display: flex;
                flex-direction: row;
                width: max-content;
            }
            
            :host(:focus) {
                outline: 1px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
                outline-offset: -1px;
            }
        `;
    }
    constructor() {
        super();
        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this));
        this.#activeIndex = -1;
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        this.addEventListener("click", this.#handleClickEvent.bind(this));
        this.addEventListener("focus", this.#handleFocusEvent.bind(this));
        this.addEventListener("focusin", this.#handleFocusInEvent.bind(this));
        this.addEventListener("focusout", this.#handleFocusOutEvent.bind(this));
        this.addEventListener("mouseover", this.#handleMouseOverEvent.bind(this));
        this.addEventListener("keydown", this.#handleKeyDownEvent.bind(this));
    }
    connectedCallback() {
        const tabindex = this.getAttribute("tabindex");
        this.tabIndex = tabindex !== null ? parseInt(tabindex) : -1;
    }
    items() {
        return Array.from(this.querySelectorAll(":is(:scope, :scope > e-menuitemgroup) > e-menuitem"));
    }
    get activeIndex() {
        return this.#activeIndex;
    }
    get activeItem() {
        const { activeIndex } = this;
        return (this.querySelector(":is(:scope, :scope > e-menuitemgroup) > e-menuitem:focus-within") ?? activeIndex > -1) ? this.items()[activeIndex] ?? null : null;
    }
    #walkerNodeFilter(node) {
        if (node instanceof _MenuItem__WEBPACK_IMPORTED_MODULE_2__.HTMLEMenuItemElement && !(node.disabled || node.hidden)) {
            return NodeFilter.FILTER_ACCEPT;
        }
        if (node instanceof _MenuItemGroup__WEBPACK_IMPORTED_MODULE_3__.HTMLEMenuItemGroupElement) {
            return NodeFilter.FILTER_SKIP;
        }
        return NodeFilter.FILTER_REJECT;
    }
    firstItem() {
        const walker = this.#walker;
        walker.currentNode = walker.root;
        return walker.firstChild();
    }
    #lastItem() {
        const walker = this.#walker;
        walker.currentNode = walker.root;
        return walker.lastChild();
    }
    #previousItem(item) {
        const walker = this.#walker;
        walker.currentNode = item;
        return walker.previousSibling();
    }
    #nextItem(item) {
        const walker = this.#walker;
        walker.currentNode = item;
        return walker.nextSibling();
    }
    #firstChildItem(item) {
        const { menu } = item;
        if (menu) {
            const walker = this.#walker;
            walker.currentNode = menu;
            return walker.firstChild();
        }
        return null;
    }
    #setActiveItem(item) {
        const { activeItem, expanded } = this;
        if (activeItem !== null && activeItem !== item) {
            activeItem.collapse();
        }
        if (item !== null) {
            if (expanded) {
                item.expand();
            }
            this.#activeIndex = this.items().indexOf(item);
        }
        else {
            this.#activeIndex = -1;
        }
    }
    get #items() {
        return Array.from(this.querySelectorAll(":is(:scope, :scope > e-menuitemgroup) > e-menuitem"));
    }
    #isClosestMenu(target) {
        return target.closest(":is(e-menubar, e-menu)") == this;
    }
    #nearestItem(target) {
        return this.#items.find(item_i => item_i.contains(target)) ?? null;
    }
    #handleFocusEvent(event) {
        const { relatedTarget } = event;
        const { activeItem } = this;
        if (!this.contains(relatedTarget)) {
            (activeItem ?? this.firstItem())?.focus();
        }
    }
    #handleFocusInEvent(event) {
        const { target } = event;
        if (target instanceof Element) {
            const nearestItem = this.#nearestItem(target);
            this.#setActiveItem(nearestItem);
            this.tabIndex = -1;
        }
    }
    #handleFocusOutEvent(event) {
        const { target, relatedTarget } = event;
        if (target instanceof HTMLElement) {
            const nearestItem = this.#nearestItem(target);
            if (nearestItem) {
                nearestItem.collapse();
            }
        }
        const lostFocusWithin = !this.contains(relatedTarget);
        if (lostFocusWithin) {
            this.expanded = false;
            this.tabIndex = 0;
        }
    }
    #handleMouseOverEvent(event) {
        const { target } = event;
        const { expanded, activeItem } = this;
        if (target instanceof _MenuItem__WEBPACK_IMPORTED_MODULE_2__.HTMLEMenuItemElement) {
            const isClosestMenu = this.#isClosestMenu(target);
            if (isClosestMenu && target !== activeItem && expanded) {
                const { menu } = target;
                if (menu) {
                    target.expand();
                    menu.focus({ preventScroll: true });
                }
            }
        }
    }
    #handleClickEvent(event) {
        const { target } = event;
        const { expanded, activeItem } = this;
        if (target instanceof _MenuItem__WEBPACK_IMPORTED_MODULE_2__.HTMLEMenuItemElement) {
            const isClosestMenu = this.#isClosestMenu(target);
            if (isClosestMenu) {
                const isExpanded = !expanded;
                this.expanded = isExpanded;
                if (isExpanded) {
                    if (activeItem && !activeItem.expanded) {
                        activeItem.expand();
                    }
                    const { menu } = target;
                    menu?.focus({ preventScroll: true });
                }
                else {
                    if (activeItem) {
                        activeItem.collapse();
                        activeItem.blur();
                    }
                }
            }
        }
    }
    #handleKeyDownEvent(event) {
        const { key } = event;
        const { expanded } = this;
        let { activeItem } = this;
        switch (key) {
            case "ArrowLeft": {
                const previousItem = activeItem ?
                    this.#previousItem(activeItem) ?? this.#lastItem() :
                    this.firstItem();
                previousItem?.focus({ preventScroll: true });
                ({ activeItem } = this);
                if (expanded && activeItem) {
                    const firstChildItem = this.#firstChildItem(activeItem);
                    firstChildItem?.focus({ preventScroll: true });
                }
                break;
            }
            case "ArrowRight": {
                const nextItem = activeItem ?
                    this.#nextItem(activeItem) ?? this.firstItem() :
                    this.#lastItem();
                nextItem?.focus({ preventScroll: true });
                ({ activeItem } = this);
                if (expanded && activeItem) {
                    const firstChildItem = this.#firstChildItem(activeItem);
                    firstChildItem?.focus({ preventScroll: true });
                }
                break;
            }
            case "Enter":
            case " ": {
                if (activeItem) {
                    this.expanded = !expanded;
                    if (!expanded) {
                        const firstChildItem = this.#firstChildItem(activeItem);
                        firstChildItem?.focus({ preventScroll: true });
                    }
                }
                break;
            }
            case "Escape": {
                if (expanded) {
                    this.expanded = false;
                    if (activeItem) {
                        activeItem.collapse();
                        activeItem.focus({ preventScroll: true });
                    }
                }
                else {
                    this.focus({ preventScroll: true });
                }
                event.stopPropagation();
                break;
            }
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEMenuBarElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEMenuBarElementBase.prototype, "expanded", void 0);
HTMLEMenuBarElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-menubar"
    })
], HTMLEMenuBarElementBase);
var HTMLEMenuBarElement = HTMLEMenuBarElementBase;
//# sourceMappingURL=MenuBar.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/menus/MenuButton.js":
/*!*************************************************************!*\
  !*** ../editor/lib/elements/containers/menus/MenuButton.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EMenuButton": () => (/* binding */ EMenuButton),
/* harmony export */   "HTMLEMenuButtonElement": () => (/* binding */ HTMLEMenuButtonElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _Menu__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Menu */ "../editor/lib/elements/containers/menus/Menu.js");
/* harmony import */ var _MenuItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MenuItem */ "../editor/lib/elements/containers/menus/MenuItem.js");
/* harmony import */ var _MenuItemGroup__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MenuItemGroup */ "../editor/lib/elements/containers/menus/MenuItemGroup.js");
/* harmony import */ var _Snippets__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../Snippets */ "../editor/lib/elements/Snippets.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};








var shadowTemplate;
var style;
let HTMLEMenuButtonElementBase = class HTMLEMenuButtonElementBase extends HTMLElement {
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot"), (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot", {
            attributes: {
                name: "menu"
            }
        }));
        style = /*css*/ `
            :host {
                position: relative;
                display: inline-block;
                padding: 2px;
                line-height: 18px;
                user-select: none;
                white-space: nowrap;
                cursor: pointer;
            }
            
            :host(:focus) {
                outline: 1px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
                outline-offset: -1px;
            }
            
            :host(:focus-within:not(:focus)) {
                background-color: var(--theme-focused-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_COLOR});
            }
            
            :host(:hover:not(:focus-within)) {
                background-color: var(--theme-hovered-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_HOVERED_ITEM_COLOR});
            }
            
            :host([disabled]) {
                color: lightgray;
            }
            
            ::slotted([slot="menu"]) {
                z-index: 1;
                position: absolute;
                color: initial;
            }
            
            :host(:not([expanded])) ::slotted([slot="menu"]) {
                opacity: 0;
                pointer-events: none;
            }
            
            :host::after {
                display: inline-block;
                text-align: center;
                width: 18px;
                height: 18px;
                content: "▾";
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        this.addEventListener("keydown", this.#handleKeyDownEvent.bind(this));
        this.addEventListener("click", this.#handleClickEvent.bind(this));
        this.addEventListener("focusout", this.#handleFocusOutEvent.bind(this));
    }
    connectedCallback() {
        const tabindex = this.getAttribute("tabindex");
        this.tabIndex = tabindex !== null ? parseInt(tabindex) : -1;
    }
    toggle(force) {
        const { expanded } = this;
        const expand = force ?? !expanded;
        expand ? this.expand() : this.collapse();
    }
    expand() {
        const { expanded } = this;
        if (!expanded) {
            this.expanded = true;
            this.#positionMenu();
        }
    }
    collapse() {
        const { expanded } = this;
        if (expanded) {
            this.expanded = false;
        }
    }
    #positionMenu() {
        const { menu } = this;
        if (menu !== null) {
            const { width, height } = this.getBoundingClientRect();
            const { style: menuStyle } = menu;
            const { width: menuWidth, height: menuHeight } = menu.getBoundingClientRect();
            const { clientWidth, clientHeight } = document.body;
            const { offsetLeft, offsetTop } = this;
            const overflowX = offsetLeft + width + menuWidth - clientWidth;
            const overflowY = offsetTop + menuHeight - clientHeight;
            menuStyle.setProperty("left", `${overflowX > 0 ?
                width - menuWidth :
                0}px`);
            menuStyle.setProperty("top", `${overflowY > 0 ?
                -menuHeight :
                height}px`);
        }
    }
    #handleClickEvent(event) {
        const { target } = event;
        const { menu } = this;
        if (menu && !menu.contains(target)) {
            this.toggle();
            const { expanded } = this;
            if (expanded) {
                menu?.focus({ preventScroll: true });
            }
        }
    }
    #handleFocusOutEvent(event) {
        const { relatedTarget } = event;
        const lostFocusWithin = !this.contains(relatedTarget);
        if (lostFocusWithin) {
            this.collapse();
        }
    }
    #handleKeyDownEvent(event) {
        const { key } = event;
        const { expanded } = this;
        switch (key) {
            case "ArrowDown":
            case "Enter":
                if (!expanded) {
                    this.expand();
                    this.firstItem?.focus({ preventScroll: true });
                    event.stopPropagation();
                }
                break;
            case "Escape":
                if (expanded) {
                    this.collapse();
                }
                this.focus({ preventScroll: true });
                event.stopPropagation();
                break;
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.QueryProperty)({ selector: ":scope > e-menu[slot=menu]" })
], HTMLEMenuButtonElementBase.prototype, "menu", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.QueryProperty)({ selector: ":scope > e-menu[slot=menu] e-menuitem" })
], HTMLEMenuButtonElementBase.prototype, "firstItem", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEMenuButtonElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEMenuButtonElementBase.prototype, "disabled", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEMenuButtonElementBase.prototype, "expanded", void 0);
HTMLEMenuButtonElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-menubutton"
    })
], HTMLEMenuButtonElementBase);
var HTMLEMenuButtonElement = HTMLEMenuButtonElementBase;
var EMenuButton = (0,_Snippets__WEBPACK_IMPORTED_MODULE_5__.constructor)(HTMLEMenuButtonElement.prototype, (init) => {
    const { menu } = init;
    menu.slot = "menu";
    return (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("e-menubutton", {
        attributes: {
            tabindex: -1
        },
        children: [menu]
    });
});
//# sourceMappingURL=MenuButton.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/menus/MenuItem.js":
/*!***********************************************************!*\
  !*** ../editor/lib/elements/containers/menus/MenuItem.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EMenuItem": () => (/* binding */ EMenuItem),
/* harmony export */   "HTMLEMenuItemElement": () => (/* binding */ HTMLEMenuItemElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _Snippets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Snippets */ "../editor/lib/elements/Snippets.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





var shadowTemplate;
var style;
let HTMLEMenuItemElementBase = class HTMLEMenuItemElementBase extends HTMLElement {
    internals;
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("span", {
            attributes: {
                part: "icon"
            }
        }), (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("span", {
            attributes: {
                part: "label"
            },
            children: [
                (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot")
            ]
        }), (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("span", {
            attributes: {
                part: "arrow"
            }
        }), (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot", {
            attributes: {
                name: "menu"
            }
        }));
        style = /*css*/ `
            :host {
                display: flex;
                user-select: none;
                white-space: nowrap;
                box-sizing: border-box;
            }
            
            :host([disabled]) {
                opacity: 0.38;
                pointer-events: none;
            }
            
            :host(:focus-within) {
                background-color: ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_COLOR};
            }
            
            :host(:is([type="menu"], [type="submenu"])) ::slotted([slot="menu"]) {
                z-index: 1;
                position: absolute;
            }
            
            :host(:is([type="menu"], [type="submenu"]):not([expanded])) ::slotted([slot="menu"]) {
                width: 0;
                height: 0;
                padding: 0;
                opacity: 0;
                pointer-events: none;
                overflow: hidden;
            }
            
            :host([type="submenu"]) [part="icon"] {
                visibility: hidden;
            }
            
            :host([type="menu"]) [part="icon"],
            :host(:not([type="submenu"])) [part="arrow"] {
                display: none;
            }
            
            :host(:is([type="checkbox"], [type="radio"])[checked]) [part="icon"]::before {
                -webkit-mask-image: var(--theme-arrow-done-image, url(${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_CHECKED_IMAGE}));
                mask-image: var(--theme-arrow-done-image, url(${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_CHECKED_IMAGE}));
                background-color: black;
            }
            
            :host([type="submenu"]) [part="arrow"]::after {
                -webkit-mask-image: var(--theme-arrow-right-image, url(${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_ARROW_RIGHT_IMAGE}));
                mask-image: var(--theme-arrow-right-image, url(${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_ARROW_RIGHT_IMAGE}));
                background-color: black;
            }
            
            [part="icon"],
            [part="label"],
            [part="arrow"] {
                pointer-events: none;
            }
            
            [part="icon"] {
                flex: none;
                display: inline-block;
                width: 18px;
                height: 18px;
                padding: 2px;
                overflow: hidden;
                margin-right: 4px;
            }
            
            [part="label"] {
                flex: auto;
                line-height: 18px;
                padding: 2px;
                margin-left: 8px;
                margin-right: 8px;
            }
            
            :host(:is(:not([type]), [type="button"], [type="radio"], [type="checkbox"])[checked]) [part="icon"] {
                background-color: var(--theme-activated-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_ACTIVATED_ITEM_COLOR});
            }
            
            :host(:is(:not([type]), [type="button"], [type="radio"], [type="checkbox"])) [part="icon"]::before {
                display: inline-block;
                width: 18px;
                height: 18px;
                content: "";
                mask-size: 18px 18px;
                -webkit-mask-size: 18px 18px;

                mask-image: none;
                -webkit-mask-image: none;
                background-color: none;
            }
            
            [part="arrow"] {
                flex: none;
                display: inline-block;
                width: 18px;
                height: 18px;
                margin: 1px 4px 1px 1px;
            }
            
            [part="arrow"]::after {
                display: inline-block;
                width: 18px;
                height: 18px;
                margin: 1px;
                content: "";
                mask-size: 18px 18px;
                -webkit-mask-size: 18px 18px;

                mask-image: none;
                -webkit-mask-image: none;
                background-color: none;
            }

            :host(:hover):host-context(e-menubar:focus),
            :host(:hover):host-context(e-menubar:not(:focus-within)) {
                background-color: var(--theme-hovered-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_HOVERED_ITEM_COLOR});
            }
        `;
    }
    constructor() {
        super();
        const internals = this.attachInternals();
        this.internals = internals;
        internals.role = "menuitem";
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
    }
    connectedCallback() {
        const { tabIndex } = this;
        this.tabIndex = tabIndex;
    }
    attributeChangedCallback(attributeName, oldValue, newValue) {
        const { internals } = this;
        switch (attributeName) {
            case "type": {
                switch (newValue) {
                    case "checkbox":
                    case "radio": {
                        internals.role = `menuitem${newValue}`;
                        break;
                    }
                    default: {
                        internals.role = "menuitem";
                        break;
                    }
                }
                break;
            }
            case "checked": {
                internals.ariaChecked = String(newValue !== null);
                break;
            }
            case "disabled": {
                internals.ariaDisabled = String(newValue !== null);
                break;
            }
            case "expanded": {
                internals.ariaExpanded = String(newValue !== null);
                break;
            }
            case "label": {
                internals.ariaLabel = newValue;
                break;
            }
        }
    }
    toggle(force) {
        const { type, expanded } = this;
        switch (type) {
            case "menu":
            case "submenu": {
                const expand = force ?? !expanded;
                this.expanded = expand;
                if (expand) {
                    this.#positionMenu();
                }
                this.dispatchEvent(new Event("toggle", { bubbles: true }));
                break;
            }
        }
    }
    expand() {
        const { type, expanded } = this;
        switch (type) {
            case "menu":
            case "submenu": {
                if (!expanded) {
                    this.expanded = true;
                    this.#positionMenu();
                }
                break;
            }
        }
    }
    collapse() {
        const { type, expanded } = this;
        switch (type) {
            case "menu":
            case "submenu": {
                if (expanded) {
                    this.expanded = false;
                }
                break;
            }
        }
    }
    #positionMenu() {
        const { menu } = this;
        if (menu !== null) {
            const { width, height } = this.getBoundingClientRect();
            const { style: menuStyle } = menu;
            const { width: menuWidth, height: menuHeight } = menu.getBoundingClientRect();
            const { clientWidth, clientHeight } = document.body;
            const { type, offsetLeft, offsetTop } = this;
            const overflowX = offsetLeft + width + menuWidth - clientWidth;
            const overflowY = offsetTop + menuHeight - clientHeight;
            if (type === "menu") {
                menuStyle.setProperty("left", `${overflowX > 0 ?
                    offsetLeft + width - menuWidth :
                    offsetLeft}px`);
                menuStyle.setProperty("top", `${overflowY > 0 ?
                    offsetTop - menuHeight :
                    offsetTop + height}px`);
            }
            else {
                menuStyle.setProperty("left", `${overflowX > 0 ?
                    offsetLeft - menuWidth :
                    offsetLeft + width}px`);
                menuStyle.setProperty("top", `${overflowY > 0 ?
                    offsetTop + height - menuHeight :
                    offsetTop}px`);
            }
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.QueryProperty)({ selector: ":scope > e-menu[slot=menu]" })
], HTMLEMenuItemElementBase.prototype, "menu", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEMenuItemElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, observed: true })
], HTMLEMenuItemElementBase.prototype, "label", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEMenuItemElementBase.prototype, "value", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEMenuItemElementBase.prototype, "hotkey", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean, observed: true })
], HTMLEMenuItemElementBase.prototype, "disabled", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean, observed: true })
], HTMLEMenuItemElementBase.prototype, "checked", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean, observed: true })
], HTMLEMenuItemElementBase.prototype, "expanded", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEMenuItemElementBase.prototype, "overflown", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, defaultValue: "button", observed: true })
], HTMLEMenuItemElementBase.prototype, "type", void 0);
HTMLEMenuItemElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-menuitem"
    })
], HTMLEMenuItemElementBase);
var HTMLEMenuItemElement = HTMLEMenuItemElementBase;
var EMenuItem = (0,_Snippets__WEBPACK_IMPORTED_MODULE_2__.constructor)(HTMLEMenuItemElement.prototype, (init) => {
    const { label, name, type, value, trigger, menu } = init;
    if (menu) {
        menu.slot = "menu";
    }
    return (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("e-menuitem", {
        attributes: {
            tabindex: -1,
            title: label,
            name: name,
            value: value,
            type: type
        },
        children: menu ? [
            label,
            menu
        ] : [
            label
        ],
        listeners: {
            click: trigger
        }
    });
}, {
    button(init) {
        return new EMenuItem({
            ...init, type: "button"
        });
    },
    checkbox(init) {
        return new EMenuItem({
            ...init, type: "checkbox"
        });
    },
    radio(init) {
        return new EMenuItem({
            ...init, type: "radio"
        });
    },
    menu(init) {
        return new EMenuItem({
            ...init, type: "menu"
        });
    },
    submenu(init) {
        return new EMenuItem({
            ...init, type: "submenu"
        });
    }
});
//# sourceMappingURL=MenuItem.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/menus/MenuItemGroup.js":
/*!****************************************************************!*\
  !*** ../editor/lib/elements/containers/menus/MenuItemGroup.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EMenuItemGroup": () => (/* binding */ EMenuItemGroup),
/* harmony export */   "HTMLEMenuItemGroupElement": () => (/* binding */ HTMLEMenuItemGroupElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _Snippets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Snippets */ "../editor/lib/elements/Snippets.js");
/* harmony import */ var _MenuItem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MenuItem */ "../editor/lib/elements/containers/menus/MenuItem.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};






var shadowTemplate;
var style;
let HTMLEMenuItemGroupElementBase = class HTMLEMenuItemGroupElementBase extends HTMLElement {
    internals;
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("span", {
            attributes: {
                part: "label"
            }
        }), (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot"));
        style = /*css*/ `
            :host {
                display: flex;
                flex-direction: column;
            }
            
            [part="label"] {
                font-weight: bold;
            }
            
            :host([label]) [part="label"] {
                padding-bottom: 6px;
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        const internals = this.attachInternals();
        internals.role = "group";
        this.internals = internals;
    }
    attributeChangedCallback(name, oldValue, newValue) {
        const { internals } = this;
        switch (name) {
            case "label":
                internals.ariaLabel = newValue;
                break;
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: String })
], HTMLEMenuItemGroupElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: String, observed: true })
], HTMLEMenuItemGroupElementBase.prototype, "label", void 0);
HTMLEMenuItemGroupElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-menuitemgroup"
    })
], HTMLEMenuItemGroupElementBase);
var HTMLEMenuItemGroupElement = HTMLEMenuItemGroupElementBase;
var EMenuItemGroup = (0,_Snippets__WEBPACK_IMPORTED_MODULE_1__.constructor)(HTMLEMenuItemGroupElement.prototype, (init) => {
    const { name, items } = init;
    return (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitemgroup", {
        attributes: {
            name: name
        },
        children: items
    });
}, {
    radios: (init) => {
        const { name, items } = init;
        return (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitemgroup", {
            attributes: {
                name: name
            },
            children: items.map(({ label, value }) => new _MenuItem__WEBPACK_IMPORTED_MODULE_2__.EMenuItem({ name, label, type: "radio", value }))
        });
    }
});
//# sourceMappingURL=MenuItemGroup.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/menus/index.js":
/*!********************************************************!*\
  !*** ../editor/lib/elements/containers/menus/index.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEMenuBarElement": () => (/* reexport safe */ _MenuBar__WEBPACK_IMPORTED_MODULE_0__.HTMLEMenuBarElement),
/* harmony export */   "HTMLEMenuButtonElement": () => (/* reexport safe */ _MenuButton__WEBPACK_IMPORTED_MODULE_1__.HTMLEMenuButtonElement),
/* harmony export */   "HTMLEMenuElement": () => (/* reexport safe */ _Menu__WEBPACK_IMPORTED_MODULE_2__.HTMLEMenuElement),
/* harmony export */   "HTMLEMenuItemElement": () => (/* reexport safe */ _MenuItem__WEBPACK_IMPORTED_MODULE_3__.HTMLEMenuItemElement),
/* harmony export */   "HTMLEMenuItemGroupElement": () => (/* reexport safe */ _MenuItemGroup__WEBPACK_IMPORTED_MODULE_4__.HTMLEMenuItemGroupElement)
/* harmony export */ });
/* harmony import */ var _MenuBar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MenuBar */ "../editor/lib/elements/containers/menus/MenuBar.js");
/* harmony import */ var _MenuButton__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MenuButton */ "../editor/lib/elements/containers/menus/MenuButton.js");
/* harmony import */ var _Menu__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Menu */ "../editor/lib/elements/containers/menus/Menu.js");
/* harmony import */ var _MenuItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MenuItem */ "../editor/lib/elements/containers/menus/MenuItem.js");
/* harmony import */ var _MenuItemGroup__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MenuItemGroup */ "../editor/lib/elements/containers/menus/MenuItemGroup.js");










//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/status/StatusBar.js":
/*!*************************************************************!*\
  !*** ../editor/lib/elements/containers/status/StatusBar.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEStatusBarElement": () => (/* binding */ HTMLEStatusBarElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _StatusItem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StatusItem */ "../editor/lib/elements/containers/status/StatusItem.js");
/* harmony import */ var _StatusItemGroup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./StatusItemGroup */ "../editor/lib/elements/containers/status/StatusItemGroup.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};







var shadowTemplate;
var style;
let HTMLEStatusBarElementBase = class HTMLEStatusBarElementBase extends HTMLElement {
    get activeItem() {
        return this.querySelector("e-statusitem[active]");
    }
    items() {
        return Array.from(this.querySelectorAll(":is(:scope, :scope > e-statusitemgroup) > e-statusitem"));
    }
    #walker;
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot"));
        style = /*css*/ `
            :host {
                display: flex;
                flex-direction: row;
            }

            :host(:focus) {
                outline: 1px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
                outline-offset: -1px;
            }

            ::slotted(e-statusitem:not(:first-child)) {
                margin-left: 4px;
            }
        `;
    }
    constructor() {
        super();
        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#nodeFilter.bind(this));
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        this.addEventListener("contextmenu", this.#handleContextMenuEvent.bind(this));
        this.addEventListener("dblclick", this.#handleDblClickEvent.bind(this));
        this.addEventListener("focus", this.#handleFocusEvent.bind(this));
        this.addEventListener("focusin", this.#handleFocusInEvent.bind(this));
        this.addEventListener("focusout", this.#handleFocusOutEvent.bind(this));
        this.addEventListener("keydown", this.#handleKeyDownEvent.bind(this));
    }
    connectedCallback() {
        const { tabIndex } = this;
        this.tabIndex = tabIndex;
    }
    #nodeFilter(node) {
        if (node instanceof _StatusItem__WEBPACK_IMPORTED_MODULE_2__.HTMLEStatusItemElement) {
            return NodeFilter.FILTER_ACCEPT;
        }
        if (node instanceof _StatusItemGroup__WEBPACK_IMPORTED_MODULE_3__.HTMLEStatusItemGroupElement) {
            return NodeFilter.FILTER_SKIP;
        }
        return NodeFilter.FILTER_REJECT;
    }
    firstItem() {
        const walker = this.#walker;
        walker.currentNode = walker.root;
        return walker.firstChild();
    }
    #lastItem() {
        const walker = this.#walker;
        walker.currentNode = walker.root;
        return walker.lastChild();
    }
    #previousItem(item) {
        const walker = this.#walker;
        walker.currentNode = item;
        const previousItem = walker.previousSibling();
        return previousItem;
    }
    #nextItem(item) {
        const walker = this.#walker;
        walker.currentNode = item;
        return walker.nextSibling();
    }
    #setActiveItem(item) {
        const { activeItem } = this;
        if (activeItem !== null && activeItem !== item) {
            activeItem.active = false;
        }
        if (item !== null) {
            item.active = true;
        }
    }
    #handleContextMenuEvent(event) {
        event.stopPropagation();
    }
    #handleDblClickEvent(event) {
        event.stopPropagation();
    }
    #handleFocusEvent(event) {
        const { relatedTarget } = event;
        const { activeItem } = this;
        if (!this.contains(relatedTarget)) {
            (activeItem ?? this.firstItem())?.focus();
        }
    }
    #handleFocusInEvent(event) {
        const { target } = event;
        const targetItem = target.closest("e-statusitem");
        if (targetItem) {
            this.#setActiveItem(targetItem);
            this.tabIndex = -1;
        }
    }
    #handleFocusOutEvent(event) {
        const { relatedTarget } = event;
        const lostFocusWithin = !this.contains(relatedTarget);
        if (lostFocusWithin) {
            this.tabIndex = 0;
        }
    }
    #handleKeyDownEvent(event) {
        const { key } = event;
        const { activeItem } = this;
        switch (key) {
            case "Enter": {
                if (activeItem) {
                    activeItem.click();
                    event.stopPropagation();
                }
                break;
            }
            case "ArrowLeft": {
                if (activeItem) {
                    const previousItem = this.#previousItem(activeItem);
                    if (previousItem) {
                        previousItem.focus({ preventScroll: true });
                    }
                }
                else {
                    const firstItem = this.firstItem();
                    if (firstItem) {
                        firstItem.focus({ preventScroll: true });
                    }
                }
                event.stopPropagation();
                break;
            }
            case "ArrowRight": {
                if (activeItem) {
                    const nextItem = this.#nextItem(activeItem);
                    if (nextItem) {
                        nextItem.focus({ preventScroll: true });
                    }
                }
                else {
                    const lastItem = this.#lastItem();
                    if (lastItem) {
                        lastItem.focus({ preventScroll: true });
                    }
                }
                event.stopPropagation();
                break;
            }
            case "Home": {
                const firstItem = this.firstItem();
                if (firstItem) {
                    firstItem.focus({ preventScroll: true });
                }
                event.stopPropagation();
                break;
            }
            case "End": {
                const lastItem = this.#lastItem();
                if (lastItem) {
                    lastItem.focus({ preventScroll: true });
                }
                event.stopPropagation();
                break;
            }
            case "Escape": {
                this.focus({ preventScroll: true });
                event.stopPropagation();
                break;
            }
        }
    }
};
HTMLEStatusBarElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-statusbar"
    })
], HTMLEStatusBarElementBase);
var HTMLEStatusBarElement = HTMLEStatusBarElementBase;
//# sourceMappingURL=StatusBar.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/status/StatusItem.js":
/*!**************************************************************!*\
  !*** ../editor/lib/elements/containers/status/StatusItem.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EStatusItem": () => (/* binding */ EStatusItem),
/* harmony export */   "HTMLEStatusItemElement": () => (/* binding */ HTMLEStatusItemElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var shadowTemplate;
var style;
let HTMLEStatusItemElementBase = class HTMLEStatusItemElementBase extends HTMLElement {
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("span", {
            attributes: {
                part: "content"
            },
            children: (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot")
        }));
        style = /*css*/ `
            :host {
                display: flex;
                user-select: none;
                white-space: nowrap;
                cursor: pointer;
                line-height: 22px;
            }
            
            :host([disabled]) {
                opacity: 0.38;
                pointer-events: none;
            }
            
            :host(:hover) {
                background-color: var(--theme-hovered-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_HOVERED_ITEM_COLOR});
            }
            
            :host(:focus-within):host-context(e-statusbar:focus-within) {
                outline: 1px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
                outline-offset: -1px;
            }
            
            [part="content"] {
                padding: 0 4px;
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
    }
    connectedCallback() {
        const { tabIndex } = this;
        this.tabIndex = tabIndex;
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEStatusItemElementBase.prototype, "active", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEStatusItemElementBase.prototype, "name", void 0);
HTMLEStatusItemElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-statusitem"
    })
], HTMLEStatusItemElementBase);
var HTMLEStatusItemElement = HTMLEStatusItemElementBase;
var EStatusItem = Object.assign(function (init) {
    const { label, name, onclick } = init;
    return (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("e-statusitem", {
        attributes: {
            title: label,
            name: name,
        },
        children: label,
        listeners: {
            click: onclick
        }
    });
}, {
    prototype: HTMLEStatusItemElement.prototype
});
//# sourceMappingURL=StatusItem.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/status/StatusItemGroup.js":
/*!*******************************************************************!*\
  !*** ../editor/lib/elements/containers/status/StatusItemGroup.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEStatusItemGroupElement": () => (/* binding */ HTMLEStatusItemGroupElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _StatusItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StatusItem */ "../editor/lib/elements/containers/status/StatusItem.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var shadowTemplate;
var style;
let HTMLEStatusItemGroupElementBase = class HTMLEStatusItemGroupElementBase extends HTMLElement {
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot"));
        style = /*css*/ `
            :host {
                display: flex;
                width: max-content;
                flex-direction: row;
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
    }
    attributeChangedCallback(name, oldValue, newValue) {
        switch (name) {
            case "label": {
                const label = this.shadowRoot.querySelector("[part='label']");
                if (label) {
                    label.textContent = newValue;
                }
                break;
            }
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: String })
], HTMLEStatusItemGroupElementBase.prototype, "name", void 0);
HTMLEStatusItemGroupElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-statusitemgroup"
    })
], HTMLEStatusItemGroupElementBase);
var HTMLEStatusItemGroupElement = HTMLEStatusItemGroupElementBase;
//# sourceMappingURL=StatusItemGroup.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/status/index.js":
/*!*********************************************************!*\
  !*** ../editor/lib/elements/containers/status/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEStatusBarElement": () => (/* reexport safe */ _StatusBar__WEBPACK_IMPORTED_MODULE_0__.HTMLEStatusBarElement),
/* harmony export */   "HTMLEStatusItemElement": () => (/* reexport safe */ _StatusItem__WEBPACK_IMPORTED_MODULE_1__.HTMLEStatusItemElement),
/* harmony export */   "HTMLEStatusItemGroupElement": () => (/* reexport safe */ _StatusItemGroup__WEBPACK_IMPORTED_MODULE_2__.HTMLEStatusItemGroupElement)
/* harmony export */ });
/* harmony import */ var _StatusBar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StatusBar */ "../editor/lib/elements/containers/status/StatusBar.js");
/* harmony import */ var _StatusItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StatusItem */ "../editor/lib/elements/containers/status/StatusItem.js");
/* harmony import */ var _StatusItemGroup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StatusItemGroup */ "../editor/lib/elements/containers/status/StatusItemGroup.js");






//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/tabs/Tab.js":
/*!*****************************************************!*\
  !*** ../editor/lib/elements/containers/tabs/Tab.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLETabElement": () => (/* binding */ HTMLETabElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _TabPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TabPanel */ "../editor/lib/elements/containers/tabs/TabPanel.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var shadowTemplate;
var style;
let HTMLETabElementBase = class HTMLETabElementBase extends HTMLElement {
    get panel() {
        const { controls } = this;
        const rootNode = this.getRootNode();
        if (rootNode instanceof Document || rootNode instanceof ShadowRoot) {
            return rootNode.querySelector(`e-tabpanel[id='${controls}']`);
        }
        return null;
    }
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot"));
        style = /*css*/ `
            :host {
                display: inline-block;
                user-select: none;
                white-space: nowrap;
                padding: 4px;
            }
            
            :host([disabled]) {
                opacity: 0.38;
                pointer-events: none;
            }
            
            :host(:hover) {
                background-color: var(--theme-hovered-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_HOVERED_ITEM_COLOR});
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
    }
    connectedCallback() {
        const { tabIndex } = this;
        this.tabIndex = tabIndex;
    }
    attributeChangedCallback(name, oldValue, newValue) {
        switch (name) {
            case "selected": {
                this.dispatchEvent(new Event("select", { bubbles: true }));
                break;
            }
        }
    }
    select() {
        this.selected = true;
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLETabElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLETabElementBase.prototype, "disabled", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, observed: true })
], HTMLETabElementBase.prototype, "controls", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLETabElementBase.prototype, "active", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean, observed: true })
], HTMLETabElementBase.prototype, "selected", void 0);
HTMLETabElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-tab"
    })
], HTMLETabElementBase);
var HTMLETabElement = HTMLETabElementBase;
//# sourceMappingURL=Tab.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/tabs/TabList.js":
/*!*********************************************************!*\
  !*** ../editor/lib/elements/containers/tabs/TabList.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLETabListElement": () => (/* binding */ HTMLETabListElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _Tab__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Tab */ "../editor/lib/elements/containers/tabs/Tab.js");
/* harmony import */ var _TabPanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TabPanel */ "../editor/lib/elements/containers/tabs/TabPanel.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};






var shadowTemplate;
var style;
var SELECT_ANIMATION_DURATION = 200;
let HTMLETabListElementBase = class HTMLETabListElementBase extends HTMLElement {
    #walker;
    get tabs() {
        return Array.from(this.querySelectorAll("e-tab"));
    }
    get activeTab() {
        return this.querySelector("e-tab[active]");
    }
    get selectedTab() {
        return this.querySelector("e-tab[selected]");
    }
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot"));
        style = /*css*/ `
            :host {
                position: relative;
                display: flex;
            }

            :host::after {
                position: absolute;
                display: inline-block;
                content: "";
                z-index: -1;
                transform: translateY(-100%);
                box-sizing: border-box;
                border-top: 2px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
            }
        `;
    }
    constructor() {
        super();
        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this));
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        this.addEventListener("click", this.#handleClickEvent.bind(this));
        this.addEventListener("focus", this.#handleFocusEvent.bind(this));
        this.addEventListener("focusin", this.#handleFocusInEvent.bind(this));
        this.addEventListener("focusout", this.#handleFocusOutEvent.bind(this));
        this.addEventListener("keydown", this.#handleKeyDownEvent.bind(this));
        this.addEventListener("select", this.#handleSelectEvent.bind(this));
        this.addEventListener("select", this.#handleSelectEvent.bind(this));
    }
    connectedCallback() {
        const { tabIndex, selectedTab } = this;
        this.tabIndex = tabIndex;
        customElements.upgrade(this);
        const tabToSelect = selectedTab ?? this.firstItem();
        if (tabToSelect) {
            this.#selectTab(tabToSelect);
            setTimeout(() => {
                const { width: tabWidth, height: tabHeight } = tabToSelect.getBoundingClientRect();
                const { offsetLeft } = tabToSelect;
                this.animate([{
                        width: `${tabWidth}px`,
                        left: `${offsetLeft}px`,
                        top: `${tabHeight}px`
                    }], {
                    duration: 0,
                    fill: "forwards",
                    easing: "ease-in-out",
                    pseudoElement: "::after"
                });
            });
        }
    }
    #walkerNodeFilter(node) {
        if (node instanceof _Tab__WEBPACK_IMPORTED_MODULE_2__.HTMLETabElement) {
            return NodeFilter.FILTER_ACCEPT;
        }
        return NodeFilter.FILTER_REJECT;
    }
    firstItem() {
        const walker = this.#walker;
        walker.currentNode = walker.root;
        return walker.firstChild();
    }
    #lastItem() {
        const walker = this.#walker;
        walker.currentNode = walker.root;
        return walker.lastChild();
    }
    #previousItem(item) {
        const walker = this.#walker;
        walker.currentNode = item;
        return walker.previousNode();
    }
    #nextItem(item) {
        const walker = this.#walker;
        walker.currentNode = item;
        return walker.nextNode();
    }
    #setActiveTab(item) {
        const { activeTab } = this;
        if (activeTab !== null && activeTab !== item) {
            activeTab.active = false;
        }
        if (item !== null) {
            item.active = true;
        }
    }
    #selectTab(tab) {
        const { selectedTab } = this;
        if (tab !== selectedTab) {
            tab.selected = true;
        }
    }
    #handleClickEvent(event) {
        const { target } = event;
        const targetTab = target.closest("e-tab");
        if (targetTab) {
            targetTab.select();
            const { width: tabWidth, height: tabHeight } = targetTab.getBoundingClientRect();
            const { offsetLeft } = targetTab;
            this.animate([{
                    width: `${tabWidth}px`,
                    left: `${offsetLeft}px`,
                    top: `${tabHeight}px`
                }], {
                duration: SELECT_ANIMATION_DURATION,
                fill: "forwards",
                easing: "ease-in-out",
                pseudoElement: "::after"
            });
        }
    }
    #handleFocusEvent(event) {
        const { relatedTarget } = event;
        const { selectedTab } = this;
        if (!this.contains(relatedTarget)) {
            (selectedTab ?? this.firstItem())?.focus();
        }
    }
    #handleFocusInEvent(event) {
        const { target } = event;
        const targetTab = target.closest("e-tab");
        if (targetTab) {
            this.#setActiveTab(targetTab);
            this.tabIndex = -1;
        }
    }
    #handleFocusOutEvent(event) {
        const { relatedTarget } = event;
        const lostFocusWithin = !this.contains(relatedTarget);
        if (lostFocusWithin) {
            this.tabIndex = 0;
        }
    }
    #handleKeyDownEvent(event) {
        const { key } = event;
        const { activeTab } = this;
        switch (key) {
            case "ArrowLeft": {
                const previousTab = activeTab ?
                    this.#previousItem(activeTab) ?? this.#lastItem() :
                    this.firstItem();
                previousTab?.focus({ preventScroll: true });
                event.stopPropagation();
                break;
            }
            case "ArrowRight": {
                const nextTab = activeTab ?
                    this.#nextItem(activeTab) ?? this.firstItem() :
                    this.#lastItem();
                nextTab?.focus({ preventScroll: true });
                event.stopPropagation();
                break;
            }
            case "Home": {
                const firstItem = this.firstItem();
                if (firstItem) {
                    firstItem.focus({ preventScroll: true });
                }
                event.stopPropagation();
                break;
            }
            case "End": {
                const lastItem = this.#lastItem();
                if (lastItem) {
                    lastItem.focus({ preventScroll: true });
                }
                event.stopPropagation();
                break;
            }
            case "Enter": {
                activeTab?.click();
                event.stopPropagation();
                break;
            }
        }
    }
    #handleSelectEvent(event) {
        const { target } = event;
        const targetTab = target;
        if (targetTab.selected) {
            const { tabs } = this;
            tabs.forEach((tab_i) => {
                if (tab_i !== targetTab) {
                    tab_i.selected = false;
                    const { panel } = tab_i;
                    if (panel) {
                        panel.hidden = true;
                    }
                }
            });
            const { panel } = targetTab;
            if (panel) {
                panel.hidden = false;
            }
        }
    }
};
HTMLETabListElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-tablist"
    })
], HTMLETabListElementBase);
var HTMLETabListElement = HTMLETabListElementBase;
//# sourceMappingURL=TabList.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/tabs/TabPanel.js":
/*!**********************************************************!*\
  !*** ../editor/lib/elements/containers/tabs/TabPanel.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLETabPanelElement": () => (/* binding */ HTMLETabPanelElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


var shadowTemplate;
var style;
let HTMLETabPanelElementBase = class HTMLETabPanelElementBase extends HTMLElement {
    get tab() {
        const { id } = this;
        return this.getRootNode().querySelector(`e-tab[controls=${id}]`);
    }
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot"));
        style = /*css*/ `
            :host {
                display: block;
                padding: 4px;
            }
            
            :host([hidden]) {
                display: none;
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
    }
    connectedCallback() {
        const { tab } = this;
        if (tab) {
            customElements.upgrade(tab);
            const { selected } = tab;
            this.hidden = !selected;
        }
    }
};
HTMLETabPanelElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-tabpanel"
    })
], HTMLETabPanelElementBase);
var HTMLETabPanelElement = HTMLETabPanelElementBase;
//# sourceMappingURL=TabPanel.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/tabs/index.js":
/*!*******************************************************!*\
  !*** ../editor/lib/elements/containers/tabs/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLETabElement": () => (/* reexport safe */ _Tab__WEBPACK_IMPORTED_MODULE_0__.HTMLETabElement),
/* harmony export */   "HTMLETabListElement": () => (/* reexport safe */ _TabList__WEBPACK_IMPORTED_MODULE_1__.HTMLETabListElement),
/* harmony export */   "HTMLETabPanelElement": () => (/* reexport safe */ _TabPanel__WEBPACK_IMPORTED_MODULE_2__.HTMLETabPanelElement)
/* harmony export */ });
/* harmony import */ var _Tab__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Tab */ "../editor/lib/elements/containers/tabs/Tab.js");
/* harmony import */ var _TabList__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TabList */ "../editor/lib/elements/containers/tabs/TabList.js");
/* harmony import */ var _TabPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TabPanel */ "../editor/lib/elements/containers/tabs/TabPanel.js");






//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/toolbars/ToolBar.js":
/*!*************************************************************!*\
  !*** ../editor/lib/elements/containers/toolbars/ToolBar.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEToolBarElement": () => (/* binding */ HTMLEToolBarElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _ToolBarItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ToolBarItem */ "../editor/lib/elements/containers/toolbars/ToolBarItem.js");
/* harmony import */ var _ToolBarItemGroup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ToolBarItemGroup */ "../editor/lib/elements/containers/toolbars/ToolBarItemGroup.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};






var shadowTemplate;
var style;
var wasExpandedOnMouseDown;
let HTMLEToolBarElementBase = class HTMLEToolBarElementBase extends HTMLElement {
    get activeItem() {
        return this.querySelector("e-toolbaritem[active]");
    }
    items() {
        return Array.from(this.querySelectorAll(":is(:scope, :scope > e-toolbaritemgroup) > e-toolbaritem"));
    }
    #walker;
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot"));
        wasExpandedOnMouseDown = new WeakMap();
        style = /*css*/ `
            :host {
                display: flex;
                flex-direction: row;
            }
        `;
    }
    constructor() {
        super();
        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#nodeFilter.bind(this));
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        this.addEventListener("click", this.#handleClickEvent.bind(this));
        this.addEventListener("contextmenu", this.#handleContextMenuEvent.bind(this));
        this.addEventListener("dblclick", this.#handleDblClickEvent.bind(this));
        this.addEventListener("focus", this.#handleFocusEvent.bind(this));
        this.addEventListener("focusin", this.#handleFocusInEvent.bind(this));
        this.addEventListener("focusout", this.#handleFocusOutEvent.bind(this));
        this.addEventListener("mousedown", this.#handleMouseDownEvent.bind(this));
        this.addEventListener("keydown", this.#handleKeyDownEvent.bind(this));
    }
    connectedCallback() {
        const { tabIndex } = this;
        this.tabIndex = tabIndex;
    }
    #nodeFilter(node) {
        if (node instanceof _ToolBarItem__WEBPACK_IMPORTED_MODULE_1__.HTMLEToolBarItemElement) {
            return NodeFilter.FILTER_ACCEPT;
        }
        if (node instanceof _ToolBarItemGroup__WEBPACK_IMPORTED_MODULE_2__.HTMLEToolBarItemGroupElement) {
            return NodeFilter.FILTER_SKIP;
        }
        return NodeFilter.FILTER_REJECT;
    }
    firstItem() {
        const walker = this.#walker;
        walker.currentNode = walker.root;
        return walker.firstChild();
    }
    #lastItem() {
        const walker = this.#walker;
        walker.currentNode = walker.root;
        return walker.lastChild();
    }
    #previousItem(item) {
        const walker = this.#walker;
        walker.currentNode = item;
        const previousItem = walker.previousSibling();
        return previousItem;
    }
    #nextItem(item) {
        const walker = this.#walker;
        walker.currentNode = item;
        return walker.nextSibling();
    }
    #setActiveItem(item) {
        const { activeItem } = this;
        if (activeItem !== null && activeItem !== item) {
            activeItem.active = false;
        }
        if (item !== null) {
            item.active = true;
        }
    }
    #handleClickEvent(event) {
        const { target } = event;
        const targetItem = target.closest("e-toolbaritem");
        if (targetItem) {
            const { type, pressed } = targetItem;
            switch (type) {
                case "checkbox": {
                    targetItem.pressed = !pressed;
                    break;
                }
                case "radio": {
                    targetItem.pressed = true;
                    break;
                }
                case "menubutton": {
                    const { menubutton } = targetItem;
                    if (menubutton && !menubutton.contains(target)) {
                        const expand = !wasExpandedOnMouseDown.get(targetItem);
                        menubutton.toggle(expand);
                        if (expand) {
                            menubutton.firstItem?.focus({ preventScroll: true });
                        }
                    }
                    break;
                }
                case "select": {
                    const { select } = targetItem;
                    if (select && !select.contains(target)) {
                        const expand = !wasExpandedOnMouseDown.get(targetItem);
                        select.toggle(expand);
                    }
                    break;
                }
            }
        }
        event.stopPropagation();
    }
    #handleContextMenuEvent(event) {
        event.stopPropagation();
    }
    #handleDblClickEvent(event) {
        event.stopPropagation();
    }
    #handleFocusEvent(event) {
        const { relatedTarget } = event;
        const { activeItem } = this;
        if (!this.contains(relatedTarget)) {
            (activeItem ?? this.firstItem())?.focus();
        }
    }
    #handleFocusInEvent(event) {
        const { target } = event;
        const targetItem = target.closest("e-toolbaritem");
        if (targetItem) {
            this.#setActiveItem(targetItem);
            this.tabIndex = -1;
        }
    }
    #handleFocusOutEvent(event) {
        const { relatedTarget } = event;
        const lostFocusWithin = !this.contains(relatedTarget);
        if (lostFocusWithin) {
            this.tabIndex = 0;
        }
    }
    #handleMouseDownEvent(event) {
        const { target } = event;
        const targetItem = target.closest("e-toolbaritem");
        if (targetItem) {
            const { type } = targetItem;
            switch (type) {
                case "menubutton": {
                    const { menubutton } = targetItem;
                    if (menubutton && !menubutton.contains(target)) {
                        wasExpandedOnMouseDown.set(targetItem, menubutton.expanded);
                    }
                    break;
                }
                case "select": {
                    const { select } = targetItem;
                    if (select && !select.contains(target)) {
                        wasExpandedOnMouseDown.set(targetItem, select.expanded);
                    }
                    break;
                }
            }
        }
    }
    #handleKeyDownEvent(event) {
        const { key } = event;
        const { activeItem } = this;
        switch (key) {
            case "Enter":
            case " ": {
                if (activeItem) {
                    const { type } = activeItem;
                    switch (type) {
                        case "menubutton": {
                            const { menubutton } = activeItem;
                            if (menubutton) {
                                menubutton.expand();
                                menubutton.firstItem?.focus({ preventScroll: true });
                            }
                            break;
                        }
                        case "select": {
                            const { select } = activeItem;
                            if (select) {
                                select.expand();
                            }
                            break;
                        }
                        default: {
                            activeItem.click();
                            break;
                        }
                    }
                    event.stopPropagation();
                }
                break;
            }
            case "ArrowLeft": {
                if (activeItem) {
                    const previousItem = this.#previousItem(activeItem);
                    if (previousItem) {
                        previousItem.focus({ preventScroll: true });
                    }
                }
                else {
                    const firstItem = this.firstItem();
                    if (firstItem) {
                        firstItem.focus({ preventScroll: true });
                    }
                }
                event.stopPropagation();
                break;
            }
            case "ArrowRight": {
                if (activeItem) {
                    const nextItem = this.#nextItem(activeItem);
                    if (nextItem) {
                        nextItem.focus({ preventScroll: true });
                    }
                }
                else {
                    const lastItem = this.#lastItem();
                    if (lastItem) {
                        lastItem.focus({ preventScroll: true });
                    }
                }
                event.stopPropagation();
                break;
            }
            case "ArrowDown": {
                if (activeItem) {
                    const { type } = activeItem;
                    switch (type) {
                        case "select": {
                            activeItem.select?.expand();
                            event.stopPropagation();
                            break;
                        }
                    }
                }
                break;
            }
            case "Home": {
                const firstItem = this.firstItem();
                if (firstItem) {
                    firstItem.focus({ preventScroll: true });
                }
                event.stopPropagation();
                break;
            }
            case "End": {
                const lastItem = this.#lastItem();
                if (lastItem) {
                    lastItem.focus({ preventScroll: true });
                }
                event.stopPropagation();
                break;
            }
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: String })
], HTMLEToolBarElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: String })
], HTMLEToolBarElementBase.prototype, "orientation", void 0);
HTMLEToolBarElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-toolbar"
    })
], HTMLEToolBarElementBase);
var HTMLEToolBarElement = HTMLEToolBarElementBase;
//# sourceMappingURL=ToolBar.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/toolbars/ToolBarItem.js":
/*!*****************************************************************!*\
  !*** ../editor/lib/elements/containers/toolbars/ToolBarItem.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EToolBarItem": () => (/* binding */ EToolBarItem),
/* harmony export */   "HTMLEToolBarItemElement": () => (/* binding */ HTMLEToolBarItemElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _Snippets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Snippets */ "../editor/lib/elements/Snippets.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





var shadowTemplate;
var style;
var iconPartTemplate;
let HTMLEToolBarItemElementBase = class HTMLEToolBarItemElementBase extends HTMLElement {
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot"), (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot", {
            attributes: {
                name: "select"
            }
        }), (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot", {
            attributes: {
                name: "menubutton"
            }
        }));
        iconPartTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("span", {
            attributes: {
                part: "icon"
            }
        });
        style = /*css*/ `
            :host {
                display: flex;
                user-select: none;
                white-space: nowrap;
                cursor: pointer;
                line-height: 22px;
            }
            
            :host([disabled]) {
                opacity: 0.38;
                pointer-events: none;
            }
            
            :host(:hover) {
                background-color: var(--theme-hovered-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_HOVERED_ITEM_COLOR});
            }
            
            :host([pressed]),
            :host(:active) {
                background-color: var(--theme-activated-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_ACTIVATED_ITEM_COLOR});
            }
            
            :host(:not([iconed])) [part="icon"] {
                display: none;
            }

            [part="icon"] {
                flex: none;
                display: inline-block;
                width: 18px;
                height: 18px;
                padding: 2px;
                overflow: hidden;
            }
            
            [part="icon"]::before {
                display: inline-block;
                width: 18px;
                height: 18px;
                content: "";
                mask-size: 18px 18px;
                -webkit-mask-size: 18px 18px;
                background-color: none;
                -webkit-mask-image: none;
                mask-image: none;
                filter: none;
            }
            
            :host(:focus) {
                outline: 1px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
                outline-offset: -1px;
            }
            
            :host([type="select"]:focus) ::slotted(e-select) {
                border-color: transparent;
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
    }
    connectedCallback() {
        const { tabIndex } = this;
        this.tabIndex = tabIndex;
    }
    attributeChangedCallback(name, oldValue, newValue) {
        switch (name) {
            case "label": {
                //...
                break;
            }
            case "iconed": {
                const { shadowRoot } = this;
                if (newValue !== null) {
                    shadowRoot.prepend(iconPartTemplate.cloneNode(true));
                }
                else {
                    const iconPart = this.#icon();
                    if (iconPart) {
                        iconPart.remove();
                    }
                }
                break;
            }
        }
    }
    #icon() {
        return this.shadowRoot.querySelector("[part=icon]");
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.QueryProperty)({ selector: ":scope > e-menubutton[slot=menubutton]" })
], HTMLEToolBarItemElementBase.prototype, "menubutton", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.QueryProperty)({ selector: ":scope > e-select[slot=select]" })
], HTMLEToolBarItemElementBase.prototype, "select", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEToolBarItemElementBase.prototype, "active", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEToolBarItemElementBase.prototype, "pressed", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEToolBarItemElementBase.prototype, "expanded", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean, observed: true })
], HTMLEToolBarItemElementBase.prototype, "iconed", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, observed: true })
], HTMLEToolBarItemElementBase.prototype, "value", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEToolBarItemElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, observed: true })
], HTMLEToolBarItemElementBase.prototype, "label", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEToolBarItemElementBase.prototype, "type", void 0);
HTMLEToolBarItemElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-toolbaritem"
    })
], HTMLEToolBarItemElementBase);
var HTMLEToolBarItemElement = HTMLEToolBarItemElementBase;
var EToolBarItem = (0,_Snippets__WEBPACK_IMPORTED_MODULE_2__.constructor)(HTMLEToolBarItemElement.prototype, (init) => {
    const { label, name, type, value, trigger, menubutton, select } = init;
    if (menubutton) {
        menubutton.slot = "menubutton";
    }
    if (select) {
        select.slot = "select";
    }
    return (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("e-toolbaritem", {
        attributes: {
            tabindex: -1,
            title: label,
            name: name,
            value: value,
            type: type
        },
        children: menubutton ? [menubutton] : select ? [select] : undefined,
        listeners: {
            click: trigger
        }
    });
}, {
    button(init) {
        return new EToolBarItem({
            ...init, type: "button"
        });
    },
    checkbox(init) {
        return new EToolBarItem({
            ...init, type: "checkbox"
        });
    },
    radio(init) {
        return new EToolBarItem({
            ...init, type: "radio"
        });
    },
    menubutton(init) {
        return new EToolBarItem({
            ...init, type: "menubutton"
        });
    },
    select(init) {
        return new EToolBarItem({
            ...init, type: "select"
        });
    }
});
//# sourceMappingURL=ToolBarItem.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/toolbars/ToolBarItemGroup.js":
/*!**********************************************************************!*\
  !*** ../editor/lib/elements/containers/toolbars/ToolBarItemGroup.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEToolBarItemGroupElement": () => (/* binding */ HTMLEToolBarItemGroupElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _ToolBarItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ToolBarItem */ "../editor/lib/elements/containers/toolbars/ToolBarItem.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var shadowTemplate;
var style;
let HTMLEToolBarItemGroupElementBase = class HTMLEToolBarItemGroupElementBase extends HTMLElement {
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot"));
        style = /*css*/ `
            :host {
                display: flex;
                width: max-content;
                flex-direction: row;
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
    }
    attributeChangedCallback(name, oldValue, newValue) {
        switch (name) {
            case "label": {
                const label = this.shadowRoot.querySelector("[part='label']");
                if (label) {
                    label.textContent = newValue;
                }
                break;
            }
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: String })
], HTMLEToolBarItemGroupElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: String, observed: true })
], HTMLEToolBarItemGroupElementBase.prototype, "label", void 0);
HTMLEToolBarItemGroupElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-toolbaritemgroup"
    })
], HTMLEToolBarItemGroupElementBase);
var HTMLEToolBarItemGroupElement = HTMLEToolBarItemGroupElementBase;
//# sourceMappingURL=ToolBarItemGroup.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/trees/Tree.js":
/*!*******************************************************!*\
  !*** ../editor/lib/elements/containers/trees/Tree.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLETreeElement": () => (/* binding */ HTMLETreeElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _TreeItem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TreeItem */ "../editor/lib/elements/containers/trees/TreeItem.js");
/* harmony import */ var _TreeItemGroup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TreeItemGroup */ "../editor/lib/elements/containers/trees/TreeItemGroup.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};







var shadowTemplate;
var style;
let HTMLETreeElementBase = class HTMLETreeElementBase extends HTMLElement {
    items;
    get activeItem() {
        return this.querySelector("e-treeitem[active]");
    }
    get dropTargetItem() {
        return this.querySelector("e-treeitem[droptarget]");
    }
    #onSelection;
    #hasSelectionChanged;
    #walker;
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot"));
        style = /*css*/ `
            :host {
                display: block;
            }
            
            :host(:focus) {
                outline: 1px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
                outline-offset: -1px;
            }
        `;
    }
    constructor() {
        super();
        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#nodeFilter.bind(this));
        this.#onSelection = false;
        this.#hasSelectionChanged = false;
        this.items = this.getElementsByTagName("e-treeitem");
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        this.addEventListener("click", this.#handleClickEvent.bind(this));
        this.addEventListener("contextmenu", this.#handleContextMenuEvent.bind(this));
        this.addEventListener("dblclick", this.#handleDblClickEvent.bind(this));
        this.addEventListener("mousedown", this.#handleMouseDownEvent.bind(this));
        this.addEventListener("dragend", this.#handleDragEndEvent.bind(this));
        this.addEventListener("dragenter", this.#handleDragEnterEvent.bind(this));
        this.addEventListener("dragleave", this.#handleDragLeaveEvent.bind(this));
        this.addEventListener("dragover", this.#handleDragOverEvent.bind(this));
        this.addEventListener("drop", this.#handleDropEvent.bind(this));
        this.addEventListener("focus", this.#handleFocusEvent.bind(this));
        this.addEventListener("focusin", this.#handleFocusInEvent.bind(this));
        this.addEventListener("focusout", this.#handleFocusOutEvent.bind(this));
        this.addEventListener("keydown", this.#handleKeyDownEvent.bind(this));
        this.addEventListener("select", this.#handleSelectEvent.bind(this));
    }
    connectedCallback() {
        const { tabIndex } = this;
        this.tabIndex = tabIndex;
    }
    selectedItems() {
        const selectedItems = [];
        const walker = this.#walker;
        walker.currentNode = walker.root;
        let item = this.firstItem();
        while (item !== null) {
            if (item.selected) {
                selectedItems.push(item);
            }
            item = this.#nextItem(item);
        }
        return selectedItems;
    }
    beginSelection() {
        this.#onSelection = true;
    }
    endSelection() {
        this.#onSelection = false;
        if (this.#hasSelectionChanged) {
            this.dispatchEvent(new Event("selectionchange", { bubbles: true }));
            this.#hasSelectionChanged = false;
        }
    }
    #nodeFilter(node) {
        if (node instanceof _TreeItem__WEBPACK_IMPORTED_MODULE_2__.HTMLETreeItemElement) {
            return NodeFilter.FILTER_ACCEPT;
        }
        if (node instanceof _TreeItemGroup__WEBPACK_IMPORTED_MODULE_3__.HTMLETreeItemGroupElement) {
            return NodeFilter.FILTER_SKIP;
        }
        return NodeFilter.FILTER_REJECT;
    }
    #getItemsRange(from, to) {
        if (from == to) {
            return [from];
        }
        const position = from.compareDocumentPosition(to);
        if (position & Node.DOCUMENT_POSITION_FOLLOWING) {
            const range = [from];
            let nextVisibleItem = this.#nextItem(from);
            while (nextVisibleItem && nextVisibleItem !== to) {
                range.push(nextVisibleItem);
                nextVisibleItem = this.#nextItem(nextVisibleItem);
            }
            range.push(to);
            return range;
        }
        else if (position & Node.DOCUMENT_POSITION_PRECEDING) {
            const range = [from];
            let previousVisibleItem = this.#previousItem(from);
            while (previousVisibleItem && previousVisibleItem !== to) {
                range.push(previousVisibleItem);
                previousVisibleItem = this.#previousItem(previousVisibleItem);
            }
            range.push(to);
            return range;
        }
        return [];
    }
    #setSelection(...items) {
        const selectedItems = this.selectedItems();
        this.beginSelection();
        selectedItems.forEach((selectedItem_i) => {
            if (!items.includes(selectedItem_i)) {
                selectedItem_i.selected = false;
            }
        });
        items.forEach((item_i) => {
            if (this.contains(item_i) && !item_i.selected) {
                item_i.selected = true;
            }
        });
        this.endSelection();
    }
    #addToSelection(...items) {
        this.beginSelection();
        items.forEach((item_i) => {
            if (!item_i.selected) {
                item_i.selected = true;
            }
        });
        this.endSelection();
    }
    #removeFromSelection(...items) {
        const selectedItems = this.selectedItems();
        this.beginSelection();
        items.forEach((item_i) => {
            if (selectedItems.includes(item_i)) {
                item_i.selected = false;
            }
        });
        this.endSelection();
    }
    #clearSelection() {
        const selectedItems = this.selectedItems();
        this.beginSelection();
        selectedItems.forEach((item_i) => {
            item_i.selected = false;
        });
        this.endSelection();
    }
    #setActiveItem(item) {
        const { activeItem } = this;
        if (activeItem !== null && activeItem !== item) {
            activeItem.active = false;
            activeItem.tabIndex = -1;
        }
        if (item !== null) {
            const walker = this.#walker;
            walker.currentNode = item;
            item.active = true;
            item.tabIndex = 0;
        }
    }
    #setDropTargetItem(item) {
        const { dropTargetItem } = this;
        if (dropTargetItem !== null && dropTargetItem !== item) {
            dropTargetItem.droptarget = false;
        }
        if (item !== null) {
            this.droptarget = true;
            item.droptarget = true;
        }
        else {
            this.droptarget = false;
        }
    }
    firstItem() {
        const walker = this.#walker;
        const { root } = walker;
        walker.currentNode = root;
        return walker.firstChild();
    }
    #lastItem() {
        const walker = this.#walker;
        const { root } = walker;
        walker.currentNode = root;
        return walker.lastChild();
    }
    #previousItem(item) {
        const walker = this.#walker;
        walker.currentNode = item;
        const previousSibling = walker.previousSibling();
        return previousSibling ?
            this.#deepestItem(previousSibling) :
            walker.parentNode();
    }
    #nextItem(item) {
        const walker = this.#walker;
        walker.currentNode = item;
        const { type, expanded } = item;
        return (type === "leaf" ?
            walker.nextNode() :
            expanded ?
                walker.nextNode() :
                walker.nextSibling() ??
                    (walker.parentNode(), walker.nextSibling()));
    }
    #deepestItem(item) {
        if (item.expanded) {
            const walker = this.#walker;
            const lastItem = walker.lastChild();
            if (lastItem) {
                return this.#deepestItem(lastItem);
            }
        }
        return item;
    }
    #handleClickEvent(event) {
        const { target, shiftKey, ctrlKey } = event;
        const targetItem = target.closest("e-treeitem");
        if (targetItem) {
            if (!shiftKey && !ctrlKey) {
                this.#setSelection(targetItem);
                const { type } = targetItem;
                if (type == "parent") {
                    targetItem.toggle();
                }
            }
        }
        event.stopPropagation();
    }
    #handleContextMenuEvent(event) {
        event.stopPropagation();
    }
    #handleDblClickEvent(event) {
        event.stopPropagation();
    }
    #handleDragEndEvent() {
        this.#setDropTargetItem(null);
    }
    #handleDragEnterEvent(event) {
        const { target } = event;
        const targetItem = target.closest("e-treeitem");
        if (targetItem) {
            const { type } = targetItem;
            if (type == "parent") {
                targetItem.toggle(true);
            }
            this.#setDropTargetItem(targetItem);
        }
        event.preventDefault();
    }
    #handleDragOverEvent(event) {
        event.preventDefault();
    }
    #handleDragLeaveEvent(event) {
        const { relatedTarget } = event;
        if (relatedTarget instanceof Element) {
            const parentItem = relatedTarget.closest("e-treeitem");
            if (!parentItem) {
                let rootNode = relatedTarget;
                while (!(rootNode instanceof _TreeItem__WEBPACK_IMPORTED_MODULE_2__.HTMLETreeItemElement || rootNode instanceof Document)) {
                    rootNode = rootNode.getRootNode();
                    if (rootNode instanceof ShadowRoot) {
                        rootNode = rootNode.host;
                    }
                }
                if (rootNode instanceof Document) {
                    this.#setDropTargetItem(null);
                }
            }
        }
    }
    #handleDropEvent() {
        this.#setDropTargetItem(null);
    }
    #handleKeyDownEvent(event) {
        const { key } = event;
        const { activeItem } = this;
        switch (key) {
            case "a": {
                const { ctrlKey } = event;
                if (ctrlKey) {
                    if (activeItem) {
                        const walker = this.#walker;
                        walker.currentNode = activeItem;
                        const firstItem = (walker.currentNode = walker.parentNode() ?? this, walker.firstChild());
                        const lastItem = (walker.currentNode = walker.parentNode() ?? this, walker.lastChild());
                        if (firstItem && lastItem) {
                            const range = this.#getItemsRange(firstItem, this.#deepestItem(lastItem));
                            if (range) {
                                this.#setSelection(...range);
                            }
                        }
                    }
                }
                event.preventDefault();
                break;
            }
            case "ArrowLeft": {
                if (activeItem) {
                    if (activeItem.expanded) {
                        activeItem.toggle();
                    }
                    else {
                        const walker = this.#walker;
                        const parentItem = walker.parentNode();
                        if (parentItem) {
                            parentItem.focus({ preventScroll: true });
                        }
                    }
                }
                event.stopPropagation();
                break;
            }
            case "ArrowRight": {
                if (activeItem) {
                    if (!activeItem.expanded) {
                        activeItem.toggle();
                    }
                }
                event.stopPropagation();
                break;
            }
            case "ArrowUp": {
                if (activeItem) {
                    const previousItem = this.#previousItem(activeItem);
                    if (previousItem) {
                        previousItem.focus({ preventScroll: true });
                        const { shiftKey } = event;
                        if (shiftKey) {
                            previousItem.selected ?
                                this.#removeFromSelection(previousItem) :
                                this.#addToSelection(previousItem);
                        }
                    }
                }
                else {
                    const firstItem = this.firstItem();
                    if (firstItem) {
                        firstItem.focus({ preventScroll: true });
                    }
                }
                event.stopPropagation();
                break;
            }
            case "ArrowDown": {
                if (activeItem) {
                    const nextItem = this.#nextItem(activeItem);
                    if (nextItem) {
                        nextItem.focus({ preventScroll: true });
                        const { shiftKey } = event;
                        if (shiftKey) {
                            nextItem.selected ?
                                this.#removeFromSelection(nextItem) :
                                this.#addToSelection(nextItem);
                        }
                    }
                }
                else {
                    const lastItem = this.#lastItem();
                    if (lastItem) {
                        lastItem.focus({ preventScroll: true });
                    }
                }
                event.stopPropagation();
                break;
            }
            case "Home": {
                const firstItem = this.firstItem();
                if (firstItem) {
                    firstItem.focus({ preventScroll: true });
                }
                event.stopPropagation();
                break;
            }
            case "End": {
                const lastItem = this.#lastItem();
                if (lastItem) {
                    lastItem.focus({ preventScroll: true });
                }
                event.stopPropagation();
                break;
            }
            case "Enter": {
                if (activeItem) {
                    this.#setSelection(activeItem);
                    activeItem.click();
                }
                event.stopPropagation();
                break;
            }
            case "Escape": {
                this.#clearSelection();
                this.#setActiveItem(null);
                this.focus();
                event.stopPropagation();
                break;
            }
        }
    }
    #handleFocusEvent(event) {
        const { relatedTarget } = event;
        const { activeItem } = this;
        if (!this.contains(relatedTarget)) {
            (activeItem ?? this.firstItem())?.focus();
        }
    }
    #handleFocusInEvent(event) {
        const { target } = event;
        const targetItem = target.closest("e-treeitem");
        if (targetItem) {
            this.#setActiveItem(targetItem);
            this.tabIndex = -1;
        }
    }
    #handleFocusOutEvent(event) {
        const { relatedTarget } = event;
        const lostFocusWithin = !this.contains(relatedTarget);
        if (lostFocusWithin) {
            this.tabIndex = 0;
        }
    }
    #handleMouseDownEvent(event) {
        const { target, ctrlKey, shiftKey, button } = event;
        if (target instanceof _TreeItem__WEBPACK_IMPORTED_MODULE_2__.HTMLETreeItemElement) {
            const { selected } = target;
            switch (button) {
                case 0:
                    {
                        if (!shiftKey && !ctrlKey && !selected) {
                            this.#setSelection(target);
                        }
                        else if (ctrlKey) {
                            if (selected) {
                                target.blur();
                            }
                            (!selected) ?
                                this.#addToSelection(target) :
                                this.#removeFromSelection(target);
                            event.stopPropagation();
                        }
                        else if (shiftKey) {
                            const { activeItem } = this;
                            if (activeItem) {
                                const range = this.#getItemsRange(activeItem, target);
                                if (range) {
                                    this.#setSelection(...range);
                                }
                            }
                            event.stopPropagation();
                        }
                    }
                    break;
                case 2: {
                    if (!selected) {
                        this.#setSelection(target);
                    }
                    break;
                }
            }
        }
    }
    #handleSelectEvent() {
        if (this.#onSelection) {
            this.#hasSelectionChanged = true;
        }
        else {
            this.dispatchEvent(new Event("selectionchange", { bubbles: true }));
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLETreeElementBase.prototype, "droptarget", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLETreeElementBase.prototype, "name", void 0);
HTMLETreeElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-tree"
    })
], HTMLETreeElementBase);
var HTMLETreeElement = HTMLETreeElementBase;
//# sourceMappingURL=Tree.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/trees/TreeItem.js":
/*!***********************************************************!*\
  !*** ../editor/lib/elements/containers/trees/TreeItem.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLETreeItemElement": () => (/* binding */ HTMLETreeItemElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _css_elements_containers_trees_treeitem_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../css/elements/containers/trees/treeitem.css */ "../editor/css/elements/containers/trees/treeitem.css");
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




var shadowTemplate;
var style;
let HTMLETreeItemElementBase = class HTMLETreeItemElementBase extends HTMLElement {
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("div", {
            attributes: {
                part: "content"
            },
            children: [
                (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("span", {
                    attributes: {
                        part: "arrow"
                    }
                }),
                (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot")
            ]
        }), (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot", {
            attributes: {
                name: "group"
            }
        }));
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_2__.theme.stylesheet, ...Array.from(_css_elements_containers_trees_treeitem_css__WEBPACK_IMPORTED_MODULE_1__["default"]).map((item) => {
                const [count, source] = item;
                const stylesheet = new CSSStyleSheet();
                stylesheet.replace(source);
                return stylesheet;
            })];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
    }
    connectedCallback() {
        const { tabIndex } = this;
        this.tabIndex = tabIndex;
    }
    attributeChangedCallback(name, oldValue, newValue) {
        switch (name) {
            case "expanded": {
                this.dispatchEvent(new Event("toggle", { bubbles: true }));
                break;
            }
            case "selected": {
                this.dispatchEvent(new Event("select", { bubbles: true }));
                break;
            }
            case "label": {
                const labelPart = this.shadowRoot.querySelector("[part=label]");
                if (labelPart) {
                    labelPart.textContent = newValue;
                }
                break;
            }
            case "level": {
                this.shadowRoot.adoptedStyleSheets[2].cssRules[5].styleMap.set("padding-left", `${12 * Number(newValue)}px`);
                break;
            }
        }
    }
    toggle(force) {
        const { expanded } = this;
        this.expanded = force ?? !expanded;
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: String })
], HTMLETreeItemElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: Number })
], HTMLETreeItemElementBase.prototype, "posinset", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: String, observed: true })
], HTMLETreeItemElementBase.prototype, "label", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: Boolean, observed: true })
], HTMLETreeItemElementBase.prototype, "expanded", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: Boolean })
], HTMLETreeItemElementBase.prototype, "droptarget", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: Boolean })
], HTMLETreeItemElementBase.prototype, "active", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: Boolean, observed: true })
], HTMLETreeItemElementBase.prototype, "selected", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: Number, observed: true })
], HTMLETreeItemElementBase.prototype, "level", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: String, defaultValue: "leaf" })
], HTMLETreeItemElementBase.prototype, "type", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.QueryProperty)({ selector: ":scope > e-treeitemgroup[slot=group]" })
], HTMLETreeItemElementBase.prototype, "group", void 0);
HTMLETreeItemElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-treeitem"
    })
], HTMLETreeItemElementBase);
var HTMLETreeItemElement = HTMLETreeItemElementBase;
//# sourceMappingURL=TreeItem.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/trees/TreeItemGroup.js":
/*!****************************************************************!*\
  !*** ../editor/lib/elements/containers/trees/TreeItemGroup.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLETreeItemGroupElement": () => (/* binding */ HTMLETreeItemGroupElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _TreeItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TreeItem */ "../editor/lib/elements/containers/trees/TreeItem.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var shadowTemplate;
var style;
let HTMLETreeItemGroupElementBase = class HTMLETreeItemGroupElementBase extends HTMLElement {
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot"));
        style = /*css*/ `
            :host {
                display: block;
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
    }
};
HTMLETreeItemGroupElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-treeitemgroup"
    })
], HTMLETreeItemGroupElementBase);
var HTMLETreeItemGroupElement = HTMLETreeItemGroupElementBase;
//# sourceMappingURL=TreeItemGroup.js.map

/***/ }),

/***/ "../editor/lib/elements/containers/trees/index.js":
/*!********************************************************!*\
  !*** ../editor/lib/elements/containers/trees/index.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLETreeElement": () => (/* reexport safe */ _Tree__WEBPACK_IMPORTED_MODULE_0__.HTMLETreeElement),
/* harmony export */   "HTMLETreeItemElement": () => (/* reexport safe */ _TreeItem__WEBPACK_IMPORTED_MODULE_1__.HTMLETreeItemElement),
/* harmony export */   "HTMLETreeItemGroupElement": () => (/* reexport safe */ _TreeItemGroup__WEBPACK_IMPORTED_MODULE_2__.HTMLETreeItemGroupElement)
/* harmony export */ });
/* harmony import */ var _Tree__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Tree */ "../editor/lib/elements/containers/trees/Tree.js");
/* harmony import */ var _TreeItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TreeItem */ "../editor/lib/elements/containers/trees/TreeItem.js");
/* harmony import */ var _TreeItemGroup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TreeItemGroup */ "../editor/lib/elements/containers/trees/TreeItemGroup.js");






//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../editor/lib/elements/controls/sashes/HeightSash.js":
/*!************************************************************!*\
  !*** ../editor/lib/elements/controls/sashes/HeightSash.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEHeightSashElement": () => (/* binding */ HTMLEHeightSashElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var style;
let HTMLEHeightSashElementBase = class HTMLEHeightSashElementBase extends HTMLElement {
    get target() {
        return this.#target;
    }
    static {
        style = /*css*/ `
            :host {
                display: block;
                background-color: var(--theme-selected-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_SELECTED_ITEM_COLOR});
                transition-property: opacity;
                transition-delay: 0.2s;
                transition-duration: 0.2s;
                transition-timing-function: ease-out;
                
                height: 2px;
                cursor: ns-resize;
            }
        `;
    }
    #target;
    #onCapture;
    #queuedPointerCallback;
    #pointerMovement;
    constructor() {
        super();
        this.#target = null;
        this.#queuedPointerCallback = null;
        this.#pointerMovement = 0;
        this.#onCapture = false;
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        this.addEventListener("pointerdown", this.#handlePointerDownEvent.bind(this));
        this.addEventListener("pointermove", this.#handlePointerMoveEvent.bind(this));
        this.addEventListener("pointerup", this.#handlePointerUpEvent.bind(this));
    }
    #pointerMoveCallback() {
        const target = this.#target;
        if (target !== null) {
            const targetComputedStyle = window.getComputedStyle(target);
            const { style } = target;
            const { growdir } = this;
            const movementY = this.#pointerMovement;
            const height = parseFloat(targetComputedStyle.getPropertyValue("height"));
            const newHeight = Math.trunc(height + (growdir == "top" ? -1 : 1) * movementY);
            style.setProperty("height", `${newHeight}px`);
            const computedNewHeight = parseFloat(targetComputedStyle.getPropertyValue("height"));
            style.setProperty("height", `${computedNewHeight}px`);
            this.dispatchEvent(new Event("resize"));
        }
        this.#queuedPointerCallback = null;
    }
    #handlePointerDownEvent(event) {
        const { pointerId } = event;
        const { controls } = this;
        const rootNode = this.getRootNode();
        this.#target = rootNode.getElementById(controls);
        this.setPointerCapture(pointerId);
        this.#onCapture = true;
    }
    #handlePointerMoveEvent(event) {
        if (this.#onCapture) {
            if (this.#queuedPointerCallback == null) {
                this.#pointerMovement = event.movementY;
                this.#queuedPointerCallback = this.#pointerMoveCallback.bind(this);
                requestAnimationFrame(this.#queuedPointerCallback);
            }
            else {
                this.#pointerMovement += event.movementY;
            }
        }
    }
    #handlePointerUpEvent(event) {
        const { pointerId } = event;
        this.releasePointerCapture(pointerId);
        this.#onCapture = false;
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEHeightSashElementBase.prototype, "controls", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, defaultValue: "top" })
], HTMLEHeightSashElementBase.prototype, "growdir", void 0);
HTMLEHeightSashElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-hsash"
    })
], HTMLEHeightSashElementBase);
var HTMLEHeightSashElement = HTMLEHeightSashElementBase;
//# sourceMappingURL=HeightSash.js.map

/***/ }),

/***/ "../editor/lib/elements/controls/sashes/WidthSash.js":
/*!***********************************************************!*\
  !*** ../editor/lib/elements/controls/sashes/WidthSash.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEWidthSashElement": () => (/* binding */ HTMLEWidthSashElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var style;
let HTMLEWidthSashElementBase = class HTMLEWidthSashElementBase extends HTMLElement {
    get target() {
        return this.#target;
    }
    #target;
    #onCapture;
    #queuedPointerCallback;
    #pointerMovement;
    static {
        style = /*css*/ `
            :host {
                display: block;
                background-color: var(--theme-selected-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_SELECTED_ITEM_COLOR});
                transition-property: opacity;
                transition-delay: 0.2s;
                transition-duration: 0.2s;
                transition-timing-function: ease-out;
                
                width: 2px;
                cursor: ew-resize;
            }
        `;
    }
    constructor() {
        super();
        this.#target = null;
        this.#queuedPointerCallback = null;
        this.#pointerMovement = 0;
        this.#onCapture = false;
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        this.addEventListener("pointerdown", this.#handlePointerDownEvent.bind(this));
        this.addEventListener("pointermove", this.#handlePointerMoveEvent.bind(this));
        this.addEventListener("pointerup", this.#handlePointerUpEvent.bind(this));
    }
    setWidth(width) {
        const target = this.#target;
        if (target !== null) {
            const { max } = this;
            const { style } = target;
            style.setProperty("width", `${width}px`);
            if (max) {
                style.setProperty("max-width", `${width}px`);
            }
        }
    }
    #pointerMoveCallback() {
        const target = this.#target;
        if (target !== null) {
            const targetComputedStyle = window.getComputedStyle(target);
            const { growdir } = this;
            const movementX = this.#pointerMovement;
            const width = parseFloat(targetComputedStyle.getPropertyValue("width"));
            const newWidth = width + (growdir == "right" ? 1 : -1) * movementX;
            this.setWidth(newWidth);
            this.dispatchEvent(new Event("resize"));
        }
        this.#pointerMovement = 0;
        this.#queuedPointerCallback = null;
    }
    #handlePointerDownEvent(event) {
        const { pointerId } = event;
        const { controls } = this;
        const rootNode = this.getRootNode();
        this.#target = rootNode.getElementById(controls);
        this.setPointerCapture(pointerId);
        this.#onCapture = true;
    }
    #handlePointerMoveEvent(event) {
        if (this.#onCapture) {
            if (this.#queuedPointerCallback == null) {
                this.#queuedPointerCallback = this.#pointerMoveCallback.bind(this);
                requestAnimationFrame(this.#queuedPointerCallback);
            }
            this.#pointerMovement += event.movementX;
        }
    }
    #handlePointerUpEvent(event) {
        const { pointerId } = event;
        this.releasePointerCapture(pointerId);
        this.#onCapture = false;
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, observed: true })
], HTMLEWidthSashElementBase.prototype, "controls", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, defaultValue: "right" })
], HTMLEWidthSashElementBase.prototype, "growdir", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEWidthSashElementBase.prototype, "max", void 0);
HTMLEWidthSashElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-wsash"
    })
], HTMLEWidthSashElementBase);
var HTMLEWidthSashElement = HTMLEWidthSashElementBase;
//# sourceMappingURL=WidthSash.js.map

/***/ }),

/***/ "../editor/lib/elements/controls/sashes/index.js":
/*!*******************************************************!*\
  !*** ../editor/lib/elements/controls/sashes/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEHeightSashElement": () => (/* reexport safe */ _HeightSash__WEBPACK_IMPORTED_MODULE_0__.HTMLEHeightSashElement),
/* harmony export */   "HTMLEWidthSashElement": () => (/* reexport safe */ _WidthSash__WEBPACK_IMPORTED_MODULE_1__.HTMLEWidthSashElement)
/* harmony export */ });
/* harmony import */ var _HeightSash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./HeightSash */ "../editor/lib/elements/controls/sashes/HeightSash.js");
/* harmony import */ var _WidthSash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WidthSash */ "../editor/lib/elements/controls/sashes/WidthSash.js");




//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../editor/lib/elements/controls/select/Option.js":
/*!********************************************************!*\
  !*** ../editor/lib/elements/controls/select/Option.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEOptionElement": () => (/* binding */ HTMLEOptionElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var shadowTemplate;
var style;
let HTMLEOptionElementBase = class HTMLEOptionElementBase extends HTMLElement {
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("span", {
            attributes: {
                part: "label"
            }
        }));
        style = /*css*/ `
            :host {
                display: flex;
                user-select: none;
                white-space: nowrap;
                line-height: 22px;
                padding: 0 12px;
            }
            
            :host(:hover) {
                background-color: var(--theme-hovered-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_HOVERED_ITEM_COLOR});
            }
            
            :host(:focus-within) {
                outline: 1px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
                outline-offset: -1px;
            }
            
            :host([selected]) {
                background-color: var(--theme-selected-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_SELECTED_ITEM_COLOR});
            }
            
            :host([disabled]) {
                opacity: 0.38;
                pointer-events: none;
            }
            
            :host(::before) {
                display: flex;
                content: "";
                width: 18px;
                height: 18px;
                margin-right: 6px;
            
                mask-size: 18px 18px;
                -webkit-mask-size: 18px 18px;

                mask-image: none;
                background-color: none;
                -webkit-mask-image: none;
            }
        `;
    }
    constructor() {
        super();
        const internals = this.attachInternals();
        internals.role = "option";
        this.internals = internals;
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
    }
    connectedCallback() {
        const { tabIndex } = this;
        this.tabIndex = tabIndex;
    }
    attributeChangedCallback(name, oldValue, newValue) {
        switch (name) {
            case "label": {
                const { shadowRoot } = this;
                const labelPart = shadowRoot.querySelector("[part=label]");
                if (labelPart) {
                    labelPart.textContent = newValue;
                }
                break;
            }
            case "selected": {
                const { internals, selected } = this;
                internals.ariaSelected = String(selected);
                this.dispatchEvent(new Event("select", { bubbles: true }));
                break;
            }
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEOptionElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLEOptionElementBase.prototype, "value", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, observed: true })
], HTMLEOptionElementBase.prototype, "label", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLEOptionElementBase.prototype, "disabled", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean, observed: true })
], HTMLEOptionElementBase.prototype, "selected", void 0);
HTMLEOptionElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-option"
    })
], HTMLEOptionElementBase);
var HTMLEOptionElement = HTMLEOptionElementBase;
//# sourceMappingURL=Option.js.map

/***/ }),

/***/ "../editor/lib/elements/controls/select/OptionGroup.js":
/*!*************************************************************!*\
  !*** ../editor/lib/elements/controls/select/OptionGroup.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEOptionGroupElement": () => (/* binding */ HTMLEOptionGroupElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


var shadowTemplate;
var style;
let HTMLEOptionGroupElementBase = class HTMLEOptionGroupElementBase extends HTMLElement {
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot"));
        style = /*css*/ `
            :host {
                display: block;
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
    }
};
HTMLEOptionGroupElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-optiongroup"
    })
], HTMLEOptionGroupElementBase);
var HTMLEOptionGroupElement = HTMLEOptionGroupElementBase;
//# sourceMappingURL=OptionGroup.js.map

/***/ }),

/***/ "../editor/lib/elements/controls/select/Select.js":
/*!********************************************************!*\
  !*** ../editor/lib/elements/controls/select/Select.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLESelectElement": () => (/* binding */ HTMLESelectElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _Option__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Option */ "../editor/lib/elements/controls/select/Option.js");
/* harmony import */ var _OptionGroup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./OptionGroup */ "../editor/lib/elements/controls/select/OptionGroup.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





var shadowTemplate;
var style;
var mutationObserver;
let HTMLESelectElementBase = class HTMLESelectElementBase extends HTMLElement {
    internals;
    static get formAssociated() {
        return true;
    }
    get options() {
        return Array.from(this.querySelectorAll("e-option"));
    }
    get activeOption() {
        return this.querySelector("e-option:focus-within") ?? null;
    }
    get selectedOption() {
        return this.querySelector("e-option[selected]") ?? null;
    }
    #walker;
    #wasExpandedOnMouseDown;
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("div", {
            attributes: {
                part: "content"
            },
            children: [
                (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("output", {
                    attributes: {
                        part: "value"
                    }
                })
            ]
        }), (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("div", {
            attributes: {
                part: "box"
            },
            children: (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("slot")
        }));
        style = /*css*/ `
            :host {
                position: relative;
                display: inline-block;
                user-select: none;
                line-height: 20px;
                border: 1px solid grey;
            }

            :host(:focus) {
                outline: 1px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
                outline-offset: -1px;
            }
            
            :host(:focus-within:not(:focus)) {
                background-color: var(--theme-focused-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_COLOR});
            }
            
            :host([disabled]) {
                opacity: 0.38;
                pointer-events: none;
            }
            
            [part="content"] {
                display: flex;
                overflow: hidden;
                padding: 0 4px;
            }
            
            [part="content"]::after {
                display: inline-block;
                text-align: center;
                width: 20px;
                height: 20px;
                margin-left: 6px;
                content: "▾";
            }
            
            [part="value"] {
                margin-right: auto;
                text-align: right;
            }
            
            [part="box"] {
                z-index: 1;
                position: absolute;
            
                display: block;
                padding: 6px 0;
                width: max-content;
            
                background-color: white;
            
                -webkit-box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 6px;
                -moz-box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 6px;
                box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 6px;
            }
            
            :host(:not([expanded])) [part="box"] {
                width: 0;
                height: 0;
                padding: 0;
                opacity: 0;
                pointer-events: none;
                overflow: hidden;
            }
        `;
        mutationObserver = new MutationObserver((mutationsList) => {
            mutationsList.forEach((mutation) => {
                const { target } = mutation;
                const select = target;
                const { selectedOption, value, options } = select;
                if (!selectedOption) {
                    const optionToSelect = value ? options.find(option_i => option_i.value === value) : select.#firstOption();
                    if (optionToSelect) {
                        optionToSelect.selected = true;
                    }
                    else {
                        select.#setSelectedOption(null);
                    }
                }
            });
        });
    }
    constructor() {
        super();
        const internals = this.attachInternals();
        internals.role = "combobox";
        this.internals = internals;
        this.#wasExpandedOnMouseDown = false;
        this.#walker = document.createTreeWalker(this, NodeFilter.SHOW_ELEMENT, this.#walkerNodeFilter.bind(this));
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        this.addEventListener("click", this.#handleClickEvent.bind(this));
        this.addEventListener("focusout", this.#handleFocusOutEvent.bind(this));
        this.addEventListener("mousedown", this.#handleMouseDownEvent.bind(this));
        this.addEventListener("mouseover", this.#handleMouseOverEvent.bind(this));
        this.addEventListener("keydown", this.#handleKeyDownEvent.bind(this));
        this.addEventListener("select", this.#handleSelectEvent.bind(this));
        mutationObserver.observe(this, {
            childList: true,
            subtree: true
        });
    }
    connectedCallback() {
        const { options, selectedOption, value } = this;
        const { tabIndex } = this;
        this.tabIndex = tabIndex;
        customElements.upgrade(this);
        const optionToSelect = selectedOption ?? (value ? options.find(option_i => option_i.value === value) : null) ?? this.#firstOption();
        if (optionToSelect) {
            if (optionToSelect === selectedOption) {
                this.#setSelectedOption(selectedOption);
            }
            else {
                this.#selectOption(optionToSelect);
            }
        }
    }
    expand() {
        const { expanded } = this;
        if (!expanded) {
            this.expanded = true;
            this.#positionBox();
            const { selectedOption } = this;
            if (selectedOption) {
                selectedOption.focus({ preventScroll: true });
            }
        }
    }
    collapse() {
        const { expanded } = this;
        if (expanded) {
            this.expanded = false;
            this.focus();
        }
    }
    toggle(force) {
        const { expanded } = this;
        const expand = force ?? !expanded;
        expand ? this.expand() : this.collapse();
    }
    #value() {
        return this.shadowRoot.querySelector("[part=value]");
    }
    #box() {
        return this.shadowRoot.querySelector("[part=box]");
    }
    #walkerNodeFilter(node) {
        if (node instanceof _Option__WEBPACK_IMPORTED_MODULE_2__.HTMLEOptionElement && !node.disabled && !node.hidden) {
            return NodeFilter.FILTER_ACCEPT;
        }
        else if (node instanceof _OptionGroup__WEBPACK_IMPORTED_MODULE_3__.HTMLEOptionGroupElement) {
            return NodeFilter.FILTER_SKIP;
        }
        return NodeFilter.FILTER_REJECT;
    }
    #firstOption() {
        const walker = this.#walker;
        walker.currentNode = walker.root;
        return walker.firstChild();
    }
    #lastOption() {
        const walker = this.#walker;
        walker.currentNode = walker.root;
        return walker.lastChild();
    }
    #previousOption(option) {
        const walker = this.#walker;
        walker.currentNode = option;
        return walker.previousNode();
    }
    #nextOption(option) {
        const walker = this.#walker;
        walker.currentNode = option;
        return walker.nextNode();
    }
    #selectOption(option) {
        const { selectedOption } = this;
        if (option !== selectedOption) {
            option.selected = true;
        }
    }
    #setSelectedOption(option) {
        const { label, value } = option ?? { label: "", value: "" };
        const { internals } = this;
        this.#value().textContent = label;
        internals.setFormValue(value);
    }
    #positionBox() {
        const box = this.#box();
        const { offsetLeft, offsetTop } = this;
        const { width, height } = this.getBoundingClientRect();
        const { style: boxStyle } = box;
        const { width: boxWidth, height: boxHeight } = box.getBoundingClientRect();
        const { clientWidth, clientHeight } = document.body;
        const overflowX = offsetLeft + width + boxWidth - clientWidth;
        const overflowY = offsetTop + boxHeight - clientHeight;
        boxStyle.setProperty("left", `${overflowX > 0 ?
            width - boxWidth :
            0}px`);
        boxStyle.setProperty("top", `${overflowY > 0 ?
            -(height - 1) :
            (height - 1)}px`);
    }
    #handleClickEvent(event) {
        const { target } = event;
        const { expanded } = this;
        const wasExpandedOnMouseDown = this.#wasExpandedOnMouseDown;
        if (!expanded && !wasExpandedOnMouseDown) {
            const { selectedOption } = this;
            this.expand();
            (selectedOption ?? this.#firstOption() ?? this).focus({ preventScroll: true });
        }
        else {
            this.collapse();
            const targetOption = target.closest("e-option");
            if (targetOption) {
                this.#selectOption(targetOption);
            }
        }
        this.#wasExpandedOnMouseDown = false;
        event.stopPropagation();
    }
    #handleFocusOutEvent(event) {
        const { relatedTarget } = event;
        const lostFocusWithin = !this.contains(relatedTarget);
        if (lostFocusWithin || this === relatedTarget) {
            this.collapse();
        }
    }
    #handleMouseDownEvent() {
        const { expanded } = this;
        this.#wasExpandedOnMouseDown = expanded;
    }
    #handleMouseOverEvent(event) {
        const { target } = event;
        const targetOption = target.closest("e-option");
        if (targetOption) {
            targetOption.focus({ preventScroll: true });
        }
    }
    #handleKeyDownEvent(event) {
        const { key } = event;
        const { expanded, activeOption, selectedOption } = this;
        switch (key) {
            case "ArrowUp": {
                if (expanded) {
                    const previousOption = activeOption ?
                        this.#previousOption(activeOption) :
                        this.#firstOption();
                    if (previousOption) {
                        previousOption.focus({ preventScroll: true });
                    }
                }
                else {
                    const previousOption = selectedOption ?
                        this.#previousOption(selectedOption) :
                        this.#firstOption();
                    if (previousOption) {
                        this.#selectOption(previousOption);
                    }
                }
                event.stopPropagation();
                break;
            }
            case "ArrowDown": {
                if (expanded) {
                    const nextOption = activeOption ?
                        this.#nextOption(activeOption) :
                        this.#lastOption();
                    if (nextOption) {
                        nextOption.focus({ preventScroll: true });
                    }
                }
                else {
                    const nextOption = selectedOption ?
                        this.#nextOption(selectedOption) :
                        this.#lastOption();
                    if (nextOption) {
                        this.#selectOption(nextOption);
                    }
                }
                event.stopPropagation();
                break;
            }
            case "Home": {
                const firstOption = this.#firstOption();
                if (firstOption) {
                    if (expanded) {
                        firstOption.focus({ preventScroll: true });
                    }
                    else {
                        this.#selectOption(firstOption);
                    }
                }
                event.stopPropagation();
                break;
            }
            case "End": {
                const lastOption = this.#lastOption();
                if (lastOption) {
                    if (expanded) {
                        lastOption.focus({ preventScroll: true });
                    }
                    else {
                        this.#selectOption(lastOption);
                    }
                }
                event.stopPropagation();
                break;
            }
            case "Enter":
            case " ": {
                (activeOption ?? this).click();
                event.stopPropagation();
                break;
            }
            case "Escape": {
                if (expanded) {
                    this.collapse();
                    event.stopPropagation();
                    event.preventDefault();
                }
                break;
            }
            default: {
                const { length: keyLength } = key;
                if (keyLength == 1) {
                    const keyCode = key.charCodeAt(0);
                    const { options } = this;
                    const activeIndex = activeOption ? options.indexOf(activeOption) : -1;
                    const matchingOption = options.find((option_i, i) => option_i.label.toLowerCase().charCodeAt(0) == keyCode && i > activeIndex) ?? options.find((option_i) => option_i.label.toLowerCase().charCodeAt(0) == keyCode);
                    if (matchingOption) {
                        matchingOption.focus({ preventScroll: true });
                    }
                    event.stopPropagation();
                }
                break;
            }
        }
    }
    #handleSelectEvent(event) {
        const { target } = event;
        const targetOption = target.closest("e-option");
        if (targetOption) {
            const { selected } = targetOption;
            if (selected) {
                const { options } = this;
                options.forEach((option_i) => {
                    if (option_i !== targetOption && option_i.selected) {
                        option_i.selected = false;
                    }
                });
                this.#setSelectedOption(targetOption);
            }
            else {
                const { selectedOption } = this;
                if (selectedOption === null) {
                    const firstOption = this.#firstOption();
                    if (firstOption !== null) {
                        this.#setSelectedOption(firstOption);
                    }
                }
            }
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String })
], HTMLESelectElementBase.prototype, "name", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, observed: true })
], HTMLESelectElementBase.prototype, "value", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, defaultValue: "select", observed: true })
], HTMLESelectElementBase.prototype, "type", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: Boolean })
], HTMLESelectElementBase.prototype, "expanded", void 0);
HTMLESelectElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-select"
    })
], HTMLESelectElementBase);
var HTMLESelectElement = HTMLESelectElementBase;
//# sourceMappingURL=Select.js.map

/***/ }),

/***/ "../editor/lib/elements/controls/select/index.js":
/*!*******************************************************!*\
  !*** ../editor/lib/elements/controls/select/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEOptionElement": () => (/* reexport safe */ _Option__WEBPACK_IMPORTED_MODULE_1__.HTMLEOptionElement),
/* harmony export */   "HTMLEOptionGroupElement": () => (/* reexport safe */ _OptionGroup__WEBPACK_IMPORTED_MODULE_2__.HTMLEOptionGroupElement),
/* harmony export */   "HTMLESelectElement": () => (/* reexport safe */ _Select__WEBPACK_IMPORTED_MODULE_0__.HTMLESelectElement)
/* harmony export */ });
/* harmony import */ var _Select__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Select */ "../editor/lib/elements/controls/select/Select.js");
/* harmony import */ var _Option__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Option */ "../editor/lib/elements/controls/select/Option.js");
/* harmony import */ var _OptionGroup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./OptionGroup */ "../editor/lib/elements/controls/select/OptionGroup.js");






//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../editor/lib/elements/misc/Handle.js":
/*!*********************************************!*\
  !*** ../editor/lib/elements/misc/Handle.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEHandleElement": () => (/* binding */ HTMLEHandleElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Element */ "../editor/lib/elements/Element.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var style;
let HTMLEHandleElementBase = class HTMLEHandleElementBase extends HTMLElement {
    #target;
    #onCapture;
    static {
        style = /*css*/ `
            :host {
                display: block;
                            
                width: 24px;
                height: 12px;
                
                background-color: var(--theme-selected-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_SELECTED_ITEM_COLOR});

                -webkit-mask-image: url("/assets/dots.png");
                mask-image: url("/assets/dots.png");

                -webkit-mask-repeat: repeat;
                mask-repeat: repeat;
                cursor: move;
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        this.#target = null;
        this.#onCapture = false;
        this.addEventListener("pointerdown", this.#handlePointerDownEvent.bind(this));
        this.addEventListener("pointermove", this.#handlePointerMoveEvent.bind(this));
        this.addEventListener("pointerup", this.#handlePointerUpEvent.bind(this));
    }
    attributeChangedCallback(name, oldValue, newValue) {
        switch (name) {
            case "controls": {
                const { controls } = this;
                this.#target = document.getElementById(controls);
                break;
            }
        }
    }
    #handlePointerUpEvent(event) {
        const { pointerId } = event;
        this.releasePointerCapture(pointerId);
        this.#onCapture = false;
    }
    #handlePointerDownEvent(event) {
        const { pointerId } = event;
        const { controls } = this;
        this.#target = document.getElementById(controls);
        this.setPointerCapture(pointerId);
        this.#onCapture = true;
    }
    #handlePointerMoveEvent(event) {
        if (this.#onCapture) {
            const target = this.#target;
            if (target !== null) {
                const targetComputedStyle = window.getComputedStyle(target);
                const { movementX, movementY } = event;
                const { width: rectWidth, height: rectHeight } = target.getBoundingClientRect();
                const outerElement = target.parentElement ?? document.body;
                const { left: outerRectLeft, right: outerRectRight, top: outerRectTop, bottom: outerRectBottom } = outerElement.getBoundingClientRect();
                const left = parseFloat(targetComputedStyle.getPropertyValue("left"));
                const newLeft = Math.max(outerRectLeft, Math.min(Math.trunc(left + movementX), outerRectRight - rectWidth));
                const top = parseFloat(targetComputedStyle.getPropertyValue("top"));
                const newTop = Math.max(outerRectTop, Math.min(Math.trunc(top + movementY), outerRectBottom - rectHeight));
                target.style.setProperty("left", `${newLeft}px`);
                target.style.setProperty("top", `${newTop}px`);
                this.dispatchEvent(new CustomEvent("move"));
            }
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, observed: true })
], HTMLEHandleElementBase.prototype, "controls", void 0);
HTMLEHandleElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-handle"
    })
], HTMLEHandleElementBase);
var HTMLEHandleElement = HTMLEHandleElementBase;
//# sourceMappingURL=Handle.js.map

/***/ }),

/***/ "../editor/lib/elements/misc/Import.js":
/*!*********************************************!*\
  !*** ../editor/lib/elements/misc/Import.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEImportElement": () => (/* binding */ HTMLEImportElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Element */ "../editor/lib/elements/Element.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


let HTMLEImportElementBase = class HTMLEImportElementBase extends HTMLElement {
    connectedCallback() {
        const { src } = this;
        if (src) {
            this.#importRequest(src);
        }
    }
    async #importRequest(src) {
        this.outerHTML = await fetch(src).then((response) => {
            if (response.ok) {
                return response.text();
            }
            else {
                throw new Error(response.statusText);
            }
        });
        this.dispatchEvent(new Event("load", { bubbles: true }));
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: String })
], HTMLEImportElementBase.prototype, "src", void 0);
HTMLEImportElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-import"
    })
], HTMLEImportElementBase);
var HTMLEImportElement = HTMLEImportElementBase;
//# sourceMappingURL=Import.js.map

/***/ }),

/***/ "../editor/lib/elements/misc/Loader.js":
/*!*********************************************!*\
  !*** ../editor/lib/elements/misc/Loader.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLELoaderElement": () => (/* binding */ HTMLELoaderElement)
/* harmony export */ });
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Element */ "../editor/lib/elements/Element.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var barShadowTemplate;
var spinnerShadowTemplate;
var style;
let HTMLELoaderElementBase = class HTMLELoaderElementBase extends HTMLElement {
    static {
        barShadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        barShadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("div", {
            attributes: {
                part: "bar"
            },
            children: [
                (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("div", {
                    attributes: {
                        part: "slider"
                    },
                    children: [
                        (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("div", {
                            attributes: {
                                part: "cursor"
                            }
                        })
                    ]
                })
            ]
        }));
        spinnerShadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("template");
        spinnerShadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_1__.element)("div", {
            attributes: {
                part: "spinner"
            }
        }));
        style = /*css*/ `
            :host {
                display: inline-block;
            }

            :host(:is(:not([type]), [type="bar"])) {
                border: 1px solid gainsboro;
                border-radius: 4px;
            }
        
            [part="bar"] {
                position: relative;
                overflow: hidden;
                height: 6px;
                width: 100%;
                width: 86px;
                border-radius: 4px;
                background-color: whitesmoke;
            }
        
            [part="slider"] {
                display: flex;
                position: absolute;
                width: 100%;
                height: 100%;
                animation-name: slider;
            }
        
            [part="slider"],
            [part="cursor"] {
                border-radius: 4px;
                will-change: transform;
                animation-duration: 1s;
                animation-timing-function: linear;
                animation-iteration-count: infinite;
            }
        
            [part="cursor"] {
                display: block;
                width: 32px;
                background-color: var(--theme-activated-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_SELECTED_ITEM_COLOR});
                animation-name: cursor;
            }
        
            :host([type="spinner"]) {
                display: inline-block;
                width: 20px;
                height: 20px;
            }
        
            [part="spinner"] {
                display: inline-block;
                width: 18px;
                height: 18px;
            }
        
            [part="spinner"]::after {
                content: "";
                display: block;
                width: 12px;
                height: 12px;
                border-radius: 50%;
                border-width: 4px;
                border-style: solid;
                border-color: transparent var(--theme-activated-item-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_SELECTED_ITEM_COLOR});
                animation: spin 1.2s linear infinite;
            }
        
            @keyframes slider {
                0% {
                    transform: translateX(0%);
                }
                100% {
                    transform: translateX(100%);
                }
            }
        
            @keyframes cursor {
                0% {
                    transform: translateX(-100%);
                }
                100% {
                    transform: translateX(100%);
                }
            }
        
            @keyframes spin {
                0% {
                    transform: rotate(0);
                }
                100% {
                    transform: rotate(360deg);
                }
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.replaceChildren(barShadowTemplate.content.cloneNode(true));
    }
    attributeChangedCallback(name, oldValue, newValue) {
        switch (name) {
            case "type": {
                this.#updateTemplate();
                break;
            }
        }
    }
    #updateTemplate() {
        const { type, shadowRoot } = this;
        switch (type) {
            case "spinner": {
                shadowRoot.replaceChildren(spinnerShadowTemplate.content.cloneNode(true));
                break;
            }
            case "bar": {
                shadowRoot.replaceChildren(barShadowTemplate.content.cloneNode(true));
                break;
            }
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.AttributeProperty)({ type: String, defaultValue: "bar", observed: true })
], HTMLELoaderElementBase.prototype, "type", void 0);
HTMLELoaderElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_1__.CustomElement)({
        name: "e-loader"
    })
], HTMLELoaderElementBase);
var HTMLELoaderElement = HTMLELoaderElementBase;
//# sourceMappingURL=Loader.js.map

/***/ }),

/***/ "../editor/lib/elements/misc/Separator.js":
/*!************************************************!*\
  !*** ../editor/lib/elements/misc/Separator.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLESeparatorElement": () => (/* binding */ HTMLESeparatorElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Element */ "../editor/lib/elements/Element.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


var style;
let HTMLESeparatorElementBase = class HTMLESeparatorElementBase extends HTMLElement {
    #internals;
    static {
        style = /*css*/ `
            :host {
                display: block;
                margin: 10px 0 10px 27px;
                border: none;
                border-top: 1px solid lightgrey;
            }
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        this.#internals = this.attachInternals();
        this.#internals.role = "separator";
    }
};
HTMLESeparatorElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-separator"
    })
], HTMLESeparatorElementBase);
var HTMLESeparatorElement = HTMLESeparatorElementBase;
//# sourceMappingURL=Separator.js.map

/***/ }),

/***/ "../editor/lib/elements/misc/ToolTip.js":
/*!**********************************************!*\
  !*** ../editor/lib/elements/misc/ToolTip.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEToolTipElement": () => (/* binding */ HTMLEToolTipElement)
/* harmony export */ });
/* harmony import */ var _Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Element */ "../editor/lib/elements/Element.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


var shadowTemplate;
var style;
var HIDE_DELAY_MS = 100;
var SHOW_DELAY_MS = 200;
var ANIMATION_DURATION = 100;
let HTMLEToolTipElementBase = class HTMLEToolTipElementBase extends HTMLElement {
    get target() {
        return this.#target;
    }
    #target;
    #targetListenerObject;
    #documentListenerObject;
    #toggleAnimation;
    static {
        shadowTemplate = (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("template");
        shadowTemplate.content.append((0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("div", {
            attributes: {
                part: "container"
            },
            children: [
                (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("span", {
                    attributes: {
                        part: "arrow"
                    }
                }),
                (0,_Element__WEBPACK_IMPORTED_MODULE_0__.element)("slot")
            ]
        }));
        style = /*css*/ `
            :host {
                position: fixed;
                display: inline-block;
                z-index: 1;
                padding: 4px;
                border-radius: 3px;
                box-sizing: border-box;
                background-color: white;
                border: 1px solid black;
                pointer-events: none;
            }
            
            :host([hidden]) {
                display: none;
            }

            :host(:not([visible])) {
                opacity: 0;
            }
            
            [part="arrow"] {
                display: inline-block;
                position: fixed;
                z-index: 1;
                width: 4px;
                height: 4px;
                box-sizing: border-box;
                background-color: white;
                border: 1px solid black;
                border-width: 0 1px 1px 0;
            }
            
            :host(:is(:not([position]), [position="top"])) [part="arrow"] {
                transform: translate(-2px, -2px) rotate(45deg);
            }
            
            :host(:is([position="bottom"])) [part="arrow"] {
                transform: translate(-2px, -2px) rotate(225deg);
            }
            
            :host(:is([position="left"])) [part="arrow"] {
                transform: translate(-2px, -2px) rotate(315deg);
            }
            
            :host(:is([position="right"])) [part="arrow"] {
                transform: translate(-2px, -2px) rotate(135deg);
            }        
        `;
    }
    constructor() {
        super();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet];
        shadowRoot.append(shadowTemplate.content.cloneNode(true));
        this.#target = null;
        this.#toggleAnimation = null;
        this.#targetListenerObject = (function (tooltip) {
            return {
                handleEvent(event) {
                    const { type } = event;
                    switch (type) {
                        case "mouseenter": {
                            tooltip.#handleTargetMouseEnterEvent();
                            break;
                        }
                        case "mouseleave": {
                            tooltip.#handleTargetMouseLeaveEvent();
                            break;
                        }
                    }
                }
            };
        })(this);
        this.#documentListenerObject = (function (tooltip) {
            return {
                handleEvent(event) {
                    const { type } = event;
                    switch (type) {
                        case "keydown": {
                            tooltip.#handleDocumentKeyDownEvent(event);
                            break;
                        }
                    }
                }
            };
        })(this);
    }
    connectedCallback() {
        this.#setTarget();
    }
    attributeChangedCallback(name, oldValue, newValue) {
        switch (name) {
            case "for": {
                this.#setTarget();
                break;
            }
        }
    }
    #setTarget() {
        const { htmlFor } = this;
        if (htmlFor) {
            const rootNode = this.getRootNode();
            if (rootNode instanceof Document || rootNode instanceof ShadowRoot) {
                const target = rootNode.getElementById(htmlFor);
                if (target !== null) {
                    const oldTarget = this.#target;
                    const targetListenerObject = this.#targetListenerObject;
                    if (oldTarget) {
                        oldTarget.removeEventListener("mouseenter", targetListenerObject);
                        oldTarget.removeEventListener("mouseleave", targetListenerObject);
                    }
                    target.addEventListener("mouseenter", targetListenerObject);
                    target.addEventListener("mouseleave", targetListenerObject);
                }
                this.#target = target;
            }
            this.#position();
        }
    }
    show(options) {
        const { immediate = false } = options ?? {};
        let toggleAnimation = this.#toggleAnimation;
        if (toggleAnimation !== null) {
            const { id } = toggleAnimation;
            if (id === "hide") {
                toggleAnimation.cancel();
            }
            else if (!immediate) {
                return;
            }
        }
        if (!this.visible) {
            this.hidden = false;
            toggleAnimation = this.animate([
                { opacity: 0 },
                { opacity: 1 }
            ], {
                id: "show",
                delay: immediate ? 0 : SHOW_DELAY_MS,
                duration: immediate ? 0 : ANIMATION_DURATION
            });
            const { finished } = toggleAnimation;
            finished.then(() => {
                this.visible = true;
            }).catch(_ => void 0);
            this.#toggleAnimation = toggleAnimation;
            this.#position();
        }
        else {
            this.#toggleAnimation = null;
        }
    }
    hide(options) {
        const { immediate = false } = options ?? {};
        let toggleAnimation = this.#toggleAnimation;
        if (toggleAnimation !== null) {
            const { id } = toggleAnimation;
            if (id === "show") {
                toggleAnimation.cancel();
            }
            else if (!immediate) {
                return;
            }
        }
        if (this.visible) {
            toggleAnimation = this.animate([
                { opacity: 1 },
                { opacity: 0 }
            ], {
                id: "hide",
                delay: immediate ? 0 : HIDE_DELAY_MS,
                duration: immediate ? 0 : ANIMATION_DURATION
            });
            const { finished } = toggleAnimation;
            finished.then(() => {
                this.visible = false;
                this.hidden = true;
            }).catch(_ => void 0);
            this.#toggleAnimation = toggleAnimation;
        }
        else {
            this.#toggleAnimation = null;
        }
    }
    #arrow() {
        return this.shadowRoot.querySelector("[part=arrow]");
    }
    #position() {
        const target = this.#target;
        if (target !== null) {
            const { top: targetTop, bottom: targetBottom, left: targetLeft, right: targetRight } = target.getBoundingClientRect();
            const { width: tooltipWidth, height: tooltipHeight } = this.getBoundingClientRect();
            const tooltipHalfWidth = tooltipWidth / 2;
            const tooltipHalfHeight = tooltipHeight / 2;
            const targetCenter = (targetRight + targetLeft) / 2;
            const targetMiddle = (targetBottom + targetTop) / 2;
            const { position, style: tooltipStyle } = this;
            const arrow = this.#arrow();
            const { style: arrowStyle } = arrow;
            const { width: arrowWidth, height: arrowHeight } = arrow.getBoundingClientRect();
            const arrowHalfWidth = arrowWidth / 2;
            const arrowHalfHeight = arrowHeight / 2;
            const { clientWidth } = document.body;
            switch (position) {
                case "top": {
                    tooltipStyle.setProperty("top", `${targetTop - tooltipHeight - arrowHalfHeight}px`);
                    tooltipStyle.setProperty("left", `${Math.max(0, Math.min(targetCenter - tooltipHalfWidth, clientWidth - tooltipWidth))}px`);
                    arrowStyle.setProperty("top", `${targetTop - arrowHalfHeight}px`);
                    arrowStyle.setProperty("left", `${targetCenter}px`);
                    break;
                }
                case "bottom": {
                    tooltipStyle.setProperty("top", `${targetBottom + arrowHalfHeight}px`);
                    tooltipStyle.setProperty("left", `${Math.max(0, Math.min(targetCenter - tooltipHalfWidth, clientWidth - tooltipWidth))}px`);
                    arrowStyle.setProperty("top", `${targetBottom + arrowHalfHeight}px`);
                    arrowStyle.setProperty("left", `${targetCenter}px`);
                    break;
                }
                case "left": {
                    tooltipStyle.setProperty("top", `${targetMiddle - tooltipHalfHeight}px`);
                    tooltipStyle.setProperty("left", `${targetLeft - tooltipWidth - arrowHalfWidth}px`);
                    arrowStyle.setProperty("top", `${targetMiddle}px`);
                    arrowStyle.setProperty("left", `${targetLeft - arrowHalfWidth}px`);
                    break;
                }
                case "right": {
                    tooltipStyle.setProperty("top", `${targetMiddle - tooltipHalfHeight}px`);
                    tooltipStyle.setProperty("left", `${targetRight + arrowHalfWidth}px`);
                    arrowStyle.setProperty("top", `${targetMiddle}px`);
                    arrowStyle.setProperty("left", `${targetRight + arrowHalfWidth}px`);
                    break;
                }
            }
        }
    }
    #handleTargetMouseEnterEvent() {
        this.show();
        const toggleAnimation = this.#toggleAnimation;
        if (toggleAnimation) {
            const documentListenerObject = this.#documentListenerObject;
            const { finished } = toggleAnimation;
            finished.then(() => {
                document.addEventListener("keydown", documentListenerObject);
            }).catch(_ => void 0);
        }
    }
    #handleTargetMouseLeaveEvent() {
        this.hide();
        const toggleAnimation = this.#toggleAnimation;
        if (toggleAnimation) {
            const documentListenerObject = this.#documentListenerObject;
            const { finished } = toggleAnimation;
            finished.then(() => {
                document.removeEventListener("keydown", documentListenerObject);
            }).catch(_ => void 0);
        }
    }
    #handleDocumentKeyDownEvent(event) {
        const { key } = event;
        switch (key) {
            case "Escape": {
                this.hide({
                    immediate: true
                });
                break;
            }
        }
    }
};
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: String, observed: true, name: "for" })
], HTMLEToolTipElementBase.prototype, "htmlFor", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: String, defaultValue: "top" })
], HTMLEToolTipElementBase.prototype, "position", void 0);
__decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: Boolean })
], HTMLEToolTipElementBase.prototype, "visible", void 0);
HTMLEToolTipElementBase = __decorate([
    (0,_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-tooltip"
    })
], HTMLEToolTipElementBase);
var HTMLEToolTipElement = HTMLEToolTipElementBase;
//# sourceMappingURL=ToolTip.js.map

/***/ }),

/***/ "../editor/lib/elements/misc/index.js":
/*!********************************************!*\
  !*** ../editor/lib/elements/misc/index.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HTMLEHandleElement": () => (/* reexport safe */ _Handle__WEBPACK_IMPORTED_MODULE_0__.HTMLEHandleElement),
/* harmony export */   "HTMLEImportElement": () => (/* reexport safe */ _Import__WEBPACK_IMPORTED_MODULE_1__.HTMLEImportElement),
/* harmony export */   "HTMLELoaderElement": () => (/* reexport safe */ _Loader__WEBPACK_IMPORTED_MODULE_2__.HTMLELoaderElement),
/* harmony export */   "HTMLESeparatorElement": () => (/* reexport safe */ _Separator__WEBPACK_IMPORTED_MODULE_3__.HTMLESeparatorElement),
/* harmony export */   "HTMLEToolTipElement": () => (/* reexport safe */ _ToolTip__WEBPACK_IMPORTED_MODULE_4__.HTMLEToolTipElement)
/* harmony export */ });
/* harmony import */ var _Handle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Handle */ "../editor/lib/elements/misc/Handle.js");
/* harmony import */ var _Import__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Import */ "../editor/lib/elements/misc/Import.js");
/* harmony import */ var _Loader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Loader */ "../editor/lib/elements/misc/Loader.js");
/* harmony import */ var _Separator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Separator */ "../editor/lib/elements/misc/Separator.js");
/* harmony import */ var _ToolTip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ToolTip */ "../editor/lib/elements/misc/ToolTip.js");










//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../editor/lib/models/Model.js":
/*!*************************************!*\
  !*** ../editor/lib/models/Model.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ModelChangeObserver": () => (/* binding */ ModelChangeObserver),
/* harmony export */   "ModelChangeRecord": () => (/* binding */ ModelChangeRecord),
/* harmony export */   "ModelEvent": () => (/* binding */ ModelEvent),
/* harmony export */   "ModelList": () => (/* binding */ ModelList),
/* harmony export */   "ModelNode": () => (/* binding */ ModelNode),
/* harmony export */   "ModelObject": () => (/* binding */ ModelObject),
/* harmony export */   "ReactiveProperty": () => (/* binding */ ReactiveProperty)
/* harmony export */ });







class ModelChangeRecordBase {
    target;
    changeType;
    propertyName;
    oldValue;
    newValue;
    removedIndex;
    removedItems;
    insertedIndex;
    insertedItems;
    sortedIndices;
    constructor(init) {
        this.target = init.target;
        this.changeType = init.changeType;
        this.propertyName = init.propertyName ?? null;
        this.oldValue = init.oldValue ?? undefined;
        this.newValue = init.newValue ?? undefined;
        this.removedIndex = init.removedIndex ?? 0;
        this.removedItems = new ModelNodesList(init.removedItems ?? []);
        this.insertedIndex = init.insertedIndex ?? 0;
        this.insertedItems = new ModelNodesList(init.insertedItems ?? []);
        this.sortedIndices = init.sortedIndices ?? [];
    }
    static get PROPERTY_CHANGE() {
        return 1;
    }
    static get LIST_REMOVE() {
        return 2;
    }
    static get LIST_INSERT() {
        return 3;
    }
    static get LIST_SORT() {
        return 4;
    }
    get PROPERTY_CHANGE() {
        return ModelChangeRecordBase.PROPERTY_CHANGE;
    }
    get LIST_REMOVE() {
        return ModelChangeRecordBase.LIST_REMOVE;
    }
    get LIST_INSERT() {
        return ModelChangeRecordBase.LIST_INSERT;
    }
    get LIST_SORT() {
        return ModelChangeRecordBase.LIST_SORT;
    }
}
var ModelChangeRecord = ModelChangeRecordBase;
class ModelNodesListBase {
    #items;
    constructor(items) {
        this.#items = items.slice();
    }
    get length() {
        return this.#items.length;
    }
    item(index) {
        return this.#items[index] ?? null;
    }
    values() {
        return this.#items.values();
    }
}
var ModelNodesList = ModelNodesListBase;
class ModelEventBase {
    type;
    #currentTarget;
    #target;
    constructor(type) {
        this.type = type;
        this.#currentTarget = null;
        this.#target = null;
    }
    get currentTarget() {
        return this.#currentTarget;
    }
    get target() {
        return this.#target;
    }
    static ModelEventTargetAccessor = new class ModelEventTargetAccessor {
        setCurrentTarget(event, currentTarget) {
            if (event instanceof ModelEventBase) {
                event.#currentTarget = currentTarget;
            }
        }
        setTarget(event, target) {
            if (event instanceof ModelEventBase) {
                event.#target = target;
            }
        }
    };
}
var ModelEventTargetAccessor = ModelEventBase.ModelEventTargetAccessor;
delete ModelEventBase.ModelEventTargetAccessor;
var ModelEvent = ModelEventBase;
class ModelEventTargetBase {
    #callbacks;
    constructor() {
        this.#callbacks = new Map();
    }
    receiveEvent(event) {
        const { type } = event;
        const callbacks = this.#callbacks.get(type);
        ModelEventTargetAccessor.setCurrentTarget(event, this);
        if (callbacks) {
            callbacks.forEach((callback_i) => {
                callback_i(event);
            });
        }
    }
    addEventListener(type, callback) {
        const callbacks = this.#callbacks.get(type);
        if (callbacks) {
            callbacks.push(callback);
        }
        else {
            this.#callbacks.set(type, [callback]);
        }
    }
    removeEventListener(type, callback) {
        const callbacks = this.#callbacks.get(type);
        if (callbacks) {
            const callbackIndex = callbacks.findIndex(callback_i => callback_i == callback);
            if (callbackIndex > -1) {
                callbacks.splice(callbackIndex, 1);
            }
            if (callbacks.length == 0) {
                this.#callbacks.delete(type);
            }
        }
    }
    dispatchEvent(event) {
        ModelEventTargetAccessor.setTarget(event, this);
        this.receiveEvent(event);
    }
}
var ModelEventTarget = ModelEventTargetBase;
class ModelNodeBase extends ModelEventTargetBase {
    #parentNode;
    #records;
    #isRecording;
    constructor() {
        super();
        this.#parentNode = null;
        this.#records = [];
        this.#isRecording = false;
    }
    get parentNode() {
        return this.#parentNode;
    }
    setParent(parentNode) {
        if (parentNode !== null) {
            let isCyclicReference = parentNode == this;
            let { parentNode: ancestorNode } = parentNode;
            while (!isCyclicReference && ancestorNode !== null) {
                ({ parentNode: ancestorNode } = ancestorNode);
                isCyclicReference = ancestorNode == this;
            }
            if (!isCyclicReference) {
                this.#parentNode = parentNode;
            }
            else {
                throw new TypeError("Failed to set parent on ModelNode: circular reference detected in the hierarchy.");
            }
        }
        else {
            this.#parentNode = null;
        }
    }
    beginChanges() {
        this.#isRecording = true;
    }
    endChanges() {
        this.dispatchEvent(new ModelEvent("modelchange"));
        this.#records.splice(0);
        this.#isRecording = false;
    }
    getRecords() {
        return this.#records.slice();
    }
    receiveEvent(event) {
        super.receiveEvent(event);
        const { parentNode } = this;
        if (parentNode) {
            parentNode.receiveEvent(event);
        }
    }
    #triggerChange(property, oldValue, newValue) {
        const records = this.#records;
        const record = new ModelChangeRecord({
            target: this,
            changeType: ModelChangeRecord.PROPERTY_CHANGE,
            propertyName: property,
            oldValue, newValue
        });
        records.push(record);
        if (!this.#isRecording) {
            this.dispatchEvent(new ModelEvent("modelchange"));
            records.splice(0);
        }
    }
    #handleRecord(record) {
        this.#records.push(record);
        if (!this.#isRecording) {
            this.dispatchEvent(new ModelEvent("modelchange"));
            this.#records.splice(0);
        }
    }
    static ModelNodeRecordsAccessor = new class ModelNodeRecordsAccessor {
        triggerChange(node, property, oldValue, newValue) {
            if (node instanceof ModelNodeBase) {
                node.#triggerChange(property, oldValue, newValue);
            }
        }
        handleRecord(node, record) {
            if (node instanceof ModelNodeBase) {
                node.#handleRecord(record);
            }
        }
    };
}
var ModelNodeRecordsAccessor = ModelNodeBase.ModelNodeRecordsAccessor;
delete ModelNodeBase.ModelNodeRecordsAccessor;
var ModelNode = ModelNodeBase;
const ReactiveProperty = function () {
    return (target, property) => {
        const { constructor } = target;
        const { prototype } = constructor;
        const setter = function (value) {
            const oldValue = ModelReactivePropertiesAccessor.getProperty(this, property);
            ModelReactivePropertiesAccessor.setProperty(this, property, value);
            if (value !== oldValue) {
                ModelNodeRecordsAccessor.triggerChange(this, property, oldValue, value);
            }
            return true;
        };
        const getter = function () {
            return ModelReactivePropertiesAccessor.getProperty(this, property);
        };
        Object.defineProperty(prototype, property, {
            set: setter,
            get: getter,
            enumerable: true
        });
    };
};
class ModelObjectBase extends ModelNodeBase {
    #properties;
    constructor() {
        super();
        this.#properties = new Map();
    }
    static ModelReactivePropertiesAccessor = new class ModelReactivePropertiesAccessor {
        setProperty(node, property, value) {
            if (node instanceof ModelObjectBase) {
                node.#properties.set(property, value);
            }
        }
        getProperty(node, property) {
            if (node instanceof ModelObjectBase) {
                return node.#properties.get(property);
            }
        }
    };
}
var ModelReactivePropertiesAccessor = ModelObjectBase.ModelReactivePropertiesAccessor;
delete ModelObjectBase.ModelReactivePropertiesAccessor;
var ModelObject = ModelObjectBase;
class ModelListBase extends ModelNodeBase {
    #items;
    constructor(items) {
        super();
        this.#items = items?.slice() ?? [];
    }
    setParent(parentNode) {
        super.setParent(parentNode);
        this.#items.forEach((item_i) => {
            item_i.setParent(parentNode);
        });
    }
    get length() {
        return this.#items.length;
    }
    get(index) {
        return this.#items[index] ?? null;
    }
    index(item) {
        return this.#items.indexOf(item);
    }
    values() {
        return this.#items.values();
    }
    sort(compareFunction) {
        const items = this.#items;
        const indexedItems = items.map((item_i, i) => {
            return {
                item: item_i,
                index: i
            };
        });
        indexedItems.sort((indexedItem_a, indexedItem_b) => {
            return compareFunction(indexedItem_a.item, indexedItem_b.item);
        });
        this.#items = indexedItems.map(indexedItem_i => indexedItem_i.item);
        const record = new ModelChangeRecord({
            target: this,
            changeType: ModelChangeRecord.LIST_SORT,
            sortedIndices: indexedItems.map(indexedItem_i => indexedItem_i.index)
        });
        ModelNodeRecordsAccessor.handleRecord(this, record);
    }
    prepend(...items) {
        const _items = this.#items;
        const { parentNode } = this;
        if (parentNode) {
            items.forEach(item_i => {
                item_i.setParent(parentNode);
            });
        }
        _items.splice(0, 0, ...items);
        const record = new ModelChangeRecord({
            target: this,
            changeType: ModelChangeRecord.LIST_INSERT,
            insertedIndex: 0,
            insertedItems: items
        });
        ModelNodeRecordsAccessor.handleRecord(this, record);
    }
    append(...items) {
        const _items = this.#items;
        const { length } = _items;
        const { parentNode } = this;
        if (parentNode) {
            items.forEach(item_i => {
                item_i.setParent(parentNode);
            });
        }
        _items.push(...items);
        const record = new ModelChangeRecord({
            target: this,
            changeType: ModelChangeRecord.LIST_INSERT,
            insertedIndex: length,
            insertedItems: items
        });
        ModelNodeRecordsAccessor.handleRecord(this, record);
    }
    insert(index, ...items) {
        const _items = this.#items;
        const { length } = _items;
        const positiveIndex = Math.abs(index);
        if (positiveIndex <= length) {
            if (index >= 0) {
                const { parentNode } = this;
                items.forEach(item_i => {
                    item_i.setParent(parentNode);
                });
                if (index < length) {
                    _items.splice(index, 0, ...items);
                }
                else {
                    _items.push(...items);
                }
            }
            else if (index < 0) {
                index = length - index;
                const { parentNode } = this;
                if (parentNode) {
                    items.forEach(item_i => {
                        item_i.setParent(parentNode);
                    });
                }
                _items.splice(index, 0, ...items);
            }
            const record = new ModelChangeRecord({
                target: this,
                changeType: ModelChangeRecord.LIST_INSERT,
                insertedIndex: index,
                insertedItems: items.slice()
            });
            ModelNodeRecordsAccessor.handleRecord(this, record);
        }
    }
    remove(item) {
        const _items = this.#items;
        const index = _items.indexOf(item);
        if (index > -1) {
            const item = _items.splice(index, 1)[0];
            const { parentNode } = this;
            if (parentNode) {
                item.setParent(null);
            }
            const record = new ModelChangeRecord({
                target: this,
                changeType: ModelChangeRecord.LIST_REMOVE,
                removedIndex: index,
                removedItems: [item]
            });
            ModelNodeRecordsAccessor.handleRecord(this, record);
        }
    }
    clear() {
        const items = this.#items;
        const { length } = items;
        if (length > 0) {
            const removedItems = items.splice(0);
            const { parentNode } = this;
            if (parentNode) {
                removedItems.forEach((removedItem_i) => {
                    removedItem_i.setParent(null);
                });
            }
            const record = new ModelChangeRecord({
                target: this,
                changeType: ModelChangeRecord.LIST_REMOVE,
                removedIndex: 0,
                removedItems: removedItems
            });
            ModelNodeRecordsAccessor.handleRecord(this, record);
        }
    }
}
;
var ModelList = ModelListBase;
class ModelChangeObserverBase {
    #callback;
    #records;
    #disconnected;
    #references;
    constructor(callback) {
        this.#callback = callback;
        this.#records = [];
        this.#disconnected = false;
        this.#references = new WeakMap();
    }
    observe(node, options) {
        this.#disconnected = false;
        const references = this.#references;
        let reference = references.get(node);
        if (!reference) {
            const listener = this.#handleModelEvent.bind(this);
            node.addEventListener("modelchange", listener);
            reference = { listener, options };
            references.set(node, reference);
        }
        else {
            references.set(node, reference);
        }
    }
    unobserve(node) {
        const references = this.#references;
        let reference = references.get(node);
        if (reference) {
            const { listener } = reference;
            node.removeEventListener("modelchange", listener);
        }
    }
    disconnect() {
        this.#records.splice(0);
        this.#disconnected = true;
    }
    #trigger() {
        const records = this.#records.splice(0);
        if (records.length > 0) {
            this.#callback(records);
        }
    }
    #handleModelEvent(event) {
        if (!this.#disconnected) {
            const { target, currentTarget } = event;
            const reference = this.#references.get(currentTarget);
            if (reference) {
                const { options } = reference;
                const { properties, propertiesFilter, childList, subtree } = options;
                if (subtree) {
                    if (properties && target instanceof ModelNode) {
                        if (propertiesFilter) {
                            this.#records.push(...target.getRecords()
                                .filter(record_i => {
                                const { propertyName } = record_i;
                                return propertiesFilter.includes(propertyName);
                            }));
                        }
                        else {
                            this.#records.push(...target.getRecords());
                        }
                        this.#trigger();
                    }
                    else if (childList && target instanceof ModelList) {
                        this.#records.push(...target.getRecords());
                        this.#trigger();
                    }
                }
                else if (target == currentTarget) {
                    if (properties && target instanceof ModelNode) {
                        if (propertiesFilter) {
                            this.#records.push(...target.getRecords()
                                .filter(record_i => {
                                const { propertyName } = record_i;
                                return propertiesFilter.includes(propertyName);
                            }));
                        }
                        else {
                            this.#records.push(...target.getRecords());
                        }
                        this.#trigger();
                    }
                    else if (childList && target instanceof ModelList) {
                        this.#records.push(...target.getRecords());
                        this.#trigger();
                    }
                }
            }
        }
    }
}
var ModelChangeObserver = ModelChangeObserverBase;
//# sourceMappingURL=Model.js.map

/***/ }),

/***/ "../editor/lib/stylesheets/Reset.js":
/*!******************************************!*\
  !*** ../editor/lib/stylesheets/Reset.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "resetStylesheet": () => (/* binding */ resetStylesheet)
/* harmony export */ });
/* harmony import */ var _Theme__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Theme */ "../editor/lib/stylesheets/Theme.js");


const resetStylesheet = new CSSStyleSheet();
resetStylesheet.replace(/*css*/ `
    
    html.fullscreen,
    html.fullscreen > body {
        height: 100%;
    }

    dialog {
        overflow: visible;
    }

    body {
        font-size: 13px;
        margin: 0;
    }

    ::backdrop {
        background-color: rgba(120, 120, 120, 0.2);
    }

    ::selection {
        background-color: ${_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_SELECTED_ITEM_COLOR};
    }
    
    input,
    output,
    button,
    select,
    textarea {
        margin: 0;
        font-family: inherit;
        font-size: inherit;
        box-sizing: content-box;
    }

    dialog {
        box-sizing: border-box;
    }

    input {
        border: 1px solid grey;
    }

    legend {
        padding: 0 6px;
    }

    select,
    progress {
        height: 22px;
    }

    input {
        height: 18px;
    }

    input:is([type="radio"], [type="checkbox"]) {
        width: 18px; 
    }

    input[type="color" i] {
        border: none;
        padding: 0;
    }

    ::-webkit-color-swatch {
        border: none;
    }

    ::-webkit-color-swatch-wrapper {
        padding: 0;
    }

    ::-webkit-search-cancel-button {
        appearance: none;
    }

    dialog,
    fieldset {
        padding: 8px;
        border: 1px solid lightgrey;
    }

    button[type="submit"] {
        border-width: 2px;
    }

    button:hover {
        background-color: var(--theme-hovered-item-color, ${_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_HOVERED_ITEM_COLOR});
    }

    button:not([aria-pressed]):focus,
    button[aria-pressed="true"] {
        background-color: var(--theme-focused-item-color, ${_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_COLOR});
    }

    button {
        height: 18px;
        appearance: none;
        background: none;
        border: 1px solid var(--theme-focused-item-outline-color, ${_Theme__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
    }

    table {
        border-spacing: 0;
    }

    ul {
        padding: 0;
        margin: 0;
    }
`);
//# sourceMappingURL=Reset.js.map

/***/ }),

/***/ "../editor/lib/stylesheets/Theme.js":
/*!******************************************!*\
  !*** ../editor/lib/stylesheets/Theme.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DEFAULT_THEME_ACTIVATED_ITEM_COLOR": () => (/* binding */ DEFAULT_THEME_ACTIVATED_ITEM_COLOR),
/* harmony export */   "DEFAULT_THEME_ARROW_DROPDOWN_IMAGE": () => (/* reexport default export from named module */ _assets_arrow_drop_down_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_1__),
/* harmony export */   "DEFAULT_THEME_ARROW_DROPUP_IMAGE": () => (/* reexport default export from named module */ _assets_arrow_drop_up_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_2__),
/* harmony export */   "DEFAULT_THEME_ARROW_RIGHT_IMAGE": () => (/* reexport default export from named module */ _assets_arrow_right_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_0__),
/* harmony export */   "DEFAULT_THEME_CHECKED_IMAGE": () => (/* reexport default export from named module */ _assets_done_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_3__),
/* harmony export */   "DEFAULT_THEME_DROPTARGET_ITEM_COLOR": () => (/* binding */ DEFAULT_THEME_DROPTARGET_ITEM_COLOR),
/* harmony export */   "DEFAULT_THEME_FOCUSED_ITEM_COLOR": () => (/* binding */ DEFAULT_THEME_FOCUSED_ITEM_COLOR),
/* harmony export */   "DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR": () => (/* binding */ DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR),
/* harmony export */   "DEFAULT_THEME_HOVERED_ITEM_COLOR": () => (/* binding */ DEFAULT_THEME_HOVERED_ITEM_COLOR),
/* harmony export */   "DEFAULT_THEME_SELECTED_ITEM_COLOR": () => (/* binding */ DEFAULT_THEME_SELECTED_ITEM_COLOR),
/* harmony export */   "theme": () => (/* binding */ theme)
/* harmony export */ });
/* harmony import */ var _assets_arrow_right_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../assets/arrow_right_FILL0_wght400_GRAD0_opsz48.svg */ "../editor/assets/arrow_right_FILL0_wght400_GRAD0_opsz48.svg");
/* harmony import */ var _assets_arrow_drop_down_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../assets/arrow_drop_down_FILL0_wght400_GRAD0_opsz48.svg */ "../editor/assets/arrow_drop_down_FILL0_wght400_GRAD0_opsz48.svg");
/* harmony import */ var _assets_arrow_drop_up_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../assets/arrow_drop_up_FILL0_wght400_GRAD0_opsz48.svg */ "../editor/assets/arrow_drop_up_FILL0_wght400_GRAD0_opsz48.svg");
/* harmony import */ var _assets_done_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../assets/done_FILL0_wght400_GRAD0_opsz48.svg */ "../editor/assets/done_FILL0_wght400_GRAD0_opsz48.svg");
/* harmony import */ var _assets_fonts_Open_Sans_OpenSans_VariableFont_wdth_wght_ttf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../assets/fonts/Open_Sans/OpenSans-VariableFont_wdth,wght.ttf */ "../editor/assets/fonts/Open_Sans/OpenSans-VariableFont_wdth,wght.ttf");
/* harmony import */ var _models_Model__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/Model */ "../editor/lib/models/Model.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

















const DEFAULT_THEME_TINT = 203;
const DEFAULT_THEME_ACCENT_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%, 50%)`;
const DEFAULT_THEME_HOVERED_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 80%, 50%)`;
const DEFAULT_THEME_FOCUSED_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%, 50%)`;
const DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%)`;
const DEFAULT_THEME_SELECTED_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 75%, 75%)`;
const DEFAULT_THEME_ACTIVATED_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%, 50%)`;
const DEFAULT_THEME_DROPTARGET_ITEM_COLOR = `hsl(var(--theme-tint, ${DEFAULT_THEME_TINT}), 92%, 50%, 50%)`;
class Theme extends _models_Model__WEBPACK_IMPORTED_MODULE_5__.ModelObject {
    stylesheet;
    images() {
        return new Map([
            ["checkedImage", this.checkedImage],
            ["arrowRightImage", this.arrowRightImage],
            ["arrowDropDownImage", this.arrowDropDownImage],
            ["arrowDropUpImage", this.arrowDropUpImage],
        ]);
    }
    constructor() {
        super();
        this.stylesheet = new CSSStyleSheet();
        this.stylesheet.replace(/*css*/ `
            :root {
                --theme-accent-color: ${DEFAULT_THEME_ACCENT_COLOR};
                --theme-hovered-item-color: ${DEFAULT_THEME_HOVERED_ITEM_COLOR};
                --theme-focused-item-color: ${DEFAULT_THEME_FOCUSED_ITEM_COLOR};
                --theme-focused-item-outline-color: ${DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR};
                --theme-selected-item-color: ${DEFAULT_THEME_SELECTED_ITEM_COLOR};
                --theme-activated-item-color: ${DEFAULT_THEME_ACTIVATED_ITEM_COLOR};
                --theme-droptarget-item-color: ${DEFAULT_THEME_DROPTARGET_ITEM_COLOR};

                --theme-tint: ${DEFAULT_THEME_TINT};
                --theme-arrow-right-image: url(${_assets_arrow_right_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_0__});
                --theme-arrow-dropdown-image: url(${_assets_arrow_drop_down_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_1__});
                --theme-arrow-dropup-image: url(${_assets_arrow_drop_up_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_2__});
                --theme-checked-image: url(${_assets_arrow_drop_down_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_1__});

                --theme-arrow-color: var(--font-color);
                --theme-arrow-icon-collapsed: var(--arrow-right);
                --theme-arrow-icon-expanded: var(--arrow-dropdown);

                --theme-sortorder-indicator-color: var(--font-color);
                --theme-sortorder-indicator-ascending: var(--arrow-dropup);
                --theme-sortorder-indicator-descending: var(--arrow-dropdown);
            }
            
            @font-face {
                font-family: "Open Sans";
                src: url(${_assets_fonts_Open_Sans_OpenSans_VariableFont_wdth_wght_ttf__WEBPACK_IMPORTED_MODULE_4__}) format("truetype")
            }

            :root {
                font-size: 10px;
                font-family: "Open Sans";
                accent-color: var(--theme-accent-color);
            }

            ::selection {
                background-color: var(--theme-selected-item-color);
            }
        `);
        this.addEventListener("modelchange", this.#handleModelChangeEvent.bind(this));
        this.tint = DEFAULT_THEME_TINT;
        this.arrowRightImage = _assets_arrow_right_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_0__;
        this.arrowDropDownImage = _assets_arrow_drop_down_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_1__;
        this.arrowDropUpImage = _assets_arrow_drop_up_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_2__;
        this.checkedImage = _assets_arrow_drop_down_FILL0_wght400_GRAD0_opsz48_svg__WEBPACK_IMPORTED_MODULE_1__;
    }
    #handleModelChangeEvent() {
        const { stylesheet } = this;
        const variablesMap = stylesheet.cssRules[0].styleMap;
        const records = this.getRecords();
        records.forEach((record) => {
            const { propertyName, newValue } = record;
            switch (propertyName) {
                case "tint": {
                    variablesMap.set("--theme-tint", String(newValue));
                    break;
                }
                case "checkedImage": {
                    variablesMap.set("--theme-checked-image", `url(${String(newValue)})`);
                    break;
                }
                case "arrowRightImage": {
                    variablesMap.set("--theme-arrow-right-image", `url(${String(newValue)})`);
                    break;
                }
                case "arrowDropDown": {
                    variablesMap.set("--theme-arrow-dropdown-image", `url(${String(newValue)})`);
                    break;
                }
                case "arrowDropUp": {
                    variablesMap.set("--theme-arrow-dropup-image", `url(${String(newValue)})`);
                    break;
                }
            }
        });
    }
}
__decorate([
    (0,_models_Model__WEBPACK_IMPORTED_MODULE_5__.ReactiveProperty)()
], Theme.prototype, "tint", void 0);
__decorate([
    (0,_models_Model__WEBPACK_IMPORTED_MODULE_5__.ReactiveProperty)()
], Theme.prototype, "checkedImage", void 0);
__decorate([
    (0,_models_Model__WEBPACK_IMPORTED_MODULE_5__.ReactiveProperty)()
], Theme.prototype, "arrowRightImage", void 0);
__decorate([
    (0,_models_Model__WEBPACK_IMPORTED_MODULE_5__.ReactiveProperty)()
], Theme.prototype, "arrowDropDownImage", void 0);
__decorate([
    (0,_models_Model__WEBPACK_IMPORTED_MODULE_5__.ReactiveProperty)()
], Theme.prototype, "arrowDropUpImage", void 0);
const theme = new Theme();
//# sourceMappingURL=Theme.js.map

/***/ }),

/***/ "../editor/lib/views/GridView.js":
/*!***************************************!*\
  !*** ../editor/lib/views/GridView.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GridColumnModel": () => (/* binding */ GridColumnModel),
/* harmony export */   "GridModel": () => (/* binding */ GridModel),
/* harmony export */   "GridRowModel": () => (/* binding */ GridRowModel),
/* harmony export */   "GridView": () => (/* binding */ GridView)
/* harmony export */ });
/* harmony import */ var _elements_Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../elements/Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _models_Model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/Model */ "../editor/lib/models/Model.js");
/* harmony import */ var _View__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./View */ "../editor/lib/views/View.js");
/* harmony import */ var _stylesheets_Reset__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../stylesheets/Reset */ "../editor/lib/stylesheets/Reset.js");
/* harmony import */ var _elements_controls_sashes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../elements/controls/sashes */ "../editor/lib/elements/controls/sashes/index.js");
/* harmony import */ var _elements_containers_grid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../elements/containers/grid */ "../editor/lib/elements/containers/grid/index.js");
/* harmony import */ var _elements_containers_menus__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../elements/containers/menus */ "../editor/lib/elements/containers/menus/index.js");
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};












class GridModel extends _models_Model__WEBPACK_IMPORTED_MODULE_1__.ModelObject {
    rows;
    columns;
    constructor(init) {
        super();
        const { rows: initRows = [], columns: initColumns = [] } = init ?? {};
        const rows = new _models_Model__WEBPACK_IMPORTED_MODULE_1__.ModelList(initRows);
        rows.setParent(this);
        this.rows = rows;
        const columns = new _models_Model__WEBPACK_IMPORTED_MODULE_1__.ModelList(initColumns);
        columns.setParent(this);
        this.columns = columns;
    }
    getColumnByName(name) {
        return Array.from(this.columns.values()).find(column_i => column_i.name == name) ?? null;
    }
    sortByColumn(column, sortOrder) {
        Array.from(this.columns.values()).forEach((column_i) => {
            column_i.sortorder = column_i === column ? sortOrder : undefined;
        });
        const sortTest = (() => {
            const { type } = column;
            switch (type) {
                case String: {
                    return (row_1, row_2) => {
                        const cell_1 = String(column.extract(row_1));
                        const cell_2 = String(column.extract(row_2));
                        return sortOrder * cell_1.localeCompare(cell_2);
                    };
                }
                default: {
                    return (row_1, row_2) => {
                        const cell_1 = Number(column.extract(row_1));
                        const cell_2 = Number(column.extract(row_2));
                        return Math.sign(sortOrder * (cell_1 - cell_2));
                    };
                }
            }
        })();
        this.rows.sort(sortTest);
    }
}
class GridColumnModel extends _models_Model__WEBPACK_IMPORTED_MODULE_1__.ModelObject {
    name;
    type;
    label;
    extract;
    filters;
    sortorder;
    constructor(init) {
        super();
        const { name, type, label, extract, filters = [] } = init;
        this.name = name;
        this.type = type;
        this.label = label;
        this.extract = extract;
        this.filters = filters;
    }
}
__decorate([
    (0,_models_Model__WEBPACK_IMPORTED_MODULE_1__.ReactiveProperty)()
], GridColumnModel.prototype, "sortorder", void 0);
class GridRowModel extends _models_Model__WEBPACK_IMPORTED_MODULE_1__.ModelObject {
    id;
    constructor(init) {
        super();
        const { id } = init;
        this.id = id;
    }
}
var style;
let GridViewBase = class GridViewBase extends _View__WEBPACK_IMPORTED_MODULE_2__.View {
    #columnDelegate;
    #cellDelegate;
    #displayFilters;
    static {
        style = /*css*/ `
            :host {
                display: block;
            }
            
            e-gridrow[hidden] {
                display: none;
            }
            
            e-gridcell[type="gridcell"] {
                max-width: 0;
                overflow: clip;
                text-overflow: ellipsis;
                white-space: nowrap;
            }
            
            e-gridcell[type="columnheader"] {
                width: 120px;
            }
            
            .gridcell-label,
            .gridheader-label {
                padding-left: 4px;
            }
            
            .gridcell-content {
                overflow: clip;
            }
            
            .gridheader-content {
                display: flex;
            }
            
            .gridheader-label {
                flex: 1 1 0;
                overflow: clip;
                text-overflow: ellipsis;
                white-space: nowrap;
            }
            
            e-treeitem::part(arrow) {
                display: inline-block;
                width: 18px;
                height: 18px;
                margin: 1px 4px 1px 1px;
            }
            
            .gridheader-sort-indicator {
                display: inline-block;
                width: 18px;
                height: 18px;
            }
            
            .gridheader-sort-indicator::before {
                display: inline-block;
                width: 18px;
                height: 18px;
                margin: 1px;
                content: "";

                mask-size: 18px 18px;
                -webkit-mask-size: 18px 18px;
                background-color: none;
            }
            
            e-gridcell[type="columnheader"]:not([data-sortorder]) .gridheader-sort-indicator::before {
                background-color: unset;
            }
            
            e-gridcell[type="columnheader"][data-sortorder="1"] .gridheader-sort-indicator::before {
                -webkit-mask-image: var(--theme-arrow-dropup-image, url(${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_THEME_ARROW_DROPUP_IMAGE}));
                mask-image: var(--theme-arrow-dropup-image, url(${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_THEME_ARROW_DROPUP_IMAGE}));
                background-color: black;
            }
            
            e-gridcell[type="columnheader"][data-sortorder="-1"] .gridheader-sort-indicator::before {
                -webkit-mask-image: var(--theme-arrow-dropdown-image, url(${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_THEME_ARROW_DROPDOWN_IMAGE}));
                mask-image: var(--theme-arrow-dropdown-image, url(${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_THEME_ARROW_DROPDOWN_IMAGE}));
                background-color: black;
            }
        `;
    }
    constructor(model) {
        super();
        this.#displayFilters = [];
        this.#cellDelegate =
            (row, column) => (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("label", {
                children: column.extract(row)
            });
        this.#columnDelegate =
            (column) => (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("label", {
                children: column.label
            });
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet, _stylesheets_Reset__WEBPACK_IMPORTED_MODULE_3__.resetStylesheet];
        this.setModel(model ?? new GridModel());
    }
    attributeChangedCallback(name, oldValue, newValue) {
        switch (name) {
            case "resizable":
            case "sortable": {
                this.render();
                break;
            }
        }
    }
    get gridElement() {
        return this.shadowRoot.querySelector("e-grid");
    }
    setColumnDelegate(delegate) {
        this.#columnDelegate = delegate;
    }
    setCellDelegate(delegate) {
        this.#cellDelegate = delegate;
    }
    getRowElement(row) {
        return this.shadowRoot.querySelector(`e-grid > e-gridbody > e-gridrow[data-index='${row.id}']`);
    }
    getColumnHeaderElement(column) {
        return this.shadowRoot.querySelector(`e-grid > e-gridhead > e-gridcell[id=${column.name}]`);
    }
    getColumnCellsElements(column) {
        return Array.from(this.shadowRoot.querySelectorAll(`e-grid > e-gridbody > e-gridrow > e-gridcell[headers~=${column.name}]`));
    }
    renderShadow() {
        const { model } = this;
        return (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.fragment)((0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-grid", {
            attributes: {
                tabindex: 0,
                selectby: "row",
                multisectable: true
            },
            children: [
                (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-gridhead", {
                    children: (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.reactiveChildElements)(model.columns, column => this.#renderGridColumnHeaderCell(column)),
                    listeners: {
                        contextmenu: this.#handleHeadContextMenuEvent.bind(this),
                        click: this.#handleHeadClickEvent.bind(this)
                    }
                }),
                (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-gridbody", {
                    children: (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.reactiveChildElements)(model.rows, row => this.#renderGridBodyRow(row))
                })
            ]
        }));
    }
    filter(row) {
        const displayFilters = this.#displayFilters;
        return (displayFilters.length > 0 ? displayFilters.some(filter_i => filter_i.filter(row)) : true);
    }
    addDisplayFilter(filter) {
        const { model, gridElement } = this;
        const { rows } = model;
        const displayFilters = this.#displayFilters;
        if (!displayFilters.includes(filter)) {
            displayFilters.push(filter);
            Array.from(rows.values()).forEach((row_i) => {
                const rowElement = this.getRowElement(row_i);
                if (rowElement) {
                    rowElement.hidden = !this.filter(row_i);
                }
            });
        }
        gridElement.clearSelection();
    }
    removeDisplayFilter(filter) {
        const { model, gridElement } = this;
        const { rows } = model;
        const displayFilters = this.#displayFilters;
        const filterIndex = displayFilters.indexOf(filter);
        if (filterIndex > -1) {
            displayFilters.splice(filterIndex, 1);
            Array.from(rows.values()).forEach((row_i) => {
                const rowElement = this.getRowElement(row_i);
                if (rowElement) {
                    rowElement.hidden = !this.filter(row_i);
                }
            });
        }
        gridElement.clearSelection();
    }
    removeAllDisplayFilters() {
        const { model, gridElement } = this;
        const { rows } = model;
        const displayFilters = this.#displayFilters;
        displayFilters.splice(0, displayFilters.length);
        Array.from(rows.values()).forEach((row_i) => {
            const rowElement = this.getRowElement(row_i);
            if (rowElement) {
                rowElement.hidden = !this.filter(row_i);
            }
        });
        gridElement.clearSelection();
    }
    #renderGridColumnHeaderCell(column) {
        const gridColumnElement = (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.reactiveElement)(column, (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-gridcell", {
            attributes: {
                type: "columnheader",
                id: column.name
            },
            children: [
                (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("span", {
                    attributes: {
                        class: "gridheader-content"
                    },
                    children: [
                        (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("span", {
                            attributes: {
                                class: "gridheader-label"
                            },
                            children: this.#columnDelegate(column)
                        }),
                        (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("span", {
                            attributes: {
                                class: "gridheader-sort-indicator"
                            }
                        }),
                        (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-wsash", {
                            attributes: {
                                controls: column.name
                            }
                        })
                    ]
                })
            ]
        }), ["sortorder"], (cell, property, oldValue, newValue) => {
            switch (property) {
                case "sortorder": {
                    const { dataset } = cell;
                    if (typeof newValue !== "undefined") {
                        dataset.sortorder = newValue.toString();
                    }
                    else {
                        delete dataset.sortorder;
                    }
                    break;
                }
            }
        });
        return gridColumnElement;
    }
    #renderGridBodyRow(row) {
        const { model } = this;
        const gridRowElement = (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-gridrow", {
            attributes: {
                tabindex: -1
            },
            dataset: {
                index: row.id
            },
            children: (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.reactiveChildElements)(model.columns, column => this.#renderGridDataCell(row, column))
        });
        return gridRowElement;
    }
    #renderGridDataCell(row, column) {
        const gridCellElement = (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-gridcell", {
            attributes: {
                type: "gridcell",
                headers: column.name
            },
            children: (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("span", {
                attributes: {
                    class: "gridcell-content"
                },
                children: [
                    (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("span", {
                        attributes: {
                            class: "gridcell-label"
                        },
                        children: this.#cellDelegate(row, column)
                    })
                ]
            })
        });
        return gridCellElement;
    }
    #handleHeadContextMenuEvent(event) {
        const { clientX, clientY, currentTarget, target } = event;
        const { gridElement } = this;
        const targetHead = currentTarget;
        const targetHeader = target.closest("e-gridcell");
        const { model } = this;
        if (targetHeader) {
            const column = model.getColumnByName(targetHeader.id);
            const { sortorder, filters } = column;
            const contextMenu = (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menu", {
                attributes: {
                    contextual: true
                },
                children: [
                    (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                        attributes: {
                            label: "Resize Auto"
                        },
                        children: "Resize auto",
                        listeners: {
                            click: () => {
                                const columnHeaderElement = this.getColumnHeaderElement(column);
                                if (columnHeaderElement) {
                                    const { style } = columnHeaderElement;
                                    const labels = this.getColumnCellsElements(column).map(cell_i => cell_i.querySelector(".gridcell-label"));
                                    const maxWidth = labels.reduce((maxWidth, label) => Math.max(maxWidth, label.getBoundingClientRect().width), 0);
                                    style.setProperty("width", `${maxWidth}px`);
                                }
                                gridElement.focus();
                            }
                        }
                    }),
                    (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                        attributes: {
                            label: "Resize To Default"
                        },
                        children: "Resize to Default",
                        listeners: {
                            click: () => {
                                const columnHeaderElement = this.getColumnHeaderElement(column);
                                if (columnHeaderElement) {
                                    const { style } = columnHeaderElement;
                                    style.removeProperty("width");
                                }
                                gridElement.focus();
                            }
                        }
                    }),
                    (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                        attributes: {
                            type: "submenu",
                            label: "Sort",
                        },
                        children: [
                            "Sort",
                            (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menu", {
                                attributes: {
                                    slot: "menu"
                                },
                                children: [
                                    (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                                        attributes: {
                                            type: "radio",
                                            name: "sort",
                                            value: "1",
                                            label: "Ascending",
                                            checked: sortorder === 1
                                        },
                                        children: "Ascending"
                                    }),
                                    (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                                        attributes: {
                                            type: "radio",
                                            name: "sort",
                                            value: "-1",
                                            label: "Descending",
                                            checked: sortorder === -1
                                        },
                                        children: "Descending"
                                    })
                                ],
                                listeners: {
                                    click: (event) => {
                                        const { target } = event;
                                        const targetItem = target.closest("e-menuitem");
                                        if (targetItem) {
                                            model.sortByColumn(column, Number(targetItem.value));
                                        }
                                        gridElement.focus();
                                    }
                                }
                            })
                        ]
                    }),
                    (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                        attributes: {
                            type: "submenu",
                            label: "Filter"
                        },
                        children: [
                            "Filter",
                            (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menu", {
                                attributes: {
                                    slot: "menu"
                                },
                                children: filters.map(filter => {
                                    const { name } = filter;
                                    return (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                                        attributes: {
                                            type: "checkbox",
                                            checked: this.#displayFilters.includes(filter),
                                            label: name
                                        },
                                        children: name
                                    });
                                }).concat((0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-menuitem", {
                                    attributes: {
                                        type: "button",
                                        label: "Remove filters"
                                    },
                                    children: "Remove filters"
                                })),
                                listeners: {
                                    click: (event) => {
                                        const { target } = event;
                                        const targetItem = target.closest("e-menuitem");
                                        if (targetItem) {
                                            const { checked, label } = targetItem;
                                            const filter = filters.find(filter => filter.name === label);
                                            if (filter) {
                                                if (checked) {
                                                    this.addDisplayFilter(filter);
                                                }
                                                else {
                                                    this.removeDisplayFilter(filter);
                                                }
                                            }
                                            else {
                                                this.removeAllDisplayFilters();
                                            }
                                        }
                                        gridElement.focus();
                                    }
                                }
                            })
                        ]
                    })
                ]
            });
            targetHead.append(contextMenu);
            contextMenu.positionContextual(clientX, clientY);
            contextMenu.focus({ preventScroll: true });
            event.preventDefault();
        }
    }
    #handleHeadClickEvent(event) {
        const { target } = event;
        const targetIsHeaderContent = target.matches("e-gridcell[type=columnheader] :scope:not(e-wsash)");
        if (targetIsHeaderContent) {
            const targetHeader = target.closest("e-gridcell");
            const { model } = this;
            const { columns } = model;
            if (targetHeader) {
                const targetColumn = Array.from(columns.values()).find(column_i => column_i.name == targetHeader.id);
                if (targetColumn) {
                    const { sortorder = -1 } = targetColumn;
                    model.sortByColumn(targetColumn, -sortorder);
                }
            }
        }
    }
};
GridViewBase = __decorate([
    (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-gridview"
    })
], GridViewBase);
var GridView = GridViewBase;
//# sourceMappingURL=GridView.js.map

/***/ }),

/***/ "../editor/lib/views/TreeView.js":
/*!***************************************!*\
  !*** ../editor/lib/views/TreeView.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TreeItemModel": () => (/* binding */ TreeItemModel),
/* harmony export */   "TreeItemModelList": () => (/* binding */ TreeItemModelList),
/* harmony export */   "TreeModel": () => (/* binding */ TreeModel),
/* harmony export */   "TreeView": () => (/* binding */ TreeView)
/* harmony export */ });
/* harmony import */ var _elements_Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../elements/Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var _models_Model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/Model */ "../editor/lib/models/Model.js");
/* harmony import */ var _stylesheets_Reset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stylesheets/Reset */ "../editor/lib/stylesheets/Reset.js");
/* harmony import */ var _stylesheets_Theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _View__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./View */ "../editor/lib/views/View.js");
/* harmony import */ var _elements_containers_trees__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../elements/containers/trees */ "../editor/lib/elements/containers/trees/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};










class TreeModel extends _models_Model__WEBPACK_IMPORTED_MODULE_1__.ModelObject {
    items;
    childItems;
    sortFunction;
    constructor(init) {
        super();
        const { items = [], sortFunction } = init ?? {};
        items.forEach((item_i, i) => item_i.index = i);
        const childItems = new _models_Model__WEBPACK_IMPORTED_MODULE_1__.ModelList(items);
        childItems.setParent(this);
        this.childItems = childItems;
        this.items = new _models_Model__WEBPACK_IMPORTED_MODULE_1__.ModelList(this.subtreeItems());
        this.sortFunction = sortFunction ??
            function (item_a, item_b) {
                return item_a.id.localeCompare(item_b.id);
            };
        this.addEventListener("modelchange", this.#handleModelChangeEvent.bind(this));
    }
    #handleModelChangeEvent(event) {
        const { target } = event;
        const { items, sortFunction, subtreeItems } = this;
        if (target instanceof _models_Model__WEBPACK_IMPORTED_MODULE_1__.ModelList) {
            const records = target.getRecords();
            records.forEach((record_i) => {
                const { insertedItems, removedItems } = record_i;
                const flattenedInsertedItems = Array.from(insertedItems.values()).flatMap(insertedItem_i => Array.of(insertedItem_i, ...subtreeItems.call(insertedItem_i)));
                const flattenedRemovedItems = Array.from(removedItems.values()).flatMap(removedItem_i => Array.of(removedItem_i, ...subtreeItems.call(removedItem_i)));
                items.beginChanges();
                items.append(...flattenedInsertedItems);
                flattenedRemovedItems.forEach((removedItem_i) => items.remove(removedItem_i));
                if (sortFunction)
                    items.sort(sortFunction);
                items.endChanges();
            });
            Array.from(target.values()).forEach((item_i, i) => {
                item_i.index = i;
            });
        }
    }
    subtreeItems() {
        const { childItems } = this;
        return Array.from(childItems.values()).flatMap(treeItem_i => Array.of(treeItem_i, ...treeItem_i.subtreeItems()));
    }
    getItemByUri(uri) {
        const { childItems } = this;
        const { length: itemsCount } = childItems;
        const { length: uriLength } = uri;
        for (let i = 0; i < itemsCount; i++) {
            const item_i = childItems.get(i);
            const { uri: itemUri } = item_i;
            const { length: itemUriLength } = itemUri;
            if (uri.startsWith(itemUri)) {
                if (itemUriLength === uriLength) {
                    return item_i;
                }
                return TreeModel.prototype.getItemByUri.call(item_i, uri);
            }
        }
        return null;
    }
}
class TreeItemModelList {
    items;
    constructor(items) {
        this.items = items;
    }
    get count() {
        return this.items.length;
    }
    remove() {
        const { items } = this;
        const removedItemsGroups = items.reduce((map, item_i) => {
            const { parentNode } = item_i;
            if (parentNode instanceof TreeItemModel || parentNode instanceof TreeModel) {
                const { childItems } = parentNode;
                const group = map.get(childItems);
                if (group)
                    group.push(item_i);
                else
                    map.set(childItems, [item_i]);
            }
            return map;
        }, new Map());
        Array.from(removedItemsGroups.entries()).forEach(([list_i, children_i]) => {
            list_i.beginChanges();
            children_i.forEach((child_i) => {
                list_i.remove(child_i);
            });
            list_i.endChanges();
        });
    }
}
class TreeItemModel extends _models_Model__WEBPACK_IMPORTED_MODULE_1__.ModelObject {
    childItems;
    id;
    type;
    index;
    get level() {
        const { parentNode } = this;
        if (parentNode instanceof TreeItemModel) {
            return parentNode.level + 1;
        }
        else {
            return 0;
        }
    }
    get uri() {
        const { parentNode, id } = this;
        if (parentNode instanceof TreeItemModel) {
            return `${parentNode.uri}${id}/`;
        }
        return `${id}/`;
    }
    get parentItem() {
        const { parentNode } = this;
        if (parentNode instanceof TreeItemModel) {
            return parentNode;
        }
        return null;
    }
    constructor(init) {
        super();
        const { id, type, items = [] } = init;
        items.forEach((item_i, i) => item_i.index = i);
        const childItems = new _models_Model__WEBPACK_IMPORTED_MODULE_1__.ModelList(items);
        childItems.setParent(this);
        this.id = id;
        this.childItems = childItems;
        this.type = type;
        this.index = -1;
    }
    subtreeItems() {
        const { childItems } = this;
        return Array.from(childItems.values()).flatMap(treeItem_i => Array.of(treeItem_i, ...treeItem_i.subtreeItems()));
    }
    remove() {
        const { parentNode } = this;
        if (parentNode instanceof TreeItemModel || parentNode instanceof TreeModel) {
            const { childItems } = parentNode;
            if (childItems) {
                childItems.remove(this);
            }
        }
    }
}
__decorate([
    (0,_models_Model__WEBPACK_IMPORTED_MODULE_1__.ReactiveProperty)()
], TreeItemModel.prototype, "id", void 0);
__decorate([
    (0,_models_Model__WEBPACK_IMPORTED_MODULE_1__.ReactiveProperty)()
], TreeItemModel.prototype, "type", void 0);
__decorate([
    (0,_models_Model__WEBPACK_IMPORTED_MODULE_1__.ReactiveProperty)()
], TreeItemModel.prototype, "index", void 0);
var style;
let TreeViewBase = class TreeViewBase extends _View__WEBPACK_IMPORTED_MODULE_4__.View {
    #dragImages;
    static {
        style = /*css*/ `
            :host {
                display: block;
            }
            
            .offscreen {
                position: absolute;
                top: 0;
                left: 0;
                transform: translateY(-100%);
                display: block;
                pointer-events: none;
            }
            
            .dragimage {
                white-space: nowrap;
                margin: 1px;
                display: inline-block;
                outline: 1px solid var(--theme-focused-item-outline-color, ${_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_THEME_FOCUSED_ITEM_OUTLINE_COLOR});
                outline-offset: -1px;
                border-radius: 3px; 
                padding: 2px 4px;
            }
        `;
    }
    constructor(model) {
        super();
        this.#dragImages = new WeakMap();
        const shadowRoot = this.attachShadow({ mode: "open" });
        const adoptedStylesheet = new CSSStyleSheet();
        adoptedStylesheet.replace(style);
        shadowRoot.adoptedStyleSheets = [adoptedStylesheet, _stylesheets_Reset__WEBPACK_IMPORTED_MODULE_2__.resetStylesheet];
        this.setModel(model ?? new TreeModel());
    }
    attributeChangedCallback(name, oldValue, newValue) {
        switch (name) {
            case "draggable": {
                const { treeElement } = this;
                if (treeElement) {
                    Array.from(treeElement.items).forEach(item_i => item_i.draggable = newValue !== null);
                }
                break;
            }
        }
    }
    get treeElement() {
        return this.shadowRoot.querySelector("e-tree");
    }
    treeItemElement(item) {
        return this.shadowRoot.querySelector(`e-treeitem[uri=${item.uri}]`);
    }
    #getTreeItemElementUri(item) {
        let uri = "";
        let closestItem = item;
        while (closestItem !== null) {
            const { dataset, parentElement } = closestItem;
            uri = `${dataset.id}/` + uri;
            closestItem = parentElement?.closest("e-treeitem") ?? null;
        }
        return uri;
    }
    treeItem(element) {
        return this.model.getItemByUri(this.#getTreeItemElementUri(element));
    }
    renderShadow() {
        const { model } = this;
        const treeElement = (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-tree", {
            attributes: {
                tabindex: 0,
            },
            children: (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.reactiveChildElements)(model.childItems, item => this.#renderTreeItem(item)),
            listeners: {
                dragstart: this.#handleDragStartEvent.bind(this),
                drop: this.#handleDropEvent.bind(this),
                contextmenu: this.#handleContextMenuEvent.bind(this),
                focus: this.#handleFocusEvent.bind(this),
                focusin: this.#handleFocusInEvent.bind(this),
                focusout: this.#handleFocusOutEvent.bind(this),
            }
        });
        return (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.fragment)(treeElement, (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("div", {
            attributes: {
                class: "offscreen",
                hidden: true
            },
            children: (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.reactiveChildElements)(model.items, item => this.#renderTreeItemDragImage(item))
        }));
    }
    itemContentDelegate(item) {
        return (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.reactiveElement)(item, (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("span"), ["name"], (label, property, oldValue, newValue) => {
            label.textContent = newValue;
        });
    }
    itemToolbarDelegate(item) {
        return null;
    }
    itemMenuDelegate() {
        return null;
    }
    selectedItems() {
        const { treeElement } = this;
        if (treeElement) {
            const selectedElements = treeElement.selectedItems();
            return selectedElements.map(item_i => this.treeItem(item_i));
        }
        return [];
    }
    activeItem() {
        const { treeElement } = this;
        if (treeElement) {
            const { activeItem } = treeElement;
            return activeItem ?
                this.treeItem(activeItem) :
                null;
        }
        return null;
    }
    #getDragImage(model) {
        return this.#dragImages.get(model)?.deref() ?? null;
    }
    #renderTreeItem(item) {
        const { draggable } = this;
        const { index, level, id } = item;
        const toolbar = this.itemToolbarDelegate(item);
        const content = this.itemContentDelegate(item);
        const treeItemElement = (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.reactiveElement)(item, (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-treeitem", {
            attributes: {
                draggable: String(draggable),
                posinset: index,
                level: level
            },
            dataset: {
                id: id
            },
            children: [
                ...(content ? [content] : []),
                ...(toolbar ? [toolbar] : [])
            ]
        }), ["index", "id", "type"], (treeitem, propertyName, oldValue, newValue) => {
            switch (propertyName) {
                case "index": {
                    treeitem.posinset = newValue;
                    break;
                }
                case "id": {
                    const { dataset } = treeitem;
                    dataset.id = newValue;
                    break;
                }
                case "type": {
                    treeitem.type = newValue;
                    switch (newValue) {
                        case "parent": {
                            treeitem.append((0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-treeitemgroup", {
                                attributes: {
                                    slot: "group"
                                },
                                children: (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.reactiveChildElements)(item.childItems, item => this.#renderTreeItem(item))
                            }));
                            break;
                        }
                        case "leaf": {
                            const { group } = treeitem;
                            if (group) {
                                group.remove();
                            }
                            break;
                        }
                    }
                    break;
                }
            }
        });
        return treeItemElement;
    }
    #renderTreeItemDragImage(item) {
        const dragImageElement = (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.reactiveElement)(item, (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("span", {
            attributes: {
                class: "dragimage"
            }
        }), ["name"], (span, property, oldValue, newValue) => {
            span.textContent = newValue;
        });
        this.#dragImages.set(item, new WeakRef(dragImageElement));
        return dragImageElement;
    }
    #handleDragStartEvent(event) {
        const { currentTarget, target } = event;
        const targetTree = currentTarget;
        const targetItem = target.closest("e-treeitem");
        const { model } = this;
        if (targetItem) {
            const { dataTransfer } = event;
            const selectedElements = targetTree.selectedItems();
            const { length: selectedCount } = selectedElements;
            if (selectedCount > 0) {
                const selectedUris = selectedElements
                    .map(element_i => this.#getTreeItemElementUri(element_i))
                    .filter((uri_i, _, uris) => !uris.some(uri_j => uri_i.startsWith(`${uri_j}/`)));
                const selectedUrisString = selectedUris.join("\n");
                const lastUri = selectedUris[selectedUris.length - 1];
                const lastItem = model.getItemByUri(lastUri);
                if (lastItem && dataTransfer) {
                    dataTransfer.dropEffect = "move";
                    dataTransfer.setData("text/plain", selectedUrisString);
                    const dragImage = this.#getDragImage(lastItem);
                    if (dragImage) {
                        dataTransfer.setDragImage(dragImage, -16, 0);
                    }
                }
            }
        }
    }
    #handleDropEvent(event) {
        const { currentTarget, target } = event;
        const targetTree = currentTarget;
        const targetItem = target.closest("e-treeitem");
        const { model } = this;
        const { sortFunction } = model;
        if (targetItem) {
            const { dataTransfer } = event;
            if (dataTransfer) {
                const targetUri = this.#getTreeItemElementUri(targetItem);
                const targetItemModel = model.getItemByUri(targetUri);
                const transferedUris = dataTransfer.getData("text/plain").split("\n");
                const targetIsWithin = transferedUris.some(uri_i => targetUri.startsWith(`${uri_i}/`) || uri_i === targetUri);
                if (!targetIsWithin) {
                    const transferedItems = (transferedUris.map(uri_i => model.getItemByUri(uri_i)).filter(item_i => item_i !== null));
                    const { type: targetType, parentItem: targetParentItem } = targetItemModel;
                    const { childItems: targetList } = targetType === "parent" ? targetItemModel :
                        targetParentItem ? targetParentItem : model;
                    const targetItems = Array.from(targetList.values());
                    targetItems.forEach((item_i) => {
                        const sameLabelIndex = transferedItems.findIndex(item_j => item_j.id === item_i.id);
                        if (sameLabelIndex > -1) {
                            const doReplace = confirm(`Replace ${item_i.id}?`);
                            if (doReplace) {
                                targetList.remove(item_i);
                            }
                            else {
                                transferedItems.copyWithin(sameLabelIndex, sameLabelIndex + 1);
                                transferedItems.length--;
                            }
                        }
                    });
                    const transferedItemsModelList = new TreeItemModelList(transferedItems);
                    transferedItemsModelList.remove();
                    if (sortFunction) {
                        targetList.beginChanges();
                        targetList.append(...transferedItems);
                        targetList.sort(sortFunction);
                        targetList.endChanges();
                    }
                    else {
                        targetList.insert(targetItem.posinset, ...transferedItems);
                    }
                    const newElements = targetTree.querySelectorAll(`e-treeitem:is(${transferedItems.map(item_i => `[data-uri="${item_i.uri}"]`).join(",")})`);
                    targetTree.beginSelection();
                    newElements.forEach(element_i => element_i.selected = true);
                    targetTree.endSelection();
                }
            }
        }
    }
    #handleContextMenuEvent(event) {
        const { clientX, clientY, currentTarget, target } = event;
        const targetTree = currentTarget;
        const targetItem = target.closest("e-treeitem");
        if (targetItem) {
            const contextMenu = this.itemMenuDelegate();
            if (contextMenu !== null) {
                contextMenu.contextual = true;
                contextMenu.addEventListener("close", () => {
                    targetItem.focus({ preventScroll: true });
                });
                targetTree.append(contextMenu);
                contextMenu.positionContextual(clientX, clientY);
                contextMenu.focus({ preventScroll: true });
            }
        }
        event.preventDefault();
    }
    #handleFocusEvent(event) {
        const { currentTarget, relatedTarget } = event;
        const targetTree = currentTarget;
        if (relatedTarget !== null && !this.contains(relatedTarget)) {
            const relatedPosition = relatedTarget.compareDocumentPosition(this);
            if (!(relatedPosition & Node.DOCUMENT_POSITION_DISCONNECTED) && (relatedPosition & Node.DOCUMENT_POSITION_PRECEDING)) {
                const { activeItem } = targetTree;
                if (activeItem) {
                    const itemToolbar = activeItem.querySelector("e-toolbar");
                    if (itemToolbar) {
                        event.preventDefault();
                        itemToolbar.focus();
                    }
                }
            }
        }
    }
    #handleFocusInEvent(event) {
        const { target } = event;
        const targetItem = target.closest("e-treeitem");
        if (targetItem) {
            const itemToolbar = targetItem.querySelector("e-toolbar");
            if (itemToolbar) {
                itemToolbar.tabIndex = itemToolbar.contains(target) ? -1 : 0;
            }
        }
    }
    #handleFocusOutEvent(event) {
        const { target } = event;
        const targetItem = target.closest("e-treeitem");
        if (targetItem) {
            const itemToolbar = targetItem.querySelector("e-toolbar");
            if (itemToolbar) {
                itemToolbar.tabIndex = itemToolbar.contains(target) ? 0 : -1;
            }
        }
    }
};
__decorate([
    (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.AttributeProperty)({ type: Boolean, observed: true })
], TreeViewBase.prototype, "draggable", void 0);
TreeViewBase = __decorate([
    (0,_elements_Element__WEBPACK_IMPORTED_MODULE_0__.CustomElement)({
        name: "e-treeview"
    })
], TreeViewBase);
var TreeView = TreeViewBase;
//# sourceMappingURL=TreeView.js.map

/***/ }),

/***/ "../editor/lib/views/View.js":
/*!***********************************!*\
  !*** ../editor/lib/views/View.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "View": () => (/* binding */ View)
/* harmony export */ });

class ViewBase extends HTMLElement {
    #model;
    constructor() {
        super();
        this.#model = null;
    }
    get model() {
        return this.#model;
    }
    setModel(model) {
        if (model !== this.#model) {
            this.#model = model;
        }
    }
    renderLight() {
        return;
    }
    renderShadow() {
        return;
    }
    render() {
        const { shadowRoot } = this;
        if (shadowRoot !== null) {
            const shadow = this.renderShadow();
            if (shadow) {
                shadowRoot.replaceChildren(shadow);
            }
        }
        const light = this.renderLight();
        if (light) {
            this.replaceChildren(light);
        }
    }
}
var View = ViewBase;
//# sourceMappingURL=View.js.map

/***/ }),

/***/ "../editor/assets/arrow_drop_down_FILL0_wght400_GRAD0_opsz48.svg":
/*!***********************************************************************!*\
  !*** ../editor/assets/arrow_drop_down_FILL0_wght400_GRAD0_opsz48.svg ***!
  \***********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "3497bd64f93b4d706808.svg";

/***/ }),

/***/ "../editor/assets/arrow_drop_up_FILL0_wght400_GRAD0_opsz48.svg":
/*!*********************************************************************!*\
  !*** ../editor/assets/arrow_drop_up_FILL0_wght400_GRAD0_opsz48.svg ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "a9d0fda0b3ef93e52697.svg";

/***/ }),

/***/ "../editor/assets/arrow_right_FILL0_wght400_GRAD0_opsz48.svg":
/*!*******************************************************************!*\
  !*** ../editor/assets/arrow_right_FILL0_wght400_GRAD0_opsz48.svg ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "43c54c9d5c843fa6e1a4.svg";

/***/ }),

/***/ "../editor/assets/done_FILL0_wght400_GRAD0_opsz48.svg":
/*!************************************************************!*\
  !*** ../editor/assets/done_FILL0_wght400_GRAD0_opsz48.svg ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "983207f640fb42a9d859.svg";

/***/ }),

/***/ "../editor/assets/fonts/Open_Sans/OpenSans-VariableFont_wdth,wght.ttf":
/*!****************************************************************************!*\
  !*** ../editor/assets/fonts/Open_Sans/OpenSans-VariableFont_wdth,wght.ttf ***!
  \****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "a42bbe687810bdc6e9e8.ttf";

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/ensure chunk */
/******/ 	(() => {
/******/ 		__webpack_require__.f = {};
/******/ 		// This file contains only the entry chunk.
/******/ 		// The chunk loading function for additional chunks
/******/ 		__webpack_require__.e = (chunkId) => {
/******/ 			return Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {
/******/ 				__webpack_require__.f[key](chunkId, promises);
/******/ 				return promises;
/******/ 			}, []));
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get javascript chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference async chunks
/******/ 		__webpack_require__.u = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return "" + chunkId + ".main.js";
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/load script */
/******/ 	(() => {
/******/ 		var inProgress = {};
/******/ 		var dataWebpackPrefix = "main:";
/******/ 		// loadScript function to load a script via script tag
/******/ 		__webpack_require__.l = (url, done, key, chunkId) => {
/******/ 			if(inProgress[url]) { inProgress[url].push(done); return; }
/******/ 			var script, needAttach;
/******/ 			if(key !== undefined) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				for(var i = 0; i < scripts.length; i++) {
/******/ 					var s = scripts[i];
/******/ 					if(s.getAttribute("src") == url || s.getAttribute("data-webpack") == dataWebpackPrefix + key) { script = s; break; }
/******/ 				}
/******/ 			}
/******/ 			if(!script) {
/******/ 				needAttach = true;
/******/ 				script = document.createElement('script');
/******/ 		
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.setAttribute("data-webpack", dataWebpackPrefix + key);
/******/ 				script.src = url;
/******/ 			}
/******/ 			inProgress[url] = [done];
/******/ 			var onScriptComplete = (prev, event) => {
/******/ 				// avoid mem leaks in IE.
/******/ 				script.onerror = script.onload = null;
/******/ 				clearTimeout(timeout);
/******/ 				var doneFns = inProgress[url];
/******/ 				delete inProgress[url];
/******/ 				script.parentNode && script.parentNode.removeChild(script);
/******/ 				doneFns && doneFns.forEach((fn) => (fn(event)));
/******/ 				if(prev) return prev(event);
/******/ 			}
/******/ 			;
/******/ 			var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);
/******/ 			script.onerror = onScriptComplete.bind(null, script.onerror);
/******/ 			script.onload = onScriptComplete.bind(null, script.onload);
/******/ 			needAttach && document.head.appendChild(script);
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		var scriptUrl;
/******/ 		if (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + "";
/******/ 		var document = __webpack_require__.g.document;
/******/ 		if (!scriptUrl && document) {
/******/ 			if (document.currentScript)
/******/ 				scriptUrl = document.currentScript.src
/******/ 			if (!scriptUrl) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				if(scripts.length) scriptUrl = scripts[scripts.length - 1].src
/******/ 			}
/******/ 		}
/******/ 		// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration
/******/ 		// or pass an empty string ("") and set the __webpack_public_path__ variable from your code to use your own logic.
/******/ 		if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");
/******/ 		scriptUrl = scriptUrl.replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/");
/******/ 		__webpack_require__.p = scriptUrl;
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		__webpack_require__.b = document.baseURI || self.location.href;
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"main": 0
/******/ 		};
/******/ 		
/******/ 		__webpack_require__.f.j = (chunkId, promises) => {
/******/ 				// JSONP chunk loading for javascript
/******/ 				var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;
/******/ 				if(installedChunkData !== 0) { // 0 means "already installed".
/******/ 		
/******/ 					// a Promise means "currently loading".
/******/ 					if(installedChunkData) {
/******/ 						promises.push(installedChunkData[2]);
/******/ 					} else {
/******/ 						if(true) { // all chunks have JS
/******/ 							// setup Promise in chunk cache
/******/ 							var promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));
/******/ 							promises.push(installedChunkData[2] = promise);
/******/ 		
/******/ 							// start chunk loading
/******/ 							var url = __webpack_require__.p + __webpack_require__.u(chunkId);
/******/ 							// create error before stack unwound to get useful stacktrace later
/******/ 							var error = new Error();
/******/ 							var loadingEnded = (event) => {
/******/ 								if(__webpack_require__.o(installedChunks, chunkId)) {
/******/ 									installedChunkData = installedChunks[chunkId];
/******/ 									if(installedChunkData !== 0) installedChunks[chunkId] = undefined;
/******/ 									if(installedChunkData) {
/******/ 										var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 										var realSrc = event && event.target && event.target.src;
/******/ 										error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 										error.name = 'ChunkLoadError';
/******/ 										error.type = errorType;
/******/ 										error.request = realSrc;
/******/ 										installedChunkData[1](error);
/******/ 									}
/******/ 								}
/******/ 							};
/******/ 							__webpack_require__.l(url, loadingEnded, "chunk-" + chunkId, chunkId);
/******/ 						} else installedChunks[chunkId] = 0;
/******/ 					}
/******/ 				}
/******/ 		};
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		// no on chunks loaded
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 		
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkmain"] = self["webpackChunkmain"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!*****************!*\
  !*** ./main.ts ***!
  \*****************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "main": () => (/* binding */ main)
/* harmony export */ });
/* harmony import */ var editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! editor/lib/elements/Element */ "../editor/lib/elements/Element.js");
/* harmony import */ var editor_lib_views_GridView__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! editor/lib/views/GridView */ "../editor/lib/views/GridView.js");
/* harmony import */ var editor_lib_views_TreeView__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! editor/lib/views/TreeView */ "../editor/lib/views/TreeView.js");
/* harmony import */ var editor_lib_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! editor/lib/stylesheets/Theme */ "../editor/lib/stylesheets/Theme.js");
/* harmony import */ var _src_MyTreeView__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src/MyTreeView */ "./src/MyTreeView.ts");
/* harmony import */ var _src_MyGridView__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./src/MyGridView */ "./src/MyGridView.ts");
/* harmony import */ var editor_lib_elements_containers_lists__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! editor/lib/elements/containers/lists */ "../editor/lib/elements/containers/lists/index.js");
/* harmony import */ var editor_lib_elements_containers_tabs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! editor/lib/elements/containers/tabs */ "../editor/lib/elements/containers/tabs/index.js");
/* harmony import */ var editor_lib_elements_containers_menus__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! editor/lib/elements/containers/menus */ "../editor/lib/elements/containers/menus/index.js");
/* harmony import */ var editor_lib_elements_containers_status__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! editor/lib/elements/containers/status */ "../editor/lib/elements/containers/status/index.js");
/* harmony import */ var editor_lib_elements_controls_select__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! editor/lib/elements/controls/select */ "../editor/lib/elements/controls/select/index.js");
/* harmony import */ var editor_lib_elements_misc__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! editor/lib/elements/misc */ "../editor/lib/elements/misc/index.js");












async function main() {
    document.adoptedStyleSheets = [editor_lib_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_3__.theme.stylesheet];
    document.head.append(...Object.values(editor_lib_stylesheets_Theme__WEBPACK_IMPORTED_MODULE_3__.theme.images()).map((img) => (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("link", {
        attributes: {
            rel: "preload",
            as: "image",
            href: img,
            crossorigin: "anonymous"
        }
    })));
    const gridView = new _src_MyGridView__WEBPACK_IMPORTED_MODULE_5__.MyGridView();
    gridView.setModel(new editor_lib_views_GridView__WEBPACK_IMPORTED_MODULE_1__.GridModel({
        columns: [
            new editor_lib_views_GridView__WEBPACK_IMPORTED_MODULE_1__.GridColumnModel({
                name: "name",
                type: String,
                label: "Nom",
                extract: (row) => row.name
            }),
            new editor_lib_views_GridView__WEBPACK_IMPORTED_MODULE_1__.GridColumnModel({
                name: "color",
                type: String,
                label: "Couleur",
                extract: (row) => row.color
            }),
            new editor_lib_views_GridView__WEBPACK_IMPORTED_MODULE_1__.GridColumnModel({
                name: "age",
                type: Number,
                label: "Age",
                extract: (row) => String(row.age),
                filters: [{
                        name: "Minors",
                        filter: (row) => row.age < 18
                    }, {
                        name: "Majors",
                        filter: (row) => row.age >= 18
                    }]
            })
        ],
        rows: [
            new _src_MyGridView__WEBPACK_IMPORTED_MODULE_5__.MyGridRowModel({
                id: 1,
                name: "Louis",
                age: 13,
                color: "bleu"
            }),
            new _src_MyGridView__WEBPACK_IMPORTED_MODULE_5__.MyGridRowModel({
                id: 2,
                name: "Marine",
                age: 21,
                color: "bleu"
            }),
            new _src_MyGridView__WEBPACK_IMPORTED_MODULE_5__.MyGridRowModel({
                id: 3,
                name: "Jean-Christophe",
                age: 32,
                color: "rouge"
            }),
            new _src_MyGridView__WEBPACK_IMPORTED_MODULE_5__.MyGridRowModel({
                id: 4,
                name: "Anne",
                age: 54,
                color: "jaune"
            }),
            new _src_MyGridView__WEBPACK_IMPORTED_MODULE_5__.MyGridRowModel({
                id: 5,
                name: "Claude",
                age: 61,
                color: "noir"
            }),
            new _src_MyGridView__WEBPACK_IMPORTED_MODULE_5__.MyGridRowModel({
                id: 6,
                name: "Benoît",
                age: 38,
                color: "vert"
            })
        ]
    }));
    document.body.append(gridView);
    gridView.render();
    const treeModel = new editor_lib_views_TreeView__WEBPACK_IMPORTED_MODULE_2__.TreeModel({
        items: [
            new _src_MyTreeView__WEBPACK_IMPORTED_MODULE_4__.MyTreeItemModel({
                id: "TI 0",
                type: "parent",
                items: [
                    new _src_MyTreeView__WEBPACK_IMPORTED_MODULE_4__.MyTreeItemModel({
                        id: "TI 1A",
                        type: "parent",
                        items: [
                            new _src_MyTreeView__WEBPACK_IMPORTED_MODULE_4__.MyTreeItemModel({
                                type: "leaf",
                                id: "TI 1AX"
                            }),
                        ]
                    }),
                    new _src_MyTreeView__WEBPACK_IMPORTED_MODULE_4__.MyTreeItemModel({
                        type: "parent",
                        id: "TI 1B"
                    })
                ]
            }),
            new _src_MyTreeView__WEBPACK_IMPORTED_MODULE_4__.MyTreeItemModel({
                id: "TI 1",
                type: "parent",
                items: [
                    new _src_MyTreeView__WEBPACK_IMPORTED_MODULE_4__.MyTreeItemModel({
                        id: "TI 1A",
                        type: "parent",
                        items: [
                            new _src_MyTreeView__WEBPACK_IMPORTED_MODULE_4__.MyTreeItemModel({
                                type: "leaf",
                                id: "TI 1AX"
                            }),
                        ]
                    }),
                    new _src_MyTreeView__WEBPACK_IMPORTED_MODULE_4__.MyTreeItemModel({
                        type: "parent",
                        id: "TI 1B"
                    })
                ]
            }),
            new _src_MyTreeView__WEBPACK_IMPORTED_MODULE_4__.MyTreeItemModel({
                type: "leaf",
                id: "TI 2"
            }),
            new _src_MyTreeView__WEBPACK_IMPORTED_MODULE_4__.MyTreeItemModel({
                type: "leaf",
                id: "TI 3"
            })
        ]
    });
    const treeView = new _src_MyTreeView__WEBPACK_IMPORTED_MODULE_4__.MyTreeView();
    treeView.draggable = true;
    treeView.setModel(treeModel);
    treeView.render();
    document.body.append(treeView);
    document.body.append(...[
        "builtins",
        "tablist",
        "select",
        "sash",
        "loaders",
        "tree",
        "menus",
        "list",
        "status"
    ].map(example => {
        return (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("details", {
            children: [
                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("summary", {
                    children: `${example}.html`
                }),
                (0,editor_lib_elements_Element__WEBPACK_IMPORTED_MODULE_0__.element)("e-import", {
                    attributes: {
                        src: `example/${example}.html`
                    }
                })
            ]
        });
    }));
}

})();

main = __webpack_exports__;
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGFBQWE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFlBQVk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixPQUFPO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvQkFBb0I7QUFDcEMsZ0JB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O0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixPQUFPO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDJCQUEyQjtBQUM3QztBQUNBLG1CQUFtQiwyQkFBMkI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsY0FBYztBQUM5QixnQkFBZ0IsWUFBWTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFD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QkFDRixvRUFBTyxDQUFDLFVBQVUsRUFBRTtvQkFDaEIsVUFBVSxFQUFFO3dCQUNSLEdBQUcsRUFBRSxXQUFXLE9BQU8sT0FBTztxQkFDakM7aUJBQ0osQ0FBQzthQUNMO1NBQ0osQ0FBQztJQUNOLENBQUMsQ0FBQyxDQUNMLENBQUM7QUFDTixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvY3NzL2VsZW1lbnRzL2NvbnRhaW5lcnMvY29udGFpbmVyLmNzcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9jc3MvZWxlbWVudHMvY29udGFpbmVycy90cmVlcy90cmVlaXRlbS5jc3MiLCJ3ZWJwYWNrOi8vbWFpbi8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vbWFpbi8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzIiwid2VicGFjazovL21haW4vLi9zcmMvTXlHcmlkVmlldy50cyIsIndlYnBhY2s6Ly9tYWluLy4vc3JjL015VHJlZVZpZXcudHMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL0VsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL1NuaXBwZXRzLmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9jb250YWluZXJzL2dyaWQvR3JpZC5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvZWxlbWVudHMvY29udGFpbmVycy9ncmlkL0dyaWRCb2R5LmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9jb250YWluZXJzL2dyaWQvR3JpZENlbGwuanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRhaW5lcnMvZ3JpZC9HcmlkSGVhZC5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvZWxlbWVudHMvY29udGFpbmVycy9ncmlkL0dyaWRSb3cuanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRhaW5lcnMvZ3JpZC9HcmlkUm93R3JvdXAuanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRhaW5lcnMvZ3JpZC9pbmRleC5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvZWxlbWVudHMvY29udGFpbmVycy9saXN0cy9MaXN0LmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9jb250YWluZXJzL2xpc3RzL0xpc3RJdGVtLmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9jb250YWluZXJzL2xpc3RzL0xpc3RJdGVtR3JvdXAuanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRhaW5lcnMvbGlzdHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRhaW5lcnMvbWVudXMvTWVudS5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvZWxlbWVudHMvY29udGFpbmVycy9tZW51cy9NZW51QmFyLmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9jb250YWluZXJzL21lbnVzL01lbnVCdXR0b24uanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRhaW5lcnMvbWVudXMvTWVudUl0ZW0uanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRhaW5lcnMvbWVudXMvTWVudUl0ZW1Hcm91cC5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvZWxlbWVudHMvY29udGFpbmVycy9tZW51cy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvZWxlbWVudHMvY29udGFpbmVycy9zdGF0dXMvU3RhdHVzQmFyLmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9jb250YWluZXJzL3N0YXR1cy9TdGF0dXNJdGVtLmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9jb250YWluZXJzL3N0YXR1cy9TdGF0dXNJdGVtR3JvdXAuanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRhaW5lcnMvc3RhdHVzL2luZGV4LmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9jb250YWluZXJzL3RhYnMvVGFiLmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9jb250YWluZXJzL3RhYnMvVGFiTGlzdC5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvZWxlbWVudHMvY29udGFpbmVycy90YWJzL1RhYlBhbmVsLmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9jb250YWluZXJzL3RhYnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRhaW5lcnMvdG9vbGJhcnMvVG9vbEJhci5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvZWxlbWVudHMvY29udGFpbmVycy90b29sYmFycy9Ub29sQmFySXRlbS5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvZWxlbWVudHMvY29udGFpbmVycy90b29sYmFycy9Ub29sQmFySXRlbUdyb3VwLmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9jb250YWluZXJzL3RyZWVzL1RyZWUuanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRhaW5lcnMvdHJlZXMvVHJlZUl0ZW0uanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRhaW5lcnMvdHJlZXMvVHJlZUl0ZW1Hcm91cC5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvZWxlbWVudHMvY29udGFpbmVycy90cmVlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvZWxlbWVudHMvY29udHJvbHMvc2FzaGVzL0hlaWdodFNhc2guanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRyb2xzL3Nhc2hlcy9XaWR0aFNhc2guanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRyb2xzL3Nhc2hlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvZWxlbWVudHMvY29udHJvbHMvc2VsZWN0L09wdGlvbi5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvZWxlbWVudHMvY29udHJvbHMvc2VsZWN0L09wdGlvbkdyb3VwLmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9jb250cm9scy9zZWxlY3QvU2VsZWN0LmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9jb250cm9scy9zZWxlY3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL21pc2MvSGFuZGxlLmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9taXNjL0ltcG9ydC5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvZWxlbWVudHMvbWlzYy9Mb2FkZXIuanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL21pc2MvU2VwYXJhdG9yLmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi9lbGVtZW50cy9taXNjL1Rvb2xUaXAuanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL2VsZW1lbnRzL21pc2MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL21vZGVscy9Nb2RlbC5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvc3R5bGVzaGVldHMvUmVzZXQuanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL3N0eWxlc2hlZXRzL1RoZW1lLmpzIiwid2VicGFjazovL21haW4vLi4vZWRpdG9yL2xpYi92aWV3cy9HcmlkVmlldy5qcyIsIndlYnBhY2s6Ly9tYWluLy4uL2VkaXRvci9saWIvdmlld3MvVHJlZVZpZXcuanMiLCJ3ZWJwYWNrOi8vbWFpbi8uLi9lZGl0b3IvbGliL3ZpZXdzL1ZpZXcuanMiLCJ3ZWJwYWNrOi8vbWFpbi93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tYWluL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL21haW4vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21haW4vd2VicGFjay9ydW50aW1lL2Vuc3VyZSBjaHVuayIsIndlYnBhY2s6Ly9tYWluL3dlYnBhY2svcnVudGltZS9nZXQgamF2YXNjcmlwdCBjaHVuayBmaWxlbmFtZSIsIndlYnBhY2s6Ly9tYWluL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vbWFpbi93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL21haW4vd2VicGFjay9ydW50aW1lL2xvYWQgc2NyaXB0Iiwid2VicGFjazovL21haW4vd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9tYWluL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL21haW4vd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vbWFpbi8uL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uLy4uL2VkaXRvci1zYW1wbGVzL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi9lZGl0b3Itc2FtcGxlcy9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCI6aG9zdChbZHJvcHRhcmdldF0pIHtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGhlbWUtZHJvcHRhcmdldC1pdGVtLWNvbG9yKTtcXHJcXG59XCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vLi4vZWRpdG9yL2Nzcy9lbGVtZW50cy9jb250YWluZXJzL2NvbnRhaW5lci5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7SUFDSSxvREFBb0Q7QUFDeERcIixcInNvdXJjZXNDb250ZW50XCI6W1wiOmhvc3QoW2Ryb3B0YXJnZXRdKSB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRoZW1lLWRyb3B0YXJnZXQtaXRlbS1jb2xvcik7XFxyXFxufVwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vZWRpdG9yLXNhbXBsZXMvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL2VkaXRvci1zYW1wbGVzL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FUX1JVTEVfSU1QT1JUXzBfX18gZnJvbSBcIi0hLi4vLi4vLi4vLi4vLi4vZWRpdG9yLXNhbXBsZXMvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vY29udGFpbmVyLmNzc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18uaShfX19DU1NfTE9BREVSX0FUX1JVTEVfSU1QT1JUXzBfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiOmhvc3Qge1xcclxcbiAgICBkaXNwbGF5OiBibG9jaztcXHJcXG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbi8qIFxcclxcbkFkZGVkIGZyb20gY29udGFpbmVyLmNzc1xcclxcbjpob3N0KFtkcm9wdGFyZ2V0XSkge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10aGVtZS1kcm9wdGFyZ2V0LWl0ZW0tY29sb3IpO1xcclxcbn1cXHJcXG4qL1xcclxcblxcclxcbjpob3N0KDpmb2N1cy12aXNpYmxlKSB7XFxyXFxuICAgIG91dGxpbmU6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbjpob3N0KFthY3RpdmVdKTpob3N0LWNvbnRleHQoZS10cmVlOmZvY3VzLXdpdGhpbikgW3BhcnQ9XFxcImNvbnRlbnRcXFwiXSB7XFxyXFxuICAgIG91dGxpbmU6IDFweCBzb2xpZCB2YXIoLS10aGVtZS1mb2N1c2VkLWl0ZW0tb3V0bGluZS1jb2xvcik7XFxyXFxuICAgIG91dGxpbmUtb2Zmc2V0OiAtMXB4O1xcclxcbn1cXHJcXG5cXHJcXG5bcGFydD1cXFwiY29udGVudFxcXCJdOmhvdmVyIHtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGhlbWUtaG92ZXJlZC1pdGVtLWNvbG9yKTtcXHJcXG59XFxyXFxuXFxyXFxuOmhvc3QoW3NlbGVjdGVkXSkgW3BhcnQ9XFxcImNvbnRlbnRcXFwiXSB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRoZW1lLXNlbGVjdGVkLWl0ZW0tY29sb3IpO1xcclxcbn1cXHJcXG5cXHJcXG5bcGFydD1cXFwiY29udGVudFxcXCJdIHtcXHJcXG4gICAgZGlzcGxheTogZmxleDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDIycHg7XFxyXFxuICAgIHBhZGRpbmctbGVmdDogMTJweDtcXHJcXG59XFxyXFxuXFxyXFxuOmhvc3QoOm5vdChbdHlwZT1cXFwicGFyZW50XFxcIl0pKSA6OnNsb3R0ZWQoW3Nsb3Q9XFxcImdyb3VwXFxcIl0pLFxcclxcbjpob3N0KDpub3QoW2V4cGFuZGVkXSkpIDo6c2xvdHRlZChbc2xvdD1cXFwiZ3JvdXBcXFwiXSkge1xcclxcbiAgICBkaXNwbGF5OiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG46aG9zdCg6bm90KFt0eXBlPVxcXCJwYXJlbnRcXFwiXSkpIFtwYXJ0PVxcXCJhcnJvd1xcXCJdOjpiZWZvcmUge1xcclxcbiAgICB2aXNpYmlsaXR5OiBoaWRkZW47XFxyXFxufVxcclxcblxcclxcbltwYXJ0PVxcXCJhcnJvd1xcXCJdIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICB3aWR0aDogMThweDtcXHJcXG4gICAgaGVpZ2h0OiAxOHB4O1xcclxcbiAgICBtYXJnaW46IDFweCA0cHggMXB4IDFweDtcXHJcXG59XFxyXFxuXFxyXFxuW3BhcnQ9XFxcImFycm93XFxcIl06OmJlZm9yZSB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgd2lkdGg6IDE4cHg7XFxyXFxuICAgIGhlaWdodDogMThweDtcXHJcXG4gICAgbWFyZ2luOiAxcHg7XFxyXFxuICAgIGNvbnRlbnQ6IFxcXCJcXFwiO1xcclxcblxcclxcbiAgICBtYXNrLXNpemU6IDE4cHggMThweDtcXHJcXG4gICAgLXdlYmtpdC1tYXNrLXNpemU6IDE4cHggMThweDtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuOmhvc3QoOm5vdChbZXhwYW5kZWRdKSkgW3BhcnQ9XFxcImFycm93XFxcIl06OmJlZm9yZSB7XFxyXFxuICAgIC13ZWJraXQtbWFzay1pbWFnZTogdmFyKC0tdGhlbWUtYXJyb3ctcmlnaHQtaW1hZ2UpO1xcclxcbiAgICBtYXNrLWltYWdlOiB2YXIoLS10aGVtZS1hcnJvdy1yaWdodC1pbWFnZSk7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xcclxcbn1cXHJcXG5cXHJcXG46aG9zdChbZXhwYW5kZWRdKSBbcGFydD1cXFwiYXJyb3dcXFwiXTo6YmVmb3JlIHtcXHJcXG4gICAgLXdlYmtpdC1tYXNrLWltYWdlOiB2YXIoLS10aGVtZS1hcnJvdy1kcm9wZG93bi1pbWFnZSk7XFxyXFxuICAgIG1hc2staW1hZ2U6IHZhcigtLXRoZW1lLWFycm93LWRyb3Bkb3duLWltYWdlKTtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XFxyXFxufVwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uLy4uL2VkaXRvci9jc3MvZWxlbWVudHMvY29udGFpbmVycy90cmVlcy90cmVlaXRlbS5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBRUE7SUFDSSxjQUFjO0lBQ2QsaUJBQWlCO0FBQ3JCOztBQUVBOzs7OztDQUtDOztBQUVEO0lBQ0ksYUFBYTtBQUNqQjs7QUFFQTtJQUNJLDBEQUEwRDtJQUMxRCxvQkFBb0I7QUFDeEI7O0FBRUE7SUFDSSxpREFBaUQ7QUFDckQ7O0FBRUE7SUFDSSxrREFBa0Q7QUFDdEQ7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsaUJBQWlCO0lBQ2pCLGtCQUFrQjtBQUN0Qjs7QUFFQTs7SUFFSSxhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0kscUJBQXFCO0lBQ3JCLFdBQVc7SUFDWCxZQUFZO0lBQ1osdUJBQXVCO0FBQzNCOztBQUVBO0lBQ0kscUJBQXFCO0lBQ3JCLFdBQVc7SUFDWCxZQUFZO0lBQ1osV0FBVztJQUNYLFdBQVc7O0lBRVgsb0JBQW9CO0lBQ3BCLDRCQUE0QjtJQUM1QixzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSxrREFBa0Q7SUFDbEQsMENBQTBDO0lBQzFDLHVCQUF1QjtBQUMzQjs7QUFFQTtJQUNJLHFEQUFxRDtJQUNyRCw2Q0FBNkM7SUFDN0MsdUJBQXVCO0FBQzNCXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIkBpbXBvcnQgXFxcIi4uL2NvbnRhaW5lci5jc3NcXFwiO1xcclxcblxcclxcbjpob3N0IHtcXHJcXG4gICAgZGlzcGxheTogYmxvY2s7XFxyXFxuICAgIHVzZXItc2VsZWN0OiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBcXHJcXG5BZGRlZCBmcm9tIGNvbnRhaW5lci5jc3NcXHJcXG46aG9zdChbZHJvcHRhcmdldF0pIHtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGhlbWUtZHJvcHRhcmdldC1pdGVtLWNvbG9yKTtcXHJcXG59XFxyXFxuKi9cXHJcXG5cXHJcXG46aG9zdCg6Zm9jdXMtdmlzaWJsZSkge1xcclxcbiAgICBvdXRsaW5lOiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG46aG9zdChbYWN0aXZlXSk6aG9zdC1jb250ZXh0KGUtdHJlZTpmb2N1cy13aXRoaW4pIFtwYXJ0PVxcXCJjb250ZW50XFxcIl0ge1xcclxcbiAgICBvdXRsaW5lOiAxcHggc29saWQgdmFyKC0tdGhlbWUtZm9jdXNlZC1pdGVtLW91dGxpbmUtY29sb3IpO1xcclxcbiAgICBvdXRsaW5lLW9mZnNldDogLTFweDtcXHJcXG59XFxyXFxuXFxyXFxuW3BhcnQ9XFxcImNvbnRlbnRcXFwiXTpob3ZlciB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRoZW1lLWhvdmVyZWQtaXRlbS1jb2xvcik7XFxyXFxufVxcclxcblxcclxcbjpob3N0KFtzZWxlY3RlZF0pIFtwYXJ0PVxcXCJjb250ZW50XFxcIl0ge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10aGVtZS1zZWxlY3RlZC1pdGVtLWNvbG9yKTtcXHJcXG59XFxyXFxuXFxyXFxuW3BhcnQ9XFxcImNvbnRlbnRcXFwiXSB7XFxyXFxuICAgIGRpc3BsYXk6IGZsZXg7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xcclxcbiAgICBwYWRkaW5nLWxlZnQ6IDEycHg7XFxyXFxufVxcclxcblxcclxcbjpob3N0KDpub3QoW3R5cGU9XFxcInBhcmVudFxcXCJdKSkgOjpzbG90dGVkKFtzbG90PVxcXCJncm91cFxcXCJdKSxcXHJcXG46aG9zdCg6bm90KFtleHBhbmRlZF0pKSA6OnNsb3R0ZWQoW3Nsb3Q9XFxcImdyb3VwXFxcIl0pIHtcXHJcXG4gICAgZGlzcGxheTogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuOmhvc3QoOm5vdChbdHlwZT1cXFwicGFyZW50XFxcIl0pKSBbcGFydD1cXFwiYXJyb3dcXFwiXTo6YmVmb3JlIHtcXHJcXG4gICAgdmlzaWJpbGl0eTogaGlkZGVuO1xcclxcbn1cXHJcXG5cXHJcXG5bcGFydD1cXFwiYXJyb3dcXFwiXSB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgd2lkdGg6IDE4cHg7XFxyXFxuICAgIGhlaWdodDogMThweDtcXHJcXG4gICAgbWFyZ2luOiAxcHggNHB4IDFweCAxcHg7XFxyXFxufVxcclxcblxcclxcbltwYXJ0PVxcXCJhcnJvd1xcXCJdOjpiZWZvcmUge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHdpZHRoOiAxOHB4O1xcclxcbiAgICBoZWlnaHQ6IDE4cHg7XFxyXFxuICAgIG1hcmdpbjogMXB4O1xcclxcbiAgICBjb250ZW50OiBcXFwiXFxcIjtcXHJcXG5cXHJcXG4gICAgbWFzay1zaXplOiAxOHB4IDE4cHg7XFxyXFxuICAgIC13ZWJraXQtbWFzay1zaXplOiAxOHB4IDE4cHg7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbjpob3N0KDpub3QoW2V4cGFuZGVkXSkpIFtwYXJ0PVxcXCJhcnJvd1xcXCJdOjpiZWZvcmUge1xcclxcbiAgICAtd2Via2l0LW1hc2staW1hZ2U6IHZhcigtLXRoZW1lLWFycm93LXJpZ2h0LWltYWdlKTtcXHJcXG4gICAgbWFzay1pbWFnZTogdmFyKC0tdGhlbWUtYXJyb3ctcmlnaHQtaW1hZ2UpO1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcXHJcXG59XFxyXFxuXFxyXFxuOmhvc3QoW2V4cGFuZGVkXSkgW3BhcnQ9XFxcImFycm93XFxcIl06OmJlZm9yZSB7XFxyXFxuICAgIC13ZWJraXQtbWFzay1pbWFnZTogdmFyKC0tdGhlbWUtYXJyb3ctZHJvcGRvd24taW1hZ2UpO1xcclxcbiAgICBtYXNrLWltYWdlOiB2YXIoLS10aGVtZS1hcnJvdy1kcm9wZG93bi1pbWFnZSk7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xcclxcbn1cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKSB7XG4gIHZhciBsaXN0ID0gW107XG5cbiAgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IFwiXCI7XG4gICAgICB2YXIgbmVlZExheWVyID0gdHlwZW9mIGl0ZW1bNV0gIT09IFwidW5kZWZpbmVkXCI7XG4gICAgICBpZiAoaXRlbVs0XSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQoaXRlbVs0XSwgXCIpIHtcIik7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpO1xuICAgICAgfVxuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwiQGxheWVyXCIuY29uY2F0KGl0ZW1bNV0ubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChpdGVtWzVdKSA6IFwiXCIsIFwiIHtcIik7XG4gICAgICB9XG4gICAgICBjb250ZW50ICs9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSk7XG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oXCJcIik7XG4gIH07XG5cbiAgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgbGlzdC5pID0gZnVuY3Rpb24gaShtb2R1bGVzLCBtZWRpYSwgZGVkdXBlLCBzdXBwb3J0cywgbGF5ZXIpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsIHVuZGVmaW5lZF1dO1xuICAgIH1cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5sZW5ndGg7IGsrKykge1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2tdWzBdO1xuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBfayA9IDA7IF9rIDwgbW9kdWxlcy5sZW5ndGg7IF9rKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2tdKTtcbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgbGF5ZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtWzVdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgaXRlbVs1XSA9IGxheWVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs1XSA9IGxheWVyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobWVkaWEpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHN1cHBvcnRzKSB7XG4gICAgICAgIGlmICghaXRlbVs0XSkge1xuICAgICAgICAgIGl0ZW1bNF0gPSBcIlwiLmNvbmNhdChzdXBwb3J0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQoaXRlbVs0XSwgXCIpIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzRdID0gc3VwcG9ydHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBsaXN0O1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV07XG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY3NzTWFwcGluZykpKSk7XG4gICAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbihcIlxcblwiKTtcbiAgfVxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oXCJcXG5cIik7XG59OyIsImltcG9ydCB7IEN1c3RvbUVsZW1lbnQsIGVsZW1lbnQgfSBmcm9tIFwiZWRpdG9yL2xpYi9lbGVtZW50cy9FbGVtZW50XCI7XHJcbmltcG9ydCB7IFJlYWN0aXZlUHJvcGVydHkgfSBmcm9tIFwiZWRpdG9yL2xpYi9tb2RlbHMvTW9kZWxcIjtcclxuaW1wb3J0IHsgR3JpZFJvd0ZpbHRlciwgR3JpZFJvd01vZGVsLCBHcmlkVmlldyB9IGZyb20gXCJlZGl0b3IvbGliL3ZpZXdzL0dyaWRWaWV3XCI7XHJcblxyXG5leHBvcnQgeyBNeUdyaWRSb3dNb2RlbCB9O1xyXG5leHBvcnQgeyBNeUdyaWRWaWV3IH07XHJcblxyXG5jbGFzcyBNeUdyaWRSb3dNb2RlbCBleHRlbmRzIEdyaWRSb3dNb2RlbCB7XHJcbiAgICBAUmVhY3RpdmVQcm9wZXJ0eSgpXHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcblxyXG4gICAgQFJlYWN0aXZlUHJvcGVydHkoKVxyXG4gICAgYWdlOiBudW1iZXI7XHJcblxyXG4gICAgQFJlYWN0aXZlUHJvcGVydHkoKVxyXG4gICAgY29sb3I6IHN0cmluZztcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoaW5pdDoge1xyXG4gICAgICAgIGlkOiBudW1iZXI7XHJcbiAgICAgICAgbmFtZTogc3RyaW5nO1xyXG4gICAgICAgIGFnZTogbnVtYmVyO1xyXG4gICAgICAgIGNvbG9yOiBzdHJpbmc7XHJcbiAgICB9KSB7XHJcbiAgICAgICAgc3VwZXIoaW5pdCk7XHJcbiAgICAgICAgY29uc3Qge25hbWUsIGFnZSwgY29sb3J9ID0gaW5pdDtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuYWdlID0gYWdlO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgIH1cclxufVxyXG5cclxudmFyIHN0eWxlOiBzdHJpbmc7XHJcblxyXG5AQ3VzdG9tRWxlbWVudCh7XHJcbiAgICBuYW1lOiBcImUtbXlncmlkdmlld1wiXHJcbn0pXHJcbmNsYXNzIE15R3JpZFZpZXcgZXh0ZW5kcyBHcmlkVmlldyB7XHJcblxyXG4gICAgI3NlYXJjaEZpbHRlcjogR3JpZFJvd0ZpbHRlciB8IG51bGw7XHJcblxyXG4gICAgc3RhdGljIHtcclxuICAgICAgICBzdHlsZSA9IC8qY3NzKi9gXHJcbiAgICAgICAgICAgIGUtZ3JpZGNlbGxbaGVhZGVycz1cImFnZVwiXSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLiNzZWFyY2hGaWx0ZXIgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IHtzaGFkb3dSb290fSA9IHRoaXNcclxuICAgICAgICBjb25zdCBhZG9wdGVkU3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgYWRvcHRlZFN0eWxlc2hlZXQucmVwbGFjZShzdHlsZSk7XHJcbiAgICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbXHJcbiAgICAgICAgICAgIC4uLnNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzLCBhZG9wdGVkU3R5bGVzaGVldFxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgb3ZlcnJpZGUgcmVuZGVyU2hhZG93KCk6IE5vZGUge1xyXG4gICAgICAgIGNvbnN0IHNoYWRvd05vZGUgPSBzdXBlci5yZW5kZXJTaGFkb3coKTtcclxuICAgICAgICBzaGFkb3dOb2RlLmluc2VydEJlZm9yZShcclxuICAgICAgICAgICAgZWxlbWVudChcImRpdlwiLCB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogZWxlbWVudChcImlucHV0XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2VhcmNoXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogPEV2ZW50TGlzdGVuZXI+dGhpcy4jaGFuZGxlU2VhcmNoSW5wdXRFdmVudC5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHNoYWRvd05vZGUuZmlyc3RDaGlsZFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHNoYWRvd05vZGU7XHJcbiAgICB9XHJcblxyXG4gICAgZmlsdGVyKHJvdzogR3JpZFJvd01vZGVsKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3Qgc2VhcmNoRmlsdGVyID0gdGhpcy4jc2VhcmNoRmlsdGVyO1xyXG4gICAgICAgIHJldHVybiBzdXBlci5maWx0ZXIocm93KSAmJlxyXG4gICAgICAgIChzZWFyY2hGaWx0ZXIgPyBzZWFyY2hGaWx0ZXIuZmlsdGVyKHJvdykgOiB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRTZWFyY2hGaWx0ZXIoZmlsdGVyOiBHcmlkUm93RmlsdGVyIHwgbnVsbCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHttb2RlbCwgZ3JpZEVsZW1lbnR9ID0gdGhpcztcclxuICAgICAgICBjb25zdCB7cm93c30gPSBtb2RlbDtcclxuICAgICAgICB0aGlzLiNzZWFyY2hGaWx0ZXIgPSBmaWx0ZXI7XHJcbiAgICAgICAgQXJyYXkuZnJvbShyb3dzLnZhbHVlcygpKS5mb3JFYWNoKChyb3dfaSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByb3dFbGVtZW50ID0gdGhpcy5nZXRSb3dFbGVtZW50KHJvd19pKTtcclxuICAgICAgICAgICAgaWYgKHJvd0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJvd0VsZW1lbnQuaGlkZGVuID0gIXRoaXMuZmlsdGVyKHJvd19pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGdyaWRFbGVtZW50LmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgI2hhbmRsZVNlYXJjaElucHV0RXZlbnQoZXZlbnQ6IElucHV0RXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7dGFyZ2V0fSA9IGV2ZW50O1xyXG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHt2YWx1ZX0gPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWFyY2hGaWx0ZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcjogKHJvdykgPT4gKDxNeUdyaWRSb3dNb2RlbD5yb3cpLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh2YWx1ZS50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlYXJjaEZpbHRlcihudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IEhUTUxFTWVudUVsZW1lbnQsIEhUTUxFTWVudUl0ZW1FbGVtZW50IH0gZnJvbSBcImVkaXRvci9saWIvZWxlbWVudHMvY29udGFpbmVycy9tZW51c1wiO1xyXG5pbXBvcnQgeyBIVE1MRVRvb2xCYXJFbGVtZW50LCBIVE1MRVRvb2xCYXJJdGVtRWxlbWVudCB9IGZyb20gXCJlZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRhaW5lcnMvdG9vbGJhcnNcIjtcclxuaW1wb3J0IHsgSFRNTEVUcmVlRWxlbWVudCB9IGZyb20gXCJlZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRhaW5lcnMvdHJlZXNcIjtcclxuaW1wb3J0IHsgSFRNTEVPcHRpb25FbGVtZW50LCBIVE1MRVNlbGVjdEVsZW1lbnQgfSBmcm9tIFwiZWRpdG9yL2xpYi9lbGVtZW50cy9jb250cm9scy9zZWxlY3RcIjtcclxuaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCwgZWxlbWVudCwgZnJhZ21lbnQsIHJlYWN0aXZlRWxlbWVudCB9IGZyb20gXCJlZGl0b3IvbGliL2VsZW1lbnRzL0VsZW1lbnRcIjtcclxuaW1wb3J0IHsgUmVhY3RpdmVQcm9wZXJ0eSwgTW9kZWxFdmVudCB9IGZyb20gXCJlZGl0b3IvbGliL21vZGVscy9Nb2RlbFwiO1xyXG5pbXBvcnQgeyBUcmVlSXRlbU1vZGVsTGlzdCwgVHJlZUl0ZW1Nb2RlbCwgVHJlZVZpZXcgfSBmcm9tIFwiZWRpdG9yL2xpYi92aWV3cy9UcmVlVmlld1wiO1xyXG5cclxuZXhwb3J0IHsgTXlUcmVlSXRlbU1vZGVsIH07XHJcbmV4cG9ydCB7IE15VHJlZUl0ZW1Nb2RlbExpc3QgfTtcclxuZXhwb3J0IHsgTXlUcmVlVmlldyB9O1xyXG5cclxuY2xhc3MgTXlUcmVlSXRlbU1vZGVsIGV4dGVuZHMgVHJlZUl0ZW1Nb2RlbCB7XHJcbiAgICBcclxuICAgIEBSZWFjdGl2ZVByb3BlcnR5KClcclxuICAgIGNoaWxkQ291bnQ6IG51bWJlcjtcclxuXHJcbiAgICBAUmVhY3RpdmVQcm9wZXJ0eSgpXHJcbiAgICB2aXNpYmlsaXR5OiBib29sZWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGluaXQ6IHtpZDogc3RyaW5nLCB0eXBlOiBcImxlYWZcIiB8IFwicGFyZW50XCIsIGl0ZW1zPzogVHJlZUl0ZW1Nb2RlbFtdfSkge1xyXG4gICAgICAgIHN1cGVyKGluaXQpO1xyXG4gICAgICAgIHRoaXMuY2hpbGRDb3VudCA9IHRoaXMuY2hpbGRJdGVtcy5sZW5ndGg7XHJcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb2RlbGNoYW5nZVwiLCB0aGlzLiNoYW5kbGVNb2RlbENoYW5nZUV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudmlzaWJpbGl0eSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXkoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5pZCk7XHJcbiAgICB9XHJcblxyXG4gICAgI2hhbmRsZU1vZGVsQ2hhbmdlRXZlbnQoZXZlbnQ6IE1vZGVsRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7dGFyZ2V0fSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHtjaGlsZEl0ZW1zfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRhcmdldCA9PSBjaGlsZEl0ZW1zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRDb3VudCA9IGNoaWxkSXRlbXMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTXlUcmVlSXRlbU1vZGVsTGlzdCBleHRlbmRzIFRyZWVJdGVtTW9kZWxMaXN0IHtcclxuICAgIGRlY2xhcmUgcmVhZG9ubHkgaXRlbXM6IE15VHJlZUl0ZW1Nb2RlbFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGl0ZW1zOiBNeVRyZWVJdGVtTW9kZWxbXSkge1xyXG4gICAgICAgIHN1cGVyKGl0ZW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY291bnQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbV9pID0+IGl0ZW1faS5zaG93KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW1faSA9PiBpdGVtX2kuaGlkZSgpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLml0ZW1zLm1hcChpdGVtX2kgPT4gaXRlbV9pLmlkKS5qb2luKFwiIFwiKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5AQ3VzdG9tRWxlbWVudCh7XHJcbiAgICBuYW1lOiBcImUtbXl0cmVldmlld1wiXHJcbn0pXHJcbmNsYXNzIE15VHJlZVZpZXcgZXh0ZW5kcyBUcmVlVmlldyB7XHJcblxyXG4gICAgb3ZlcnJpZGUgcmVuZGVyKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnJlbmRlcigpO1xyXG4gICAgICAgIGNvbnN0IHtzaGFkb3dSb290LCB0cmVlRWxlbWVudH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHN0eWxlc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xyXG4gICAgICAgIChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHN0eWxlc2hlZXQucmVwbGFjZShcclxuICAgICAgICAgICAgICAgIChhd2FpdCBpbXBvcnQoXCIuLi9wdWJsaWMvY3NzL215dHJlZXZpZXcuY3NzXCIpKS5kZWZhdWx0WzBdWzFdXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9KSgpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW3N0eWxlc2hlZXRdO1xyXG4gICAgICAgIHRyZWVFbGVtZW50IS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLiNoYW5kbGVLZXlEb3duRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb3ZlcnJpZGUgaXRlbUNvbnRlbnREZWxlZ2F0ZShpdGVtOiBNeVRyZWVJdGVtTW9kZWwpIHtcclxuICAgICAgICByZXR1cm4gZnJhZ21lbnQoXHJcbiAgICAgICAgICAgIHJlYWN0aXZlRWxlbWVudChcclxuICAgICAgICAgICAgICAgIGl0ZW0sXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50KFwic3BhblwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogXCJsYWJlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBbXCJpZFwiXSxcclxuICAgICAgICAgICAgICAgIChsYWJlbCwgcHJvcGVydHksIG9sZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHJlYWN0aXZlRWxlbWVudChcclxuICAgICAgICAgICAgICAgIGl0ZW0sXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50KFwic3BhblwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogXCJiYWRnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBbXCJjaGlsZENvdW50XCIsIFwidHlwZVwiXSxcclxuICAgICAgICAgICAgICAgIChiYWRnZSwgcHJvcGVydHksIG9sZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInR5cGVcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlID09PSBcImxlYWZcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhZGdlLnRleHRDb250ZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWRnZS5oaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFkZ2UudGV4dENvbnRlbnQgPSBgKCR7aXRlbS5jaGlsZENvdW50fSlgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhZGdlLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNoaWxkQ291bnRcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFkZ2UudGV4dENvbnRlbnQgPSBgKCR7bmV3VmFsdWV9KWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgb3ZlcnJpZGUgaXRlbVRvb2xiYXJEZWxlZ2F0ZSh0aGlzOiBNeVRyZWVWaWV3LCBpdGVtOiBNeVRyZWVJdGVtTW9kZWwpOiBIVE1MRVRvb2xCYXJFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gcmVhY3RpdmVFbGVtZW50KFxyXG4gICAgICAgICAgICBpdGVtLFxyXG4gICAgICAgICAgICBlbGVtZW50KFwiZS10b29sYmFyXCIsIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudChcImUtdG9vbGJhcml0ZW1cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcImVkaXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCJFZGl0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uZWQ6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0VkaXRJdGVtRGlhbG9nKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudChcImUtdG9vbGJhcml0ZW1cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInZpc2liaWxpdHlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY2hlY2tib3hcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIlZpc2liaWxpdHlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25lZDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnZpc2liaWxpdHkgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmhpZGUoKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIFtcInZpc2liaWxpdHlcIiwgXCJ0eXBlXCJdLFxyXG4gICAgICAgICAgICAodG9vbGJhciwgcHJvcGVydHksIG9sZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ2aXNpYmlsaXR5XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmlzaWJpbGl0eUl0ZW0gPSB0b29sYmFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvcjxIVE1MRVRvb2xCYXJJdGVtRWxlbWVudD4oXCJlLXRvb2xiYXJpdGVtW25hbWU9dmlzaWJpbGl0eV1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2aXNpYmlsaXR5SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBuZXdWYWx1ZSA/IFwiSGlkZVwiIDogXCJTaG93XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5SXRlbS5sYWJlbCA9IGxhYmVsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eUl0ZW0udGl0bGUgPSBsYWJlbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHlJdGVtLnByZXNzZWQgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInR5cGVcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlU2VsZWN0ID0gdG9vbGJhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3I8SFRNTEVTZWxlY3RFbGVtZW50PihcImUtdG9vbGJhcml0ZW1bbmFtZT10eXBlXSBlLXNlbGVjdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVTZWxlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucXVlcnlTZWxlY3RvcjxIVE1MRU9wdGlvbkVsZW1lbnQ+KGBlLW9wdGlvblt2YWx1ZT1cIiR7bmV3VmFsdWV9XCJdYCkhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgb3ZlcnJpZGUgaXRlbU1lbnVEZWxlZ2F0ZSh0aGlzOiBNeVRyZWVWaWV3KTogSFRNTEVNZW51RWxlbWVudCB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJoZXJlXCIpO1xyXG4gICAgICAgIGNvbnN0IHt0cmVlRWxlbWVudH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHthY3RpdmVJdGVtOiBhY3RpdmVJdGVtRWxlbWVudH0gPSB0cmVlRWxlbWVudCE7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtcyA9IDxNeVRyZWVJdGVtTW9kZWxbXT50aGlzLnNlbGVjdGVkSXRlbXMoKTtcclxuICAgICAgICBjb25zdCBhY3RpdmVJdGVtID0gPE15VHJlZUl0ZW1Nb2RlbD50aGlzLmFjdGl2ZUl0ZW0oKTtcclxuICAgICAgICByZXR1cm4gZWxlbWVudChcImUtbWVudVwiLCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWw6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLW1lbnVpdGVtZ3JvdXBcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLW1lbnVpdGVtXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIkVkaXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBcIkVkaXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiA8RXZlbnRMaXN0ZW5lcj4oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHRoaXM6IE15VHJlZVZpZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbXMuZm9yRWFjaCgoc2VsZWN0SXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0VkaXRJdGVtRGlhbG9nKHNlbGVjdEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLmJpbmQodGhpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLW1lbnVpdGVtXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNoZWNrYm94XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGFjdGl2ZUl0ZW0udmlzaWJpbGl0eSA/IFwiSGlkZVwiIDogXCJTaG93XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogYWN0aXZlSXRlbS52aXNpYmlsaXR5ID8gXCJIaWRlXCIgOiBcIlNob3dcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbXNMaXN0ID0gc2VsZWN0ZWRJdGVtcy5pbmNsdWRlcyhhY3RpdmVJdGVtKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTXlUcmVlSXRlbU1vZGVsTGlzdChzZWxlY3RlZEl0ZW1zKSA6IG5ldyBNeVRyZWVJdGVtTW9kZWxMaXN0KFthY3RpdmVJdGVtXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUl0ZW0udmlzaWJpbGl0eSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW1zTGlzdC5oaWRlKCkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtc0xpc3Quc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVJdGVtRWxlbWVudCEuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50KFwiZS1zZXBhcmF0b3JcIiksXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50KFwiZS1tZW51aXRlbWdyb3VwXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwiZS1tZW51aXRlbVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFwiRGVsZXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJEZWxldGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbXNMaXN0ID0gc2VsZWN0ZWRJdGVtcy5pbmNsdWRlcyhhY3RpdmVJdGVtKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTXlUcmVlSXRlbU1vZGVsTGlzdChzZWxlY3RlZEl0ZW1zKSA6IG5ldyBNeVRyZWVJdGVtTW9kZWxMaXN0KFthY3RpdmVJdGVtXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHtjb3VudH0gPSBzZWxlY3RlZEl0ZW1zTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9SZW1vdmUgPSBjb25maXJtKGBSZW1vdmUgJHtjb3VudH0gaXRlbXM/YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb1JlbW92ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtc0xpc3QucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJlZUVsZW1lbnQhLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAjaGFuZGxlS2V5RG93bkV2ZW50KGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgY29uc3Qge2N1cnJlbnRUYXJnZXQsIGtleX0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB0YXJnZXRUcmVlID0gPEhUTUxFVHJlZUVsZW1lbnQ+Y3VycmVudFRhcmdldDtcclxuICAgICAgICBjb25zdCB7YWN0aXZlSXRlbX0gPSB0YXJnZXRUcmVlO1xyXG4gICAgICAgIGlmIChhY3RpdmVJdGVtKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUl0ZW1Nb2RlbCA9IDxNeVRyZWVJdGVtTW9kZWw+dGhpcy50cmVlSXRlbShhY3RpdmVJdGVtISkhO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkRlbGV0ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtcyA9IHRoaXMuc2VsZWN0ZWRJdGVtcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbXNMaXN0ID0gc2VsZWN0ZWRJdGVtcy5pbmNsdWRlcyhhY3RpdmVJdGVtTW9kZWwpID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFRyZWVJdGVtTW9kZWxMaXN0KHNlbGVjdGVkSXRlbXMpIDogbmV3IFRyZWVJdGVtTW9kZWxMaXN0KFthY3RpdmVJdGVtTW9kZWxdKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7Y291bnR9ID0gc2VsZWN0ZWRJdGVtc0xpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9SZW1vdmUgPSBjb25maXJtKGBSZW1vdmUgJHtjb3VudH0gaXRlbXM/YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvUmVtb3ZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbXNMaXN0LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRUcmVlLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93RWRpdEl0ZW1EaWFsb2coaXRlbTogTXlUcmVlSXRlbU1vZGVsKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qge3NoYWRvd1Jvb3R9ID0gdGhpcztcclxuICAgICAgICBjb25zdCB7dmlzaWJpbGl0eSwgaWQsIHR5cGV9ID0gaXRlbTtcclxuICAgICAgICBjb25zdCBkaWFsb2cgPSBlbGVtZW50KFwiZGlhbG9nXCIsIHtcclxuICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJmb3JtXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJkaWFsb2dcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudChcImUtbWVudWJhclwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg6IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLW1lbnVpdGVtXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJtZW51XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCJNZW51IDFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJNZW51IDFcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLW1lbnVcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xvdDogXCJtZW51XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLW1lbnVpdGVtXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNoZWNrYm94XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJNZW51aXRlbSAxXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLW1lbnVpdGVtXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNoZWNrYm94XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJNZW51aXRlbSAyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLW1lbnVpdGVtXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN1Ym1lbnVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJTdWJtZW51IDFcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwiZS1tZW51XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xvdDogXCJtZW51XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLW1lbnVpdGVtXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIlN1Ym1lbnVJdGVtIDFcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJyYWRpb1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogU3RyaW5nKDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJhZGlvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBcIlN1Ym1lbnVJdGVtIDFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwiZS1tZW51aXRlbVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCJTdWJtZW51SXRlbSAyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicmFkaW9cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFN0cmluZygxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJyYWRpb1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJTdWJtZW51SXRlbSAyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudChcImUtbWVudWl0ZW1cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFwiU3VibWVudUl0ZW0gM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInJhZGlvXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBTdHJpbmcoMyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicmFkaW9cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiU3VibWVudUl0ZW0gM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLXRhYmxpc3RcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4OiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwiZS10YWJcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sczogXCJwcm9wZXJ0aWVzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiUHJvcGVydGllc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLXRhYnBhbmVsXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJwcm9wZXJ0aWVzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJmaWVsZHNldFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwibGVnZW5kXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJJdGVtIGluZm9ybWF0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudChcImRpdlwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogXCJmb3JtLWNvbnRlbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudChcImxhYmVsXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3I6IFwidmlzaWJpbGl0eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiVmlzaWJpbGl0eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwiaW5wdXRcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcInZpc2liaWxpdHlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNoZWNrYm94XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJ2aXNpYmlsaXR5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogdmlzaWJpbGl0eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvZm9jdXM6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJsYWJlbFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yOiBcImlkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJJRFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwiaW5wdXRcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcImlkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJpZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleDogMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudChcImxhYmVsXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3I6IFwidHlwZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiVHlwZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwic2VsZWN0XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJ0eXBlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJ0eXBlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg6IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1wicGFyZW50XCIsIFwibGVhZlwiXS5tYXAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZV9pID0+IGVsZW1lbnQoXCJvcHRpb25cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogdHlwZV9pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHR5cGVfaSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiB0eXBlID09PSB0eXBlX2lcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwiZm9vdGVyXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogXCJkaWFsb2ctZm9vdGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJidXR0b25cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN1Ym1pdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiY29uZmlybVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBcIkNvbmZpcm1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJidXR0b25cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJjYW5jZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJDYW5jZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgbGlzdGVuZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZTogKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qge2N1cnJlbnRUYXJnZXR9ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0RGlhbG9nID0gPEhUTUxEaWFsb2dFbGVtZW50PmN1cnJlbnRUYXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldERpYWxvZy5yZXR1cm5WYWx1ZSA9PT0gXCJjb25maXJtXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybSA9IHRhcmdldERpYWxvZy5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKSE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnZpc2liaWxpdHkgPSBCb29sZWFuKGZvcm1EYXRhLmdldChcInZpc2liaWxpdHlcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnR5cGUgPSA8XCJsZWFmXCIgfCBcInBhcmVudFwiPlN0cmluZyhmb3JtRGF0YS5nZXQoXCJ0eXBlXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5pZCA9IFN0cmluZyhmb3JtRGF0YS5nZXQoXCJpZFwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERpYWxvZy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kKGRpYWxvZyk7XHJcbiAgICAgICAgZGlhbG9nLnNob3dNb2RhbCgpO1xyXG4gICAgfVxyXG59OyIsImltcG9ydCB7IE1vZGVsQ2hhbmdlT2JzZXJ2ZXIgfSBmcm9tIFwiLi4vbW9kZWxzL01vZGVsXCI7XHJcbmltcG9ydCB7IGNhbWVsVG9UcmFpbiB9IGZyb20gXCIuL1NuaXBwZXRzXCI7XHJcbmV4cG9ydCB7IEN1c3RvbUVsZW1lbnQgfTtcclxuZXhwb3J0IHsgUXVlcnlQcm9wZXJ0eSB9O1xyXG5leHBvcnQgeyBRdWVyeUFsbFByb3BlcnR5IH07XHJcbmV4cG9ydCB7IEF0dHJpYnV0ZVByb3BlcnR5IH07XHJcbmV4cG9ydCB7IHJlYWN0aXZlRWxlbWVudCB9O1xyXG5leHBvcnQgeyByZXZva2VSZWFjdGl2ZUVsZW1lbnQgfTtcclxuZXhwb3J0IHsgcmVhY3RpdmVDaGlsZEVsZW1lbnRzIH07XHJcbmV4cG9ydCB7IHJldm9rZVJlYWN0aXZlQ2hpbGRFbGVtZW50cyB9O1xyXG5leHBvcnQgeyBlbGVtZW50IH07XHJcbmV4cG9ydCB7IGZyYWdtZW50IH07XHJcbmV4cG9ydCB7IHRleHROb2RlIH07XHJcbmV4cG9ydCB7IGFyZUF0dHJpYnV0ZXNNYXRjaGluZyB9O1xyXG5leHBvcnQgeyBBdHRyaWJ1dGVNdXRhdGlvbk1peGluQmFzZSB9O1xyXG5leHBvcnQgeyB0cmltTXVsdGlsaW5lSW5kZW50IH07XHJcbmV4cG9ydCB7IFN0eWxlc2hlZXQgfTtcclxuZXhwb3J0IHsgcmVhY3RpdmVFbGVtZW50c01hcCB9O1xyXG5jb25zdCBBdHRyaWJ1dGVQcm9wZXJ0eSA9IGZ1bmN0aW9uIChpbml0KSB7XHJcbiAgICByZXR1cm4gKHRhcmdldCwgcHJvcGVydHkpID0+IHtcclxuICAgICAgICBjb25zdCB7IGNvbnN0cnVjdG9yIH0gPSB0YXJnZXQ7XHJcbiAgICAgICAgY29uc3QgeyBwcm90b3R5cGUgfSA9IGNvbnN0cnVjdG9yO1xyXG4gICAgICAgIGNvbnN0IHByb3BlcnR5TmFtZSA9IFN0cmluZyhwcm9wZXJ0eSk7XHJcbiAgICAgICAgY29uc3QgeyBkZWZhdWx0VmFsdWUgPSBudWxsLCBvYnNlcnZlZCA9IGZhbHNlLCBuYW1lID0gY2FtZWxUb1RyYWluKHByb3BlcnR5TmFtZSkgfSA9IGluaXQ7XHJcbiAgICAgICAgaWYgKG9ic2VydmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9ic2VydmVkQXR0cmlidXRlcyA9IFJlZmxlY3QuZ2V0KGNvbnN0cnVjdG9yLCBcIm9ic2VydmVkQXR0cmlidXRlc1wiLCBjb25zdHJ1Y3Rvcik7XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9ic2VydmVkQXR0cmlidXRlcykpIHtcclxuICAgICAgICAgICAgICAgIG9ic2VydmVkQXR0cmlidXRlcy5wdXNoKG5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbnN0cnVjdG9yLCBcIm9ic2VydmVkQXR0cmlidXRlc1wiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtuYW1lXSxcclxuICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgdHlwZSB9ID0gaW5pdDtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBCb29sZWFuOiB7XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG90eXBlLCBwcm9wZXJ0eU5hbWUsIHtcclxuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIE9iamVjdDoge1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgcHJvcGVydHlOYW1lLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuZ2V0QXR0cmlidXRlKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHZhbCAhPT0gbnVsbCkgPyBKU09OLnBhcnNlKHZhbCkgOiBkZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKG5hbWUsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBOdW1iZXI6IHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90b3R5cGUsIHByb3BlcnR5TmFtZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSB0aGlzLmdldEF0dHJpYnV0ZShuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh2YWwgIT09IG51bGwpID8gcGFyc2VGbG9hdCh2YWwpIDogZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBTdHJpbmc6XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90b3R5cGUsIHByb3BlcnR5TmFtZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSB0aGlzLmdldEF0dHJpYnV0ZShuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh2YWwgIT09IG51bGwpID8gdmFsIDogZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59O1xyXG5mdW5jdGlvbiBTdHlsZXNoZWV0KHRleHQpIHtcclxuICAgIGNvbnN0IHN0eWxlc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xyXG4gICAgc3R5bGVzaGVldC5yZXBsYWNlU3luYyh0ZXh0KTtcclxuICAgIHJldHVybiBzdHlsZXNoZWV0O1xyXG59XHJcbmZ1bmN0aW9uIHRyaW1NdWx0aWxpbmVJbmRlbnQodGV4dCkge1xyXG4gICAgY29uc3QgbmV3bGluZUluZGV4ID0gdGV4dC5pbmRleE9mKFwiXFxuXCIpO1xyXG4gICAgdGV4dCA9IHRleHQuc3Vic3RyaW5nKG5ld2xpbmVJbmRleCArIDEpO1xyXG4gICAgY29uc3QgaW5kZW50TWF0Y2ggPSB0ZXh0Lm1hdGNoKC9eW1xcc10qLyk7XHJcbiAgICBpZiAoaW5kZW50TWF0Y2gpIHtcclxuICAgICAgICBjb25zdCBpbmRlbnQgPSB0ZXh0LnN1YnN0cmluZygwLCBpbmRlbnRNYXRjaFswXS5sZW5ndGgpO1xyXG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2VBbGwoaW5kZW50LCBcIlwiKS50cmltRW5kKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGV4dDtcclxufVxyXG5jb25zdCBDdXN0b21FbGVtZW50ID0gZnVuY3Rpb24gKGluaXQpIHtcclxuICAgIHJldHVybiAoZWxlbWVudEN0b3IpID0+IHtcclxuICAgICAgICBjb25zdCB7IG5hbWUsIG9wdGlvbnMgfSA9IGluaXQ7XHJcbiAgICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQobmFtZSkpIHtcclxuICAgICAgICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKG5hbWUsIGVsZW1lbnRDdG9yLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRDdG9yO1xyXG4gICAgfTtcclxufTtcclxuY29uc3QgUXVlcnlQcm9wZXJ0eSA9IGZ1bmN0aW9uIChpbml0KSB7XHJcbiAgICByZXR1cm4gKHRhcmdldCwgcHJvcGVydHlLZXkpID0+IHtcclxuICAgICAgICBjb25zdCB7IGNvbnN0cnVjdG9yIH0gPSB0YXJnZXQ7XHJcbiAgICAgICAgY29uc3QgeyBwcm90b3R5cGUgfSA9IGNvbnN0cnVjdG9yO1xyXG4gICAgICAgIGNvbnN0IHByb3BlcnR5TmFtZSA9IFN0cmluZyhwcm9wZXJ0eUtleSk7XHJcbiAgICAgICAgY29uc3QgeyBzZWxlY3RvciB9ID0gaW5pdDtcclxuICAgICAgICBjb25zdCB3aXRoaW5TaGFkb3dSb290ID0gaW5pdC53aXRoaW5TaGFkb3dSb290ID8/IGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IGdldHRlciA9IHdpdGhpblNoYWRvd1Jvb3QgPyBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgICAgfSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG90eXBlLCBwcm9wZXJ0eU5hbWUsIHtcclxuICAgICAgICAgICAgZ2V0OiBnZXR0ZXJcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XHJcbmNvbnN0IFF1ZXJ5QWxsUHJvcGVydHkgPSBmdW5jdGlvbiAoaW5pdCkge1xyXG4gICAgcmV0dXJuICh0YXJnZXQsIHByb3BlcnR5S2V5KSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBjb25zdHJ1Y3RvciB9ID0gdGFyZ2V0O1xyXG4gICAgICAgIGNvbnN0IHsgcHJvdG90eXBlIH0gPSBjb25zdHJ1Y3RvcjtcclxuICAgICAgICBjb25zdCBwcm9wZXJ0eU5hbWUgPSBTdHJpbmcocHJvcGVydHlLZXkpO1xyXG4gICAgICAgIGNvbnN0IHsgc2VsZWN0b3IgfSA9IGluaXQ7XHJcbiAgICAgICAgY29uc3Qgd2l0aGluU2hhZG93Um9vdCA9IGluaXQud2l0aGluU2hhZG93Um9vdCA/PyBmYWxzZTtcclxuICAgICAgICBjb25zdCBnZXR0ZXIgPSB3aXRoaW5TaGFkb3dSb290ID8gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xyXG4gICAgICAgIH0gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgcHJvcGVydHlOYW1lLCB7XHJcbiAgICAgICAgICAgIGdldDogZ2V0dGVyXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xyXG5mdW5jdGlvbiBmcmFnbWVudCguLi5ub2Rlcykge1xyXG4gICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICBmcmFnbWVudC5hcHBlbmQoLi4ubm9kZXMpO1xyXG4gICAgcmV0dXJuIGZyYWdtZW50O1xyXG59XHJcbmZ1bmN0aW9uIHRleHROb2RlKHRleHQpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KTtcclxufVxyXG5mdW5jdGlvbiBlbGVtZW50KHRhZ05hbWUsIGluaXQpIHtcclxuICAgIGlmIChpbml0KSB7XHJcbiAgICAgICAgY29uc3QgeyBvcHRpb25zLCBhdHRyaWJ1dGVzLCBkYXRhc2V0LCBjaGlsZHJlbiwgbGlzdGVuZXJzIH0gPSBpbml0O1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUsIG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMpLmZvckVhY2goKFthdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVWYWx1ZV0pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVWYWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC50b2dnbGVBdHRyaWJ1dGUoY2FtZWxUb1RyYWluKGF0dHJpYnV0ZU5hbWUpLCBhdHRyaWJ1dGVWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShjYW1lbFRvVHJhaW4oYXR0cmlidXRlTmFtZSksIFN0cmluZyhhdHRyaWJ1dGVWYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkYXRhc2V0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YXNldDogZWxlbWVudERhdGFzZXQgfSA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGRhdGFzZXQpLmZvckVhY2goKFthdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVWYWx1ZV0pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXR0cmlidXRlVmFsdWUgPT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnREYXRhc2V0W2NhbWVsVG9UcmFpbihhdHRyaWJ1dGVOYW1lKV0gPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGVsZW1lbnREYXRhc2V0W2NhbWVsVG9UcmFpbihhdHRyaWJ1dGVOYW1lKV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudERhdGFzZXRbY2FtZWxUb1RyYWluKGF0dHJpYnV0ZU5hbWUpXSA9IFN0cmluZyhhdHRyaWJ1dGVWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjaGlsZHJlbiA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbihlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgY2hpbGRyZW4gPT09IFwib2JqZWN0XCIgJiYgXCJsZW5ndGhcIiBpbiBjaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQoLi4uQXJyYXkuZnJvbShjaGlsZHJlbikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQoY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMobGlzdGVuZXJzKS5mb3JFYWNoKChbbmFtZV9pLCBsaXN0ZW5lcl9pXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobGlzdGVuZXJfaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIobmFtZV9pLCBsaXN0ZW5lcl9pWzBdLCBsaXN0ZW5lcl9pWzFdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihuYW1lX2ksIGxpc3RlbmVyX2kpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcclxufVxyXG5jb25zdCByZWFjdGl2ZUVsZW1lbnRzTWFwID0gbmV3IFdlYWtNYXAoKTtcclxuY29uc3QgcmVhY3RpdmVFbGVtZW50c0ZpbmFsaXphdGlvblJlZ2lzdHJ5ID0gbmV3IEZpbmFsaXphdGlvblJlZ2lzdHJ5KChoZWxkVmFsdWUpID0+IHtcclxuICAgIGNvbnN0IHsgbW9kZWwsIHJlYWN0aXZlRWxlbWVudCB9ID0gaGVsZFZhbHVlO1xyXG4gICAgY29uc3QgcmVhY3RpdmVFbGVtZW50c01hcEVudHJ5ID0gcmVhY3RpdmVFbGVtZW50c01hcC5nZXQobW9kZWwpO1xyXG4gICAgaWYgKHJlYWN0aXZlRWxlbWVudHNNYXBFbnRyeSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgY29uc3QgeyByZWFjdGl2ZUVsZW1lbnRzQXJyYXkgfSA9IHJlYWN0aXZlRWxlbWVudHNNYXBFbnRyeTtcclxuICAgICAgICByZWFjdGl2ZUVsZW1lbnRzQXJyYXkuc3BsaWNlKHJlYWN0aXZlRWxlbWVudHNBcnJheS5pbmRleE9mKHJlYWN0aXZlRWxlbWVudCksIDEpO1xyXG4gICAgfVxyXG59KTtcclxuY29uc3QgcmVhY3RpdmVFbGVtZW50c1Byb3BlcnR5T2JzZXJ2ZXIgPSBuZXcgTW9kZWxDaGFuZ2VPYnNlcnZlcigocmVjb3JkcykgPT4ge1xyXG4gICAgcmVjb3Jkcy5mb3JFYWNoKChyZWNvcmRfaSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0LCBwcm9wZXJ0eU5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSB9ID0gcmVjb3JkX2k7XHJcbiAgICAgICAgY29uc3QgeyByZWFjdGl2ZUVsZW1lbnRzQXJyYXkgfSA9IHJlYWN0aXZlRWxlbWVudHNNYXAuZ2V0KHRhcmdldCk7XHJcbiAgICAgICAgcmVhY3RpdmVFbGVtZW50c0FycmF5LmZvckVhY2gocmVhY3RpdmVFbGVtZW50X2kgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7IGVsZW1lbnRSZWYsIHJlYWN0LCBwcm9wZXJ0aWVzIH0gPSByZWFjdGl2ZUVsZW1lbnRfaTtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRSZWYuZGVyZWYoKTtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmluY2x1ZGVzKHByb3BlcnR5TmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWFjdChlbGVtZW50LCBwcm9wZXJ0eU5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuZnVuY3Rpb24gcmVhY3RpdmVFbGVtZW50KG1vZGVsLCBlbGVtZW50LCBwcm9wZXJ0aWVzLCByZWFjdCkge1xyXG4gICAgY29uc3QgZWxlbWVudFJlZiA9IG5ldyBXZWFrUmVmKGVsZW1lbnQpO1xyXG4gICAgY29uc3QgcmVhY3RpdmVFbGVtZW50ID0geyBlbGVtZW50UmVmLCByZWFjdCwgcHJvcGVydGllcyB9O1xyXG4gICAgY29uc3QgcmVhY3RpdmVFbGVtZW50c01hcEVudHJ5ID0gcmVhY3RpdmVFbGVtZW50c01hcC5nZXQobW9kZWwpO1xyXG4gICAgcmVhY3RpdmVFbGVtZW50c0ZpbmFsaXphdGlvblJlZ2lzdHJ5LnJlZ2lzdGVyKGVsZW1lbnQsIHsgbW9kZWwsIHJlYWN0aXZlRWxlbWVudCB9KTtcclxuICAgIGlmICghcmVhY3RpdmVFbGVtZW50c01hcEVudHJ5KSB7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXJPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB0cnVlLFxyXG4gICAgICAgICAgICBwcm9wZXJ0aWVzRmlsdGVyOiBwcm9wZXJ0aWVzXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCByZWFjdGl2ZUVsZW1lbnRzQXJyYXkgPSBbcmVhY3RpdmVFbGVtZW50XTtcclxuICAgICAgICByZWFjdGl2ZUVsZW1lbnRzTWFwLnNldChtb2RlbCwgeyBvYnNlcnZlck9wdGlvbnMsIHJlYWN0aXZlRWxlbWVudHNBcnJheSB9KTtcclxuICAgICAgICByZWFjdGl2ZUVsZW1lbnRzUHJvcGVydHlPYnNlcnZlci5vYnNlcnZlKG1vZGVsLCBvYnNlcnZlck9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgeyByZWFjdGl2ZUVsZW1lbnRzQXJyYXksIG9ic2VydmVyT3B0aW9ucyB9ID0gcmVhY3RpdmVFbGVtZW50c01hcEVudHJ5O1xyXG4gICAgICAgIGNvbnN0IHsgcHJvcGVydGllc0ZpbHRlciB9ID0gb2JzZXJ2ZXJPcHRpb25zO1xyXG4gICAgICAgIHJlYWN0aXZlRWxlbWVudHNBcnJheS5wdXNoKHJlYWN0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgb2JzZXJ2ZXJPcHRpb25zLnByb3BlcnRpZXNGaWx0ZXIgPSBwcm9wZXJ0aWVzRmlsdGVyID9cclxuICAgICAgICAgICAgcHJvcGVydGllc0ZpbHRlci5jb25jYXQocHJvcGVydGllcy5maWx0ZXIocHJvcGVydHlfaSA9PiAhcHJvcGVydGllc0ZpbHRlci5pbmNsdWRlcyhwcm9wZXJ0eV9pKSkpIDogcHJvcGVydGllcy5maWx0ZXIoKHByb3BlcnR5X2ksIGksIHByb3BlcnRpZXMpID0+IHByb3BlcnRpZXMuaW5kZXhPZihwcm9wZXJ0eV9pKSA9PT0gaSk7XHJcbiAgICB9XHJcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goKHByb3BlcnR5X2kpID0+IHtcclxuICAgICAgICBpZiAocHJvcGVydHlfaSBpbiBtb2RlbCkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IFJlZmxlY3QuZ2V0KG1vZGVsLCBwcm9wZXJ0eV9pLCBtb2RlbCk7XHJcbiAgICAgICAgICAgIHJlYWN0KGVsZW1lbnQsIHByb3BlcnR5X2ksIHVuZGVmaW5lZCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGVsZW1lbnQ7XHJcbn1cclxuZnVuY3Rpb24gcmV2b2tlUmVhY3RpdmVFbGVtZW50KG1vZGVsLCBlbGVtZW50KSB7XHJcbiAgICBjb25zdCByZWFjdGl2ZUVsZW1lbnRzTWFwRW50cnkgPSByZWFjdGl2ZUVsZW1lbnRzTWFwLmdldChtb2RlbCk7XHJcbiAgICBpZiAocmVhY3RpdmVFbGVtZW50c01hcEVudHJ5KSB7XHJcbiAgICAgICAgY29uc3QgeyByZWFjdGl2ZUVsZW1lbnRzQXJyYXkgfSA9IHJlYWN0aXZlRWxlbWVudHNNYXBFbnRyeTtcclxuICAgICAgICBjb25zdCByZWFjdGl2ZUVsZW1lbnRJbmRleCA9IHJlYWN0aXZlRWxlbWVudHNBcnJheS5maW5kSW5kZXgocmVhY3RpdmVFbGVtZW50ID0+IHJlYWN0aXZlRWxlbWVudC5lbGVtZW50UmVmLmRlcmVmKCkgPT09IGVsZW1lbnQpO1xyXG4gICAgICAgIGlmIChyZWFjdGl2ZUVsZW1lbnRJbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIHJlYWN0aXZlRWxlbWVudHNBcnJheS5zcGxpY2UocmVhY3RpdmVFbGVtZW50SW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVhY3RpdmVFbGVtZW50c0FycmF5Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZWFjdGl2ZUVsZW1lbnRzTWFwLmRlbGV0ZShtb2RlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNvbnN0IHJlYWN0aXZlQ2hpbGRFbGVtZW50c01hcCA9IG5ldyBXZWFrTWFwKCk7XHJcbmNvbnN0IHJlYWN0aXZlQ2hpbGRFbGVtZW50c0ZpbmFsaXphdGlvblJlZ2lzdHJ5ID0gbmV3IEZpbmFsaXphdGlvblJlZ2lzdHJ5KChoZWxkVmFsdWUpID0+IHtcclxuICAgIGNvbnN0IHsgbGlzdCwgcmVhY3RpdmVDaGlsZEVsZW1lbnQgfSA9IGhlbGRWYWx1ZTtcclxuICAgIGNvbnN0IHJlYWN0aXZlQ2hpbGRyZW5FbGVtZW50c01hcEVudHJ5ID0gcmVhY3RpdmVDaGlsZEVsZW1lbnRzTWFwLmdldChsaXN0KTtcclxuICAgIGlmIChyZWFjdGl2ZUNoaWxkcmVuRWxlbWVudHNNYXBFbnRyeSkge1xyXG4gICAgICAgIGNvbnN0IHsgcmVhY3RpdmVDaGlsZEVsZW1lbnRzQXJyYXkgfSA9IHJlYWN0aXZlQ2hpbGRyZW5FbGVtZW50c01hcEVudHJ5O1xyXG4gICAgICAgIHJlYWN0aXZlQ2hpbGRFbGVtZW50c0FycmF5LnNwbGljZShyZWFjdGl2ZUNoaWxkRWxlbWVudHNBcnJheS5pbmRleE9mKHJlYWN0aXZlQ2hpbGRFbGVtZW50KSwgMSk7XHJcbiAgICB9XHJcbn0pO1xyXG5jb25zdCByZWFjdGl2ZUNoaWxkRWxlbWVudHNPYnNlcnZlciA9IG5ldyBNb2RlbENoYW5nZU9ic2VydmVyKChyZWNvcmRzKSA9PiB7XHJcbiAgICBsZXQgcmFuZ2UgPSBudWxsO1xyXG4gICAgQXJyYXkuZnJvbShyZWNvcmRzLnZhbHVlcygpKS5mb3JFYWNoKChyZWNvcmRfaSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSByZWNvcmRfaTtcclxuICAgICAgICBjb25zdCBsaXN0ID0gdGFyZ2V0O1xyXG4gICAgICAgIGNvbnN0IHsgbGVuZ3RoOiBsaXN0TGVuZ3RoIH0gPSBsaXN0O1xyXG4gICAgICAgIGNvbnN0IHsgcmVhY3RpdmVDaGlsZEVsZW1lbnRzQXJyYXkgfSA9IHJlYWN0aXZlQ2hpbGRFbGVtZW50c01hcC5nZXQobGlzdCk7XHJcbiAgICAgICAgcmVhY3RpdmVDaGlsZEVsZW1lbnRzQXJyYXkuZm9yRWFjaCgocmVhY3RpdmVDaGlsZEVsZW1lbnRzX2kpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBwYXJlbnRSZWYsIG1hcHBpbmcsIHBsYWNlaG9sZGVyIH0gPSByZWFjdGl2ZUNoaWxkRWxlbWVudHNfaTtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gcGFyZW50UmVmLmRlcmVmKCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZmlyc3RDaGlsZCwgY2hpbGRyZW4gfSA9IHBhcmVudDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgbGVuZ3RoOiBjaGlsZHJlbkNvdW50IH0gPSBjaGlsZHJlbjtcclxuICAgICAgICAgICAgICAgIGlmIChwbGFjZWhvbGRlciAmJiBsaXN0TGVuZ3RoID4gMCAmJiBmaXJzdENoaWxkID09IHBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHBsYWNlaG9sZGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgY2hhbmdlVHlwZSwgTElTVF9JTlNFUlQsIExJU1RfUkVNT1ZFLCBMSVNUX1NPUlQgfSA9IHJlY29yZF9pO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMSVNUX0lOU0VSVDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGluc2VydGVkSW5kZXgsIGluc2VydGVkSXRlbXMgfSA9IHJlY29yZF9pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnNlcnRlZEl0ZW1zQXJyYXkgPSBBcnJheS5mcm9tKGluc2VydGVkSXRlbXMudmFsdWVzKCkpLm1hcChtYXBwaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBsZW5ndGg6IGNoaWxkcmVuQ291bnQgfSA9IGNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zZXJ0ZWRJbmRleCA8IGNoaWxkcmVuQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuW2luc2VydGVkSW5kZXhdLmJlZm9yZSguLi5pbnNlcnRlZEl0ZW1zQXJyYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFwcGVuZCguLi5pbnNlcnRlZEl0ZW1zQXJyYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIExJU1RfUkVNT1ZFOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgcmVtb3ZlZEluZGV4LCByZW1vdmVkSXRlbXMgfSA9IHJlY29yZF9pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGxlbmd0aDogcmVtb3ZlZENvdW50IH0gPSByZW1vdmVkSXRlbXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlID0gcmFuZ2UgPz8gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlRW5kSW5kZXggPSByZW1vdmVkSW5kZXggKyAocmVtb3ZlZENvdW50IC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmVFbmRJbmRleCA8IGNoaWxkcmVuQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLnNldFN0YXJ0QmVmb3JlKGNoaWxkcmVuW3JlbW92ZWRJbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc2V0RW5kQWZ0ZXIoY2hpbGRyZW5bcmVtb3ZlRW5kSW5kZXhdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLmRlbGV0ZUNvbnRlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTElTVF9TT1JUOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc29ydGVkSW5kaWNlcyB9ID0gcmVjb3JkX2k7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuQXJyYXkgPSBBcnJheS5mcm9tKGNoaWxkcmVuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFwcGVuZCguLi5zb3J0ZWRJbmRpY2VzLmZpbHRlcihpbmRleF9pID0+IGluZGV4X2kgPCBjaGlsZHJlbkNvdW50KS5tYXAoaW5kZXhfaSA9PiBjaGlsZHJlbkFycmF5W2luZGV4X2ldKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChsaXN0TGVuZ3RoID09IDAgJiYgcGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuYXBwZW5kKHBsYWNlaG9sZGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5mdW5jdGlvbiByZWFjdGl2ZUNoaWxkRWxlbWVudHMobGlzdCwgbWFwcGluZywgcGxhY2Vob2xkZXIpIHtcclxuICAgIHJldHVybiAocGFyZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50UmVmID0gbmV3IFdlYWtSZWYocGFyZW50KTtcclxuICAgICAgICBjb25zdCByZWFjdGl2ZUNoaWxkRWxlbWVudHNNYXBFbnRyeSA9IHJlYWN0aXZlQ2hpbGRFbGVtZW50c01hcC5nZXQobGlzdCk7XHJcbiAgICAgICAgY29uc3QgcmVhY3RpdmVDaGlsZEVsZW1lbnQgPSB7IHBhcmVudFJlZiwgbWFwcGluZywgcGxhY2Vob2xkZXIgfTtcclxuICAgICAgICByZWFjdGl2ZUNoaWxkRWxlbWVudHNGaW5hbGl6YXRpb25SZWdpc3RyeS5yZWdpc3RlcihwYXJlbnQsIHsgbGlzdCwgcmVhY3RpdmVDaGlsZEVsZW1lbnQgfSk7XHJcbiAgICAgICAgaWYgKCFyZWFjdGl2ZUNoaWxkRWxlbWVudHNNYXBFbnRyeSkge1xyXG4gICAgICAgICAgICBjb25zdCByZWFjdGl2ZUNoaWxkRWxlbWVudHNBcnJheSA9IFtyZWFjdGl2ZUNoaWxkRWxlbWVudF07XHJcbiAgICAgICAgICAgIHJlYWN0aXZlQ2hpbGRFbGVtZW50c01hcC5zZXQobGlzdCwgeyByZWFjdGl2ZUNoaWxkRWxlbWVudHNBcnJheSB9KTtcclxuICAgICAgICAgICAgcmVhY3RpdmVDaGlsZEVsZW1lbnRzT2JzZXJ2ZXIub2JzZXJ2ZShsaXN0LCB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZExpc3Q6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB7IHJlYWN0aXZlQ2hpbGRFbGVtZW50c0FycmF5IH0gPSByZWFjdGl2ZUNoaWxkRWxlbWVudHNNYXBFbnRyeTtcclxuICAgICAgICAgICAgcmVhY3RpdmVDaGlsZEVsZW1lbnRzQXJyYXkucHVzaChyZWFjdGl2ZUNoaWxkRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gbGlzdC5sZW5ndGggPT0gMCAmJiBwbGFjZWhvbGRlciA/XHJcbiAgICAgICAgICAgIFtwbGFjZWhvbGRlcl0gOiBBcnJheS5mcm9tKGxpc3QudmFsdWVzKCkpLm1hcChtYXBwaW5nKTtcclxuICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkcmVuKC4uLmNoaWxkcmVuKTtcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gcmV2b2tlUmVhY3RpdmVDaGlsZEVsZW1lbnRzKGxpc3QsIHBhcmVudCkge1xyXG4gICAgY29uc3QgcmVhY3RpdmVDaGlsZEVsZW1lbnRzTWFwRW50cnkgPSByZWFjdGl2ZUNoaWxkRWxlbWVudHNNYXAuZ2V0KGxpc3QpO1xyXG4gICAgaWYgKHJlYWN0aXZlQ2hpbGRFbGVtZW50c01hcEVudHJ5KSB7XHJcbiAgICAgICAgY29uc3QgeyByZWFjdGl2ZUNoaWxkRWxlbWVudHNBcnJheSB9ID0gcmVhY3RpdmVDaGlsZEVsZW1lbnRzTWFwRW50cnk7XHJcbiAgICAgICAgY29uc3QgcmVhY3RpdmVDaGlsZEVsZW1lbnRzSW5kZXggPSByZWFjdGl2ZUNoaWxkRWxlbWVudHNBcnJheS5maW5kSW5kZXgocmVhY3RpdmVDaGlsZEVsZW1lbnQgPT4gcmVhY3RpdmVDaGlsZEVsZW1lbnQucGFyZW50UmVmLmRlcmVmKCkgPT09IHBhcmVudCk7XHJcbiAgICAgICAgaWYgKHJlYWN0aXZlQ2hpbGRFbGVtZW50c0luZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgcmVhY3RpdmVDaGlsZEVsZW1lbnRzQXJyYXkuc3BsaWNlKHJlYWN0aXZlQ2hpbGRFbGVtZW50c0luZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlYWN0aXZlQ2hpbGRFbGVtZW50c0FycmF5Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZWFjdGl2ZUNoaWxkRWxlbWVudHNNYXAuZGVsZXRlKGxpc3QpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBhcmVBdHRyaWJ1dGVzTWF0Y2hpbmcocmVmZXJlbmNlQXR0cmlidXRlVHlwZSwgcmVmZXJlbmNlQXR0cmlidXRlTmFtZSwgcmVmZXJlbmNlQXR0cmlidXRlVmFsdWUsIGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVZhbHVlKSB7XHJcbiAgICBpZiAocmVmZXJlbmNlQXR0cmlidXRlTmFtZSA9PSBhdHRyaWJ1dGVOYW1lKSB7XHJcbiAgICAgICAgc3dpdGNoIChyZWZlcmVuY2VBdHRyaWJ1dGVUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJib29sZWFuXCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVmZXJlbmNlQXR0cmlidXRlVmFsdWUgPT0gXCJcIiAmJiBhdHRyaWJ1dGVWYWx1ZSA9PSBcIlwiO1xyXG4gICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVmZXJlbmNlQXR0cmlidXRlVmFsdWUgIT09IFwiXCIgJiYgKHJlZmVyZW5jZUF0dHJpYnV0ZVZhbHVlID09IGF0dHJpYnV0ZVZhbHVlKTtcclxuICAgICAgICAgICAgY2FzZSBcImxpc3RcIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiAocmVmZXJlbmNlQXR0cmlidXRlVmFsdWUgIT09IFwiXCIgJiYgYXR0cmlidXRlVmFsdWUgIT09IG51bGwpICYmIG5ldyBSZWdFeHAoYCR7cmVmZXJlbmNlQXR0cmlidXRlVmFsdWV9XFxzKj9gLCBcImdcIikudGVzdChhdHRyaWJ1dGVWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmNsYXNzIEF0dHJpYnV0ZU11dGF0aW9uTWl4aW5CYXNlIHtcclxuICAgIGF0dHJpYnV0ZU5hbWU7XHJcbiAgICBhdHRyaWJ1dGVWYWx1ZTtcclxuICAgIGF0dHJpYnV0ZVR5cGU7XHJcbiAgICBjb25zdHJ1Y3RvcihhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVUeXBlID0gXCJib29sZWFuXCIsIGF0dHJpYnV0ZVZhbHVlID0gXCJcIikge1xyXG4gICAgICAgIHRoaXMuYXR0cmlidXRlTmFtZSA9IGF0dHJpYnV0ZU5hbWU7XHJcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVUeXBlID0gYXR0cmlidXRlVHlwZTtcclxuICAgICAgICB0aGlzLmF0dHJpYnV0ZVZhbHVlID0gYXR0cmlidXRlVmFsdWU7XHJcbiAgICB9XHJcbiAgICBhdHRhY2goKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vdCBpbXBsZW1lbnRlZCBtZXRob2QuXCIpO1xyXG4gICAgfVxyXG4gICAgZGV0YWNoKCkge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQgbWV0aG9kLlwiKTtcclxuICAgIH1cclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FbGVtZW50LmpzLm1hcCIsImV4cG9ydCB7IHNuYWtlVG9DYW1lbCB9O1xyXG5leHBvcnQgeyBjYW1lbFRvU25ha2UgfTtcclxuZXhwb3J0IHsgdHJhaW5Ub0NhbWVsIH07XHJcbmV4cG9ydCB7IGNhbWVsVG9UcmFpbiB9O1xyXG5leHBvcnQgeyBjb25zdHJ1Y3RvciB9O1xyXG5mdW5jdGlvbiBzbmFrZVRvQ2FtZWwoc3RyKSB7XHJcbiAgICByZXR1cm4gc3RyLnNwbGl0KCdfJykubWFwKHN0ciA9PiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc3Vic3RyaW5nKDEpLnRvTG93ZXJDYXNlKCkpLmpvaW4oXCJcIik7XHJcbn1cclxuZnVuY3Rpb24gY2FtZWxUb1NuYWtlKHN0cikge1xyXG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oPzwhXikoPz1bQS1aXSkvZywgJ18nKS50b0xvd2VyQ2FzZSgpO1xyXG59XHJcbmZ1bmN0aW9uIHRyYWluVG9DYW1lbChzdHIpIHtcclxuICAgIHJldHVybiBzdHIuc3BsaXQoJy0nKS5tYXAoc3RyID0+IHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zdWJzdHJpbmcoMSkudG9Mb3dlckNhc2UoKSkuam9pbihcIlwiKTtcclxufVxyXG5mdW5jdGlvbiBjYW1lbFRvVHJhaW4oc3RyKSB7XHJcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyg/PCFeKSg/PVtBLVpdKS9nLCAnLScpLnRvTG93ZXJDYXNlKCk7XHJcbn1cclxuY29uc3QgY29uc3RydWN0b3IgPSAocHJvdG90eXBlLCBjb25zdHJ1Y3QsIGNvbnN0cnVjdG9ycykgPT4ge1xyXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oY29uc3RydWN0LCB7XHJcbiAgICAgICAgcHJvdG90eXBlLFxyXG4gICAgICAgIC4uLmNvbnN0cnVjdG9yc1xyXG4gICAgfSk7XHJcbn07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNuaXBwZXRzLmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbmltcG9ydCB7IERFRkFVTFRfVEhFTUVfRk9DVVNFRF9JVEVNX09VVExJTkVfQ09MT1IgfSBmcm9tIFwiLi4vLi4vLi4vc3R5bGVzaGVldHMvVGhlbWVcIjtcclxuaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCwgQXR0cmlidXRlUHJvcGVydHksIGVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vRWxlbWVudFwiO1xyXG5pbXBvcnQgeyBIVE1MRUdyaWRCb2R5RWxlbWVudCB9IGZyb20gXCIuL0dyaWRCb2R5XCI7XHJcbmltcG9ydCB7IEhUTUxFR3JpZENlbGxFbGVtZW50IH0gZnJvbSBcIi4vR3JpZENlbGxcIjtcclxuaW1wb3J0IHsgSFRNTEVHcmlkSGVhZEVsZW1lbnQgfSBmcm9tIFwiLi9HcmlkSGVhZFwiO1xyXG5pbXBvcnQgeyBIVE1MRUdyaWRSb3dFbGVtZW50IH0gZnJvbSBcIi4vR3JpZFJvd1wiO1xyXG5pbXBvcnQgeyBIVE1MRUdyaWRSb3dHcm91cEVsZW1lbnQgfSBmcm9tIFwiLi9HcmlkUm93R3JvdXBcIjtcclxuaW1wb3J0IFwiLi9HcmlkQm9keVwiO1xyXG5pbXBvcnQgXCIuL0dyaWRIZWFkXCI7XHJcbmltcG9ydCBcIi4vR3JpZFJvd0dyb3VwXCI7XHJcbmltcG9ydCBcIi4vR3JpZFJvd1wiO1xyXG5pbXBvcnQgXCIuL0dyaWRDZWxsXCI7XHJcbmV4cG9ydCB7IEhUTUxFR3JpZEVsZW1lbnQgfTtcclxuSFRNTEVHcmlkSGVhZEVsZW1lbnQ7XHJcbkhUTUxFR3JpZEJvZHlFbGVtZW50O1xyXG52YXIgc2hhZG93VGVtcGxhdGU7XHJcbnZhciBzdHlsZTtcclxubGV0IEhUTUxFR3JpZEVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVHcmlkRWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBjZWxscygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJlLWdyaWRjZWxsXCIpKTtcclxuICAgIH1cclxuICAgIHJvd3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwiZS1ncmlkcm93XCIpKTtcclxuICAgIH1cclxuICAgIGdldCBhY3RpdmVDZWxsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJlLWdyaWRjZWxsW2FjdGl2ZV1cIik7XHJcbiAgICB9XHJcbiAgICBnZXQgYWN0aXZlUm93KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJlLWdyaWRyb3dbYWN0aXZlXVwiKTtcclxuICAgIH1cclxuICAgIGdldCBib2R5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCI6c2NvcGUgPiBlLWdyaWRib2R5XCIpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGhlYWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIjpzY29wZSA+IGUtZ3JpZGhlYWRcIik7XHJcbiAgICB9XHJcbiAgICAjb25TZWxlY3Rpb247XHJcbiAgICAjaGFzU2VsZWN0aW9uQ2hhbmdlZDtcclxuICAgICNjZWxsc1dhbGtlcjtcclxuICAgICNyb3dzV2Fsa2VyO1xyXG4gICAgc3RhdGljIHtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZSA9IGVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmFwcGVuZChlbGVtZW50KFwic2xvdFwiKSk7XHJcbiAgICAgICAgc3R5bGUgPSAvKmNzcyovIGBcclxuICAgICAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogdGFibGU7XHJcbiAgICAgICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdCg6Zm9jdXMpIHtcclxuICAgICAgICAgICAgICAgIG91dGxpbmU6IDFweCBzb2xpZCB2YXIoLS10aGVtZS1mb2N1c2VkLWl0ZW0tb3V0bGluZS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SfSk7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lLW9mZnNldDogLTFweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuI2NlbGxzV2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcih0aGlzLCBOb2RlRmlsdGVyLlNIT1dfRUxFTUVOVCwgdGhpcy4jY2VsbHNXYWxrZXJOb2RlRmlsdGVyLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuI3Jvd3NXYWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKHRoaXMsIE5vZGVGaWx0ZXIuU0hPV19FTEVNRU5ULCB0aGlzLiNyb3dzV2Fsa2VyTm9kZUZpbHRlci5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLiNvblNlbGVjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuI2hhc1NlbGVjdGlvbkNoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgICAgICBjb25zdCBhZG9wdGVkU3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgYWRvcHRlZFN0eWxlc2hlZXQucmVwbGFjZShzdHlsZSk7XHJcbiAgICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbYWRvcHRlZFN0eWxlc2hlZXRdO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kKHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLiNoYW5kbGVDbGlja0V2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIHRoaXMuI2hhbmRsZUNvbnRleHRNZW51RXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgdGhpcy4jaGFuZGxlRGJsQ2xpY2tFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLiNoYW5kbGVGb2N1c0V2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIiwgdGhpcy4jaGFuZGxlRm9jdXNJbkV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy4jaGFuZGxlS2V5RG93bkV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInNlbGVjdFwiLCB0aGlzLiNoYW5kbGVTZWxlY3RFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkZEV2ZW50TGlzdGVuZXIoXCJzbG90Y2hhbmdlXCIsIHRoaXMuI2hhbmRsZVNsb3RDaGFuZ2VFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFiSW5kZXggfSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy50YWJJbmRleCA9IHRhYkluZGV4O1xyXG4gICAgfVxyXG4gICAgYmVnaW5TZWxlY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy4jb25TZWxlY3Rpb24gPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZW5kU2VsZWN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuI29uU2VsZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuI2hhc1NlbGVjdGlvbkNoYW5nZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInNlbGVjdGlvbmNoYW5nZVwiLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICAgICAgICB0aGlzLiNoYXNTZWxlY3Rpb25DaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2xlYXJTZWxlY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy4jY2xlYXJDZWxsc1NlbGVjdGlvbigpO1xyXG4gICAgICAgIHRoaXMuI2NsZWFyUm93c1NlbGVjdGlvbigpO1xyXG4gICAgfVxyXG4gICAgc2VsZWN0ZWRDZWxscygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJlLWdyaWRjZWxsW3NlbGVjdGVkXVwiKSk7XHJcbiAgICB9XHJcbiAgICBzZWxlY3RlZFJvd3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwiZS1ncmlkcm93W3NlbGVjdGVkXVwiKSk7XHJcbiAgICB9XHJcbiAgICAjY2VsbHNXYWxrZXJOb2RlRmlsdGVyKG5vZGUpIHtcclxuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxFR3JpZENlbGxFbGVtZW50ICYmICFub2RlLmhpZGRlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gTm9kZUZpbHRlci5GSUxURVJfQUNDRVBUO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxFR3JpZEJvZHlFbGVtZW50IHx8IG5vZGUgaW5zdGFuY2VvZiBIVE1MRUdyaWRSb3dHcm91cEVsZW1lbnQgfHwgbm9kZSBpbnN0YW5jZW9mIEhUTUxFR3JpZFJvd0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX1NLSVA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBOb2RlRmlsdGVyLkZJTFRFUl9SRUpFQ1Q7XHJcbiAgICB9XHJcbiAgICAjcm93c1dhbGtlck5vZGVGaWx0ZXIobm9kZSkge1xyXG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTEVHcmlkUm93RWxlbWVudCAmJiAhbm9kZS5oaWRkZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX0FDQ0VQVDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MRUdyaWRCb2R5RWxlbWVudCB8fCBub2RlIGluc3RhbmNlb2YgSFRNTEVHcmlkUm93R3JvdXBFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOb2RlRmlsdGVyLkZJTFRFUl9TS0lQO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gTm9kZUZpbHRlci5GSUxURVJfUkVKRUNUO1xyXG4gICAgfVxyXG4gICAgI2dldENlbGxzUmFuZ2UoZnJvbSwgdG8pIHtcclxuICAgICAgICBjb25zdCBjZWxscyA9IEFycmF5LmZyb20odGhpcy5jZWxscygpKTtcclxuICAgICAgICBjb25zdCBmcm9tSW5kZXggPSBjZWxscy5pbmRleE9mKGZyb20pO1xyXG4gICAgICAgIGNvbnN0IHRvSW5kZXggPSBjZWxscy5pbmRleE9mKHRvKTtcclxuICAgICAgICBpZiAoZnJvbUluZGV4ID4gLTEgJiYgdG9JbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIGlmIChmcm9tID09IHRvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2Zyb21dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjZWxscy5zbGljZShNYXRoLm1pbihmcm9tSW5kZXgsIHRvSW5kZXgpLCBNYXRoLm1heChmcm9tSW5kZXgsIHRvSW5kZXgpICsgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgICNnZXRSb3dzUmFuZ2UoZnJvbSwgdG8pIHtcclxuICAgICAgICBpZiAoZnJvbSA9PSB0bykge1xyXG4gICAgICAgICAgICByZXR1cm4gW2Zyb21dO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGZyb20uY29tcGFyZURvY3VtZW50UG9zaXRpb24odG8pO1xyXG4gICAgICAgIGlmIChwb3NpdGlvbiAmIE5vZGUuRE9DVU1FTlRfUE9TSVRJT05fRk9MTE9XSU5HKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gW2Zyb21dO1xyXG4gICAgICAgICAgICBsZXQgbmV4dFZpc2libGVSb3cgPSB0aGlzLiNuZXh0Um93KGZyb20pO1xyXG4gICAgICAgICAgICB3aGlsZSAobmV4dFZpc2libGVSb3cgJiYgbmV4dFZpc2libGVSb3cgIT09IHRvKSB7XHJcbiAgICAgICAgICAgICAgICByYW5nZS5wdXNoKG5leHRWaXNpYmxlUm93KTtcclxuICAgICAgICAgICAgICAgIG5leHRWaXNpYmxlUm93ID0gdGhpcy4jbmV4dFJvdyhuZXh0VmlzaWJsZVJvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmFuZ2UucHVzaCh0byk7XHJcbiAgICAgICAgICAgIHJldHVybiByYW5nZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocG9zaXRpb24gJiBOb2RlLkRPQ1VNRU5UX1BPU0lUSU9OX1BSRUNFRElORykge1xyXG4gICAgICAgICAgICBjb25zdCByYW5nZSA9IFtmcm9tXTtcclxuICAgICAgICAgICAgbGV0IHByZXZpb3VzVmlzaWJsZVJvdyA9IHRoaXMuI3ByZXZpb3VzUm93KGZyb20pO1xyXG4gICAgICAgICAgICB3aGlsZSAocHJldmlvdXNWaXNpYmxlUm93ICYmIHByZXZpb3VzVmlzaWJsZVJvdyAhPT0gdG8pIHtcclxuICAgICAgICAgICAgICAgIHJhbmdlLnB1c2gocHJldmlvdXNWaXNpYmxlUm93KTtcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzVmlzaWJsZVJvdyA9IHRoaXMuI3ByZXZpb3VzUm93KHByZXZpb3VzVmlzaWJsZVJvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmFuZ2UucHVzaCh0byk7XHJcbiAgICAgICAgICAgIHJldHVybiByYW5nZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gICAgI3NldENlbGxzU2VsZWN0aW9uKC4uLmNlbGxzKSB7XHJcbiAgICAgICAgdGhpcy5iZWdpblNlbGVjdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkQ2VsbHMgPSB0aGlzLnNlbGVjdGVkQ2VsbHMoKTtcclxuICAgICAgICBzZWxlY3RlZENlbGxzLmZvckVhY2goKHNlbGVjdGVkQ2VsbF9pKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghY2VsbHMuaW5jbHVkZXMoc2VsZWN0ZWRDZWxsX2kpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGxfaS5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbF9pKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghY2VsbF9pLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICBjZWxsX2kuc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbmRTZWxlY3Rpb24oKTtcclxuICAgIH1cclxuICAgICNzZXRSb3dzU2VsZWN0aW9uKC4uLnJvd3MpIHtcclxuICAgICAgICB0aGlzLmJlZ2luU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRSb3dzID0gdGhpcy5zZWxlY3RlZFJvd3MoKTtcclxuICAgICAgICBzZWxlY3RlZFJvd3MuZm9yRWFjaCgoc2VsZWN0ZWRSb3dfaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXJvd3MuaW5jbHVkZXMoc2VsZWN0ZWRSb3dfaSkpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93X2kuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJvd3MuZm9yRWFjaCgocm93X2kpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFyb3dfaS5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgcm93X2kuc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbmRTZWxlY3Rpb24oKTtcclxuICAgIH1cclxuICAgICNhZGRDZWxsc1RvU2VsZWN0aW9uKC4uLmNlbGxzKSB7XHJcbiAgICAgICAgdGhpcy5iZWdpblNlbGVjdGlvbigpO1xyXG4gICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGxfaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWNlbGxfaS5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgY2VsbF9pLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZW5kU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcbiAgICAjYWRkUm93c1RvU2VsZWN0aW9uKC4uLnJvd3MpIHtcclxuICAgICAgICB0aGlzLmJlZ2luU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgcm93cy5mb3JFYWNoKChyb3dfaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXJvd19pLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICByb3dfaS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVuZFNlbGVjdGlvbigpO1xyXG4gICAgfVxyXG4gICAgI3JlbW92ZUNlbGxzRnJvbVNlbGVjdGlvbiguLi5jZWxscykge1xyXG4gICAgICAgIHRoaXMuYmVnaW5TZWxlY3Rpb24oKTtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZENlbGxzID0gdGhpcy5zZWxlY3RlZENlbGxzKCk7XHJcbiAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbF9pKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZENlbGxzLmluY2x1ZGVzKGNlbGxfaSkpIHtcclxuICAgICAgICAgICAgICAgIGNlbGxfaS5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbmRTZWxlY3Rpb24oKTtcclxuICAgIH1cclxuICAgICNyZW1vdmVSb3dzRnJvbVNlbGVjdGlvbiguLi5yb3dzKSB7XHJcbiAgICAgICAgdGhpcy5iZWdpblNlbGVjdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkUm93cyA9IHRoaXMuc2VsZWN0ZWRSb3dzKCk7XHJcbiAgICAgICAgcm93cy5mb3JFYWNoKChyb3dfaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRSb3dzLmluY2x1ZGVzKHJvd19pKSkge1xyXG4gICAgICAgICAgICAgICAgcm93X2kuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZW5kU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcbiAgICAjY2xlYXJDZWxsc1NlbGVjdGlvbigpIHtcclxuICAgICAgICB0aGlzLmJlZ2luU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRDZWxscyA9IHRoaXMuc2VsZWN0ZWRDZWxscygpO1xyXG4gICAgICAgIHNlbGVjdGVkQ2VsbHMuZm9yRWFjaCgoY2VsbF9pKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjZWxsX2kuc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIGNlbGxfaS5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbmRTZWxlY3Rpb24oKTtcclxuICAgIH1cclxuICAgICNjbGVhclJvd3NTZWxlY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5iZWdpblNlbGVjdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkUm93cyA9IHRoaXMuc2VsZWN0ZWRSb3dzKCk7XHJcbiAgICAgICAgc2VsZWN0ZWRSb3dzLmZvckVhY2goKHJvd19pKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyb3dfaS5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgcm93X2kuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZW5kU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcbiAgICAjc2V0QWN0aXZlQ2VsbChjZWxsKSB7XHJcbiAgICAgICAgY29uc3QgeyBhY3RpdmVDZWxsIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChhY3RpdmVDZWxsICE9PSBudWxsICYmIGFjdGl2ZUNlbGwgIT09IGNlbGwpIHtcclxuICAgICAgICAgICAgYWN0aXZlQ2VsbC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgYWN0aXZlQ2VsbC50YWJJbmRleCA9IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2VsbCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zdCBjZWxsc1dhbGtlciA9IHRoaXMuI2NlbGxzV2Fsa2VyO1xyXG4gICAgICAgICAgICBjZWxsc1dhbGtlci5jdXJyZW50Tm9kZSA9IGNlbGw7XHJcbiAgICAgICAgICAgIGNlbGwuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgY2VsbC50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI3NldEFjdGl2ZVJvdyhyb3cpIHtcclxuICAgICAgICBjb25zdCB7IGFjdGl2ZVJvdyB9ID0gdGhpcztcclxuICAgICAgICBpZiAoYWN0aXZlUm93ICE9PSBudWxsICYmIGFjdGl2ZVJvdyAhPT0gcm93KSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVJvdy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgYWN0aXZlUm93LnRhYkluZGV4ID0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyb3cgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93c1dhbGtlciA9IHRoaXMuI3Jvd3NXYWxrZXI7XHJcbiAgICAgICAgICAgIHJvd3NXYWxrZXIuY3VycmVudE5vZGUgPSByb3c7XHJcbiAgICAgICAgICAgIHJvdy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICByb3cudGFiSW5kZXggPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNmaXJzdENlbGwocm93KSB7XHJcbiAgICAgICAgY29uc3QgY2VsbHNXYWxrZXIgPSB0aGlzLiNjZWxsc1dhbGtlcjtcclxuICAgICAgICBjZWxsc1dhbGtlci5jdXJyZW50Tm9kZSA9IHJvdztcclxuICAgICAgICByZXR1cm4gY2VsbHNXYWxrZXIuZmlyc3RDaGlsZCgpO1xyXG4gICAgfVxyXG4gICAgI2xhc3RDZWxsKHJvdykge1xyXG4gICAgICAgIGNvbnN0IGNlbGxzV2Fsa2VyID0gdGhpcy4jY2VsbHNXYWxrZXI7XHJcbiAgICAgICAgY2VsbHNXYWxrZXIuY3VycmVudE5vZGUgPSByb3c7XHJcbiAgICAgICAgcmV0dXJuIGNlbGxzV2Fsa2VyLmxhc3RDaGlsZCgpO1xyXG4gICAgfVxyXG4gICAgI3ByZXZpb3VzQ2VsbChjZWxsKSB7XHJcbiAgICAgICAgY29uc3QgY2VsbHNXYWxrZXIgPSB0aGlzLiNjZWxsc1dhbGtlcjtcclxuICAgICAgICBjZWxsc1dhbGtlci5jdXJyZW50Tm9kZSA9IGNlbGw7XHJcbiAgICAgICAgcmV0dXJuIGNlbGxzV2Fsa2VyLnByZXZpb3VzTm9kZSgpO1xyXG4gICAgfVxyXG4gICAgI25leHRDZWxsKGNlbGwpIHtcclxuICAgICAgICBjb25zdCBjZWxsc1dhbGtlciA9IHRoaXMuI2NlbGxzV2Fsa2VyO1xyXG4gICAgICAgIGNlbGxzV2Fsa2VyLmN1cnJlbnROb2RlID0gY2VsbDtcclxuICAgICAgICByZXR1cm4gY2VsbHNXYWxrZXIubmV4dE5vZGUoKTtcclxuICAgIH1cclxuICAgICNjbG9zZXN0Um93KGNlbGwpIHtcclxuICAgICAgICBjb25zdCByb3dzV2Fsa2VyID0gdGhpcy4jcm93c1dhbGtlcjtcclxuICAgICAgICByb3dzV2Fsa2VyLmN1cnJlbnROb2RlID0gY2VsbDtcclxuICAgICAgICByZXR1cm4gcm93c1dhbGtlci5wYXJlbnROb2RlKCk7XHJcbiAgICB9XHJcbiAgICAjZmlyc3RSb3coKSB7XHJcbiAgICAgICAgY29uc3Qgcm93c1dhbGtlciA9IHRoaXMuI3Jvd3NXYWxrZXI7XHJcbiAgICAgICAgY29uc3QgeyByb290IH0gPSByb3dzV2Fsa2VyO1xyXG4gICAgICAgIHJvd3NXYWxrZXIuY3VycmVudE5vZGUgPSByb290O1xyXG4gICAgICAgIHJldHVybiByb3dzV2Fsa2VyLmZpcnN0Q2hpbGQoKTtcclxuICAgIH1cclxuICAgICNsYXN0Um93KCkge1xyXG4gICAgICAgIGNvbnN0IHJvd3NXYWxrZXIgPSB0aGlzLiNyb3dzV2Fsa2VyO1xyXG4gICAgICAgIGNvbnN0IHsgcm9vdCB9ID0gcm93c1dhbGtlcjtcclxuICAgICAgICByb3dzV2Fsa2VyLmN1cnJlbnROb2RlID0gcm9vdDtcclxuICAgICAgICByZXR1cm4gcm93c1dhbGtlci5sYXN0Q2hpbGQoKTtcclxuICAgIH1cclxuICAgICNwcmV2aW91c1Jvdyhyb3cpIHtcclxuICAgICAgICBjb25zdCByb3dzV2Fsa2VyID0gdGhpcy4jcm93c1dhbGtlcjtcclxuICAgICAgICByb3dzV2Fsa2VyLmN1cnJlbnROb2RlID0gcm93O1xyXG4gICAgICAgIHJldHVybiByb3dzV2Fsa2VyLnByZXZpb3VzTm9kZSgpO1xyXG4gICAgfVxyXG4gICAgI25leHRSb3cocm93KSB7XHJcbiAgICAgICAgY29uc3Qgcm93c1dhbGtlciA9IHRoaXMuI3Jvd3NXYWxrZXI7XHJcbiAgICAgICAgcm93c1dhbGtlci5jdXJyZW50Tm9kZSA9IHJvdztcclxuICAgICAgICByZXR1cm4gcm93c1dhbGtlci5uZXh0Tm9kZSgpO1xyXG4gICAgfVxyXG4gICAgI3RvcENlbGwoY2VsbCkge1xyXG4gICAgICAgIGNvbnN0IGNsb3Nlc3RSb3cgPSB0aGlzLiNjbG9zZXN0Um93KGNlbGwpO1xyXG4gICAgICAgIGlmIChjbG9zZXN0Um93KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNsb3Nlc3RSb3dDZWxscyA9IGNsb3Nlc3RSb3cuY2VsbHMoKTtcclxuICAgICAgICAgICAgY29uc3QgY2VsbEluZGV4ID0gY2xvc2VzdFJvd0NlbGxzLmluZGV4T2YoY2VsbCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzUm93ID0gdGhpcy4jcHJldmlvdXNSb3coY2xvc2VzdFJvdyk7XHJcbiAgICAgICAgICAgIGlmIChwcmV2aW91c1Jvdykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNSb3dDZWxscyA9IHByZXZpb3VzUm93LmNlbGxzKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldmlvdXNSb3dDZWxsc1tNYXRoLm1pbihjZWxsSW5kZXgsIHByZXZpb3VzUm93Q2VsbHMubGVuZ3RoKV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICAjYm90dG9tQ2VsbChjZWxsKSB7XHJcbiAgICAgICAgY29uc3QgY2xvc2VzdFJvdyA9IHRoaXMuI2Nsb3Nlc3RSb3coY2VsbCk7XHJcbiAgICAgICAgaWYgKGNsb3Nlc3RSb3cpIHtcclxuICAgICAgICAgICAgY29uc3QgY2xvc2VzdFJvd0NlbGxzID0gY2xvc2VzdFJvdy5jZWxscygpO1xyXG4gICAgICAgICAgICBjb25zdCBjZWxsSW5kZXggPSBjbG9zZXN0Um93Q2VsbHMuaW5kZXhPZihjZWxsKTtcclxuICAgICAgICAgICAgY29uc3QgbmV4dFJvdyA9IHRoaXMuI25leHRSb3coY2xvc2VzdFJvdyk7XHJcbiAgICAgICAgICAgIGlmIChuZXh0Um93KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Um93Q2VsbHMgPSBuZXh0Um93LmNlbGxzKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dFJvd0NlbGxzW01hdGgubWluKGNlbGxJbmRleCwgbmV4dFJvd0NlbGxzLmxlbmd0aCldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZUNsaWNrRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IGN0cmxLZXksIHNoaWZ0S2V5IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB7IHNlbGVjdGJ5IH0gPSB0aGlzO1xyXG4gICAgICAgIHN3aXRjaCAoc2VsZWN0YnkpIHtcclxuICAgICAgICAgICAgY2FzZSBcImNlbGxcIjoge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29tcG9zZWRQYXRoID0gZXZlbnQuY29tcG9zZWRQYXRoKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDZWxsID0gY29tcG9zZWRQYXRoLmZpbmQodGFyZ2V0X2kgPT4gdGFyZ2V0X2kgaW5zdGFuY2VvZiBIVE1MRUdyaWRCb2R5RWxlbWVudCkgPyBjb21wb3NlZFBhdGguZmluZCh0YXJnZXRfaSA9PiB0YXJnZXRfaSBpbnN0YW5jZW9mIEhUTUxFR3JpZENlbGxFbGVtZW50KSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZENlbGxzID0gdGhpcy5zZWxlY3RlZENlbGxzKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Q2VsbCBpbnN0YW5jZW9mIEhUTUxFR3JpZENlbGxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzaGlmdEtleSAmJiAhY3RybEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZXRDZWxsc1NlbGVjdGlvbih0YXJnZXRDZWxsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY3RybEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGFyZ2V0Q2VsbC5zZWxlY3RlZCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNhZGRDZWxsc1RvU2VsZWN0aW9uKHRhcmdldENlbGwpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3JlbW92ZUNlbGxzRnJvbVNlbGVjdGlvbih0YXJnZXRDZWxsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdFNlbGVjdGVkQ2VsbCA9IHNlbGVjdGVkQ2VsbHNbc2VsZWN0ZWRDZWxscy5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RTZWxlY3RlZENlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gdGhpcy4jZ2V0Q2VsbHNSYW5nZShsYXN0U2VsZWN0ZWRDZWxsLCB0YXJnZXRDZWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2VsbHMuaW5jbHVkZXModGFyZ2V0Q2VsbCkgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNyZW1vdmVDZWxsc0Zyb21TZWxlY3Rpb24oLi4ucmFuZ2UpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jYWRkQ2VsbHNUb1NlbGVjdGlvbiguLi5yYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZXRDZWxsc1NlbGVjdGlvbih0YXJnZXRDZWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJyb3dcIjoge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRSb3dzID0gdGhpcy5zZWxlY3RlZFJvd3MoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvc2VkUGF0aCA9IGV2ZW50LmNvbXBvc2VkUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Um93ID0gY29tcG9zZWRQYXRoLmZpbmQodGFyZ2V0X2kgPT4gdGFyZ2V0X2kgaW5zdGFuY2VvZiBIVE1MRUdyaWRCb2R5RWxlbWVudCkgPyBjb21wb3NlZFBhdGguZmluZCh0YXJnZXRfaSA9PiB0YXJnZXRfaSBpbnN0YW5jZW9mIEhUTUxFR3JpZFJvd0VsZW1lbnQpIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRSb3cgaW5zdGFuY2VvZiBIVE1MRUdyaWRSb3dFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzaGlmdEtleSAmJiAhY3RybEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZXRSb3dzU2VsZWN0aW9uKHRhcmdldFJvdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGN0cmxLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXRhcmdldFJvdy5zZWxlY3RlZCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNhZGRSb3dzVG9TZWxlY3Rpb24odGFyZ2V0Um93KSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNyZW1vdmVSb3dzRnJvbVNlbGVjdGlvbih0YXJnZXRSb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0U2VsZWN0ZWRSb3cgPSBzZWxlY3RlZFJvd3Nbc2VsZWN0ZWRSb3dzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdFNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByYW5nZSA9IHRoaXMuI2dldFJvd3NSYW5nZShsYXN0U2VsZWN0ZWRSb3csIHRhcmdldFJvdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvd3MuaW5jbHVkZXModGFyZ2V0Um93KSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3JlbW92ZVJvd3NGcm9tU2VsZWN0aW9uKC4uLnJhbmdlKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI2FkZFJvd3NUb1NlbGVjdGlvbiguLi5yYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZXRSb3dzU2VsZWN0aW9uKHRhcmdldFJvdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICAgICNoYW5kbGVDb250ZXh0TWVudUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlRGJsQ2xpY2tFdmVudChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZUtleURvd25FdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsga2V5IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB7IHNlbGVjdGJ5LCBhY3RpdmVDZWxsLCBhY3RpdmVSb3cgfSA9IHRoaXM7XHJcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuICAgICAgICAgICAgY2FzZSBcImFcIjoge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBjdHJsS2V5IH0gPSBldmVudDtcclxuICAgICAgICAgICAgICAgIGlmIChjdHJsS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzZWxlY3RieSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2VsbFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFJvdyA9IHRoaXMuI2ZpcnN0Um93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdENlbGwgPSBmaXJzdFJvdyA/IHRoaXMuI2ZpcnN0Q2VsbChmaXJzdFJvdykgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdFJvdyA9IHRoaXMuI2xhc3RSb3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RDZWxsID0gbGFzdFJvdyA/IHRoaXMuI2xhc3RDZWxsKGxhc3RSb3cpIDogbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdENlbGwgJiYgbGFzdENlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByYW5nZSA9IHRoaXMuI2dldENlbGxzUmFuZ2UoZmlyc3RDZWxsLCBsYXN0Q2VsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3NldENlbGxzU2VsZWN0aW9uKC4uLnJhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicm93XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Um93ID0gdGhpcy4jZmlyc3RSb3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RSb3cgPSB0aGlzLiNsYXN0Um93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RSb3cgJiYgbGFzdFJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gdGhpcy4jZ2V0Um93c1JhbmdlKGZpcnN0Um93LCBsYXN0Um93KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jc2V0Um93c1NlbGVjdGlvbiguLi5yYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkFycm93TGVmdFwiOiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0YnkgPT0gXCJjZWxsXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlQ2VsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0NlbGwgPSB0aGlzLiNwcmV2aW91c0NlbGwoYWN0aXZlQ2VsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0NlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ2VsbC5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHNoaWZ0S2V5IH0gPSBldmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ2VsbC5zZWxlY3RlZCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3JlbW92ZUNlbGxzRnJvbVNlbGVjdGlvbihwcmV2aW91c0NlbGwpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jYWRkQ2VsbHNUb1NlbGVjdGlvbihwcmV2aW91c0NlbGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dSaWdodFwiOiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0YnkgPT0gXCJjZWxsXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlQ2VsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q2VsbCA9IHRoaXMuI25leHRDZWxsKGFjdGl2ZUNlbGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dENlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRDZWxsLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc2hpZnRLZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENlbGwuc2VsZWN0ZWQgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNyZW1vdmVDZWxsc0Zyb21TZWxlY3Rpb24obmV4dENlbGwpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jYWRkQ2VsbHNUb1NlbGVjdGlvbihuZXh0Q2VsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd1VwXCI6IHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoc2VsZWN0YnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2VsbFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Um93ID0gYWN0aXZlUm93ID8/IHRoaXMuI2ZpcnN0Um93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvcENlbGwgPSBhY3RpdmVDZWxsID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3RvcENlbGwoYWN0aXZlQ2VsbCkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RSb3cgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI2ZpcnN0Q2VsbChmaXJzdFJvdykgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b3BDZWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3BDZWxsLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc2hpZnRLZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wQ2VsbC5zZWxlY3RlZCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3JlbW92ZUNlbGxzRnJvbVNlbGVjdGlvbih0b3BDZWxsKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI2FkZENlbGxzVG9TZWxlY3Rpb24odG9wQ2VsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyb3dcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c1JvdyA9IGFjdGl2ZVJvdyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNwcmV2aW91c1JvdyhhY3RpdmVSb3cpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI2ZpcnN0Um93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c1Jvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSb3cuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBzaGlmdEtleSB9ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jvdy5zZWxlY3RlZCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3JlbW92ZVJvd3NGcm9tU2VsZWN0aW9uKHByZXZpb3VzUm93KSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI2FkZFJvd3NUb1NlbGVjdGlvbihwcmV2aW91c1Jvdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dEb3duXCI6IHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoc2VsZWN0YnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2VsbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0Um93ID0gYWN0aXZlUm93ID8/IHRoaXMuI2xhc3RSb3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvdHRvbUNlbGwgPSBhY3RpdmVDZWxsID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNib3R0b21DZWxsKGFjdGl2ZUNlbGwpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0Um93ID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jbGFzdENlbGwobGFzdFJvdykgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJvdHRvbUNlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3R0b21DZWxsLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHNoaWZ0S2V5IH0gPSBldmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tQ2VsbC5zZWxlY3RlZCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNyZW1vdmVDZWxsc0Zyb21TZWxlY3Rpb24oYm90dG9tQ2VsbCkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jYWRkQ2VsbHNUb1NlbGVjdGlvbihib3R0b21DZWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJvd1wiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRSb3cgPSBhY3RpdmVSb3cgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jbmV4dFJvdyhhY3RpdmVSb3cpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI2xhc3RSb3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRSb3cuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBzaGlmdEtleSB9ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0Um93LnNlbGVjdGVkID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jcmVtb3ZlUm93c0Zyb21TZWxlY3Rpb24obmV4dFJvdykgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNhZGRSb3dzVG9TZWxlY3Rpb24obmV4dFJvdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiSG9tZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHNlbGVjdGJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNlbGxcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlUm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdENlbGwgPSB0aGlzLiNmaXJzdENlbGwoYWN0aXZlUm93KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdENlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdENlbGwuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicm93XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3RSb3cgPSB0aGlzLiNmaXJzdFJvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0Um93LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJFbmRcIjoge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChzZWxlY3RieSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjZWxsXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdENlbGwgPSB0aGlzLiNsYXN0Q2VsbChhY3RpdmVSb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RDZWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdENlbGwuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicm93XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdFJvdyA9IHRoaXMuI2xhc3RSb3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RSb3cuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkVudGVyXCI6IHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoc2VsZWN0YnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2VsbFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVDZWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZXRDZWxsc1NlbGVjdGlvbihhY3RpdmVDZWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNlbGwuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJvd1wiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3NldFJvd3NTZWxlY3Rpb24oYWN0aXZlUm93KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVJvdy5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkVzY2FwZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHNlbGVjdGJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNlbGxcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNjbGVhckNlbGxzU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3NldEFjdGl2ZUNlbGwobnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicm93XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jY2xlYXJSb3dzU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3NldEFjdGl2ZVJvdyhudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVGb2N1c0V2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyByZWxhdGVkVGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB7IHNlbGVjdGJ5IH0gPSB0aGlzO1xyXG4gICAgICAgIHN3aXRjaCAoc2VsZWN0YnkpIHtcclxuICAgICAgICAgICAgY2FzZSBcImNlbGxcIjoge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBhY3RpdmVDZWxsIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUNlbGwgJiYgcmVsYXRlZFRhcmdldCAhPT0gYWN0aXZlQ2VsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNlbGwuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJyb3dcIjoge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBhY3RpdmVSb3cgfSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlUm93ICYmIHJlbGF0ZWRUYXJnZXQgIT09IGFjdGl2ZVJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZVJvdy5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlRm9jdXNJbkV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgc2VsZWN0YnkgfSA9IHRoaXM7XHJcbiAgICAgICAgc3dpdGNoIChzZWxlY3RieSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiY2VsbFwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDZWxsID0gdGFyZ2V0LmNsb3Nlc3QoXCJlLWdyaWRjZWxsXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldENlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZXRBY3RpdmVDZWxsKHRhcmdldENlbGwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcInJvd1wiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRSb3cgPSB0YXJnZXQuY2xvc2VzdChcImUtZ3JpZHJvd1wiKTtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZXRBY3RpdmVSb3codGFyZ2V0Um93KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZVNlbGVjdEV2ZW50KCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNvblNlbGVjdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLiNoYXNTZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJzZWxlY3Rpb25jaGFuZ2VcIiwgeyBidWJibGVzOiB0cnVlIH0pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlU2xvdENoYW5nZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IGFzc2lnbmVkUm93cyA9IHRhcmdldFxyXG4gICAgICAgICAgICAuYXNzaWduZWRFbGVtZW50cygpXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZWxlbWVudF9pID0+IGVsZW1lbnRfaSBpbnN0YW5jZW9mIEhUTUxFR3JpZFJvd0VsZW1lbnQpO1xyXG4gICAgICAgIGFzc2lnbmVkUm93cy5mb3JFYWNoKChyb3dfaSwgaSkgPT4ge1xyXG4gICAgICAgICAgICByb3dfaS5wb3NpbnNldCA9IGk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSlcclxuXSwgSFRNTEVHcmlkRWxlbWVudEJhc2UucHJvdG90eXBlLCBcIm5hbWVcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZywgZGVmYXVsdFZhbHVlOiBcImNlbGxcIiB9KVxyXG5dLCBIVE1MRUdyaWRFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwic2VsZWN0YnlcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSlcclxuXSwgSFRNTEVHcmlkRWxlbWVudEJhc2UucHJvdG90eXBlLCBcIm11bHRpc2VsZWN0YWJsZVwiLCB2b2lkIDApO1xyXG5IVE1MRUdyaWRFbGVtZW50QmFzZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgbmFtZTogXCJlLWdyaWRcIlxyXG4gICAgfSlcclxuXSwgSFRNTEVHcmlkRWxlbWVudEJhc2UpO1xyXG52YXIgSFRNTEVHcmlkRWxlbWVudCA9IEhUTUxFR3JpZEVsZW1lbnRCYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1HcmlkLmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbmltcG9ydCB7IEN1c3RvbUVsZW1lbnQsIGVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vRWxlbWVudFwiO1xyXG5pbXBvcnQgeyBIVE1MRUdyaWRDZWxsRWxlbWVudCB9IGZyb20gXCIuL0dyaWRDZWxsXCI7XHJcbmltcG9ydCBcIi4vR3JpZFJvd1wiO1xyXG5pbXBvcnQgXCIuL0dyaWRDZWxsXCI7XHJcbmV4cG9ydCB7IEhUTUxFR3JpZEJvZHlFbGVtZW50IH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG5sZXQgSFRNTEVHcmlkQm9keUVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVHcmlkQm9keUVsZW1lbnRCYXNlIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgY2VsbHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwiZS1ncmlkY2VsbFwiKSk7XHJcbiAgICB9XHJcbiAgICByb3dzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucXVlcnlTZWxlY3RvckFsbChcImUtZ3JpZHJvd1wiKSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMge1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlID0gZWxlbWVudChcInRlbXBsYXRlXCIpO1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuYXBwZW5kKGVsZW1lbnQoXCJzbG90XCIpKTtcclxuICAgICAgICBzdHlsZSA9IC8qY3NzKi8gYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiB0YWJsZS1yb3ctZ3JvdXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgICAgICBjb25zdCBhZG9wdGVkU3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgYWRvcHRlZFN0eWxlc2hlZXQucmVwbGFjZShzdHlsZSk7XHJcbiAgICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbYWRvcHRlZFN0eWxlc2hlZXRdO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kKHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkZEV2ZW50TGlzdGVuZXIoXCJzbG90Y2hhbmdlXCIsIHRoaXMuI2hhbmRsZVNsb3RDaGFuZ2VFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgICNoYW5kbGVTbG90Q2hhbmdlRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgYXNzaWduZWRJdGVtcyA9IHRhcmdldFxyXG4gICAgICAgICAgICAuYXNzaWduZWRFbGVtZW50cygpXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZWxlbWVudF9pID0+IGVsZW1lbnRfaSBpbnN0YW5jZW9mIEhUTUxFR3JpZENlbGxFbGVtZW50KTtcclxuICAgICAgICBhc3NpZ25lZEl0ZW1zLmZvckVhY2goKGl0ZW1faSwgaSkgPT4ge1xyXG4gICAgICAgICAgICBpdGVtX2kucG9zaW5zZXQgPSBpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5IVE1MRUdyaWRCb2R5RWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS1ncmlkYm9keVwiXHJcbiAgICB9KVxyXG5dLCBIVE1MRUdyaWRCb2R5RWxlbWVudEJhc2UpO1xyXG52YXIgSFRNTEVHcmlkQm9keUVsZW1lbnQgPSBIVE1MRUdyaWRCb2R5RWxlbWVudEJhc2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdyaWRCb2R5LmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbmltcG9ydCB7IERFRkFVTFRfVEhFTUVfRk9DVVNFRF9JVEVNX0NPTE9SLCBERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SLCBERUZBVUxUX1RIRU1FX0hPVkVSRURfSVRFTV9DT0xPUiwgREVGQVVMVF9USEVNRV9TRUxFQ1RFRF9JVEVNX0NPTE9SIH0gZnJvbSBcIi4uLy4uLy4uL3N0eWxlc2hlZXRzL1RoZW1lXCI7XHJcbmltcG9ydCB7IEN1c3RvbUVsZW1lbnQsIGVsZW1lbnQsIEF0dHJpYnV0ZVByb3BlcnR5IH0gZnJvbSBcIi4uLy4uL0VsZW1lbnRcIjtcclxuZXhwb3J0IHsgSFRNTEVHcmlkQ2VsbEVsZW1lbnQgfTtcclxudmFyIHNoYWRvd1RlbXBsYXRlO1xyXG52YXIgc3R5bGU7XHJcbmxldCBIVE1MRUdyaWRDZWxsRWxlbWVudEJhc2UgPSBjbGFzcyBIVE1MRUdyaWRDZWxsRWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBzdGF0aWMge1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlID0gZWxlbWVudChcInRlbXBsYXRlXCIpO1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuYXBwZW5kKGVsZW1lbnQoXCJzbG90XCIpKTtcclxuICAgICAgICBzdHlsZSA9IC8qY3NzKi8gYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xyXG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoW3R5cGU9XCJjb2x1bW5oZWFkZXJcIl06aG92ZXIpIHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRoZW1lLWhvdmVyZWQtaXRlbS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX0hPVkVSRURfSVRFTV9DT0xPUn0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdCg6aG92ZXIpOmhvc3QtY29udGV4dChlLWdyaWQ6aXMoOm5vdChbc2VsZWN0YnldKSwgW3NlbGVjdGJ5PVwiY2VsbFwiXSkpIHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRoZW1lLWhvdmVyZWQtaXRlbS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX0hPVkVSRURfSVRFTV9DT0xPUn0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdChbdHlwZT1cImNvbHVtbmhlYWRlclwiXVthY3RpdmVdKSB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10aGVtZS1mb2N1c2VkLWl0ZW0tY29sb3IsICR7REVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fQ09MT1J9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoW2FjdGl2ZV0pOmhvc3QtY29udGV4dChlLWdyaWQ6Zm9jdXMtd2l0aGluOmlzKDpub3QoW3NlbGVjdGJ5XSksIFtzZWxlY3RieT1cImNlbGxcIl0pKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lOiAxcHggc29saWQgdmFyKC0tdGhlbWUtZm9jdXNlZC1pdGVtLW91dGxpbmUtY29sb3IsICR7REVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fT1VUTElORV9DT0xPUn0pO1xyXG4gICAgICAgICAgICAgICAgb3V0bGluZS1vZmZzZXQ6IC0xcHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KFtzZWxlY3RlZF0pOmhvc3QtY29udGV4dChlLWdyaWQ6aXMoOm5vdChbc2VsZWN0YnldKSwgW3NlbGVjdGJ5PVwiY2VsbFwiXSkpIHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRoZW1lLXNlbGVjdGVkLWl0ZW0tY29sb3IsICR7REVGQVVMVF9USEVNRV9TRUxFQ1RFRF9JVEVNX0NPTE9SfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgICAgICBjb25zdCBhZG9wdGVkU3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgYWRvcHRlZFN0eWxlc2hlZXQucmVwbGFjZShzdHlsZSk7XHJcbiAgICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbYWRvcHRlZFN0eWxlc2hlZXRdO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kKHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgIH1cclxuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcclxuICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcInNlbGVjdGVkXCI6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJzZWxlY3RcIiwgeyBidWJibGVzOiB0cnVlIH0pKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pXHJcbl0sIEhUTUxFR3JpZENlbGxFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pXHJcbl0sIEhUTUxFR3JpZENlbGxFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiaGVhZGVyc1wiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pXHJcbl0sIEhUTUxFR3JpZENlbGxFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogTnVtYmVyIH0pXHJcbl0sIEhUTUxFR3JpZENlbGxFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwicG9zaW5zZXRcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSlcclxuXSwgSFRNTEVHcmlkQ2VsbEVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJkcm9wdGFyZ2V0XCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pXHJcbl0sIEhUTUxFR3JpZENlbGxFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiYWN0aXZlXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBvYnNlcnZlZDogdHJ1ZSB9KVxyXG5dLCBIVE1MRUdyaWRDZWxsRWxlbWVudEJhc2UucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIHZvaWQgMCk7XHJcbkhUTUxFR3JpZENlbGxFbGVtZW50QmFzZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgbmFtZTogXCJlLWdyaWRjZWxsXCJcclxuICAgIH0pXHJcbl0sIEhUTUxFR3JpZENlbGxFbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRUdyaWRDZWxsRWxlbWVudCA9IEhUTUxFR3JpZENlbGxFbGVtZW50QmFzZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R3JpZENlbGwuanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCwgZWxlbWVudCB9IGZyb20gXCIuLi8uLi9FbGVtZW50XCI7XHJcbmltcG9ydCB7IEhUTUxFR3JpZENlbGxFbGVtZW50IH0gZnJvbSBcIi4vR3JpZENlbGxcIjtcclxuaW1wb3J0IFwiLi9HcmlkUm93XCI7XHJcbmltcG9ydCBcIi4vR3JpZENlbGxcIjtcclxuZXhwb3J0IHsgSFRNTEVHcmlkSGVhZEVsZW1lbnQgfTtcclxudmFyIHNoYWRvd1RlbXBsYXRlO1xyXG52YXIgc3R5bGU7XHJcbmxldCBIVE1MRUdyaWRIZWFkRWxlbWVudEJhc2UgPSBjbGFzcyBIVE1MRUdyaWRIZWFkRWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBjZWxscygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJlLWdyaWRjZWxsXCIpKTtcclxuICAgIH1cclxuICAgIHJvd3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwiZS1ncmlkcm93XCIpKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyB7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUgPSBlbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUuY29udGVudC5hcHBlbmQoZWxlbWVudChcInNsb3RcIikpO1xyXG4gICAgICAgIHN0eWxlID0gLypjc3MqLyBgXHJcbiAgICAgICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IHRhYmxlLWhlYWRlci1ncm91cDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgICAgIGNvbnN0IGFkb3B0ZWRTdHlsZXNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcclxuICAgICAgICBhZG9wdGVkU3R5bGVzaGVldC5yZXBsYWNlKHN0eWxlKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFthZG9wdGVkU3R5bGVzaGVldF07XHJcbiAgICAgICAgc2hhZG93Um9vdC5hcHBlbmQoc2hhZG93VGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRkRXZlbnRMaXN0ZW5lcihcInNsb3RjaGFuZ2VcIiwgdGhpcy4jaGFuZGxlU2xvdENoYW5nZUV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZVNsb3RDaGFuZ2VFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCBhc3NpZ25lZEl0ZW1zID0gdGFyZ2V0XHJcbiAgICAgICAgICAgIC5hc3NpZ25lZEVsZW1lbnRzKClcclxuICAgICAgICAgICAgLmZpbHRlcihlbGVtZW50X2kgPT4gZWxlbWVudF9pIGluc3RhbmNlb2YgSFRNTEVHcmlkQ2VsbEVsZW1lbnQpO1xyXG4gICAgICAgIGFzc2lnbmVkSXRlbXMuZm9yRWFjaCgoaXRlbV9pLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW1faS5wb3NpbnNldCA9IGk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcbkhUTUxFR3JpZEhlYWRFbGVtZW50QmFzZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgbmFtZTogXCJlLWdyaWRoZWFkXCJcclxuICAgIH0pXHJcbl0sIEhUTUxFR3JpZEhlYWRFbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRUdyaWRIZWFkRWxlbWVudCA9IEhUTUxFR3JpZEhlYWRFbGVtZW50QmFzZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R3JpZEhlYWQuanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgREVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fT1VUTElORV9DT0xPUiwgREVGQVVMVF9USEVNRV9IT1ZFUkVEX0lURU1fQ09MT1IsIERFRkFVTFRfVEhFTUVfU0VMRUNURURfSVRFTV9DT0xPUiB9IGZyb20gXCIuLi8uLi8uLi9zdHlsZXNoZWV0cy9UaGVtZVwiO1xyXG5pbXBvcnQgeyBBdHRyaWJ1dGVQcm9wZXJ0eSwgQ3VzdG9tRWxlbWVudCwgZWxlbWVudCB9IGZyb20gXCIuLi8uLi9FbGVtZW50XCI7XHJcbmltcG9ydCB7IEhUTUxFR3JpZENlbGxFbGVtZW50IH0gZnJvbSBcIi4vR3JpZENlbGxcIjtcclxuaW1wb3J0IFwiLi9HcmlkQ2VsbFwiO1xyXG5leHBvcnQgeyBIVE1MRUdyaWRSb3dFbGVtZW50IH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG5sZXQgSFRNTEVHcmlkUm93RWxlbWVudEJhc2UgPSBjbGFzcyBIVE1MRUdyaWRSb3dFbGVtZW50QmFzZSBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgIGNlbGxzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucXVlcnlTZWxlY3RvckFsbChcImUtZ3JpZGNlbGxcIikpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZSA9IGVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmFwcGVuZChlbGVtZW50KFwic2xvdFwiKSk7XHJcbiAgICAgICAgc3R5bGUgPSAvKmNzcyovIGBcclxuICAgICAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogdGFibGUtcm93O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdCg6aG92ZXIpOmhvc3QtY29udGV4dChlLWdyaWQ6aXMoW3NlbGVjdGJ5PVwicm93XCJdKSkge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGhlbWUtaG92ZXJlZC1pdGVtLWNvbG9yLCAke0RFRkFVTFRfVEhFTUVfSE9WRVJFRF9JVEVNX0NPTE9SfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KFthY3RpdmVdKTpob3N0LWNvbnRleHQoZS1ncmlkOmZvY3VzLXdpdGhpbjppcyhbc2VsZWN0Ynk9XCJyb3dcIl0pKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lOiAxcHggc29saWQgdmFyKC0tdGhlbWUtZm9jdXNlZC1pdGVtLW91dGxpbmUtY29sb3IsICR7REVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fT1VUTElORV9DT0xPUn0pO1xyXG4gICAgICAgICAgICAgICAgb3V0bGluZS1vZmZzZXQ6IC0xcHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KFtzZWxlY3RlZF0pOmhvc3QtY29udGV4dChlLWdyaWQ6aXMoW3NlbGVjdGJ5PVwicm93XCJdKSkge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGhlbWUtc2VsZWN0ZWQtaXRlbS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX1NFTEVDVEVEX0lURU1fQ09MT1J9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgICAgIGNvbnN0IGFkb3B0ZWRTdHlsZXNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcclxuICAgICAgICBhZG9wdGVkU3R5bGVzaGVldC5yZXBsYWNlKHN0eWxlKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFthZG9wdGVkU3R5bGVzaGVldF07XHJcbiAgICAgICAgc2hhZG93Um9vdC5hcHBlbmQoc2hhZG93VGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRkRXZlbnRMaXN0ZW5lcihcInNsb3RjaGFuZ2VcIiwgdGhpcy4jaGFuZGxlU2xvdENoYW5nZUV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xyXG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwic2VsZWN0ZWRcIjoge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInNlbGVjdFwiLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlU2xvdENoYW5nZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IGFzc2lnbmVkQ2VsbHMgPSB0YXJnZXRcclxuICAgICAgICAgICAgLmFzc2lnbmVkRWxlbWVudHMoKVxyXG4gICAgICAgICAgICAuZmlsdGVyKGVsZW1lbnRfaSA9PiBlbGVtZW50X2kgaW5zdGFuY2VvZiBIVE1MRUdyaWRDZWxsRWxlbWVudCk7XHJcbiAgICAgICAgYXNzaWduZWRDZWxscy5mb3JFYWNoKChjZWxsX2ksIGkpID0+IHtcclxuICAgICAgICAgICAgY2VsbF9pLnBvc2luc2V0ID0gaTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KVxyXG5dLCBIVE1MRUdyaWRSb3dFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KVxyXG5dLCBIVE1MRUdyaWRSb3dFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiYWN0aXZlXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pXHJcbl0sIEhUTUxFR3JpZFJvd0VsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJzZWxlY3RlZFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogTnVtYmVyIH0pXHJcbl0sIEhUTUxFR3JpZFJvd0VsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJwb3NpbnNldFwiLCB2b2lkIDApO1xyXG5IVE1MRUdyaWRSb3dFbGVtZW50QmFzZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgbmFtZTogXCJlLWdyaWRyb3dcIlxyXG4gICAgfSlcclxuXSwgSFRNTEVHcmlkUm93RWxlbWVudEJhc2UpO1xyXG52YXIgSFRNTEVHcmlkUm93RWxlbWVudCA9IEhUTUxFR3JpZFJvd0VsZW1lbnRCYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1HcmlkUm93LmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbmltcG9ydCB7IEN1c3RvbUVsZW1lbnQsIGVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vRWxlbWVudFwiO1xyXG5pbXBvcnQgeyBIVE1MRUdyaWRSb3dFbGVtZW50IH0gZnJvbSBcIi4vR3JpZFJvd1wiO1xyXG5pbXBvcnQgXCIuL0dyaWRSb3dcIjtcclxuZXhwb3J0IHsgSFRNTEVHcmlkUm93R3JvdXBFbGVtZW50IH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG5sZXQgSFRNTEVHcmlkUm93R3JvdXBFbGVtZW50QmFzZSA9IGNsYXNzIEhUTUxFR3JpZFJvd0dyb3VwRWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBzdGF0aWMge1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlID0gZWxlbWVudChcInRlbXBsYXRlXCIpO1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuYXBwZW5kKGVsZW1lbnQoXCJzbG90XCIpKTtcclxuICAgICAgICBzdHlsZSA9IC8qY3NzKi8gYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiB0YWJsZS1yb3ctZ3JvdXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgICAgICBjb25zdCBhZG9wdGVkU3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgYWRvcHRlZFN0eWxlc2hlZXQucmVwbGFjZShzdHlsZSk7XHJcbiAgICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbYWRvcHRlZFN0eWxlc2hlZXRdO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kKHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkZEV2ZW50TGlzdGVuZXIoXCJzbG90Y2hhbmdlXCIsIHRoaXMuI2hhbmRsZVNsb3RDaGFuZ2VFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgICNoYW5kbGVTbG90Q2hhbmdlRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgYXNzaWduZWRJdGVtcyA9IHRhcmdldFxyXG4gICAgICAgICAgICAuYXNzaWduZWRFbGVtZW50cygpXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZWxlbWVudF9pID0+IGVsZW1lbnRfaSBpbnN0YW5jZW9mIEhUTUxFR3JpZFJvd0VsZW1lbnQpO1xyXG4gICAgICAgIGFzc2lnbmVkSXRlbXMuZm9yRWFjaCgoaXRlbV9pLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW1faS5wb3NpbnNldCA9IGk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcbkhUTUxFR3JpZFJvd0dyb3VwRWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS1ncmlkcm93Z3JvdXBcIlxyXG4gICAgfSlcclxuXSwgSFRNTEVHcmlkUm93R3JvdXBFbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRUdyaWRSb3dHcm91cEVsZW1lbnQgPSBIVE1MRUdyaWRSb3dHcm91cEVsZW1lbnRCYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1HcmlkUm93R3JvdXAuanMubWFwIiwiaW1wb3J0IHsgSFRNTEVHcmlkRWxlbWVudCB9IGZyb20gXCIuL0dyaWRcIjtcclxuaW1wb3J0IHsgSFRNTEVHcmlkQm9keUVsZW1lbnQgfSBmcm9tIFwiLi9HcmlkQm9keVwiO1xyXG5pbXBvcnQgeyBIVE1MRUdyaWRDZWxsRWxlbWVudCB9IGZyb20gXCIuL0dyaWRDZWxsXCI7XHJcbmltcG9ydCB7IEhUTUxFR3JpZEhlYWRFbGVtZW50IH0gZnJvbSBcIi4vR3JpZEhlYWRcIjtcclxuaW1wb3J0IHsgSFRNTEVHcmlkUm93RWxlbWVudCB9IGZyb20gXCIuL0dyaWRSb3dcIjtcclxuaW1wb3J0IHsgSFRNTEVHcmlkUm93R3JvdXBFbGVtZW50IH0gZnJvbSBcIi4vR3JpZFJvd0dyb3VwXCI7XHJcbmV4cG9ydCB7IEhUTUxFR3JpZEVsZW1lbnQgfTtcclxuZXhwb3J0IHsgSFRNTEVHcmlkQm9keUVsZW1lbnQgfTtcclxuZXhwb3J0IHsgSFRNTEVHcmlkQ2VsbEVsZW1lbnQgfTtcclxuZXhwb3J0IHsgSFRNTEVHcmlkSGVhZEVsZW1lbnQgfTtcclxuZXhwb3J0IHsgSFRNTEVHcmlkUm93RWxlbWVudCB9O1xyXG5leHBvcnQgeyBIVE1MRUdyaWRSb3dHcm91cEVsZW1lbnQgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgREVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fT1VUTElORV9DT0xPUiB9IGZyb20gXCIuLi8uLi8uLi9zdHlsZXNoZWV0cy9UaGVtZVwiO1xyXG5pbXBvcnQgeyBDdXN0b21FbGVtZW50LCBBdHRyaWJ1dGVQcm9wZXJ0eSwgZWxlbWVudCB9IGZyb20gXCIuLi8uLi9FbGVtZW50XCI7XHJcbmltcG9ydCB7IEhUTUxFTGlzdEl0ZW1FbGVtZW50IH0gZnJvbSBcIi4vTGlzdEl0ZW1cIjtcclxuaW1wb3J0IHsgSFRNTEVMaXN0SXRlbUdyb3VwRWxlbWVudCB9IGZyb20gXCIuL0xpc3RJdGVtR3JvdXBcIjtcclxuaW1wb3J0IFwiLi9MaXN0SXRlbVwiO1xyXG5pbXBvcnQgXCIuL0xpc3RJdGVtR3JvdXBcIjtcclxuZXhwb3J0IHsgSFRNTEVMaXN0RWxlbWVudCB9O1xyXG52YXIgc2hhZG93VGVtcGxhdGU7XHJcbnZhciBzdHlsZTtcclxubGV0IEhUTUxFTGlzdEVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVMaXN0RWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBnZXQgYWN0aXZlSXRlbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiZS1saXN0aXRlbVthY3RpdmVdXCIpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGRyb3BUYXJnZXRJdGVtKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJlLWxpc3RpdGVtW2Ryb3B0YXJnZXRdXCIpO1xyXG4gICAgfVxyXG4gICAgI29uU2VsZWN0aW9uO1xyXG4gICAgI2hhc1NlbGVjdGlvbkNoYW5nZWQ7XHJcbiAgICAjd2Fsa2VyO1xyXG4gICAgc3RhdGljIHtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZSA9IGVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmFwcGVuZChlbGVtZW50KFwic3R5bGVcIiwge1xyXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICAgICAgLypjc3MqLyBgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGBcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH0pLCBlbGVtZW50KFwic2xvdFwiLCB7XHJcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50KFwic2xvdFwiKVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHN0eWxlID0gLypjc3MqLyBgXHJcbiAgICAgICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdCg6Zm9jdXMpIHtcclxuICAgICAgICAgICAgICAgIG91dGxpbmU6IDFweCBzb2xpZCB2YXIoLS10aGVtZS1mb2N1c2VkLWl0ZW0tb3V0bGluZS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SfSk7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lLW9mZnNldDogLTFweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBpdGVtcygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6aXMoOnNjb3BlLCA6c2NvcGUgPiBlLWxpc3RpdGVtZ3JvdXApID4gZS1saXN0aXRlbVwiKSk7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuI3dhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIodGhpcywgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQsIHRoaXMuI3dhbGtlck5vZGVGaWx0ZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy4jb25TZWxlY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLiNoYXNTZWxlY3Rpb25DaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICAgICAgY29uc3QgYWRvcHRlZFN0eWxlc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xyXG4gICAgICAgIGFkb3B0ZWRTdHlsZXNoZWV0LnJlcGxhY2Uoc3R5bGUpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW2Fkb3B0ZWRTdHlsZXNoZWV0XTtcclxuICAgICAgICBzaGFkb3dSb290LmFwcGVuZChzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgdGhpcy4jaGFuZGxlQ29udGV4dE1lbnVFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW5kXCIsIHRoaXMuI2hhbmRsZURyYWdFbmRFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW50ZXJcIiwgdGhpcy4jaGFuZGxlRHJhZ0VudGVyRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgdGhpcy4jaGFuZGxlRHJhZ092ZXJFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgdGhpcy4jaGFuZGxlRHJhZ0xlYXZlRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIHRoaXMuI2hhbmRsZURyYWdTdGFydEV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgdGhpcy4jaGFuZGxlRHJvcEV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMuI2hhbmRsZUZvY3VzRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCB0aGlzLiNoYW5kbGVGb2N1c0luRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLiNoYW5kbGVLZXlEb3duRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuI2hhbmRsZU1vdXNlRG93bkV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInNlbGVjdFwiLCB0aGlzLiNoYW5kbGVTZWxlY3RFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkZEV2ZW50TGlzdGVuZXIoXCJzbG90Y2hhbmdlXCIsIHRoaXMuI2hhbmRsZVNsb3RDaGFuZ2VFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgICAgIGNvbnN0IHRhYkluZGV4ID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKTtcclxuICAgICAgICB0aGlzLnRhYkluZGV4ID0gdGFiSW5kZXggPT09IG51bGwgPyAwIDogcGFyc2VJbnQodGFiSW5kZXgpO1xyXG4gICAgfVxyXG4gICAgYmVnaW5TZWxlY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy4jb25TZWxlY3Rpb24gPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZW5kU2VsZWN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuI29uU2VsZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuI2hhc1NlbGVjdGlvbkNoYW5nZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInNlbGVjdGlvbmNoYW5nZVwiLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICAgICAgICB0aGlzLiNoYXNTZWxlY3Rpb25DaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2VsZWN0ZWRJdGVtcygpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW1zID0gW107XHJcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHdhbGtlci5yb290O1xyXG4gICAgICAgIGxldCBpdGVtID0gdGhpcy4jZmlyc3RJdGVtKCk7XHJcbiAgICAgICAgd2hpbGUgKGl0ZW0gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0uc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbXMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpdGVtID0gdGhpcy4jbmV4dEl0ZW0oaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZEl0ZW1zO1xyXG4gICAgfVxyXG4gICAgI3dhbGtlck5vZGVGaWx0ZXIobm9kZSkge1xyXG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTEVMaXN0SXRlbUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX0FDQ0VQVDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MRUxpc3RJdGVtR3JvdXBFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOb2RlRmlsdGVyLkZJTFRFUl9TS0lQO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gTm9kZUZpbHRlci5GSUxURVJfUkVKRUNUO1xyXG4gICAgfVxyXG4gICAgI2dldEl0ZW1zUmFuZ2UoZnJvbSwgdG8pIHtcclxuICAgICAgICBjb25zdCBpdGVtcyA9IHRoaXMuaXRlbXMoKTtcclxuICAgICAgICBjb25zdCBmcm9tSW5kZXggPSBpdGVtcy5pbmRleE9mKGZyb20pO1xyXG4gICAgICAgIGNvbnN0IHRvSW5kZXggPSBpdGVtcy5pbmRleE9mKHRvKTtcclxuICAgICAgICBpZiAoZnJvbUluZGV4ID4gLTEgJiYgdG9JbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIGlmIChmcm9tID09IHRvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2Zyb21dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtcy5zbGljZShNYXRoLm1pbihmcm9tSW5kZXgsIHRvSW5kZXgpLCBNYXRoLm1heChmcm9tSW5kZXgsIHRvSW5kZXgpICsgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgICNzZXRTZWxlY3Rpb24oLi4uaXRlbXMpIHtcclxuICAgICAgICB0aGlzLmJlZ2luU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtcyA9IHRoaXMuc2VsZWN0ZWRJdGVtcygpO1xyXG4gICAgICAgIHNlbGVjdGVkSXRlbXMuZm9yRWFjaCgoc2VsZWN0ZWRJdGVtX2kpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFpdGVtcy5pbmNsdWRlcyhzZWxlY3RlZEl0ZW1faSkpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbV9pLnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpdGVtcy5mb3JFYWNoKChpdGVtX2kpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29udGFpbnMoaXRlbV9pKSAmJiAhaXRlbV9pLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtX2kuc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbmRTZWxlY3Rpb24oKTtcclxuICAgIH1cclxuICAgICNhZGRUb1NlbGVjdGlvbiguLi5pdGVtcykge1xyXG4gICAgICAgIHRoaXMuYmVnaW5TZWxlY3Rpb24oKTtcclxuICAgICAgICBpdGVtcy5mb3JFYWNoKChpdGVtX2kpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFpdGVtX2kuc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1faS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVuZFNlbGVjdGlvbigpO1xyXG4gICAgfVxyXG4gICAgI3JlbW92ZUZyb21TZWxlY3Rpb24oLi4uaXRlbXMpIHtcclxuICAgICAgICB0aGlzLmJlZ2luU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtcyA9IHRoaXMuc2VsZWN0ZWRJdGVtcygpO1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW1faSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRJdGVtcy5pbmNsdWRlcyhpdGVtX2kpKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtX2kuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZW5kU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcbiAgICAjY2xlYXJTZWxlY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5iZWdpblNlbGVjdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSB0aGlzLnNlbGVjdGVkSXRlbXMoKTtcclxuICAgICAgICBzZWxlY3RlZEl0ZW1zLmZvckVhY2goKGl0ZW1faSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXRlbV9pLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtX2kuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZW5kU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcbiAgICAjc2V0QWN0aXZlSXRlbShpdGVtKSB7XHJcbiAgICAgICAgY29uc3QgeyBhY3RpdmVJdGVtLCBpdGVtcyB9ID0gdGhpcztcclxuICAgICAgICBpZiAoYWN0aXZlSXRlbSAhPT0gbnVsbCAmJiBhY3RpdmVJdGVtICE9PSBpdGVtKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZUl0ZW0uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGFjdGl2ZUl0ZW0udGFiSW5kZXggPSAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGl0ZW0gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgaXRlbS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBpdGVtLnRhYkluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjc2V0RHJvcFRhcmdldEl0ZW0oaXRlbSkge1xyXG4gICAgICAgIGNvbnN0IHsgZHJvcFRhcmdldEl0ZW0gfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGRyb3BUYXJnZXRJdGVtICE9PSBudWxsICYmIGRyb3BUYXJnZXRJdGVtICE9PSBpdGVtKSB7XHJcbiAgICAgICAgICAgIGRyb3BUYXJnZXRJdGVtLmRyb3B0YXJnZXQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGl0ZW0gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5kcm9wdGFyZ2V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgaXRlbS5kcm9wdGFyZ2V0ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJvcHRhcmdldCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNmaXJzdEl0ZW0oKSB7XHJcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgIGNvbnN0IHsgcm9vdCB9ID0gd2Fsa2VyO1xyXG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHJvb3Q7XHJcbiAgICAgICAgcmV0dXJuIHdhbGtlci5maXJzdENoaWxkKCk7XHJcbiAgICB9XHJcbiAgICAjbGFzdEl0ZW0oKSB7XHJcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgIGNvbnN0IHsgcm9vdCB9ID0gd2Fsa2VyO1xyXG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHJvb3Q7XHJcbiAgICAgICAgcmV0dXJuIHdhbGtlci5sYXN0Q2hpbGQoKTtcclxuICAgIH1cclxuICAgICNwcmV2aW91c0l0ZW0oaXRlbSkge1xyXG4gICAgICAgIGNvbnN0IHdhbGtlciA9IHRoaXMuI3dhbGtlcjtcclxuICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBpdGVtO1xyXG4gICAgICAgIGNvbnN0IHByZXZpb3VzSXRlbSA9IHdhbGtlci5wcmV2aW91c05vZGUoKTtcclxuICAgICAgICByZXR1cm4gcHJldmlvdXNJdGVtO1xyXG4gICAgfVxyXG4gICAgI25leHRJdGVtKGl0ZW0pIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gaXRlbTtcclxuICAgICAgICBjb25zdCBuZXh0SXRlbSA9IHdhbGtlci5uZXh0Tm9kZSgpO1xyXG4gICAgICAgIHJldHVybiBuZXh0SXRlbTtcclxuICAgIH1cclxuICAgICNoYW5kbGVDb250ZXh0TWVudUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MRUxpc3RJdGVtRWxlbWVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW1zID0gdGhpcy5zZWxlY3RlZEl0ZW1zKCk7XHJcbiAgICAgICAgICAgIGlmICghc2VsZWN0ZWRJdGVtcy5pbmNsdWRlcyh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiNzZXRTZWxlY3Rpb24odGFyZ2V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0YXJnZXQuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVEcmFnRW5kRXZlbnQoKSB7XHJcbiAgICAgICAgdGhpcy4jc2V0RHJvcFRhcmdldEl0ZW0obnVsbCk7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlRHJhZ0VudGVyRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxFTGlzdEl0ZW1FbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuI3NldERyb3BUYXJnZXRJdGVtKHRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlRHJhZ092ZXJFdmVudChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlRHJhZ0xlYXZlRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHJlbGF0ZWRUYXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGlmIChyZWxhdGVkVGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnRJdGVtID0gcmVsYXRlZFRhcmdldC5jbG9zZXN0KFwiZS1saXN0aXRlbVwiKTtcclxuICAgICAgICAgICAgaWYgKCFwYXJlbnRJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcm9vdE5vZGUgPSByZWxhdGVkVGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCEocm9vdE5vZGUgaW5zdGFuY2VvZiBIVE1MRUxpc3RJdGVtRWxlbWVudCB8fCByb290Tm9kZSBpbnN0YW5jZW9mIERvY3VtZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3ROb2RlID0gcm9vdE5vZGUuZ2V0Um9vdE5vZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm9vdE5vZGUgaW5zdGFuY2VvZiBTaGFkb3dSb290KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3ROb2RlID0gcm9vdE5vZGUuaG9zdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocm9vdE5vZGUgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3NldERyb3BUYXJnZXRJdGVtKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZURyYWdTdGFydEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MRUxpc3RJdGVtRWxlbWVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW1zID0gdGhpcy5zZWxlY3RlZEl0ZW1zKCk7XHJcbiAgICAgICAgICAgIGlmICghc2VsZWN0ZWRJdGVtcy5pbmNsdWRlcyh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiNzZXRTZWxlY3Rpb24odGFyZ2V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVEcm9wRXZlbnQoKSB7XHJcbiAgICAgICAgdGhpcy4jc2V0RHJvcFRhcmdldEl0ZW0obnVsbCk7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlRm9jdXNFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgcmVsYXRlZFRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgeyBhY3RpdmVJdGVtIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChhY3RpdmVJdGVtICYmIHJlbGF0ZWRUYXJnZXQgIT09IGFjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgYWN0aXZlSXRlbS5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVGb2N1c0luRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxFTGlzdEl0ZW1FbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuI3NldEFjdGl2ZUl0ZW0odGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlS2V5RG93bkV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgYWN0aXZlSXRlbSB9ID0gdGhpcztcclxuICAgICAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiYVwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGN0cmxLZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKGN0cmxLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyByb290IH0gPSB3YWxrZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3RJdGVtID0gKHdhbGtlci5jdXJyZW50Tm9kZSA9IHdhbGtlci5wYXJlbnROb2RlKCkgPz8gcm9vdCwgd2Fsa2VyLmZpcnN0Q2hpbGQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdEl0ZW0gPSAod2Fsa2VyLmN1cnJlbnROb2RlID0gd2Fsa2VyLnBhcmVudE5vZGUoKSA/PyByb290LCB3YWxrZXIubGFzdENoaWxkKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gdGhpcy4jZ2V0SXRlbXNSYW5nZShmaXJzdEl0ZW0sIGxhc3RJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jc2V0U2VsZWN0aW9uKC4uLnJhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkFycm93VXBcIjoge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0l0ZW0gPSB0aGlzLiNwcmV2aW91c0l0ZW0oYWN0aXZlSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW0uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHNoaWZ0S2V5IH0gPSBldmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW0uc2VsZWN0ZWQgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3JlbW92ZUZyb21TZWxlY3Rpb24ocHJldmlvdXNJdGVtKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jYWRkVG9TZWxlY3Rpb24ocHJldmlvdXNJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IHRoaXMuI2ZpcnN0SXRlbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RJdGVtLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjoge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0SXRlbSA9IHRoaXMuI25leHRJdGVtKGFjdGl2ZUl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0SXRlbS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc2hpZnRLZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJdGVtLnNlbGVjdGVkID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNyZW1vdmVGcm9tU2VsZWN0aW9uKG5leHRJdGVtKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jYWRkVG9TZWxlY3Rpb24obmV4dEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdEl0ZW0gPSB0aGlzLiNsYXN0SXRlbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXN0SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0SXRlbS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiSG9tZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdEl0ZW0gPSB0aGlzLiNmaXJzdEl0ZW0oKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdEl0ZW0uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiRW5kXCI6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RJdGVtID0gdGhpcy4jbGFzdEl0ZW0oKTtcclxuICAgICAgICAgICAgICAgIGlmIChsYXN0SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RJdGVtLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkVudGVyXCI6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgYWN0aXZlSXRlbSB9ID0gdGhpcztcclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc2V0U2VsZWN0aW9uKGFjdGl2ZUl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUl0ZW0uY2xpY2soKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkVzY2FwZVwiOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiNjbGVhclNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy4jc2V0QWN0aXZlSXRlbShudWxsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlTW91c2VEb3duRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCwgY3RybEtleSwgc2hpZnRLZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSB0aGlzLnNlbGVjdGVkSXRlbXMoKTtcclxuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVMaXN0SXRlbUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKCFzaGlmdEtleSAmJiAhY3RybEtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4jc2V0U2VsZWN0aW9uKHRhcmdldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY3RybEtleSkge1xyXG4gICAgICAgICAgICAgICAgKCF0YXJnZXQuc2VsZWN0ZWQpID9cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNhZGRUb1NlbGVjdGlvbih0YXJnZXQpIDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNyZW1vdmVGcm9tU2VsZWN0aW9uKHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdFNlbGVjdGVkSXRlbSA9IHNlbGVjdGVkSXRlbXNbc2VsZWN0ZWRJdGVtcy5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgIGlmIChsYXN0U2VsZWN0ZWRJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSB0aGlzLiNnZXRJdGVtc1JhbmdlKGxhc3RTZWxlY3RlZEl0ZW0sIHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEl0ZW1zLmluY2x1ZGVzKHRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3JlbW92ZUZyb21TZWxlY3Rpb24oLi4ucmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jYWRkVG9TZWxlY3Rpb24oLi4ucmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc2V0U2VsZWN0aW9uKHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVTZWxlY3RFdmVudCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuI29uU2VsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJzZWxlY3Rpb25jaGFuZ2VcIiwgeyBidWJibGVzOiB0cnVlIH0pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlU2xvdENoYW5nZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IGFzc2lnbmVkSXRlbXMgPSB0YXJnZXRcclxuICAgICAgICAgICAgLmFzc2lnbmVkRWxlbWVudHMoKVxyXG4gICAgICAgICAgICAuZmlsdGVyKGVsZW1lbnRfaSA9PiBlbGVtZW50X2kgaW5zdGFuY2VvZiBIVE1MRUxpc3RJdGVtRWxlbWVudCk7XHJcbiAgICAgICAgYXNzaWduZWRJdGVtcy5mb3JFYWNoKChpdGVtX2ksIGkpID0+IHtcclxuICAgICAgICAgICAgaXRlbV9pLnBvc2luc2V0ID0gaTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KVxyXG5dLCBIVE1MRUxpc3RFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KVxyXG5dLCBIVE1MRUxpc3RFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiZHJvcHRhcmdldFwiLCB2b2lkIDApO1xyXG5IVE1MRUxpc3RFbGVtZW50QmFzZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgbmFtZTogXCJlLWxpc3RcIlxyXG4gICAgfSlcclxuXSwgSFRNTEVMaXN0RWxlbWVudEJhc2UpO1xyXG52YXIgSFRNTEVMaXN0RWxlbWVudCA9IEhUTUxFTGlzdEVsZW1lbnRCYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1MaXN0LmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbmltcG9ydCB7IERFRkFVTFRfVEhFTUVfRFJPUFRBUkdFVF9JVEVNX0NPTE9SLCBERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9DT0xPUiwgREVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fT1VUTElORV9DT0xPUiwgREVGQVVMVF9USEVNRV9IT1ZFUkVEX0lURU1fQ09MT1IsIERFRkFVTFRfVEhFTUVfU0VMRUNURURfSVRFTV9DT0xPUiB9IGZyb20gXCIuLi8uLi8uLi9zdHlsZXNoZWV0cy9UaGVtZVwiO1xyXG5pbXBvcnQgeyBDdXN0b21FbGVtZW50LCBlbGVtZW50LCBBdHRyaWJ1dGVQcm9wZXJ0eSB9IGZyb20gXCIuLi8uLi9FbGVtZW50XCI7XHJcbmltcG9ydCB7IEhUTUxFTWVudUVsZW1lbnQgfSBmcm9tIFwiLi4vbWVudXMvTWVudVwiO1xyXG5pbXBvcnQgeyBIVE1MRVRvb2xCYXJFbGVtZW50IH0gZnJvbSBcIi4uL3Rvb2xiYXJzL1Rvb2xCYXJcIjtcclxuZXhwb3J0IHsgSFRNTEVMaXN0SXRlbUVsZW1lbnQgfTtcclxudmFyIHNoYWRvd1RlbXBsYXRlO1xyXG52YXIgc3R5bGU7XHJcbmxldCBIVE1MRUxpc3RJdGVtRWxlbWVudEJhc2UgPSBjbGFzcyBIVE1MRUxpc3RJdGVtRWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBnZXQgYmFkZ2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2JhZGdlO1xyXG4gICAgfVxyXG4gICAgZ2V0IHRvb2xiYXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI3Rvb2xiYXI7XHJcbiAgICB9XHJcbiAgICBnZXQgbWVudSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4jbWVudTtcclxuICAgIH1cclxuICAgICNiYWRnZTtcclxuICAgICN0b29sYmFyO1xyXG4gICAgI21lbnU7XHJcbiAgICBzdGF0aWMge1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlID0gZWxlbWVudChcInRlbXBsYXRlXCIpO1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuYXBwZW5kKGVsZW1lbnQoXCJzbG90XCIpKTtcclxuICAgICAgICBzdHlsZSA9IC8qY3NzKi8gYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMjJweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoW2Ryb3B0YXJnZXRdKSB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10aGVtZS1kcm9wdGFyZ2V0LWl0ZW0tY29sb3IsICR7REVGQVVMVF9USEVNRV9EUk9QVEFSR0VUX0lURU1fQ09MT1J9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoOmhvdmVyKSB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10aGVtZS1ob3ZlcmVkLWl0ZW0tY29sb3IsICR7REVGQVVMVF9USEVNRV9IT1ZFUkVEX0lURU1fQ09MT1J9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoW2FjdGl2ZV0pIHtcclxuICAgICAgICAgICAgICAgIG91dGxpbmU6IDFweCBzb2xpZCB2YXIoLS10aGVtZS1mb2N1c2VkLWl0ZW0tb3V0bGluZS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SfSk7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lLW9mZnNldDogLTFweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoOmZvY3VzKSB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10aGVtZS1mb2N1c2VkLWl0ZW0tY29sb3IsICR7REVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fQ09MT1J9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoW3NlbGVjdGVkXSkge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGhlbWUtc2VsZWN0ZWQtaXRlbS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX1NFTEVDVEVEX0lURU1fQ09MT1J9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgICAgIGNvbnN0IGFkb3B0ZWRTdHlsZXNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcclxuICAgICAgICBhZG9wdGVkU3R5bGVzaGVldC5yZXBsYWNlKHN0eWxlKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFthZG9wdGVkU3R5bGVzaGVldF07XHJcbiAgICAgICAgc2hhZG93Um9vdC5hcHBlbmQoc2hhZG93VGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgICAgIHRoaXMuI2JhZGdlID0gbnVsbDtcclxuICAgICAgICB0aGlzLiNtZW51ID0gbnVsbDtcclxuICAgICAgICB0aGlzLiN0b29sYmFyID0gbnVsbDtcclxuICAgICAgICBzaGFkb3dSb290LmFkZEV2ZW50TGlzdGVuZXIoXCJzbG90Y2hhbmdlXCIsIHRoaXMuI2hhbmRsZVNsb3RDaGFuZ2VFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFiSW5kZXggfSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy50YWJJbmRleCA9IHRhYkluZGV4O1xyXG4gICAgfVxyXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xyXG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwic2VsZWN0ZWRcIjoge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInNlbGVjdFwiLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcImxhYmVsXCI6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgc2hhZG93Um9vdCB9ID0gdGhpcztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsUGFydCA9IHNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIltwYXJ0PWxhYmVsXVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChsYWJlbFBhcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbFBhcnQudGV4dENvbnRlbnQgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZVNsb3RDaGFuZ2VFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB7IG5hbWU6IHNsb3ROYW1lIH0gPSB0YXJnZXQ7XHJcbiAgICAgICAgc3dpdGNoIChzbG90TmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwidG9vbGJhclwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGFyZ2V0LmFzc2lnbmVkRWxlbWVudHMoKVswXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuI3Rvb2xiYXIgPSBlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVUb29sQmFyRWxlbWVudCA/IGVsZW1lbnQgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcImJhZGdlXCI6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0YXJnZXQuYXNzaWduZWRFbGVtZW50cygpWzBdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy4jYmFkZ2UgPSBlbGVtZW50IGluc3RhbmNlb2YgSFRNTFNwYW5FbGVtZW50ID8gZWxlbWVudCA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwibWVudVwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGFyZ2V0LmFzc2lnbmVkRWxlbWVudHMoKVswXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuI21lbnUgPSBlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVNZW51RWxlbWVudCA/IGVsZW1lbnQgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSlcclxuXSwgSFRNTEVMaXN0SXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJuYW1lXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBOdW1iZXIgfSlcclxuXSwgSFRNTEVMaXN0SXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJwb3NpbnNldFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nLCBvYnNlcnZlZDogdHJ1ZSB9KVxyXG5dLCBIVE1MRUxpc3RJdGVtRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImxhYmVsXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pXHJcbl0sIEhUTUxFTGlzdEl0ZW1FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiZHJvcHRhcmdldFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KVxyXG5dLCBIVE1MRUxpc3RJdGVtRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImFjdGl2ZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgb2JzZXJ2ZWQ6IHRydWUgfSlcclxuXSwgSFRNTEVMaXN0SXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJzZWxlY3RlZFwiLCB2b2lkIDApO1xyXG5IVE1MRUxpc3RJdGVtRWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS1saXN0aXRlbVwiXHJcbiAgICB9KVxyXG5dLCBIVE1MRUxpc3RJdGVtRWxlbWVudEJhc2UpO1xyXG52YXIgSFRNTEVMaXN0SXRlbUVsZW1lbnQgPSBIVE1MRUxpc3RJdGVtRWxlbWVudEJhc2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxpc3RJdGVtLmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbmltcG9ydCB7IEN1c3RvbUVsZW1lbnQsIGVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vRWxlbWVudFwiO1xyXG5pbXBvcnQgeyBIVE1MRUxpc3RJdGVtRWxlbWVudCB9IGZyb20gXCIuL0xpc3RJdGVtXCI7XHJcbmltcG9ydCBcIi4vTGlzdEl0ZW1cIjtcclxuZXhwb3J0IHsgSFRNTEVMaXN0SXRlbUdyb3VwRWxlbWVudCB9O1xyXG52YXIgc2hhZG93VGVtcGxhdGU7XHJcbnZhciBzdHlsZTtcclxubGV0IEhUTUxFTGlzdEl0ZW1Hcm91cEVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVMaXN0SXRlbUdyb3VwRWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBzdGF0aWMge1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlID0gZWxlbWVudChcInRlbXBsYXRlXCIpO1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuYXBwZW5kKGVsZW1lbnQoXCJzbG90XCIpKTtcclxuICAgICAgICBzdHlsZSA9IC8qY3NzKi8gYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgICAgIGNvbnN0IGFkb3B0ZWRTdHlsZXNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcclxuICAgICAgICBhZG9wdGVkU3R5bGVzaGVldC5yZXBsYWNlKHN0eWxlKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFthZG9wdGVkU3R5bGVzaGVldF07XHJcbiAgICAgICAgc2hhZG93Um9vdC5hcHBlbmQoc2hhZG93VGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRkRXZlbnRMaXN0ZW5lcihcInNsb3RjaGFuZ2VcIiwgdGhpcy4jaGFuZGxlU2xvdENoYW5nZUV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZVNsb3RDaGFuZ2VFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCBhc3NpZ25lZEl0ZW1zID0gdGFyZ2V0XHJcbiAgICAgICAgICAgIC5hc3NpZ25lZEVsZW1lbnRzKClcclxuICAgICAgICAgICAgLmZpbHRlcihlbGVtZW50X2kgPT4gZWxlbWVudF9pIGluc3RhbmNlb2YgSFRNTEVMaXN0SXRlbUVsZW1lbnQpO1xyXG4gICAgICAgIGFzc2lnbmVkSXRlbXMuZm9yRWFjaCgoaXRlbV9pLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW1faS5wb3NpbnNldCA9IGk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcbkhUTUxFTGlzdEl0ZW1Hcm91cEVsZW1lbnRCYXNlID0gX19kZWNvcmF0ZShbXHJcbiAgICBDdXN0b21FbGVtZW50KHtcclxuICAgICAgICBuYW1lOiBcImUtbGlzdGl0ZW1ncm91cFwiXHJcbiAgICB9KVxyXG5dLCBIVE1MRUxpc3RJdGVtR3JvdXBFbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRUxpc3RJdGVtR3JvdXBFbGVtZW50ID0gSFRNTEVMaXN0SXRlbUdyb3VwRWxlbWVudEJhc2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxpc3RJdGVtR3JvdXAuanMubWFwIiwiaW1wb3J0IHsgSFRNTEVMaXN0RWxlbWVudCB9IGZyb20gXCIuL0xpc3RcIjtcclxuaW1wb3J0IHsgSFRNTEVMaXN0SXRlbUVsZW1lbnQgfSBmcm9tIFwiLi9MaXN0SXRlbVwiO1xyXG5pbXBvcnQgeyBIVE1MRUxpc3RJdGVtR3JvdXBFbGVtZW50IH0gZnJvbSBcIi4vTGlzdEl0ZW1Hcm91cFwiO1xyXG5leHBvcnQgeyBIVE1MRUxpc3RFbGVtZW50IH07XHJcbmV4cG9ydCB7IEhUTUxFTGlzdEl0ZW1FbGVtZW50IH07XHJcbmV4cG9ydCB7IEhUTUxFTGlzdEl0ZW1Hcm91cEVsZW1lbnQgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxudmFyIEhUTUxFTWVudUVsZW1lbnRCYXNlXzE7XHJcbmltcG9ydCB7IEN1c3RvbUVsZW1lbnQsIEF0dHJpYnV0ZVByb3BlcnR5LCBlbGVtZW50IH0gZnJvbSBcIi4uLy4uL0VsZW1lbnRcIjtcclxuaW1wb3J0IHsgSFRNTEVNZW51SXRlbUVsZW1lbnQgfSBmcm9tIFwiLi9NZW51SXRlbVwiO1xyXG5pbXBvcnQgeyBIVE1MRU1lbnVJdGVtR3JvdXBFbGVtZW50IH0gZnJvbSBcIi4vTWVudUl0ZW1Hcm91cFwiO1xyXG5pbXBvcnQgXCIuL01lbnVJdGVtXCI7XHJcbmltcG9ydCBcIi4vTWVudUl0ZW1Hcm91cFwiO1xyXG5pbXBvcnQgeyBjb25zdHJ1Y3RvciB9IGZyb20gXCIuLi8uLi9TbmlwcGV0c1wiO1xyXG5leHBvcnQgeyBIVE1MRU1lbnVFbGVtZW50IH07XHJcbmV4cG9ydCB7IEVNZW51IH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG52YXIgdG9nZ2xlQW5pbWF0aW9ucztcclxudmFyIEhJREVfREVMQVlfTVMgPSAyMDA7XHJcbnZhciBTSE9XX0RFTEFZX01TID0gNDAwO1xyXG5sZXQgSFRNTEVNZW51RWxlbWVudEJhc2UgPSBIVE1MRU1lbnVFbGVtZW50QmFzZV8xID0gY2xhc3MgSFRNTEVNZW51RWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBpdGVtcygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6aXMoOnNjb3BlLCA6c2NvcGUgPiBlLW1lbnVpdGVtZ3JvdXApID4gZS1tZW51aXRlbVwiKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYWN0aXZlSW5kZXgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2FjdGl2ZUluZGV4O1xyXG4gICAgfVxyXG4gICAgZ2V0IGFjdGl2ZUl0ZW0oKSB7XHJcbiAgICAgICAgY29uc3QgeyBhY3RpdmVJbmRleCB9ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gKHRoaXMucXVlcnlTZWxlY3RvcihcIjppcyg6c2NvcGUsIDpzY29wZSA+IGUtbWVudWl0ZW1ncm91cCkgPiBlLW1lbnVpdGVtOmZvY3VzLXdpdGhpblwiKSA/PyBhY3RpdmVJbmRleCA+IC0xKSA/IHRoaXMuaXRlbXMoKVthY3RpdmVJbmRleF0gPz8gbnVsbCA6IG51bGw7XHJcbiAgICB9XHJcbiAgICAjd2Fsa2VyO1xyXG4gICAgI2FjdGl2ZUluZGV4O1xyXG4gICAgc3RhdGljIHtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZSA9IGVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmFwcGVuZChlbGVtZW50KFwic2xvdFwiKSk7XHJcbiAgICAgICAgc3R5bGUgPSAvKmNzcyovIGBcclxuICAgICAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogM3B4O1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogbWF4LWNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC13ZWJraXQtYm94LXNoYWRvdzogcmdiYSgwLCAwLCAwLCAwLjIpIDAgMXB4IDNweDtcclxuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IHJnYmEoMCwgMCwgMCwgMC4yKSAwIDFweCAzcHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KFtjb250ZXh0dWFsXSkge1xyXG4gICAgICAgICAgICAgICAgei1pbmRleDogMTtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICAgICAgdG9nZ2xlQW5pbWF0aW9ucyA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuI2FjdGl2ZUluZGV4ID0gLTE7XHJcbiAgICAgICAgdGhpcy4jd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcih0aGlzLCBOb2RlRmlsdGVyLlNIT1dfRUxFTUVOVCwgdGhpcy4jd2Fsa2VyTm9kZUZpbHRlci5iaW5kKHRoaXMpKTtcclxuICAgICAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgICAgICBjb25zdCBhZG9wdGVkU3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgYWRvcHRlZFN0eWxlc2hlZXQucmVwbGFjZShzdHlsZSk7XHJcbiAgICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbYWRvcHRlZFN0eWxlc2hlZXRdO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kKHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLiNoYW5kbGVDbGlja0V2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCB0aGlzLiNoYW5kbGVNb3VzZU92ZXJFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCB0aGlzLiNoYW5kbGVNb3VzZU91dEV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIiwgdGhpcy4jaGFuZGxlRm9jdXNJbkV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIHRoaXMuI2hhbmRsZUZvY3VzT3V0RXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLiNoYW5kbGVLZXlEb3duRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgICAgICBjb25zdCB0YWJpbmRleCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIik7XHJcbiAgICAgICAgdGhpcy50YWJJbmRleCA9IHRhYmluZGV4ICE9PSBudWxsID8gcGFyc2VJbnQodGFiaW5kZXgpIDogLTE7XHJcbiAgICB9XHJcbiAgICBwb3NpdGlvbkNvbnRleHR1YWwoeCwgeSkge1xyXG4gICAgICAgIGNvbnN0IHsgc3R5bGUgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyB3aWR0aDogbWVudVdpZHRoLCBoZWlnaHQ6IG1lbnVIZWlnaHQgfSA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgY29uc3QgeyBzY3JvbGxYLCBzY3JvbGxZIH0gPSB3aW5kb3c7XHJcbiAgICAgICAgY29uc3QgbGVmdCA9IHggKyBzY3JvbGxYO1xyXG4gICAgICAgIGNvbnN0IHRvcCA9IHkgKyBzY3JvbGxZO1xyXG4gICAgICAgIGNvbnN0IHsgY2xpZW50V2lkdGgsIGNsaWVudEhlaWdodCB9ID0gZG9jdW1lbnQuYm9keTtcclxuICAgICAgICBjb25zdCBvdmVyZmxvd1ggPSBsZWZ0ICsgbWVudVdpZHRoIC0gY2xpZW50V2lkdGg7XHJcbiAgICAgICAgY29uc3Qgb3ZlcmZsb3dZID0gdG9wICsgbWVudUhlaWdodCAtIGNsaWVudEhlaWdodDtcclxuICAgICAgICBzdHlsZS5zZXRQcm9wZXJ0eShcImxlZnRcIiwgYCR7b3ZlcmZsb3dYID4gMCA/IGxlZnQgLSBtZW51V2lkdGggOiBsZWZ0fXB4YCk7XHJcbiAgICAgICAgc3R5bGUuc2V0UHJvcGVydHkoXCJ0b3BcIiwgYCR7b3ZlcmZsb3dZID4gMCA/IHRvcCAtIG1lbnVIZWlnaHQgOiB0b3B9cHhgKTtcclxuICAgIH1cclxuICAgICNjb2xsYXBzZVN1Ym1lbnVzKCkge1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvckFsbChcIjppcyg6c2NvcGUsIDpzY29wZSA+IGUtbWVudWl0ZW1ncm91cCkgPiBlLW1lbnVpdGVtW2V4cGFuZGVkXVwiKVxyXG4gICAgICAgICAgICAuZm9yRWFjaCgoaXRlbV9pKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW1faS5jb2xsYXBzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgI25lYXJlc3RJdGVtKHRhcmdldCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucXVlcnlTZWxlY3RvckFsbChcIjppcyg6c2NvcGUsIDpzY29wZSA+IGUtbWVudWl0ZW1ncm91cCkgPiBlLW1lbnVpdGVtXCIpKS5maW5kKGl0ZW1faSA9PiBpdGVtX2kuY29udGFpbnModGFyZ2V0KSkgPz8gbnVsbDtcclxuICAgIH1cclxuICAgICN3YWxrZXJOb2RlRmlsdGVyKG5vZGUpIHtcclxuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxFTWVudUl0ZW1FbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOb2RlRmlsdGVyLkZJTFRFUl9BQ0NFUFQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTEVNZW51SXRlbUdyb3VwRWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTm9kZUZpbHRlci5GSUxURVJfU0tJUDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX1JFSkVDVDtcclxuICAgIH1cclxuICAgIGZpcnN0SXRlbSgpIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gd2Fsa2VyLnJvb3Q7XHJcbiAgICAgICAgcmV0dXJuIHdhbGtlci5maXJzdENoaWxkKCk7XHJcbiAgICB9XHJcbiAgICAjbGFzdEl0ZW0oKSB7XHJcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHdhbGtlci5yb290O1xyXG4gICAgICAgIHJldHVybiB3YWxrZXIubGFzdENoaWxkKCk7XHJcbiAgICB9XHJcbiAgICAjcHJldmlvdXNJdGVtKGl0ZW0pIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gaXRlbTtcclxuICAgICAgICByZXR1cm4gd2Fsa2VyLnByZXZpb3VzTm9kZSgpO1xyXG4gICAgfVxyXG4gICAgI25leHRJdGVtKGl0ZW0pIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gaXRlbTtcclxuICAgICAgICByZXR1cm4gd2Fsa2VyLm5leHROb2RlKCk7XHJcbiAgICB9XHJcbiAgICAjZmlyc3RDaGlsZEl0ZW0oaXRlbSkge1xyXG4gICAgICAgIGNvbnN0IHsgbWVudSB9ID0gaXRlbTtcclxuICAgICAgICByZXR1cm4gbWVudSBpbnN0YW5jZW9mIEhUTUxFTWVudUVsZW1lbnRCYXNlXzEgP1xyXG4gICAgICAgICAgICBtZW51LmZpcnN0SXRlbSgpIDpcclxuICAgICAgICAgICAgbnVsbDtcclxuICAgIH1cclxuICAgICNzZXRBY3RpdmVJdGVtKGl0ZW0pIHtcclxuICAgICAgICBpZiAoaXRlbSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLiNhY3RpdmVJbmRleCA9IHRoaXMuaXRlbXMoKS5pbmRleE9mKGl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVDbGlja0V2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEl0ZW0gPSB0YXJnZXQuY2xvc2VzdChcImUtbWVudWl0ZW1cIik7XHJcbiAgICAgICAgaWYgKHRhcmdldEl0ZW0pIHtcclxuICAgICAgICAgICAgY29uc3QgeyB0eXBlLCBjaGVja2VkIH0gPSB0YXJnZXRJdGVtO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJjaGVja2JveFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SXRlbS5jaGVja2VkID0gIWNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwicmFkaW9cIjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbmFtZSwgdmFsdWUgfSA9IHRhcmdldEl0ZW07XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SXRlbS5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoYDppcyg6c2NvcGUsIDpzY29wZSA+IGUtbWVudWl0ZW1ncm91cCkgPiBlLW1lbnVpdGVtW3R5cGU9cmFkaW9dW25hbWU9JHtuYW1lfV1gKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgocmFkaW9faSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWRpb19pLmNoZWNrZWQgPSByYWRpb19pLnZhbHVlID09IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1lbnVcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzdWJtZW51XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJdGVtLnRvZ2dsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZUZvY3VzSW5FdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVNZW51SXRlbUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgbmVhcmVzdEl0ZW0gPSB0aGlzLiNuZWFyZXN0SXRlbSh0YXJnZXQpO1xyXG4gICAgICAgICAgICBpZiAobmVhcmVzdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuI3NldEFjdGl2ZUl0ZW0obmVhcmVzdEl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZUZvY3VzT3V0RXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHJlbGF0ZWRUYXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IGxvc3RGb2N1c1dpdGhpbiA9ICF0aGlzLmNvbnRhaW5zKHJlbGF0ZWRUYXJnZXQpO1xyXG4gICAgICAgIGlmIChsb3N0Rm9jdXNXaXRoaW4pIHtcclxuICAgICAgICAgICAgY29uc3QgeyBjb250ZXh0dWFsIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICBpZiAoY29udGV4dHVhbCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7IH1cclxuICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgYWN0aXZlSXRlbSB9ID0gdGhpcztcclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJdGVtPy5leHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUl0ZW0uY29sbGFwc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuI3NldEFjdGl2ZUl0ZW0obnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlS2V5RG93bkV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgYWN0aXZlSXRlbSB9ID0gdGhpcztcclxuICAgICAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dVcFwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0l0ZW0gPSBhY3RpdmVJdGVtID9cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNwcmV2aW91c0l0ZW0oYWN0aXZlSXRlbSkgPz8gdGhpcy4jbGFzdEl0ZW0oKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJzdEl0ZW0oKTtcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzSXRlbT8uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dEb3duXCI6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRJdGVtID0gYWN0aXZlSXRlbSA/XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jbmV4dEl0ZW0oYWN0aXZlSXRlbSkgPz8gdGhpcy5maXJzdEl0ZW0oKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJzdEl0ZW0oKTtcclxuICAgICAgICAgICAgICAgIG5leHRJdGVtPy5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJIb21lXCI6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IHRoaXMuZmlyc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICBmaXJzdEl0ZW0/LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkVuZFwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0SXRlbSA9IHRoaXMuI2xhc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICBsYXN0SXRlbT8uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiRW50ZXJcIjpcclxuICAgICAgICAgICAgY2FzZSBcIiBcIjoge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHR5cGUgfSA9IGFjdGl2ZUl0ZW07XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJtZW51XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdWJtZW51XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUl0ZW0uZXhwYW5kKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbS5leHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Q2hpbGRJdGVtID0gdGhpcy4jZmlyc3RDaGlsZEl0ZW0oYWN0aXZlSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDaGlsZEl0ZW0/LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUl0ZW0uY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkVzY2FwZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2xvc2VzdFRhcmdldE1lbnUgPSBldmVudC5jb21wb3NlZFBhdGgoKS5maW5kKHRhcmdldF9pID0+IHRhcmdldF9pIGluc3RhbmNlb2YgSFRNTEVNZW51RWxlbWVudCkgPT0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQ2xvc2VzdFRhcmdldE1lbnUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlSXRlbS5jb2xsYXBzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVJdGVtLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNvbnRleHR1YWwgfSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0dWFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJsdXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjbG9zZVwiLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6IHtcclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNDbG9zZXN0VGFyZ2V0TWVudSA9IGV2ZW50LmNvbXBvc2VkUGF0aCgpLmZpbmQodGFyZ2V0X2kgPT4gdGFyZ2V0X2kgaW5zdGFuY2VvZiBIVE1MRU1lbnVFbGVtZW50KSA9PSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNDbG9zZXN0VGFyZ2V0TWVudSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVJdGVtLmNvbGxhcHNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUl0ZW0uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dSaWdodFwiOiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdHlwZSB9ID0gYWN0aXZlSXRlbTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN1Ym1lbnVcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhY3RpdmVJdGVtLmV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlSXRlbS5leHBhbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdENoaWxkSXRlbSA9IHRoaXMuI2ZpcnN0Q2hpbGRJdGVtKGFjdGl2ZUl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0Q2hpbGRJdGVtPy5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZU1vdXNlT3V0RXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCwgcmVsYXRlZFRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxFTWVudUl0ZW1FbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5lYXJlc3RJdGVtID0gdGhpcy4jbmVhcmVzdEl0ZW0odGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYgKG5lYXJlc3RJdGVtICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmVhcmVzdEl0ZW0udHlwZSA9PSBcInN1Ym1lbnVcIiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFuZWFyZXN0SXRlbS5leHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUFuaW1hdGlvbnMuZ2V0KG5lYXJlc3RJdGVtKT8uY2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc1RhcmdldENsb3Nlc3RNZW51ID0gZXZlbnQuY29tcG9zZWRQYXRoKCkuZmluZCh0YXJnZXRfaSA9PiB0YXJnZXRfaSBpbnN0YW5jZW9mIEhUTUxFTWVudUVsZW1lbnQpID09IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNUYXJnZXRDbG9zZXN0TWVudSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgYWN0aXZlSXRlbSB9ID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbT8udHlwZSA9PSBcInN1Ym1lbnVcIiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVJdGVtLmV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0b2dnbGVBbmltYXRpb24gPSB0b2dnbGVBbmltYXRpb25zLmdldChhY3RpdmVJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvZ2dsZUFuaW1hdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQW5pbWF0aW9uLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUFuaW1hdGlvbiA9IGFjdGl2ZUl0ZW0uYW5pbWF0ZShudWxsLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogSElERV9ERUxBWV9NU1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQW5pbWF0aW9ucy5zZXQoYWN0aXZlSXRlbSwgdG9nZ2xlQW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBmaW5pc2hlZCB9ID0gdG9nZ2xlQW5pbWF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5pc2hlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlSXRlbS5jb2xsYXBzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUFuaW1hdGlvbnMuZGVsZXRlKGFjdGl2ZUl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBsZWZ0LCByaWdodCwgdG9wLCBib3R0b20gfSA9ICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudEl0ZW0gPSB0aGlzLmNsb3Nlc3QoXCJlLW1lbnVpdGVtXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50SXRlbSAmJiAhcGFyZW50SXRlbS5leHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SXRlbS5leHBhbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lbnVSZWN0ID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEl0ZW0uY29sbGFwc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZW51UmVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNsaWVudFgsIGNsaWVudFkgfSA9IGV2ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVyc2VjdHNXaXRoTW91c2UgPSAhKGxlZnQgPiBjbGllbnRYIHx8IHJpZ2h0IDwgY2xpZW50WCB8fCB0b3AgPiBjbGllbnRZIHx8IGJvdHRvbSA8IGNsaWVudFkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5zUmVsYXRlZFRhcmdldCA9IHRoaXMuY29udGFpbnMocmVsYXRlZFRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludGVyc2VjdHNXaXRoTW91c2UgJiYgY29udGFpbnNSZWxhdGVkVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWxhdGVkVGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVNZW51RWxlbWVudCAmJiByZWxhdGVkVGFyZ2V0ICE9PSB0aGlzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkVGFyZ2V0LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jc2V0QWN0aXZlSXRlbShudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWludGVyc2VjdHNXaXRoTW91c2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3NldEFjdGl2ZUl0ZW0obnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZU1vdXNlT3ZlckV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MRU1lbnVJdGVtRWxlbWVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBuZWFyZXN0SXRlbSA9IHRoaXMuI25lYXJlc3RJdGVtKHRhcmdldCk7XHJcbiAgICAgICAgICAgIGlmIChuZWFyZXN0SXRlbSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5lYXJlc3RJdGVtLnR5cGUgPT09IFwic3VibWVudVwiICYmIG5lYXJlc3RJdGVtLmV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQW5pbWF0aW9ucy5nZXQobmVhcmVzdEl0ZW0pPy5jYW5jZWwoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzVGFyZ2V0Q2xvc2VzdE1lbnUgPSBldmVudC5jb21wb3NlZFBhdGgoKS5maW5kKHRhcmdldF9pID0+IHRhcmdldF9pIGluc3RhbmNlb2YgSFRNTEVNZW51RWxlbWVudCkgPT0gdGhpcztcclxuICAgICAgICAgICAgICAgIGlmIChpc1RhcmdldENsb3Nlc3RNZW51KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBhY3RpdmVJdGVtIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJdGVtPy50eXBlID09PSBcInN1Ym1lbnVcIiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVJdGVtLmV4cGFuZGVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICFhY3RpdmVJdGVtLmNvbnRhaW5zKHRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRvZ2dsZUFuaW1hdGlvbiA9IHRvZ2dsZUFuaW1hdGlvbnMuZ2V0KGFjdGl2ZUl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9nZ2xlQW5pbWF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVBbmltYXRpb24uY2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQW5pbWF0aW9uID0gYWN0aXZlSXRlbS5hbmltYXRlKG51bGwsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBTSE9XX0RFTEFZX01TXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVBbmltYXRpb25zLnNldChhY3RpdmVJdGVtLCB0b2dnbGVBbmltYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGZpbmlzaGVkIH0gPSB0b2dnbGVBbmltYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVJdGVtLmNvbGxhcHNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQW5pbWF0aW9ucy5kZWxldGUoYWN0aXZlSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZXRBY3RpdmVJdGVtKG5lYXJlc3RJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBuZWFyZXN0SXRlbS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5lYXJlc3RJdGVtLnR5cGUgPT09IFwic3VibWVudVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmVhcmVzdEl0ZW0uZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0b2dnbGVBbmltYXRpb24gPSB0b2dnbGVBbmltYXRpb25zLmdldChuZWFyZXN0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9nZ2xlQW5pbWF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQW5pbWF0aW9uLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQW5pbWF0aW9uID0gbmVhcmVzdEl0ZW0uYW5pbWF0ZShudWxsLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IEhJREVfREVMQVlfTVNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQW5pbWF0aW9ucy5zZXQobmVhcmVzdEl0ZW0sIHRvZ2dsZUFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGZpbmlzaGVkIH0gPSB0b2dnbGVBbmltYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5pc2hlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGFjdGl2ZUl0ZW0gfSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jY29sbGFwc2VTdWJtZW51cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUFuaW1hdGlvbnMuZ2V0KGFjdGl2ZUl0ZW0pPy5jYW5jZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlSXRlbS5leHBhbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlSXRlbS5tZW51Py5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVBbmltYXRpb25zLmRlbGV0ZShuZWFyZXN0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lYXJlc3RJdGVtLm1lbnU/LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KVxyXG5dLCBIVE1MRU1lbnVFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KVxyXG5dLCBIVE1MRU1lbnVFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiY29udGV4dHVhbFwiLCB2b2lkIDApO1xyXG5IVE1MRU1lbnVFbGVtZW50QmFzZSA9IEhUTUxFTWVudUVsZW1lbnRCYXNlXzEgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS1tZW51XCJcclxuICAgIH0pXHJcbl0sIEhUTUxFTWVudUVsZW1lbnRCYXNlKTtcclxudmFyIEhUTUxFTWVudUVsZW1lbnQgPSBIVE1MRU1lbnVFbGVtZW50QmFzZTtcclxudmFyIEVNZW51ID0gY29uc3RydWN0b3IoSFRNTEVNZW51RWxlbWVudC5wcm90b3R5cGUsIChpbml0KSA9PiB7XHJcbiAgICBjb25zdCB7IG5hbWUsIGNoaWxkcmVuIH0gPSBpbml0O1xyXG4gICAgcmV0dXJuIGVsZW1lbnQoXCJlLW1lbnVcIiwge1xyXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgICAgdGFiaW5kZXg6IC0xLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hpbGRyZW46IGNoaWxkcmVuXHJcbiAgICB9KTtcclxufSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1lbnUuanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgREVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fT1VUTElORV9DT0xPUiB9IGZyb20gXCIuLi8uLi8uLi9zdHlsZXNoZWV0cy9UaGVtZVwiO1xyXG5pbXBvcnQgeyBDdXN0b21FbGVtZW50LCBBdHRyaWJ1dGVQcm9wZXJ0eSwgZWxlbWVudCB9IGZyb20gXCIuLi8uLi9FbGVtZW50XCI7XHJcbmltcG9ydCB7IEhUTUxFTWVudUl0ZW1FbGVtZW50IH0gZnJvbSBcIi4vTWVudUl0ZW1cIjtcclxuaW1wb3J0IHsgSFRNTEVNZW51SXRlbUdyb3VwRWxlbWVudCB9IGZyb20gXCIuL01lbnVJdGVtR3JvdXBcIjtcclxuaW1wb3J0IFwiLi9NZW51XCI7XHJcbmltcG9ydCBcIi4vTWVudUl0ZW1cIjtcclxuaW1wb3J0IFwiLi9NZW51SXRlbUdyb3VwXCI7XHJcbmV4cG9ydCB7IEhUTUxFTWVudUJhckVsZW1lbnQgfTtcclxudmFyIHNoYWRvd1RlbXBsYXRlO1xyXG52YXIgc3R5bGU7XHJcbmxldCBIVE1MRU1lbnVCYXJFbGVtZW50QmFzZSA9IGNsYXNzIEhUTUxFTWVudUJhckVsZW1lbnRCYXNlIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgI2FjdGl2ZUluZGV4O1xyXG4gICAgI3dhbGtlcjtcclxuICAgIHN0YXRpYyB7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUgPSBlbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUuY29udGVudC5hcHBlbmQoZWxlbWVudChcInNsb3RcIikpO1xyXG4gICAgICAgIHN0eWxlID0gLypjc3MqLyBgXHJcbiAgICAgICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IG1heC1jb250ZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdCg6Zm9jdXMpIHtcclxuICAgICAgICAgICAgICAgIG91dGxpbmU6IDFweCBzb2xpZCB2YXIoLS10aGVtZS1mb2N1c2VkLWl0ZW0tb3V0bGluZS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SfSk7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lLW9mZnNldDogLTFweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuI3dhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIodGhpcywgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQsIHRoaXMuI3dhbGtlck5vZGVGaWx0ZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy4jYWN0aXZlSW5kZXggPSAtMTtcclxuICAgICAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgICAgICBjb25zdCBhZG9wdGVkU3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgYWRvcHRlZFN0eWxlc2hlZXQucmVwbGFjZShzdHlsZSk7XHJcbiAgICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbYWRvcHRlZFN0eWxlc2hlZXRdO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kKHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLiNoYW5kbGVDbGlja0V2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMuI2hhbmRsZUZvY3VzRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCB0aGlzLiNoYW5kbGVGb2N1c0luRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNvdXRcIiwgdGhpcy4jaGFuZGxlRm9jdXNPdXRFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgdGhpcy4jaGFuZGxlTW91c2VPdmVyRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLiNoYW5kbGVLZXlEb3duRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgICAgICBjb25zdCB0YWJpbmRleCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIik7XHJcbiAgICAgICAgdGhpcy50YWJJbmRleCA9IHRhYmluZGV4ICE9PSBudWxsID8gcGFyc2VJbnQodGFiaW5kZXgpIDogLTE7XHJcbiAgICB9XHJcbiAgICBpdGVtcygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6aXMoOnNjb3BlLCA6c2NvcGUgPiBlLW1lbnVpdGVtZ3JvdXApID4gZS1tZW51aXRlbVwiKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYWN0aXZlSW5kZXgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2FjdGl2ZUluZGV4O1xyXG4gICAgfVxyXG4gICAgZ2V0IGFjdGl2ZUl0ZW0oKSB7XHJcbiAgICAgICAgY29uc3QgeyBhY3RpdmVJbmRleCB9ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gKHRoaXMucXVlcnlTZWxlY3RvcihcIjppcyg6c2NvcGUsIDpzY29wZSA+IGUtbWVudWl0ZW1ncm91cCkgPiBlLW1lbnVpdGVtOmZvY3VzLXdpdGhpblwiKSA/PyBhY3RpdmVJbmRleCA+IC0xKSA/IHRoaXMuaXRlbXMoKVthY3RpdmVJbmRleF0gPz8gbnVsbCA6IG51bGw7XHJcbiAgICB9XHJcbiAgICAjd2Fsa2VyTm9kZUZpbHRlcihub2RlKSB7XHJcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MRU1lbnVJdGVtRWxlbWVudCAmJiAhKG5vZGUuZGlzYWJsZWQgfHwgbm9kZS5oaWRkZW4pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOb2RlRmlsdGVyLkZJTFRFUl9BQ0NFUFQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTEVNZW51SXRlbUdyb3VwRWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTm9kZUZpbHRlci5GSUxURVJfU0tJUDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX1JFSkVDVDtcclxuICAgIH1cclxuICAgIGZpcnN0SXRlbSgpIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gd2Fsa2VyLnJvb3Q7XHJcbiAgICAgICAgcmV0dXJuIHdhbGtlci5maXJzdENoaWxkKCk7XHJcbiAgICB9XHJcbiAgICAjbGFzdEl0ZW0oKSB7XHJcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHdhbGtlci5yb290O1xyXG4gICAgICAgIHJldHVybiB3YWxrZXIubGFzdENoaWxkKCk7XHJcbiAgICB9XHJcbiAgICAjcHJldmlvdXNJdGVtKGl0ZW0pIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gaXRlbTtcclxuICAgICAgICByZXR1cm4gd2Fsa2VyLnByZXZpb3VzU2libGluZygpO1xyXG4gICAgfVxyXG4gICAgI25leHRJdGVtKGl0ZW0pIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gaXRlbTtcclxuICAgICAgICByZXR1cm4gd2Fsa2VyLm5leHRTaWJsaW5nKCk7XHJcbiAgICB9XHJcbiAgICAjZmlyc3RDaGlsZEl0ZW0oaXRlbSkge1xyXG4gICAgICAgIGNvbnN0IHsgbWVudSB9ID0gaXRlbTtcclxuICAgICAgICBpZiAobWVudSkge1xyXG4gICAgICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IG1lbnU7XHJcbiAgICAgICAgICAgIHJldHVybiB3YWxrZXIuZmlyc3RDaGlsZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgICNzZXRBY3RpdmVJdGVtKGl0ZW0pIHtcclxuICAgICAgICBjb25zdCB7IGFjdGl2ZUl0ZW0sIGV4cGFuZGVkIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChhY3RpdmVJdGVtICE9PSBudWxsICYmIGFjdGl2ZUl0ZW0gIT09IGl0ZW0pIHtcclxuICAgICAgICAgICAgYWN0aXZlSXRlbS5jb2xsYXBzZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXRlbSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uZXhwYW5kKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy4jYWN0aXZlSW5kZXggPSB0aGlzLml0ZW1zKCkuaW5kZXhPZihpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuI2FjdGl2ZUluZGV4ID0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0ICNpdGVtcygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6aXMoOnNjb3BlLCA6c2NvcGUgPiBlLW1lbnVpdGVtZ3JvdXApID4gZS1tZW51aXRlbVwiKSk7XHJcbiAgICB9XHJcbiAgICAjaXNDbG9zZXN0TWVudSh0YXJnZXQpIHtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0LmNsb3Nlc3QoXCI6aXMoZS1tZW51YmFyLCBlLW1lbnUpXCIpID09IHRoaXM7XHJcbiAgICB9XHJcbiAgICAjbmVhcmVzdEl0ZW0odGFyZ2V0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2l0ZW1zLmZpbmQoaXRlbV9pID0+IGl0ZW1faS5jb250YWlucyh0YXJnZXQpKSA/PyBudWxsO1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZUZvY3VzRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHJlbGF0ZWRUYXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgYWN0aXZlSXRlbSB9ID0gdGhpcztcclxuICAgICAgICBpZiAoIXRoaXMuY29udGFpbnMocmVsYXRlZFRhcmdldCkpIHtcclxuICAgICAgICAgICAgKGFjdGl2ZUl0ZW0gPz8gdGhpcy5maXJzdEl0ZW0oKSk/LmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZUZvY3VzSW5FdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgRWxlbWVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBuZWFyZXN0SXRlbSA9IHRoaXMuI25lYXJlc3RJdGVtKHRhcmdldCk7XHJcbiAgICAgICAgICAgIHRoaXMuI3NldEFjdGl2ZUl0ZW0obmVhcmVzdEl0ZW0pO1xyXG4gICAgICAgICAgICB0aGlzLnRhYkluZGV4ID0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZUZvY3VzT3V0RXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCwgcmVsYXRlZFRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5lYXJlc3RJdGVtID0gdGhpcy4jbmVhcmVzdEl0ZW0odGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYgKG5lYXJlc3RJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBuZWFyZXN0SXRlbS5jb2xsYXBzZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxvc3RGb2N1c1dpdGhpbiA9ICF0aGlzLmNvbnRhaW5zKHJlbGF0ZWRUYXJnZXQpO1xyXG4gICAgICAgIGlmIChsb3N0Rm9jdXNXaXRoaW4pIHtcclxuICAgICAgICAgICAgdGhpcy5leHBhbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnRhYkluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlTW91c2VPdmVyRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgeyBleHBhbmRlZCwgYWN0aXZlSXRlbSB9ID0gdGhpcztcclxuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVNZW51SXRlbUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgaXNDbG9zZXN0TWVudSA9IHRoaXMuI2lzQ2xvc2VzdE1lbnUodGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYgKGlzQ2xvc2VzdE1lbnUgJiYgdGFyZ2V0ICE9PSBhY3RpdmVJdGVtICYmIGV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IG1lbnUgfSA9IHRhcmdldDtcclxuICAgICAgICAgICAgICAgIGlmIChtZW51KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmV4cGFuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbnUuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZUNsaWNrRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgeyBleHBhbmRlZCwgYWN0aXZlSXRlbSB9ID0gdGhpcztcclxuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVNZW51SXRlbUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgaXNDbG9zZXN0TWVudSA9IHRoaXMuI2lzQ2xvc2VzdE1lbnUodGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYgKGlzQ2xvc2VzdE1lbnUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzRXhwYW5kZWQgPSAhZXhwYW5kZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZGVkID0gaXNFeHBhbmRlZDtcclxuICAgICAgICAgICAgICAgIGlmIChpc0V4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUl0ZW0gJiYgIWFjdGl2ZUl0ZW0uZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlSXRlbS5leHBhbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtZW51IH0gPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVudT8uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlSXRlbS5jb2xsYXBzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVJdGVtLmJsdXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlS2V5RG93bkV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgZXhwYW5kZWQgfSA9IHRoaXM7XHJcbiAgICAgICAgbGV0IHsgYWN0aXZlSXRlbSB9ID0gdGhpcztcclxuICAgICAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzSXRlbSA9IGFjdGl2ZUl0ZW0gP1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3ByZXZpb3VzSXRlbShhY3RpdmVJdGVtKSA/PyB0aGlzLiNsYXN0SXRlbSgpIDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcnN0SXRlbSgpO1xyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNJdGVtPy5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAoeyBhY3RpdmVJdGVtIH0gPSB0aGlzKTtcclxuICAgICAgICAgICAgICAgIGlmIChleHBhbmRlZCAmJiBhY3RpdmVJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3RDaGlsZEl0ZW0gPSB0aGlzLiNmaXJzdENoaWxkSXRlbShhY3RpdmVJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdENoaWxkSXRlbT8uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjoge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dEl0ZW0gPSBhY3RpdmVJdGVtID9cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNuZXh0SXRlbShhY3RpdmVJdGVtKSA/PyB0aGlzLmZpcnN0SXRlbSgpIDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNsYXN0SXRlbSgpO1xyXG4gICAgICAgICAgICAgICAgbmV4dEl0ZW0/LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICh7IGFjdGl2ZUl0ZW0gfSA9IHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4cGFuZGVkICYmIGFjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdENoaWxkSXRlbSA9IHRoaXMuI2ZpcnN0Q2hpbGRJdGVtKGFjdGl2ZUl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0Q2hpbGRJdGVtPy5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiRW50ZXJcIjpcclxuICAgICAgICAgICAgY2FzZSBcIiBcIjoge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZGVkID0gIWV4cGFuZGVkO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3RDaGlsZEl0ZW0gPSB0aGlzLiNmaXJzdENoaWxkSXRlbShhY3RpdmVJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDaGlsZEl0ZW0/LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiRXNjYXBlXCI6IHtcclxuICAgICAgICAgICAgICAgIGlmIChleHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVJdGVtLmNvbGxhcHNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUl0ZW0uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KVxyXG5dLCBIVE1MRU1lbnVCYXJFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KVxyXG5dLCBIVE1MRU1lbnVCYXJFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiZXhwYW5kZWRcIiwgdm9pZCAwKTtcclxuSFRNTEVNZW51QmFyRWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS1tZW51YmFyXCJcclxuICAgIH0pXHJcbl0sIEhUTUxFTWVudUJhckVsZW1lbnRCYXNlKTtcclxudmFyIEhUTUxFTWVudUJhckVsZW1lbnQgPSBIVE1MRU1lbnVCYXJFbGVtZW50QmFzZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWVudUJhci5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG5pbXBvcnQgeyBERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SLCBERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9DT0xPUiwgREVGQVVMVF9USEVNRV9IT1ZFUkVEX0lURU1fQ09MT1IgfSBmcm9tIFwiLi4vLi4vLi4vc3R5bGVzaGVldHMvVGhlbWVcIjtcclxuaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCwgQXR0cmlidXRlUHJvcGVydHksIGVsZW1lbnQsIFF1ZXJ5UHJvcGVydHkgfSBmcm9tIFwiLi4vLi4vRWxlbWVudFwiO1xyXG5pbXBvcnQgXCIuL01lbnVcIjtcclxuaW1wb3J0IFwiLi9NZW51SXRlbVwiO1xyXG5pbXBvcnQgXCIuL01lbnVJdGVtR3JvdXBcIjtcclxuaW1wb3J0IHsgY29uc3RydWN0b3IgfSBmcm9tIFwiLi4vLi4vU25pcHBldHNcIjtcclxuZXhwb3J0IHsgSFRNTEVNZW51QnV0dG9uRWxlbWVudCB9O1xyXG5leHBvcnQgeyBFTWVudUJ1dHRvbiB9O1xyXG52YXIgc2hhZG93VGVtcGxhdGU7XHJcbnZhciBzdHlsZTtcclxubGV0IEhUTUxFTWVudUJ1dHRvbkVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVNZW51QnV0dG9uRWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBzdGF0aWMge1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlID0gZWxlbWVudChcInRlbXBsYXRlXCIpO1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuYXBwZW5kKGVsZW1lbnQoXCJzbG90XCIpLCBlbGVtZW50KFwic2xvdFwiLCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwibWVudVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgc3R5bGUgPSAvKmNzcyovIGBcclxuICAgICAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMnB4O1xyXG4gICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE4cHg7XHJcbiAgICAgICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KDpmb2N1cykge1xyXG4gICAgICAgICAgICAgICAgb3V0bGluZTogMXB4IHNvbGlkIHZhcigtLXRoZW1lLWZvY3VzZWQtaXRlbS1vdXRsaW5lLWNvbG9yLCAke0RFRkFVTFRfVEhFTUVfRk9DVVNFRF9JVEVNX09VVExJTkVfQ09MT1J9KTtcclxuICAgICAgICAgICAgICAgIG91dGxpbmUtb2Zmc2V0OiAtMXB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdCg6Zm9jdXMtd2l0aGluOm5vdCg6Zm9jdXMpKSB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10aGVtZS1mb2N1c2VkLWl0ZW0tY29sb3IsICR7REVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fQ09MT1J9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoOmhvdmVyOm5vdCg6Zm9jdXMtd2l0aGluKSkge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGhlbWUtaG92ZXJlZC1pdGVtLWNvbG9yLCAke0RFRkFVTFRfVEhFTUVfSE9WRVJFRF9JVEVNX0NPTE9SfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KFtkaXNhYmxlZF0pIHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBsaWdodGdyYXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDo6c2xvdHRlZChbc2xvdD1cIm1lbnVcIl0pIHtcclxuICAgICAgICAgICAgICAgIHotaW5kZXg6IDE7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogaW5pdGlhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoOm5vdChbZXhwYW5kZWRdKSkgOjpzbG90dGVkKFtzbG90PVwibWVudVwiXSkge1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdDo6YWZ0ZXIge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDE4cHg7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4cHg7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiBcIuKWvlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICAgICAgY29uc3QgYWRvcHRlZFN0eWxlc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xyXG4gICAgICAgIGFkb3B0ZWRTdHlsZXNoZWV0LnJlcGxhY2Uoc3R5bGUpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW2Fkb3B0ZWRTdHlsZXNoZWV0XTtcclxuICAgICAgICBzaGFkb3dSb290LmFwcGVuZChzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLiNoYW5kbGVLZXlEb3duRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy4jaGFuZGxlQ2xpY2tFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCB0aGlzLiNoYW5kbGVGb2N1c091dEV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgY29uc3QgdGFiaW5kZXggPSB0aGlzLmdldEF0dHJpYnV0ZShcInRhYmluZGV4XCIpO1xyXG4gICAgICAgIHRoaXMudGFiSW5kZXggPSB0YWJpbmRleCAhPT0gbnVsbCA/IHBhcnNlSW50KHRhYmluZGV4KSA6IC0xO1xyXG4gICAgfVxyXG4gICAgdG9nZ2xlKGZvcmNlKSB7XHJcbiAgICAgICAgY29uc3QgeyBleHBhbmRlZCB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBleHBhbmQgPSBmb3JjZSA/PyAhZXhwYW5kZWQ7XHJcbiAgICAgICAgZXhwYW5kID8gdGhpcy5leHBhbmQoKSA6IHRoaXMuY29sbGFwc2UoKTtcclxuICAgIH1cclxuICAgIGV4cGFuZCgpIHtcclxuICAgICAgICBjb25zdCB7IGV4cGFuZGVkIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmICghZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuI3Bvc2l0aW9uTWVudSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbGxhcHNlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgZXhwYW5kZWQgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjcG9zaXRpb25NZW51KCkge1xyXG4gICAgICAgIGNvbnN0IHsgbWVudSB9ID0gdGhpcztcclxuICAgICAgICBpZiAobWVudSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc3R5bGU6IG1lbnVTdHlsZSB9ID0gbWVudTtcclxuICAgICAgICAgICAgY29uc3QgeyB3aWR0aDogbWVudVdpZHRoLCBoZWlnaHQ6IG1lbnVIZWlnaHQgfSA9IG1lbnUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY2xpZW50V2lkdGgsIGNsaWVudEhlaWdodCB9ID0gZG9jdW1lbnQuYm9keTtcclxuICAgICAgICAgICAgY29uc3QgeyBvZmZzZXRMZWZ0LCBvZmZzZXRUb3AgfSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGNvbnN0IG92ZXJmbG93WCA9IG9mZnNldExlZnQgKyB3aWR0aCArIG1lbnVXaWR0aCAtIGNsaWVudFdpZHRoO1xyXG4gICAgICAgICAgICBjb25zdCBvdmVyZmxvd1kgPSBvZmZzZXRUb3AgKyBtZW51SGVpZ2h0IC0gY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgICAgICBtZW51U3R5bGUuc2V0UHJvcGVydHkoXCJsZWZ0XCIsIGAke292ZXJmbG93WCA+IDAgP1xyXG4gICAgICAgICAgICAgICAgd2lkdGggLSBtZW51V2lkdGggOlxyXG4gICAgICAgICAgICAgICAgMH1weGApO1xyXG4gICAgICAgICAgICBtZW51U3R5bGUuc2V0UHJvcGVydHkoXCJ0b3BcIiwgYCR7b3ZlcmZsb3dZID4gMCA/XHJcbiAgICAgICAgICAgICAgICAtbWVudUhlaWdodCA6XHJcbiAgICAgICAgICAgICAgICBoZWlnaHR9cHhgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlQ2xpY2tFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB7IG1lbnUgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKG1lbnUgJiYgIW1lbnUuY29udGFpbnModGFyZ2V0KSkge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZSgpO1xyXG4gICAgICAgICAgICBjb25zdCB7IGV4cGFuZGVkIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICBpZiAoZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgIG1lbnU/LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVGb2N1c091dEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyByZWxhdGVkVGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCBsb3N0Rm9jdXNXaXRoaW4gPSAhdGhpcy5jb250YWlucyhyZWxhdGVkVGFyZ2V0KTtcclxuICAgICAgICBpZiAobG9zdEZvY3VzV2l0aGluKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlS2V5RG93bkV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgZXhwYW5kZWQgfSA9IHRoaXM7XHJcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuICAgICAgICAgICAgY2FzZSBcIkFycm93RG93blwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiRW50ZXJcIjpcclxuICAgICAgICAgICAgICAgIGlmICghZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RJdGVtPy5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkVzY2FwZVwiOlxyXG4gICAgICAgICAgICAgICAgaWYgKGV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBRdWVyeVByb3BlcnR5KHsgc2VsZWN0b3I6IFwiOnNjb3BlID4gZS1tZW51W3Nsb3Q9bWVudV1cIiB9KVxyXG5dLCBIVE1MRU1lbnVCdXR0b25FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibWVudVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIFF1ZXJ5UHJvcGVydHkoeyBzZWxlY3RvcjogXCI6c2NvcGUgPiBlLW1lbnVbc2xvdD1tZW51XSBlLW1lbnVpdGVtXCIgfSlcclxuXSwgSFRNTEVNZW51QnV0dG9uRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImZpcnN0SXRlbVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pXHJcbl0sIEhUTUxFTWVudUJ1dHRvbkVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJuYW1lXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pXHJcbl0sIEhUTUxFTWVudUJ1dHRvbkVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KVxyXG5dLCBIVE1MRU1lbnVCdXR0b25FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiZXhwYW5kZWRcIiwgdm9pZCAwKTtcclxuSFRNTEVNZW51QnV0dG9uRWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS1tZW51YnV0dG9uXCJcclxuICAgIH0pXHJcbl0sIEhUTUxFTWVudUJ1dHRvbkVsZW1lbnRCYXNlKTtcclxudmFyIEhUTUxFTWVudUJ1dHRvbkVsZW1lbnQgPSBIVE1MRU1lbnVCdXR0b25FbGVtZW50QmFzZTtcclxudmFyIEVNZW51QnV0dG9uID0gY29uc3RydWN0b3IoSFRNTEVNZW51QnV0dG9uRWxlbWVudC5wcm90b3R5cGUsIChpbml0KSA9PiB7XHJcbiAgICBjb25zdCB7IG1lbnUgfSA9IGluaXQ7XHJcbiAgICBtZW51LnNsb3QgPSBcIm1lbnVcIjtcclxuICAgIHJldHVybiBlbGVtZW50KFwiZS1tZW51YnV0dG9uXCIsIHtcclxuICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgIHRhYmluZGV4OiAtMVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hpbGRyZW46IFttZW51XVxyXG4gICAgfSk7XHJcbn0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1NZW51QnV0dG9uLmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbmltcG9ydCB7IERFRkFVTFRfVEhFTUVfQ0hFQ0tFRF9JTUFHRSwgREVGQVVMVF9USEVNRV9BQ1RJVkFURURfSVRFTV9DT0xPUiwgREVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fQ09MT1IsIERFRkFVTFRfVEhFTUVfSE9WRVJFRF9JVEVNX0NPTE9SLCBERUZBVUxUX1RIRU1FX0FSUk9XX1JJR0hUX0lNQUdFIH0gZnJvbSBcIi4uLy4uLy4uL3N0eWxlc2hlZXRzL1RoZW1lXCI7XHJcbmltcG9ydCB7IEN1c3RvbUVsZW1lbnQsIEF0dHJpYnV0ZVByb3BlcnR5LCBRdWVyeVByb3BlcnR5LCBlbGVtZW50IH0gZnJvbSBcIi4uLy4uL0VsZW1lbnRcIjtcclxuaW1wb3J0IHsgY29uc3RydWN0b3IgfSBmcm9tIFwiLi4vLi4vU25pcHBldHNcIjtcclxuZXhwb3J0IHsgSFRNTEVNZW51SXRlbUVsZW1lbnQgfTtcclxuZXhwb3J0IHsgRU1lbnVJdGVtIH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG5sZXQgSFRNTEVNZW51SXRlbUVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVNZW51SXRlbUVsZW1lbnRCYXNlIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgaW50ZXJuYWxzO1xyXG4gICAgc3RhdGljIHtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZSA9IGVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmFwcGVuZChlbGVtZW50KFwic3BhblwiLCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgIHBhcnQ6IFwiaWNvblwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSwgZWxlbWVudChcInNwYW5cIiwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0OiBcImxhYmVsXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJzbG90XCIpXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KSwgZWxlbWVudChcInNwYW5cIiwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0OiBcImFycm93XCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLCBlbGVtZW50KFwic2xvdFwiLCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwibWVudVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgc3R5bGUgPSAvKmNzcyovIGBcclxuICAgICAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KFtkaXNhYmxlZF0pIHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMzg7XHJcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoOmZvY3VzLXdpdGhpbikge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9DT0xPUn07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KDppcyhbdHlwZT1cIm1lbnVcIl0sIFt0eXBlPVwic3VibWVudVwiXSkpIDo6c2xvdHRlZChbc2xvdD1cIm1lbnVcIl0pIHtcclxuICAgICAgICAgICAgICAgIHotaW5kZXg6IDE7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KDppcyhbdHlwZT1cIm1lbnVcIl0sIFt0eXBlPVwic3VibWVudVwiXSk6bm90KFtleHBhbmRlZF0pKSA6OnNsb3R0ZWQoW3Nsb3Q9XCJtZW51XCJdKSB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMDtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMDtcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xyXG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdChbdHlwZT1cInN1Ym1lbnVcIl0pIFtwYXJ0PVwiaWNvblwiXSB7XHJcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KFt0eXBlPVwibWVudVwiXSkgW3BhcnQ9XCJpY29uXCJdLFxyXG4gICAgICAgICAgICA6aG9zdCg6bm90KFt0eXBlPVwic3VibWVudVwiXSkpIFtwYXJ0PVwiYXJyb3dcIl0ge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoOmlzKFt0eXBlPVwiY2hlY2tib3hcIl0sIFt0eXBlPVwicmFkaW9cIl0pW2NoZWNrZWRdKSBbcGFydD1cImljb25cIl06OmJlZm9yZSB7XHJcbiAgICAgICAgICAgICAgICAtd2Via2l0LW1hc2staW1hZ2U6IHZhcigtLXRoZW1lLWFycm93LWRvbmUtaW1hZ2UsIHVybCgke0RFRkFVTFRfVEhFTUVfQ0hFQ0tFRF9JTUFHRX0pKTtcclxuICAgICAgICAgICAgICAgIG1hc2staW1hZ2U6IHZhcigtLXRoZW1lLWFycm93LWRvbmUtaW1hZ2UsIHVybCgke0RFRkFVTFRfVEhFTUVfQ0hFQ0tFRF9JTUFHRX0pKTtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdChbdHlwZT1cInN1Ym1lbnVcIl0pIFtwYXJ0PVwiYXJyb3dcIl06OmFmdGVyIHtcclxuICAgICAgICAgICAgICAgIC13ZWJraXQtbWFzay1pbWFnZTogdmFyKC0tdGhlbWUtYXJyb3ctcmlnaHQtaW1hZ2UsIHVybCgke0RFRkFVTFRfVEhFTUVfQVJST1dfUklHSFRfSU1BR0V9KSk7XHJcbiAgICAgICAgICAgICAgICBtYXNrLWltYWdlOiB2YXIoLS10aGVtZS1hcnJvdy1yaWdodC1pbWFnZSwgdXJsKCR7REVGQVVMVF9USEVNRV9BUlJPV19SSUdIVF9JTUFHRX0pKTtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBbcGFydD1cImljb25cIl0sXHJcbiAgICAgICAgICAgIFtwYXJ0PVwibGFiZWxcIl0sXHJcbiAgICAgICAgICAgIFtwYXJ0PVwiYXJyb3dcIl0ge1xyXG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFtwYXJ0PVwiaWNvblwiXSB7XHJcbiAgICAgICAgICAgICAgICBmbGV4OiBub25lO1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDE4cHg7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4cHg7XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHg7XHJcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFtwYXJ0PVwibGFiZWxcIl0ge1xyXG4gICAgICAgICAgICAgICAgZmxleDogYXV0bztcclxuICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxOHB4O1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMnB4O1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDhweDtcclxuICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdCg6aXMoOm5vdChbdHlwZV0pLCBbdHlwZT1cImJ1dHRvblwiXSwgW3R5cGU9XCJyYWRpb1wiXSwgW3R5cGU9XCJjaGVja2JveFwiXSlbY2hlY2tlZF0pIFtwYXJ0PVwiaWNvblwiXSB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10aGVtZS1hY3RpdmF0ZWQtaXRlbS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX0FDVElWQVRFRF9JVEVNX0NPTE9SfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KDppcyg6bm90KFt0eXBlXSksIFt0eXBlPVwiYnV0dG9uXCJdLCBbdHlwZT1cInJhZGlvXCJdLCBbdHlwZT1cImNoZWNrYm94XCJdKSkgW3BhcnQ9XCJpY29uXCJdOjpiZWZvcmUge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDE4cHg7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4cHg7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiBcIlwiO1xyXG4gICAgICAgICAgICAgICAgbWFzay1zaXplOiAxOHB4IDE4cHg7XHJcbiAgICAgICAgICAgICAgICAtd2Via2l0LW1hc2stc2l6ZTogMThweCAxOHB4O1xyXG5cclxuICAgICAgICAgICAgICAgIG1hc2staW1hZ2U6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICAtd2Via2l0LW1hc2staW1hZ2U6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBub25lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBbcGFydD1cImFycm93XCJdIHtcclxuICAgICAgICAgICAgICAgIGZsZXg6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMThweDtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMThweDtcclxuICAgICAgICAgICAgICAgIG1hcmdpbjogMXB4IDRweCAxcHggMXB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBbcGFydD1cImFycm93XCJdOjphZnRlciB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMThweDtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMThweDtcclxuICAgICAgICAgICAgICAgIG1hcmdpbjogMXB4O1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogXCJcIjtcclxuICAgICAgICAgICAgICAgIG1hc2stc2l6ZTogMThweCAxOHB4O1xyXG4gICAgICAgICAgICAgICAgLXdlYmtpdC1tYXNrLXNpemU6IDE4cHggMThweDtcclxuXHJcbiAgICAgICAgICAgICAgICBtYXNrLWltYWdlOiBub25lO1xyXG4gICAgICAgICAgICAgICAgLXdlYmtpdC1tYXNrLWltYWdlOiBub25lO1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogbm9uZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgOmhvc3QoOmhvdmVyKTpob3N0LWNvbnRleHQoZS1tZW51YmFyOmZvY3VzKSxcclxuICAgICAgICAgICAgOmhvc3QoOmhvdmVyKTpob3N0LWNvbnRleHQoZS1tZW51YmFyOm5vdCg6Zm9jdXMtd2l0aGluKSkge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGhlbWUtaG92ZXJlZC1pdGVtLWNvbG9yLCAke0RFRkFVTFRfVEhFTUVfSE9WRVJFRF9JVEVNX0NPTE9SfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBjb25zdCBpbnRlcm5hbHMgPSB0aGlzLmF0dGFjaEludGVybmFscygpO1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxzID0gaW50ZXJuYWxzO1xyXG4gICAgICAgIGludGVybmFscy5yb2xlID0gXCJtZW51aXRlbVwiO1xyXG4gICAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgICAgIGNvbnN0IGFkb3B0ZWRTdHlsZXNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcclxuICAgICAgICBhZG9wdGVkU3R5bGVzaGVldC5yZXBsYWNlKHN0eWxlKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFthZG9wdGVkU3R5bGVzaGVldF07XHJcbiAgICAgICAgc2hhZG93Um9vdC5hcHBlbmQoc2hhZG93VGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgfVxyXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgY29uc3QgeyB0YWJJbmRleCB9ID0gdGhpcztcclxuICAgICAgICB0aGlzLnRhYkluZGV4ID0gdGFiSW5kZXg7XHJcbiAgICB9XHJcbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYXR0cmlidXRlTmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgY29uc3QgeyBpbnRlcm5hbHMgfSA9IHRoaXM7XHJcbiAgICAgICAgc3dpdGNoIChhdHRyaWJ1dGVOYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ0eXBlXCI6IHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2hlY2tib3hcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmFkaW9cIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbHMucm9sZSA9IGBtZW51aXRlbSR7bmV3VmFsdWV9YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJuYWxzLnJvbGUgPSBcIm1lbnVpdGVtXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJjaGVja2VkXCI6IHtcclxuICAgICAgICAgICAgICAgIGludGVybmFscy5hcmlhQ2hlY2tlZCA9IFN0cmluZyhuZXdWYWx1ZSAhPT0gbnVsbCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiZGlzYWJsZWRcIjoge1xyXG4gICAgICAgICAgICAgICAgaW50ZXJuYWxzLmFyaWFEaXNhYmxlZCA9IFN0cmluZyhuZXdWYWx1ZSAhPT0gbnVsbCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiZXhwYW5kZWRcIjoge1xyXG4gICAgICAgICAgICAgICAgaW50ZXJuYWxzLmFyaWFFeHBhbmRlZCA9IFN0cmluZyhuZXdWYWx1ZSAhPT0gbnVsbCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwibGFiZWxcIjoge1xyXG4gICAgICAgICAgICAgICAgaW50ZXJuYWxzLmFyaWFMYWJlbCA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0b2dnbGUoZm9yY2UpIHtcclxuICAgICAgICBjb25zdCB7IHR5cGUsIGV4cGFuZGVkIH0gPSB0aGlzO1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwibWVudVwiOlxyXG4gICAgICAgICAgICBjYXNlIFwic3VibWVudVwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleHBhbmQgPSBmb3JjZSA/PyAhZXhwYW5kZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZGVkID0gZXhwYW5kO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4cGFuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3Bvc2l0aW9uTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInRvZ2dsZVwiLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBleHBhbmQoKSB7XHJcbiAgICAgICAgY29uc3QgeyB0eXBlLCBleHBhbmRlZCB9ID0gdGhpcztcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcIm1lbnVcIjpcclxuICAgICAgICAgICAgY2FzZSBcInN1Ym1lbnVcIjoge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFleHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3Bvc2l0aW9uTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb2xsYXBzZSgpIHtcclxuICAgICAgICBjb25zdCB7IHR5cGUsIGV4cGFuZGVkIH0gPSB0aGlzO1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwibWVudVwiOlxyXG4gICAgICAgICAgICBjYXNlIFwic3VibWVudVwiOiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNwb3NpdGlvbk1lbnUoKSB7XHJcbiAgICAgICAgY29uc3QgeyBtZW51IH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChtZW51ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgY29uc3QgeyBzdHlsZTogbWVudVN0eWxlIH0gPSBtZW51O1xyXG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoOiBtZW51V2lkdGgsIGhlaWdodDogbWVudUhlaWdodCB9ID0gbWVudS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgY29uc3QgeyBjbGllbnRXaWR0aCwgY2xpZW50SGVpZ2h0IH0gPSBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgICAgICBjb25zdCB7IHR5cGUsIG9mZnNldExlZnQsIG9mZnNldFRvcCB9ID0gdGhpcztcclxuICAgICAgICAgICAgY29uc3Qgb3ZlcmZsb3dYID0gb2Zmc2V0TGVmdCArIHdpZHRoICsgbWVudVdpZHRoIC0gY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgIGNvbnN0IG92ZXJmbG93WSA9IG9mZnNldFRvcCArIG1lbnVIZWlnaHQgLSBjbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSBcIm1lbnVcIikge1xyXG4gICAgICAgICAgICAgICAgbWVudVN0eWxlLnNldFByb3BlcnR5KFwibGVmdFwiLCBgJHtvdmVyZmxvd1ggPiAwID9cclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRMZWZ0ICsgd2lkdGggLSBtZW51V2lkdGggOlxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldExlZnR9cHhgKTtcclxuICAgICAgICAgICAgICAgIG1lbnVTdHlsZS5zZXRQcm9wZXJ0eShcInRvcFwiLCBgJHtvdmVyZmxvd1kgPiAwID9cclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRUb3AgLSBtZW51SGVpZ2h0IDpcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRUb3AgKyBoZWlnaHR9cHhgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1lbnVTdHlsZS5zZXRQcm9wZXJ0eShcImxlZnRcIiwgYCR7b3ZlcmZsb3dYID4gMCA/XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0TGVmdCAtIG1lbnVXaWR0aCA6XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0TGVmdCArIHdpZHRofXB4YCk7XHJcbiAgICAgICAgICAgICAgICBtZW51U3R5bGUuc2V0UHJvcGVydHkoXCJ0b3BcIiwgYCR7b3ZlcmZsb3dZID4gMCA/XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0VG9wICsgaGVpZ2h0IC0gbWVudUhlaWdodCA6XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0VG9wfXB4YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgUXVlcnlQcm9wZXJ0eSh7IHNlbGVjdG9yOiBcIjpzY29wZSA+IGUtbWVudVtzbG90PW1lbnVdXCIgfSlcclxuXSwgSFRNTEVNZW51SXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJtZW51XCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSlcclxuXSwgSFRNTEVNZW51SXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJuYW1lXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIG9ic2VydmVkOiB0cnVlIH0pXHJcbl0sIEhUTUxFTWVudUl0ZW1FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibGFiZWxcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KVxyXG5dLCBIVE1MRU1lbnVJdGVtRWxlbWVudEJhc2UucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSlcclxuXSwgSFRNTEVNZW51SXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJob3RrZXlcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIG9ic2VydmVkOiB0cnVlIH0pXHJcbl0sIEhUTUxFTWVudUl0ZW1FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIG9ic2VydmVkOiB0cnVlIH0pXHJcbl0sIEhUTUxFTWVudUl0ZW1FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiY2hlY2tlZFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgb2JzZXJ2ZWQ6IHRydWUgfSlcclxuXSwgSFRNTEVNZW51SXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJleHBhbmRlZFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KVxyXG5dLCBIVE1MRU1lbnVJdGVtRWxlbWVudEJhc2UucHJvdG90eXBlLCBcIm92ZXJmbG93blwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0VmFsdWU6IFwiYnV0dG9uXCIsIG9ic2VydmVkOiB0cnVlIH0pXHJcbl0sIEhUTUxFTWVudUl0ZW1FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xyXG5IVE1MRU1lbnVJdGVtRWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS1tZW51aXRlbVwiXHJcbiAgICB9KVxyXG5dLCBIVE1MRU1lbnVJdGVtRWxlbWVudEJhc2UpO1xyXG52YXIgSFRNTEVNZW51SXRlbUVsZW1lbnQgPSBIVE1MRU1lbnVJdGVtRWxlbWVudEJhc2U7XHJcbnZhciBFTWVudUl0ZW0gPSBjb25zdHJ1Y3RvcihIVE1MRU1lbnVJdGVtRWxlbWVudC5wcm90b3R5cGUsIChpbml0KSA9PiB7XHJcbiAgICBjb25zdCB7IGxhYmVsLCBuYW1lLCB0eXBlLCB2YWx1ZSwgdHJpZ2dlciwgbWVudSB9ID0gaW5pdDtcclxuICAgIGlmIChtZW51KSB7XHJcbiAgICAgICAgbWVudS5zbG90ID0gXCJtZW51XCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZWxlbWVudChcImUtbWVudWl0ZW1cIiwge1xyXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgdGFiaW5kZXg6IC0xLFxyXG4gICAgICAgICAgICB0aXRsZTogbGFiZWwsXHJcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcclxuICAgICAgICAgICAgdHlwZTogdHlwZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hpbGRyZW46IG1lbnUgPyBbXHJcbiAgICAgICAgICAgIGxhYmVsLFxyXG4gICAgICAgICAgICBtZW51XHJcbiAgICAgICAgXSA6IFtcclxuICAgICAgICAgICAgbGFiZWxcclxuICAgICAgICBdLFxyXG4gICAgICAgIGxpc3RlbmVyczoge1xyXG4gICAgICAgICAgICBjbGljazogdHJpZ2dlclxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59LCB7XHJcbiAgICBidXR0b24oaW5pdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRU1lbnVJdGVtKHtcclxuICAgICAgICAgICAgLi4uaW5pdCwgdHlwZTogXCJidXR0b25cIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGNoZWNrYm94KGluaXQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVNZW51SXRlbSh7XHJcbiAgICAgICAgICAgIC4uLmluaXQsIHR5cGU6IFwiY2hlY2tib3hcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHJhZGlvKGluaXQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVNZW51SXRlbSh7XHJcbiAgICAgICAgICAgIC4uLmluaXQsIHR5cGU6IFwicmFkaW9cIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIG1lbnUoaW5pdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRU1lbnVJdGVtKHtcclxuICAgICAgICAgICAgLi4uaW5pdCwgdHlwZTogXCJtZW51XCJcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBzdWJtZW51KGluaXQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVNZW51SXRlbSh7XHJcbiAgICAgICAgICAgIC4uLmluaXQsIHR5cGU6IFwic3VibWVudVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1NZW51SXRlbS5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG5pbXBvcnQgeyBlbGVtZW50LCBDdXN0b21FbGVtZW50LCBBdHRyaWJ1dGVQcm9wZXJ0eSB9IGZyb20gXCIuLi8uLi9FbGVtZW50XCI7XHJcbmltcG9ydCB7IGNvbnN0cnVjdG9yIH0gZnJvbSBcIi4uLy4uL1NuaXBwZXRzXCI7XHJcbmltcG9ydCB7IEVNZW51SXRlbSB9IGZyb20gXCIuL01lbnVJdGVtXCI7XHJcbmltcG9ydCBcIi4vTWVudUl0ZW1cIjtcclxuZXhwb3J0IHsgSFRNTEVNZW51SXRlbUdyb3VwRWxlbWVudCB9O1xyXG5leHBvcnQgeyBFTWVudUl0ZW1Hcm91cCB9O1xyXG52YXIgc2hhZG93VGVtcGxhdGU7XHJcbnZhciBzdHlsZTtcclxubGV0IEhUTUxFTWVudUl0ZW1Hcm91cEVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVNZW51SXRlbUdyb3VwRWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBpbnRlcm5hbHM7XHJcbiAgICBzdGF0aWMge1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlID0gZWxlbWVudChcInRlbXBsYXRlXCIpO1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuYXBwZW5kKGVsZW1lbnQoXCJzcGFuXCIsIHtcclxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgcGFydDogXCJsYWJlbFwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSwgZWxlbWVudChcInNsb3RcIikpO1xyXG4gICAgICAgIHN0eWxlID0gLypjc3MqLyBgXHJcbiAgICAgICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBbcGFydD1cImxhYmVsXCJdIHtcclxuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdChbbGFiZWxdKSBbcGFydD1cImxhYmVsXCJdIHtcclxuICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA2cHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgICAgICBjb25zdCBhZG9wdGVkU3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgYWRvcHRlZFN0eWxlc2hlZXQucmVwbGFjZShzdHlsZSk7XHJcbiAgICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbYWRvcHRlZFN0eWxlc2hlZXRdO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kKHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgICAgICBjb25zdCBpbnRlcm5hbHMgPSB0aGlzLmF0dGFjaEludGVybmFscygpO1xyXG4gICAgICAgIGludGVybmFscy5yb2xlID0gXCJncm91cFwiO1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxzID0gaW50ZXJuYWxzO1xyXG4gICAgfVxyXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xyXG4gICAgICAgIGNvbnN0IHsgaW50ZXJuYWxzIH0gPSB0aGlzO1xyXG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwibGFiZWxcIjpcclxuICAgICAgICAgICAgICAgIGludGVybmFscy5hcmlhTGFiZWwgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KVxyXG5dLCBIVE1MRU1lbnVJdGVtR3JvdXBFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nLCBvYnNlcnZlZDogdHJ1ZSB9KVxyXG5dLCBIVE1MRU1lbnVJdGVtR3JvdXBFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibGFiZWxcIiwgdm9pZCAwKTtcclxuSFRNTEVNZW51SXRlbUdyb3VwRWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS1tZW51aXRlbWdyb3VwXCJcclxuICAgIH0pXHJcbl0sIEhUTUxFTWVudUl0ZW1Hcm91cEVsZW1lbnRCYXNlKTtcclxudmFyIEhUTUxFTWVudUl0ZW1Hcm91cEVsZW1lbnQgPSBIVE1MRU1lbnVJdGVtR3JvdXBFbGVtZW50QmFzZTtcclxudmFyIEVNZW51SXRlbUdyb3VwID0gY29uc3RydWN0b3IoSFRNTEVNZW51SXRlbUdyb3VwRWxlbWVudC5wcm90b3R5cGUsIChpbml0KSA9PiB7XHJcbiAgICBjb25zdCB7IG5hbWUsIGl0ZW1zIH0gPSBpbml0O1xyXG4gICAgcmV0dXJuIGVsZW1lbnQoXCJlLW1lbnVpdGVtZ3JvdXBcIiwge1xyXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgbmFtZTogbmFtZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hpbGRyZW46IGl0ZW1zXHJcbiAgICB9KTtcclxufSwge1xyXG4gICAgcmFkaW9zOiAoaW5pdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgbmFtZSwgaXRlbXMgfSA9IGluaXQ7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQoXCJlLW1lbnVpdGVtZ3JvdXBcIiwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNoaWxkcmVuOiBpdGVtcy5tYXAoKHsgbGFiZWwsIHZhbHVlIH0pID0+IG5ldyBFTWVudUl0ZW0oeyBuYW1lLCBsYWJlbCwgdHlwZTogXCJyYWRpb1wiLCB2YWx1ZSB9KSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1lbnVJdGVtR3JvdXAuanMubWFwIiwiaW1wb3J0IHsgSFRNTEVNZW51QmFyRWxlbWVudCB9IGZyb20gXCIuL01lbnVCYXJcIjtcclxuaW1wb3J0IHsgSFRNTEVNZW51QnV0dG9uRWxlbWVudCB9IGZyb20gXCIuL01lbnVCdXR0b25cIjtcclxuaW1wb3J0IHsgSFRNTEVNZW51RWxlbWVudCB9IGZyb20gXCIuL01lbnVcIjtcclxuaW1wb3J0IHsgSFRNTEVNZW51SXRlbUVsZW1lbnQgfSBmcm9tIFwiLi9NZW51SXRlbVwiO1xyXG5pbXBvcnQgeyBIVE1MRU1lbnVJdGVtR3JvdXBFbGVtZW50IH0gZnJvbSBcIi4vTWVudUl0ZW1Hcm91cFwiO1xyXG5leHBvcnQgeyBIVE1MRU1lbnVCYXJFbGVtZW50IH07XHJcbmV4cG9ydCB7IEhUTUxFTWVudUJ1dHRvbkVsZW1lbnQgfTtcclxuZXhwb3J0IHsgSFRNTEVNZW51RWxlbWVudCB9O1xyXG5leHBvcnQgeyBIVE1MRU1lbnVJdGVtRWxlbWVudCB9O1xyXG5leHBvcnQgeyBIVE1MRU1lbnVJdGVtR3JvdXBFbGVtZW50IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbmltcG9ydCB7IERFRkFVTFRfVEhFTUVfRk9DVVNFRF9JVEVNX09VVExJTkVfQ09MT1IgfSBmcm9tIFwiLi4vLi4vLi4vc3R5bGVzaGVldHMvVGhlbWVcIjtcclxuaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCwgZWxlbWVudCB9IGZyb20gXCIuLi8uLi9FbGVtZW50XCI7XHJcbmltcG9ydCB7IEhUTUxFU3RhdHVzSXRlbUVsZW1lbnQgfSBmcm9tIFwiLi9TdGF0dXNJdGVtXCI7XHJcbmltcG9ydCB7IEhUTUxFU3RhdHVzSXRlbUdyb3VwRWxlbWVudCB9IGZyb20gXCIuL1N0YXR1c0l0ZW1Hcm91cFwiO1xyXG5pbXBvcnQgXCIuL1N0YXR1c0l0ZW1cIjtcclxuaW1wb3J0IFwiLi9TdGF0dXNJdGVtR3JvdXBcIjtcclxuZXhwb3J0IHsgSFRNTEVTdGF0dXNCYXJFbGVtZW50IH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG5sZXQgSFRNTEVTdGF0dXNCYXJFbGVtZW50QmFzZSA9IGNsYXNzIEhUTUxFU3RhdHVzQmFyRWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBnZXQgYWN0aXZlSXRlbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiZS1zdGF0dXNpdGVtW2FjdGl2ZV1cIik7XHJcbiAgICB9XHJcbiAgICBpdGVtcygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6aXMoOnNjb3BlLCA6c2NvcGUgPiBlLXN0YXR1c2l0ZW1ncm91cCkgPiBlLXN0YXR1c2l0ZW1cIikpO1xyXG4gICAgfVxyXG4gICAgI3dhbGtlcjtcclxuICAgIHN0YXRpYyB7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUgPSBlbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUuY29udGVudC5hcHBlbmQoZWxlbWVudChcInNsb3RcIikpO1xyXG4gICAgICAgIHN0eWxlID0gLypjc3MqLyBgXHJcbiAgICAgICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICA6aG9zdCg6Zm9jdXMpIHtcclxuICAgICAgICAgICAgICAgIG91dGxpbmU6IDFweCBzb2xpZCB2YXIoLS10aGVtZS1mb2N1c2VkLWl0ZW0tb3V0bGluZS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SfSk7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lLW9mZnNldDogLTFweDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgOjpzbG90dGVkKGUtc3RhdHVzaXRlbTpub3QoOmZpcnN0LWNoaWxkKSkge1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDRweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuI3dhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIodGhpcywgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQsIHRoaXMuI25vZGVGaWx0ZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICAgICAgY29uc3QgYWRvcHRlZFN0eWxlc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xyXG4gICAgICAgIGFkb3B0ZWRTdHlsZXNoZWV0LnJlcGxhY2Uoc3R5bGUpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW2Fkb3B0ZWRTdHlsZXNoZWV0XTtcclxuICAgICAgICBzaGFkb3dSb290LmFwcGVuZChzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgdGhpcy4jaGFuZGxlQ29udGV4dE1lbnVFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCB0aGlzLiNoYW5kbGVEYmxDbGlja0V2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMuI2hhbmRsZUZvY3VzRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCB0aGlzLiNoYW5kbGVGb2N1c0luRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNvdXRcIiwgdGhpcy4jaGFuZGxlRm9jdXNPdXRFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuI2hhbmRsZUtleURvd25FdmVudC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFiSW5kZXggfSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy50YWJJbmRleCA9IHRhYkluZGV4O1xyXG4gICAgfVxyXG4gICAgI25vZGVGaWx0ZXIobm9kZSkge1xyXG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTEVTdGF0dXNJdGVtRWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTm9kZUZpbHRlci5GSUxURVJfQUNDRVBUO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxFU3RhdHVzSXRlbUdyb3VwRWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTm9kZUZpbHRlci5GSUxURVJfU0tJUDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX1JFSkVDVDtcclxuICAgIH1cclxuICAgIGZpcnN0SXRlbSgpIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gd2Fsa2VyLnJvb3Q7XHJcbiAgICAgICAgcmV0dXJuIHdhbGtlci5maXJzdENoaWxkKCk7XHJcbiAgICB9XHJcbiAgICAjbGFzdEl0ZW0oKSB7XHJcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHdhbGtlci5yb290O1xyXG4gICAgICAgIHJldHVybiB3YWxrZXIubGFzdENoaWxkKCk7XHJcbiAgICB9XHJcbiAgICAjcHJldmlvdXNJdGVtKGl0ZW0pIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gaXRlbTtcclxuICAgICAgICBjb25zdCBwcmV2aW91c0l0ZW0gPSB3YWxrZXIucHJldmlvdXNTaWJsaW5nKCk7XHJcbiAgICAgICAgcmV0dXJuIHByZXZpb3VzSXRlbTtcclxuICAgIH1cclxuICAgICNuZXh0SXRlbShpdGVtKSB7XHJcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IGl0ZW07XHJcbiAgICAgICAgcmV0dXJuIHdhbGtlci5uZXh0U2libGluZygpO1xyXG4gICAgfVxyXG4gICAgI3NldEFjdGl2ZUl0ZW0oaXRlbSkge1xyXG4gICAgICAgIGNvbnN0IHsgYWN0aXZlSXRlbSB9ID0gdGhpcztcclxuICAgICAgICBpZiAoYWN0aXZlSXRlbSAhPT0gbnVsbCAmJiBhY3RpdmVJdGVtICE9PSBpdGVtKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZUl0ZW0uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpdGVtICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlQ29udGV4dE1lbnVFdmVudChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZURibENsaWNrRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICAgICNoYW5kbGVGb2N1c0V2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyByZWxhdGVkVGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB7IGFjdGl2ZUl0ZW0gfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5zKHJlbGF0ZWRUYXJnZXQpKSB7XHJcbiAgICAgICAgICAgIChhY3RpdmVJdGVtID8/IHRoaXMuZmlyc3RJdGVtKCkpPy5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVGb2N1c0luRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0SXRlbSA9IHRhcmdldC5jbG9zZXN0KFwiZS1zdGF0dXNpdGVtXCIpO1xyXG4gICAgICAgIGlmICh0YXJnZXRJdGVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI3NldEFjdGl2ZUl0ZW0odGFyZ2V0SXRlbSk7XHJcbiAgICAgICAgICAgIHRoaXMudGFiSW5kZXggPSAtMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlRm9jdXNPdXRFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgcmVsYXRlZFRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgbG9zdEZvY3VzV2l0aGluID0gIXRoaXMuY29udGFpbnMocmVsYXRlZFRhcmdldCk7XHJcbiAgICAgICAgaWYgKGxvc3RGb2N1c1dpdGhpbikge1xyXG4gICAgICAgICAgICB0aGlzLnRhYkluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlS2V5RG93bkV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgYWN0aXZlSXRlbSB9ID0gdGhpcztcclxuICAgICAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiRW50ZXJcIjoge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVJdGVtLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6IHtcclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNJdGVtID0gdGhpcy4jcHJldmlvdXNJdGVtKGFjdGl2ZUl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0l0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNJdGVtLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdEl0ZW0gPSB0aGlzLmZpcnN0SXRlbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RJdGVtLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6IHtcclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dEl0ZW0gPSB0aGlzLiNuZXh0SXRlbShhY3RpdmVJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEl0ZW0uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RJdGVtID0gdGhpcy4jbGFzdEl0ZW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGFzdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEl0ZW0uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkhvbWVcIjoge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RJdGVtID0gdGhpcy5maXJzdEl0ZW0oKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdEl0ZW0uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiRW5kXCI6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RJdGVtID0gdGhpcy4jbGFzdEl0ZW0oKTtcclxuICAgICAgICAgICAgICAgIGlmIChsYXN0SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RJdGVtLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkVzY2FwZVwiOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbkhUTUxFU3RhdHVzQmFyRWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS1zdGF0dXNiYXJcIlxyXG4gICAgfSlcclxuXSwgSFRNTEVTdGF0dXNCYXJFbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRVN0YXR1c0JhckVsZW1lbnQgPSBIVE1MRVN0YXR1c0JhckVsZW1lbnRCYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdGF0dXNCYXIuanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgREVGQVVMVF9USEVNRV9IT1ZFUkVEX0lURU1fQ09MT1IsIERFRkFVTFRfVEhFTUVfRk9DVVNFRF9JVEVNX09VVExJTkVfQ09MT1IgfSBmcm9tIFwiLi4vLi4vLi4vc3R5bGVzaGVldHMvVGhlbWVcIjtcclxuaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCwgQXR0cmlidXRlUHJvcGVydHksIGVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vRWxlbWVudFwiO1xyXG5leHBvcnQgeyBIVE1MRVN0YXR1c0l0ZW1FbGVtZW50IH07XHJcbmV4cG9ydCB7IEVTdGF0dXNJdGVtIH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG5sZXQgSFRNTEVTdGF0dXNJdGVtRWxlbWVudEJhc2UgPSBjbGFzcyBIVE1MRVN0YXR1c0l0ZW1FbGVtZW50QmFzZSBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgIHN0YXRpYyB7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUgPSBlbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUuY29udGVudC5hcHBlbmQoZWxlbWVudChcInNwYW5cIiwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0OiBcImNvbnRlbnRcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjaGlsZHJlbjogZWxlbWVudChcInNsb3RcIilcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgc3R5bGUgPSAvKmNzcyovIGBcclxuICAgICAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdChbZGlzYWJsZWRdKSB7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjM4O1xyXG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KDpob3Zlcikge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGhlbWUtaG92ZXJlZC1pdGVtLWNvbG9yLCAke0RFRkFVTFRfVEhFTUVfSE9WRVJFRF9JVEVNX0NPTE9SfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KDpmb2N1cy13aXRoaW4pOmhvc3QtY29udGV4dChlLXN0YXR1c2Jhcjpmb2N1cy13aXRoaW4pIHtcclxuICAgICAgICAgICAgICAgIG91dGxpbmU6IDFweCBzb2xpZCB2YXIoLS10aGVtZS1mb2N1c2VkLWl0ZW0tb3V0bGluZS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SfSk7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lLW9mZnNldDogLTFweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgW3BhcnQ9XCJjb250ZW50XCJdIHtcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgNHB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICAgICAgY29uc3QgYWRvcHRlZFN0eWxlc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xyXG4gICAgICAgIGFkb3B0ZWRTdHlsZXNoZWV0LnJlcGxhY2Uoc3R5bGUpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW2Fkb3B0ZWRTdHlsZXNoZWV0XTtcclxuICAgICAgICBzaGFkb3dSb290LmFwcGVuZChzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICB9XHJcbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgICAgICBjb25zdCB7IHRhYkluZGV4IH0gPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudGFiSW5kZXggPSB0YWJJbmRleDtcclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSlcclxuXSwgSFRNTEVTdGF0dXNJdGVtRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImFjdGl2ZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pXHJcbl0sIEhUTUxFU3RhdHVzSXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJuYW1lXCIsIHZvaWQgMCk7XHJcbkhUTUxFU3RhdHVzSXRlbUVsZW1lbnRCYXNlID0gX19kZWNvcmF0ZShbXHJcbiAgICBDdXN0b21FbGVtZW50KHtcclxuICAgICAgICBuYW1lOiBcImUtc3RhdHVzaXRlbVwiXHJcbiAgICB9KVxyXG5dLCBIVE1MRVN0YXR1c0l0ZW1FbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRVN0YXR1c0l0ZW1FbGVtZW50ID0gSFRNTEVTdGF0dXNJdGVtRWxlbWVudEJhc2U7XHJcbnZhciBFU3RhdHVzSXRlbSA9IE9iamVjdC5hc3NpZ24oZnVuY3Rpb24gKGluaXQpIHtcclxuICAgIGNvbnN0IHsgbGFiZWwsIG5hbWUsIG9uY2xpY2sgfSA9IGluaXQ7XHJcbiAgICByZXR1cm4gZWxlbWVudChcImUtc3RhdHVzaXRlbVwiLCB7XHJcbiAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICB0aXRsZTogbGFiZWwsXHJcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGlsZHJlbjogbGFiZWwsXHJcbiAgICAgICAgbGlzdGVuZXJzOiB7XHJcbiAgICAgICAgICAgIGNsaWNrOiBvbmNsaWNrXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0sIHtcclxuICAgIHByb3RvdHlwZTogSFRNTEVTdGF0dXNJdGVtRWxlbWVudC5wcm90b3R5cGVcclxufSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0YXR1c0l0ZW0uanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgZWxlbWVudCwgQ3VzdG9tRWxlbWVudCwgQXR0cmlidXRlUHJvcGVydHkgfSBmcm9tIFwiLi4vLi4vRWxlbWVudFwiO1xyXG5pbXBvcnQgXCIuL1N0YXR1c0l0ZW1cIjtcclxuZXhwb3J0IHsgSFRNTEVTdGF0dXNJdGVtR3JvdXBFbGVtZW50IH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG5sZXQgSFRNTEVTdGF0dXNJdGVtR3JvdXBFbGVtZW50QmFzZSA9IGNsYXNzIEhUTUxFU3RhdHVzSXRlbUdyb3VwRWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBzdGF0aWMge1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlID0gZWxlbWVudChcInRlbXBsYXRlXCIpO1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuYXBwZW5kKGVsZW1lbnQoXCJzbG90XCIpKTtcclxuICAgICAgICBzdHlsZSA9IC8qY3NzKi8gYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IG1heC1jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgICAgIGNvbnN0IGFkb3B0ZWRTdHlsZXNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcclxuICAgICAgICBhZG9wdGVkU3R5bGVzaGVldC5yZXBsYWNlKHN0eWxlKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFthZG9wdGVkU3R5bGVzaGVldF07XHJcbiAgICAgICAgc2hhZG93Um9vdC5hcHBlbmQoc2hhZG93VGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgfVxyXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xyXG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwibGFiZWxcIjoge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIltwYXJ0PSdsYWJlbCddXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pXHJcbl0sIEhUTUxFU3RhdHVzSXRlbUdyb3VwRWxlbWVudEJhc2UucHJvdG90eXBlLCBcIm5hbWVcIiwgdm9pZCAwKTtcclxuSFRNTEVTdGF0dXNJdGVtR3JvdXBFbGVtZW50QmFzZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgbmFtZTogXCJlLXN0YXR1c2l0ZW1ncm91cFwiXHJcbiAgICB9KVxyXG5dLCBIVE1MRVN0YXR1c0l0ZW1Hcm91cEVsZW1lbnRCYXNlKTtcclxudmFyIEhUTUxFU3RhdHVzSXRlbUdyb3VwRWxlbWVudCA9IEhUTUxFU3RhdHVzSXRlbUdyb3VwRWxlbWVudEJhc2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0YXR1c0l0ZW1Hcm91cC5qcy5tYXAiLCJpbXBvcnQgeyBIVE1MRVN0YXR1c0JhckVsZW1lbnQgfSBmcm9tIFwiLi9TdGF0dXNCYXJcIjtcclxuaW1wb3J0IHsgSFRNTEVTdGF0dXNJdGVtRWxlbWVudCB9IGZyb20gXCIuL1N0YXR1c0l0ZW1cIjtcclxuaW1wb3J0IHsgSFRNTEVTdGF0dXNJdGVtR3JvdXBFbGVtZW50IH0gZnJvbSBcIi4vU3RhdHVzSXRlbUdyb3VwXCI7XHJcbmV4cG9ydCB7IEhUTUxFU3RhdHVzQmFyRWxlbWVudCB9O1xyXG5leHBvcnQgeyBIVE1MRVN0YXR1c0l0ZW1FbGVtZW50IH07XHJcbmV4cG9ydCB7IEhUTUxFU3RhdHVzSXRlbUdyb3VwRWxlbWVudCB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG5pbXBvcnQgeyBERUZBVUxUX1RIRU1FX0hPVkVSRURfSVRFTV9DT0xPUiB9IGZyb20gXCIuLi8uLi8uLi9zdHlsZXNoZWV0cy9UaGVtZVwiO1xyXG5pbXBvcnQgeyBDdXN0b21FbGVtZW50LCBBdHRyaWJ1dGVQcm9wZXJ0eSwgZWxlbWVudCB9IGZyb20gXCIuLi8uLi9FbGVtZW50XCI7XHJcbmltcG9ydCBcIi4vVGFiUGFuZWxcIjtcclxuZXhwb3J0IHsgSFRNTEVUYWJFbGVtZW50IH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG5sZXQgSFRNTEVUYWJFbGVtZW50QmFzZSA9IGNsYXNzIEhUTUxFVGFiRWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBnZXQgcGFuZWwoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250cm9scyB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCByb290Tm9kZSA9IHRoaXMuZ2V0Um9vdE5vZGUoKTtcclxuICAgICAgICBpZiAocm9vdE5vZGUgaW5zdGFuY2VvZiBEb2N1bWVudCB8fCByb290Tm9kZSBpbnN0YW5jZW9mIFNoYWRvd1Jvb3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJvb3ROb2RlLnF1ZXJ5U2VsZWN0b3IoYGUtdGFicGFuZWxbaWQ9JyR7Y29udHJvbHN9J11gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMge1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlID0gZWxlbWVudChcInRlbXBsYXRlXCIpO1xyXG4gICAgICAgIHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuYXBwZW5kKGVsZW1lbnQoXCJzbG90XCIpKTtcclxuICAgICAgICBzdHlsZSA9IC8qY3NzKi8gYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA0cHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KFtkaXNhYmxlZF0pIHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMzg7XHJcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoOmhvdmVyKSB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10aGVtZS1ob3ZlcmVkLWl0ZW0tY29sb3IsICR7REVGQVVMVF9USEVNRV9IT1ZFUkVEX0lURU1fQ09MT1J9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgICAgIGNvbnN0IGFkb3B0ZWRTdHlsZXNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcclxuICAgICAgICBhZG9wdGVkU3R5bGVzaGVldC5yZXBsYWNlKHN0eWxlKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFthZG9wdGVkU3R5bGVzaGVldF07XHJcbiAgICAgICAgc2hhZG93Um9vdC5hcHBlbmQoc2hhZG93VGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgfVxyXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgY29uc3QgeyB0YWJJbmRleCB9ID0gdGhpcztcclxuICAgICAgICB0aGlzLnRhYkluZGV4ID0gdGFiSW5kZXg7XHJcbiAgICB9XHJcbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzZWxlY3RlZFwiOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwic2VsZWN0XCIsIHsgYnViYmxlczogdHJ1ZSB9KSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNlbGVjdCgpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KVxyXG5dLCBIVE1MRVRhYkVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJuYW1lXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pXHJcbl0sIEhUTUxFVGFiRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImRpc2FibGVkXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIG9ic2VydmVkOiB0cnVlIH0pXHJcbl0sIEhUTUxFVGFiRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImNvbnRyb2xzXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pXHJcbl0sIEhUTUxFVGFiRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImFjdGl2ZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgb2JzZXJ2ZWQ6IHRydWUgfSlcclxuXSwgSFRNTEVUYWJFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwic2VsZWN0ZWRcIiwgdm9pZCAwKTtcclxuSFRNTEVUYWJFbGVtZW50QmFzZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgbmFtZTogXCJlLXRhYlwiXHJcbiAgICB9KVxyXG5dLCBIVE1MRVRhYkVsZW1lbnRCYXNlKTtcclxudmFyIEhUTUxFVGFiRWxlbWVudCA9IEhUTUxFVGFiRWxlbWVudEJhc2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRhYi5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG5pbXBvcnQgeyBERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SIH0gZnJvbSBcIi4uLy4uLy4uL3N0eWxlc2hlZXRzL1RoZW1lXCI7XHJcbmltcG9ydCB7IEN1c3RvbUVsZW1lbnQsIGVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vRWxlbWVudFwiO1xyXG5pbXBvcnQgeyBIVE1MRVRhYkVsZW1lbnQgfSBmcm9tIFwiLi9UYWJcIjtcclxuaW1wb3J0IFwiLi9UYWJcIjtcclxuaW1wb3J0IFwiLi9UYWJQYW5lbFwiO1xyXG5leHBvcnQgeyBIVE1MRVRhYkxpc3RFbGVtZW50IH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG52YXIgU0VMRUNUX0FOSU1BVElPTl9EVVJBVElPTiA9IDIwMDtcclxubGV0IEhUTUxFVGFiTGlzdEVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVUYWJMaXN0RWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICAjd2Fsa2VyO1xyXG4gICAgZ2V0IHRhYnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwiZS10YWJcIikpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFjdGl2ZVRhYigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiZS10YWJbYWN0aXZlXVwiKTtcclxuICAgIH1cclxuICAgIGdldCBzZWxlY3RlZFRhYigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiZS10YWJbc2VsZWN0ZWRdXCIpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZSA9IGVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmFwcGVuZChlbGVtZW50KFwic2xvdFwiKSk7XHJcbiAgICAgICAgc3R5bGUgPSAvKmNzcyovIGBcclxuICAgICAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgOmhvc3Q6OmFmdGVyIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAtMTtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTAwJSk7XHJcbiAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMnB4IHNvbGlkIHZhcigtLXRoZW1lLWZvY3VzZWQtaXRlbS1vdXRsaW5lLWNvbG9yLCAke0RFRkFVTFRfVEhFTUVfRk9DVVNFRF9JVEVNX09VVExJTkVfQ09MT1J9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuI3dhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIodGhpcywgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQsIHRoaXMuI3dhbGtlck5vZGVGaWx0ZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICAgICAgY29uc3QgYWRvcHRlZFN0eWxlc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xyXG4gICAgICAgIGFkb3B0ZWRTdHlsZXNoZWV0LnJlcGxhY2Uoc3R5bGUpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW2Fkb3B0ZWRTdHlsZXNoZWV0XTtcclxuICAgICAgICBzaGFkb3dSb290LmFwcGVuZChzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy4jaGFuZGxlQ2xpY2tFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLiNoYW5kbGVGb2N1c0V2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIiwgdGhpcy4jaGFuZGxlRm9jdXNJbkV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIHRoaXMuI2hhbmRsZUZvY3VzT3V0RXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLiNoYW5kbGVLZXlEb3duRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwic2VsZWN0XCIsIHRoaXMuI2hhbmRsZVNlbGVjdEV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInNlbGVjdFwiLCB0aGlzLiNoYW5kbGVTZWxlY3RFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFiSW5kZXgsIHNlbGVjdGVkVGFiIH0gPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudGFiSW5kZXggPSB0YWJJbmRleDtcclxuICAgICAgICBjdXN0b21FbGVtZW50cy51cGdyYWRlKHRoaXMpO1xyXG4gICAgICAgIGNvbnN0IHRhYlRvU2VsZWN0ID0gc2VsZWN0ZWRUYWIgPz8gdGhpcy5maXJzdEl0ZW0oKTtcclxuICAgICAgICBpZiAodGFiVG9TZWxlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy4jc2VsZWN0VGFiKHRhYlRvU2VsZWN0KTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHdpZHRoOiB0YWJXaWR0aCwgaGVpZ2h0OiB0YWJIZWlnaHQgfSA9IHRhYlRvU2VsZWN0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBvZmZzZXRMZWZ0IH0gPSB0YWJUb1NlbGVjdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZShbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogYCR7dGFiV2lkdGh9cHhgLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBgJHtvZmZzZXRMZWZ0fXB4YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBgJHt0YWJIZWlnaHR9cHhgXHJcbiAgICAgICAgICAgICAgICAgICAgfV0sIHtcclxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBcImZvcndhcmRzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBcImVhc2UtaW4tb3V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcHNldWRvRWxlbWVudDogXCI6OmFmdGVyXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjd2Fsa2VyTm9kZUZpbHRlcihub2RlKSB7XHJcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MRVRhYkVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX0FDQ0VQVDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX1JFSkVDVDtcclxuICAgIH1cclxuICAgIGZpcnN0SXRlbSgpIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gd2Fsa2VyLnJvb3Q7XHJcbiAgICAgICAgcmV0dXJuIHdhbGtlci5maXJzdENoaWxkKCk7XHJcbiAgICB9XHJcbiAgICAjbGFzdEl0ZW0oKSB7XHJcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHdhbGtlci5yb290O1xyXG4gICAgICAgIHJldHVybiB3YWxrZXIubGFzdENoaWxkKCk7XHJcbiAgICB9XHJcbiAgICAjcHJldmlvdXNJdGVtKGl0ZW0pIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gaXRlbTtcclxuICAgICAgICByZXR1cm4gd2Fsa2VyLnByZXZpb3VzTm9kZSgpO1xyXG4gICAgfVxyXG4gICAgI25leHRJdGVtKGl0ZW0pIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gaXRlbTtcclxuICAgICAgICByZXR1cm4gd2Fsa2VyLm5leHROb2RlKCk7XHJcbiAgICB9XHJcbiAgICAjc2V0QWN0aXZlVGFiKGl0ZW0pIHtcclxuICAgICAgICBjb25zdCB7IGFjdGl2ZVRhYiB9ID0gdGhpcztcclxuICAgICAgICBpZiAoYWN0aXZlVGFiICE9PSBudWxsICYmIGFjdGl2ZVRhYiAhPT0gaXRlbSkge1xyXG4gICAgICAgICAgICBhY3RpdmVUYWIuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpdGVtICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjc2VsZWN0VGFiKHRhYikge1xyXG4gICAgICAgIGNvbnN0IHsgc2VsZWN0ZWRUYWIgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRhYiAhPT0gc2VsZWN0ZWRUYWIpIHtcclxuICAgICAgICAgICAgdGFiLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlQ2xpY2tFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB0YXJnZXRUYWIgPSB0YXJnZXQuY2xvc2VzdChcImUtdGFiXCIpO1xyXG4gICAgICAgIGlmICh0YXJnZXRUYWIpIHtcclxuICAgICAgICAgICAgdGFyZ2V0VGFiLnNlbGVjdCgpO1xyXG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoOiB0YWJXaWR0aCwgaGVpZ2h0OiB0YWJIZWlnaHQgfSA9IHRhcmdldFRhYi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgY29uc3QgeyBvZmZzZXRMZWZ0IH0gPSB0YXJnZXRUYWI7XHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZShbe1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgJHt0YWJXaWR0aH1weGAsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogYCR7b2Zmc2V0TGVmdH1weGAsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBgJHt0YWJIZWlnaHR9cHhgXHJcbiAgICAgICAgICAgICAgICB9XSwge1xyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IFNFTEVDVF9BTklNQVRJT05fRFVSQVRJT04sXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBcImZvcndhcmRzXCIsXHJcbiAgICAgICAgICAgICAgICBlYXNpbmc6IFwiZWFzZS1pbi1vdXRcIixcclxuICAgICAgICAgICAgICAgIHBzZXVkb0VsZW1lbnQ6IFwiOjphZnRlclwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVGb2N1c0V2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyByZWxhdGVkVGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB7IHNlbGVjdGVkVGFiIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmICghdGhpcy5jb250YWlucyhyZWxhdGVkVGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAoc2VsZWN0ZWRUYWIgPz8gdGhpcy5maXJzdEl0ZW0oKSk/LmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZUZvY3VzSW5FdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB0YXJnZXRUYWIgPSB0YXJnZXQuY2xvc2VzdChcImUtdGFiXCIpO1xyXG4gICAgICAgIGlmICh0YXJnZXRUYWIpIHtcclxuICAgICAgICAgICAgdGhpcy4jc2V0QWN0aXZlVGFiKHRhcmdldFRhYik7XHJcbiAgICAgICAgICAgIHRoaXMudGFiSW5kZXggPSAtMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlRm9jdXNPdXRFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgcmVsYXRlZFRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgbG9zdEZvY3VzV2l0aGluID0gIXRoaXMuY29udGFpbnMocmVsYXRlZFRhcmdldCk7XHJcbiAgICAgICAgaWYgKGxvc3RGb2N1c1dpdGhpbikge1xyXG4gICAgICAgICAgICB0aGlzLnRhYkluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlS2V5RG93bkV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgYWN0aXZlVGFiIH0gPSB0aGlzO1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjoge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNUYWIgPSBhY3RpdmVUYWIgP1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3ByZXZpb3VzSXRlbShhY3RpdmVUYWIpID8/IHRoaXMuI2xhc3RJdGVtKCkgOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c1RhYj8uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dSaWdodFwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0VGFiID0gYWN0aXZlVGFiID9cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNuZXh0SXRlbShhY3RpdmVUYWIpID8/IHRoaXMuZmlyc3RJdGVtKCkgOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2xhc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICBuZXh0VGFiPy5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJIb21lXCI6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IHRoaXMuZmlyc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RJdGVtLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkVuZFwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0SXRlbSA9IHRoaXMuI2xhc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0SXRlbS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJFbnRlclwiOiB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVUYWI/LmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZVNlbGVjdEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHRhcmdldFRhYiA9IHRhcmdldDtcclxuICAgICAgICBpZiAodGFyZ2V0VGFiLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgdGFicyB9ID0gdGhpcztcclxuICAgICAgICAgICAgdGFicy5mb3JFYWNoKCh0YWJfaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhYl9pICE9PSB0YXJnZXRUYWIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJfaS5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgcGFuZWwgfSA9IHRhYl9pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYW5lbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC5oaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgcGFuZWwgfSA9IHRhcmdldFRhYjtcclxuICAgICAgICAgICAgaWYgKHBhbmVsKSB7XHJcbiAgICAgICAgICAgICAgICBwYW5lbC5oaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuSFRNTEVUYWJMaXN0RWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS10YWJsaXN0XCJcclxuICAgIH0pXHJcbl0sIEhUTUxFVGFiTGlzdEVsZW1lbnRCYXNlKTtcclxudmFyIEhUTUxFVGFiTGlzdEVsZW1lbnQgPSBIVE1MRVRhYkxpc3RFbGVtZW50QmFzZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGFiTGlzdC5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG5pbXBvcnQgeyBDdXN0b21FbGVtZW50LCBlbGVtZW50IH0gZnJvbSBcIi4uLy4uL0VsZW1lbnRcIjtcclxuZXhwb3J0IHsgSFRNTEVUYWJQYW5lbEVsZW1lbnQgfTtcclxudmFyIHNoYWRvd1RlbXBsYXRlO1xyXG52YXIgc3R5bGU7XHJcbmxldCBIVE1MRVRhYlBhbmVsRWxlbWVudEJhc2UgPSBjbGFzcyBIVE1MRVRhYlBhbmVsRWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBnZXQgdGFiKCkge1xyXG4gICAgICAgIGNvbnN0IHsgaWQgfSA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Um9vdE5vZGUoKS5xdWVyeVNlbGVjdG9yKGBlLXRhYltjb250cm9scz0ke2lkfV1gKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyB7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUgPSBlbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUuY29udGVudC5hcHBlbmQoZWxlbWVudChcInNsb3RcIikpO1xyXG4gICAgICAgIHN0eWxlID0gLypjc3MqLyBgXHJcbiAgICAgICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogNHB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdChbaGlkZGVuXSkge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgICAgIGNvbnN0IGFkb3B0ZWRTdHlsZXNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcclxuICAgICAgICBhZG9wdGVkU3R5bGVzaGVldC5yZXBsYWNlKHN0eWxlKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFthZG9wdGVkU3R5bGVzaGVldF07XHJcbiAgICAgICAgc2hhZG93Um9vdC5hcHBlbmQoc2hhZG93VGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgfVxyXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgY29uc3QgeyB0YWIgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRhYikge1xyXG4gICAgICAgICAgICBjdXN0b21FbGVtZW50cy51cGdyYWRlKHRhYik7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0ZWQgfSA9IHRhYjtcclxuICAgICAgICAgICAgdGhpcy5oaWRkZW4gPSAhc2VsZWN0ZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5IVE1MRVRhYlBhbmVsRWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS10YWJwYW5lbFwiXHJcbiAgICB9KVxyXG5dLCBIVE1MRVRhYlBhbmVsRWxlbWVudEJhc2UpO1xyXG52YXIgSFRNTEVUYWJQYW5lbEVsZW1lbnQgPSBIVE1MRVRhYlBhbmVsRWxlbWVudEJhc2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRhYlBhbmVsLmpzLm1hcCIsImltcG9ydCB7IEhUTUxFVGFiRWxlbWVudCB9IGZyb20gXCIuL1RhYlwiO1xyXG5pbXBvcnQgeyBIVE1MRVRhYkxpc3RFbGVtZW50IH0gZnJvbSBcIi4vVGFiTGlzdFwiO1xyXG5pbXBvcnQgeyBIVE1MRVRhYlBhbmVsRWxlbWVudCB9IGZyb20gXCIuL1RhYlBhbmVsXCI7XHJcbmV4cG9ydCB7IEhUTUxFVGFiRWxlbWVudCB9O1xyXG5leHBvcnQgeyBIVE1MRVRhYkxpc3RFbGVtZW50IH07XHJcbmV4cG9ydCB7IEhUTUxFVGFiUGFuZWxFbGVtZW50IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbmltcG9ydCB7IEN1c3RvbUVsZW1lbnQsIEF0dHJpYnV0ZVByb3BlcnR5LCBlbGVtZW50IH0gZnJvbSBcIi4uLy4uL0VsZW1lbnRcIjtcclxuaW1wb3J0IHsgSFRNTEVUb29sQmFySXRlbUVsZW1lbnQgfSBmcm9tIFwiLi9Ub29sQmFySXRlbVwiO1xyXG5pbXBvcnQgeyBIVE1MRVRvb2xCYXJJdGVtR3JvdXBFbGVtZW50IH0gZnJvbSBcIi4vVG9vbEJhckl0ZW1Hcm91cFwiO1xyXG5pbXBvcnQgXCIuL1Rvb2xCYXJJdGVtXCI7XHJcbmltcG9ydCBcIi4vVG9vbEJhckl0ZW1Hcm91cFwiO1xyXG5leHBvcnQgeyBIVE1MRVRvb2xCYXJFbGVtZW50IH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG52YXIgd2FzRXhwYW5kZWRPbk1vdXNlRG93bjtcclxubGV0IEhUTUxFVG9vbEJhckVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVUb29sQmFyRWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBnZXQgYWN0aXZlSXRlbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiZS10b29sYmFyaXRlbVthY3RpdmVdXCIpO1xyXG4gICAgfVxyXG4gICAgaXRlbXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwiOmlzKDpzY29wZSwgOnNjb3BlID4gZS10b29sYmFyaXRlbWdyb3VwKSA+IGUtdG9vbGJhcml0ZW1cIikpO1xyXG4gICAgfVxyXG4gICAgI3dhbGtlcjtcclxuICAgIHN0YXRpYyB7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUgPSBlbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUuY29udGVudC5hcHBlbmQoZWxlbWVudChcInNsb3RcIikpO1xyXG4gICAgICAgIHdhc0V4cGFuZGVkT25Nb3VzZURvd24gPSBuZXcgV2Vha01hcCgpO1xyXG4gICAgICAgIHN0eWxlID0gLypjc3MqLyBgXHJcbiAgICAgICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy4jd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcih0aGlzLCBOb2RlRmlsdGVyLlNIT1dfRUxFTUVOVCwgdGhpcy4jbm9kZUZpbHRlci5iaW5kKHRoaXMpKTtcclxuICAgICAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgICAgICBjb25zdCBhZG9wdGVkU3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgYWRvcHRlZFN0eWxlc2hlZXQucmVwbGFjZShzdHlsZSk7XHJcbiAgICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbYWRvcHRlZFN0eWxlc2hlZXRdO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kKHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLiNoYW5kbGVDbGlja0V2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIHRoaXMuI2hhbmRsZUNvbnRleHRNZW51RXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgdGhpcy4jaGFuZGxlRGJsQ2xpY2tFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLiNoYW5kbGVGb2N1c0V2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIiwgdGhpcy4jaGFuZGxlRm9jdXNJbkV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIHRoaXMuI2hhbmRsZUZvY3VzT3V0RXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuI2hhbmRsZU1vdXNlRG93bkV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy4jaGFuZGxlS2V5RG93bkV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgY29uc3QgeyB0YWJJbmRleCB9ID0gdGhpcztcclxuICAgICAgICB0aGlzLnRhYkluZGV4ID0gdGFiSW5kZXg7XHJcbiAgICB9XHJcbiAgICAjbm9kZUZpbHRlcihub2RlKSB7XHJcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MRVRvb2xCYXJJdGVtRWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTm9kZUZpbHRlci5GSUxURVJfQUNDRVBUO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxFVG9vbEJhckl0ZW1Hcm91cEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX1NLSVA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBOb2RlRmlsdGVyLkZJTFRFUl9SRUpFQ1Q7XHJcbiAgICB9XHJcbiAgICBmaXJzdEl0ZW0oKSB7XHJcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHdhbGtlci5yb290O1xyXG4gICAgICAgIHJldHVybiB3YWxrZXIuZmlyc3RDaGlsZCgpO1xyXG4gICAgfVxyXG4gICAgI2xhc3RJdGVtKCkge1xyXG4gICAgICAgIGNvbnN0IHdhbGtlciA9IHRoaXMuI3dhbGtlcjtcclxuICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSB3YWxrZXIucm9vdDtcclxuICAgICAgICByZXR1cm4gd2Fsa2VyLmxhc3RDaGlsZCgpO1xyXG4gICAgfVxyXG4gICAgI3ByZXZpb3VzSXRlbShpdGVtKSB7XHJcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IGl0ZW07XHJcbiAgICAgICAgY29uc3QgcHJldmlvdXNJdGVtID0gd2Fsa2VyLnByZXZpb3VzU2libGluZygpO1xyXG4gICAgICAgIHJldHVybiBwcmV2aW91c0l0ZW07XHJcbiAgICB9XHJcbiAgICAjbmV4dEl0ZW0oaXRlbSkge1xyXG4gICAgICAgIGNvbnN0IHdhbGtlciA9IHRoaXMuI3dhbGtlcjtcclxuICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBpdGVtO1xyXG4gICAgICAgIHJldHVybiB3YWxrZXIubmV4dFNpYmxpbmcoKTtcclxuICAgIH1cclxuICAgICNzZXRBY3RpdmVJdGVtKGl0ZW0pIHtcclxuICAgICAgICBjb25zdCB7IGFjdGl2ZUl0ZW0gfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGFjdGl2ZUl0ZW0gIT09IG51bGwgJiYgYWN0aXZlSXRlbSAhPT0gaXRlbSkge1xyXG4gICAgICAgICAgICBhY3RpdmVJdGVtLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXRlbSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpdGVtLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZUNsaWNrRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0SXRlbSA9IHRhcmdldC5jbG9zZXN0KFwiZS10b29sYmFyaXRlbVwiKTtcclxuICAgICAgICBpZiAodGFyZ2V0SXRlbSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IHR5cGUsIHByZXNzZWQgfSA9IHRhcmdldEl0ZW07XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImNoZWNrYm94XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJdGVtLnByZXNzZWQgPSAhcHJlc3NlZDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyYWRpb1wiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SXRlbS5wcmVzc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtZW51YnV0dG9uXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1lbnVidXR0b24gfSA9IHRhcmdldEl0ZW07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lbnVidXR0b24gJiYgIW1lbnVidXR0b24uY29udGFpbnModGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleHBhbmQgPSAhd2FzRXhwYW5kZWRPbk1vdXNlRG93bi5nZXQodGFyZ2V0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVidXR0b24udG9nZ2xlKGV4cGFuZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHBhbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVidXR0b24uZmlyc3RJdGVtPy5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2VsZWN0XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHNlbGVjdCB9ID0gdGFyZ2V0SXRlbTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ICYmICFzZWxlY3QuY29udGFpbnModGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleHBhbmQgPSAhd2FzRXhwYW5kZWRPbk1vdXNlRG93bi5nZXQodGFyZ2V0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdC50b2dnbGUoZXhwYW5kKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlQ29udGV4dE1lbnVFdmVudChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZURibENsaWNrRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICAgICNoYW5kbGVGb2N1c0V2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyByZWxhdGVkVGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB7IGFjdGl2ZUl0ZW0gfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5zKHJlbGF0ZWRUYXJnZXQpKSB7XHJcbiAgICAgICAgICAgIChhY3RpdmVJdGVtID8/IHRoaXMuZmlyc3RJdGVtKCkpPy5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVGb2N1c0luRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0SXRlbSA9IHRhcmdldC5jbG9zZXN0KFwiZS10b29sYmFyaXRlbVwiKTtcclxuICAgICAgICBpZiAodGFyZ2V0SXRlbSkge1xyXG4gICAgICAgICAgICB0aGlzLiNzZXRBY3RpdmVJdGVtKHRhcmdldEl0ZW0pO1xyXG4gICAgICAgICAgICB0aGlzLnRhYkluZGV4ID0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZUZvY3VzT3V0RXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHJlbGF0ZWRUYXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IGxvc3RGb2N1c1dpdGhpbiA9ICF0aGlzLmNvbnRhaW5zKHJlbGF0ZWRUYXJnZXQpO1xyXG4gICAgICAgIGlmIChsb3N0Rm9jdXNXaXRoaW4pIHtcclxuICAgICAgICAgICAgdGhpcy50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZU1vdXNlRG93bkV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEl0ZW0gPSB0YXJnZXQuY2xvc2VzdChcImUtdG9vbGJhcml0ZW1cIik7XHJcbiAgICAgICAgaWYgKHRhcmdldEl0ZW0pIHtcclxuICAgICAgICAgICAgY29uc3QgeyB0eXBlIH0gPSB0YXJnZXRJdGVtO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtZW51YnV0dG9uXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1lbnVidXR0b24gfSA9IHRhcmdldEl0ZW07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lbnVidXR0b24gJiYgIW1lbnVidXR0b24uY29udGFpbnModGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXNFeHBhbmRlZE9uTW91c2VEb3duLnNldCh0YXJnZXRJdGVtLCBtZW51YnV0dG9uLmV4cGFuZGVkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2VsZWN0XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHNlbGVjdCB9ID0gdGFyZ2V0SXRlbTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ICYmICFzZWxlY3QuY29udGFpbnModGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXNFeHBhbmRlZE9uTW91c2VEb3duLnNldCh0YXJnZXRJdGVtLCBzZWxlY3QuZXhwYW5kZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVLZXlEb3duRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IGtleSB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgeyBhY3RpdmVJdGVtIH0gPSB0aGlzO1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJFbnRlclwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiIFwiOiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdHlwZSB9ID0gYWN0aXZlSXRlbTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm1lbnVidXR0b25cIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtZW51YnV0dG9uIH0gPSBhY3RpdmVJdGVtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lbnVidXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51YnV0dG9uLmV4cGFuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVidXR0b24uZmlyc3RJdGVtPy5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2VsZWN0XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0IH0gPSBhY3RpdmVJdGVtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdC5leHBhbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUl0ZW0uY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkFycm93TGVmdFwiOiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzSXRlbSA9IHRoaXMuI3ByZXZpb3VzSXRlbShhY3RpdmVJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzSXRlbS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3RJdGVtID0gdGhpcy5maXJzdEl0ZW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0SXRlbS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dSaWdodFwiOiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRJdGVtID0gdGhpcy4jbmV4dEl0ZW0oYWN0aXZlSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJdGVtLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0SXRlbSA9IHRoaXMuI2xhc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RJdGVtLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjoge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHR5cGUgfSA9IGFjdGl2ZUl0ZW07XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzZWxlY3RcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlSXRlbS5zZWxlY3Q/LmV4cGFuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJIb21lXCI6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IHRoaXMuZmlyc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RJdGVtLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkVuZFwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0SXRlbSA9IHRoaXMuI2xhc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0SXRlbS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pXHJcbl0sIEhUTUxFVG9vbEJhckVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJuYW1lXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSlcclxuXSwgSFRNTEVUb29sQmFyRWxlbWVudEJhc2UucHJvdG90eXBlLCBcIm9yaWVudGF0aW9uXCIsIHZvaWQgMCk7XHJcbkhUTUxFVG9vbEJhckVsZW1lbnRCYXNlID0gX19kZWNvcmF0ZShbXHJcbiAgICBDdXN0b21FbGVtZW50KHtcclxuICAgICAgICBuYW1lOiBcImUtdG9vbGJhclwiXHJcbiAgICB9KVxyXG5dLCBIVE1MRVRvb2xCYXJFbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRVRvb2xCYXJFbGVtZW50ID0gSFRNTEVUb29sQmFyRWxlbWVudEJhc2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRvb2xCYXIuanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgREVGQVVMVF9USEVNRV9BQ1RJVkFURURfSVRFTV9DT0xPUiwgREVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fT1VUTElORV9DT0xPUiwgREVGQVVMVF9USEVNRV9IT1ZFUkVEX0lURU1fQ09MT1IgfSBmcm9tIFwiLi4vLi4vLi4vc3R5bGVzaGVldHMvVGhlbWVcIjtcclxuaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCwgQXR0cmlidXRlUHJvcGVydHksIGVsZW1lbnQsIFF1ZXJ5UHJvcGVydHkgfSBmcm9tIFwiLi4vLi4vRWxlbWVudFwiO1xyXG5pbXBvcnQgeyBjb25zdHJ1Y3RvciB9IGZyb20gXCIuLi8uLi9TbmlwcGV0c1wiO1xyXG5leHBvcnQgeyBIVE1MRVRvb2xCYXJJdGVtRWxlbWVudCB9O1xyXG5leHBvcnQgeyBFVG9vbEJhckl0ZW0gfTtcclxudmFyIHNoYWRvd1RlbXBsYXRlO1xyXG52YXIgc3R5bGU7XHJcbnZhciBpY29uUGFydFRlbXBsYXRlO1xyXG5sZXQgSFRNTEVUb29sQmFySXRlbUVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVUb29sQmFySXRlbUVsZW1lbnRCYXNlIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgc3RhdGljIHtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZSA9IGVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmFwcGVuZChlbGVtZW50KFwic2xvdFwiKSwgZWxlbWVudChcInNsb3RcIiwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcInNlbGVjdFwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSwgZWxlbWVudChcInNsb3RcIiwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIm1lbnVidXR0b25cIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIGljb25QYXJ0VGVtcGxhdGUgPSBlbGVtZW50KFwic3BhblwiLCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgIHBhcnQ6IFwiaWNvblwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzdHlsZSA9IC8qY3NzKi8gYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDIycHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KFtkaXNhYmxlZF0pIHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMzg7XHJcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoOmhvdmVyKSB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10aGVtZS1ob3ZlcmVkLWl0ZW0tY29sb3IsICR7REVGQVVMVF9USEVNRV9IT1ZFUkVEX0lURU1fQ09MT1J9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoW3ByZXNzZWRdKSxcclxuICAgICAgICAgICAgOmhvc3QoOmFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGhlbWUtYWN0aXZhdGVkLWl0ZW0tY29sb3IsICR7REVGQVVMVF9USEVNRV9BQ1RJVkFURURfSVRFTV9DT0xPUn0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdCg6bm90KFtpY29uZWRdKSkgW3BhcnQ9XCJpY29uXCJdIHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFtwYXJ0PVwiaWNvblwiXSB7XHJcbiAgICAgICAgICAgICAgICBmbGV4OiBub25lO1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDE4cHg7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4cHg7XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHg7XHJcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBbcGFydD1cImljb25cIl06OmJlZm9yZSB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMThweDtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMThweDtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBtYXNrLXNpemU6IDE4cHggMThweDtcclxuICAgICAgICAgICAgICAgIC13ZWJraXQtbWFzay1zaXplOiAxOHB4IDE4cHg7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBub25lO1xyXG4gICAgICAgICAgICAgICAgLXdlYmtpdC1tYXNrLWltYWdlOiBub25lO1xyXG4gICAgICAgICAgICAgICAgbWFzay1pbWFnZTogbm9uZTtcclxuICAgICAgICAgICAgICAgIGZpbHRlcjogbm9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoOmZvY3VzKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lOiAxcHggc29saWQgdmFyKC0tdGhlbWUtZm9jdXNlZC1pdGVtLW91dGxpbmUtY29sb3IsICR7REVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fT1VUTElORV9DT0xPUn0pO1xyXG4gICAgICAgICAgICAgICAgb3V0bGluZS1vZmZzZXQ6IC0xcHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KFt0eXBlPVwic2VsZWN0XCJdOmZvY3VzKSA6OnNsb3R0ZWQoZS1zZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgICAgICBjb25zdCBhZG9wdGVkU3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgYWRvcHRlZFN0eWxlc2hlZXQucmVwbGFjZShzdHlsZSk7XHJcbiAgICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbYWRvcHRlZFN0eWxlc2hlZXRdO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kKHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgIH1cclxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFiSW5kZXggfSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy50YWJJbmRleCA9IHRhYkluZGV4O1xyXG4gICAgfVxyXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xyXG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwibGFiZWxcIjoge1xyXG4gICAgICAgICAgICAgICAgLy8uLi5cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJpY29uZWRcIjoge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBzaGFkb3dSb290IH0gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93Um9vdC5wcmVwZW5kKGljb25QYXJ0VGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGljb25QYXJ0ID0gdGhpcy4jaWNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpY29uUGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uUGFydC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNpY29uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIltwYXJ0PWljb25dXCIpO1xyXG4gICAgfVxyXG59O1xyXG5fX2RlY29yYXRlKFtcclxuICAgIFF1ZXJ5UHJvcGVydHkoeyBzZWxlY3RvcjogXCI6c2NvcGUgPiBlLW1lbnVidXR0b25bc2xvdD1tZW51YnV0dG9uXVwiIH0pXHJcbl0sIEhUTUxFVG9vbEJhckl0ZW1FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibWVudWJ1dHRvblwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIFF1ZXJ5UHJvcGVydHkoeyBzZWxlY3RvcjogXCI6c2NvcGUgPiBlLXNlbGVjdFtzbG90PXNlbGVjdF1cIiB9KVxyXG5dLCBIVE1MRVRvb2xCYXJJdGVtRWxlbWVudEJhc2UucHJvdG90eXBlLCBcInNlbGVjdFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KVxyXG5dLCBIVE1MRVRvb2xCYXJJdGVtRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImFjdGl2ZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KVxyXG5dLCBIVE1MRVRvb2xCYXJJdGVtRWxlbWVudEJhc2UucHJvdG90eXBlLCBcInByZXNzZWRcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSlcclxuXSwgSFRNTEVUb29sQmFySXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJleHBhbmRlZFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgb2JzZXJ2ZWQ6IHRydWUgfSlcclxuXSwgSFRNTEVUb29sQmFySXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJpY29uZWRcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZywgb2JzZXJ2ZWQ6IHRydWUgfSlcclxuXSwgSFRNTEVUb29sQmFySXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pXHJcbl0sIEhUTUxFVG9vbEJhckl0ZW1FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nLCBvYnNlcnZlZDogdHJ1ZSB9KVxyXG5dLCBIVE1MRVRvb2xCYXJJdGVtRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImxhYmVsXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSlcclxuXSwgSFRNTEVUb29sQmFySXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XHJcbkhUTUxFVG9vbEJhckl0ZW1FbGVtZW50QmFzZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgbmFtZTogXCJlLXRvb2xiYXJpdGVtXCJcclxuICAgIH0pXHJcbl0sIEhUTUxFVG9vbEJhckl0ZW1FbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRVRvb2xCYXJJdGVtRWxlbWVudCA9IEhUTUxFVG9vbEJhckl0ZW1FbGVtZW50QmFzZTtcclxudmFyIEVUb29sQmFySXRlbSA9IGNvbnN0cnVjdG9yKEhUTUxFVG9vbEJhckl0ZW1FbGVtZW50LnByb3RvdHlwZSwgKGluaXQpID0+IHtcclxuICAgIGNvbnN0IHsgbGFiZWwsIG5hbWUsIHR5cGUsIHZhbHVlLCB0cmlnZ2VyLCBtZW51YnV0dG9uLCBzZWxlY3QgfSA9IGluaXQ7XHJcbiAgICBpZiAobWVudWJ1dHRvbikge1xyXG4gICAgICAgIG1lbnVidXR0b24uc2xvdCA9IFwibWVudWJ1dHRvblwiO1xyXG4gICAgfVxyXG4gICAgaWYgKHNlbGVjdCkge1xyXG4gICAgICAgIHNlbGVjdC5zbG90ID0gXCJzZWxlY3RcIjtcclxuICAgIH1cclxuICAgIHJldHVybiBlbGVtZW50KFwiZS10b29sYmFyaXRlbVwiLCB7XHJcbiAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICB0YWJpbmRleDogLTEsXHJcbiAgICAgICAgICAgIHRpdGxlOiBsYWJlbCxcclxuICAgICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxyXG4gICAgICAgICAgICB0eXBlOiB0eXBlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGlsZHJlbjogbWVudWJ1dHRvbiA/IFttZW51YnV0dG9uXSA6IHNlbGVjdCA/IFtzZWxlY3RdIDogdW5kZWZpbmVkLFxyXG4gICAgICAgIGxpc3RlbmVyczoge1xyXG4gICAgICAgICAgICBjbGljazogdHJpZ2dlclxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59LCB7XHJcbiAgICBidXR0b24oaW5pdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRVRvb2xCYXJJdGVtKHtcclxuICAgICAgICAgICAgLi4uaW5pdCwgdHlwZTogXCJidXR0b25cIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGNoZWNrYm94KGluaXQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVUb29sQmFySXRlbSh7XHJcbiAgICAgICAgICAgIC4uLmluaXQsIHR5cGU6IFwiY2hlY2tib3hcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHJhZGlvKGluaXQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVUb29sQmFySXRlbSh7XHJcbiAgICAgICAgICAgIC4uLmluaXQsIHR5cGU6IFwicmFkaW9cIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIG1lbnVidXR0b24oaW5pdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRVRvb2xCYXJJdGVtKHtcclxuICAgICAgICAgICAgLi4uaW5pdCwgdHlwZTogXCJtZW51YnV0dG9uXCJcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBzZWxlY3QoaW5pdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRVRvb2xCYXJJdGVtKHtcclxuICAgICAgICAgICAgLi4uaW5pdCwgdHlwZTogXCJzZWxlY3RcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VG9vbEJhckl0ZW0uanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgZWxlbWVudCwgQ3VzdG9tRWxlbWVudCwgQXR0cmlidXRlUHJvcGVydHkgfSBmcm9tIFwiLi4vLi4vRWxlbWVudFwiO1xyXG5pbXBvcnQgXCIuL1Rvb2xCYXJJdGVtXCI7XHJcbmV4cG9ydCB7IEhUTUxFVG9vbEJhckl0ZW1Hcm91cEVsZW1lbnQgfTtcclxudmFyIHNoYWRvd1RlbXBsYXRlO1xyXG52YXIgc3R5bGU7XHJcbmxldCBIVE1MRVRvb2xCYXJJdGVtR3JvdXBFbGVtZW50QmFzZSA9IGNsYXNzIEhUTUxFVG9vbEJhckl0ZW1Hcm91cEVsZW1lbnRCYXNlIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgc3RhdGljIHtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZSA9IGVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmFwcGVuZChlbGVtZW50KFwic2xvdFwiKSk7XHJcbiAgICAgICAgc3R5bGUgPSAvKmNzcyovIGBcclxuICAgICAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBtYXgtY29udGVudDtcclxuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgICAgICBjb25zdCBhZG9wdGVkU3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgYWRvcHRlZFN0eWxlc2hlZXQucmVwbGFjZShzdHlsZSk7XHJcbiAgICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbYWRvcHRlZFN0eWxlc2hlZXRdO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kKHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgIH1cclxuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcclxuICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImxhYmVsXCI6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJbcGFydD0nbGFiZWwnXVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChsYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KVxyXG5dLCBIVE1MRVRvb2xCYXJJdGVtR3JvdXBFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nLCBvYnNlcnZlZDogdHJ1ZSB9KVxyXG5dLCBIVE1MRVRvb2xCYXJJdGVtR3JvdXBFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibGFiZWxcIiwgdm9pZCAwKTtcclxuSFRNTEVUb29sQmFySXRlbUdyb3VwRWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS10b29sYmFyaXRlbWdyb3VwXCJcclxuICAgIH0pXHJcbl0sIEhUTUxFVG9vbEJhckl0ZW1Hcm91cEVsZW1lbnRCYXNlKTtcclxudmFyIEhUTUxFVG9vbEJhckl0ZW1Hcm91cEVsZW1lbnQgPSBIVE1MRVRvb2xCYXJJdGVtR3JvdXBFbGVtZW50QmFzZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VG9vbEJhckl0ZW1Hcm91cC5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG5pbXBvcnQgeyBERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SIH0gZnJvbSBcIi4uLy4uLy4uL3N0eWxlc2hlZXRzL1RoZW1lXCI7XHJcbmltcG9ydCB7IEN1c3RvbUVsZW1lbnQsIEF0dHJpYnV0ZVByb3BlcnR5LCBlbGVtZW50IH0gZnJvbSBcIi4uLy4uL0VsZW1lbnRcIjtcclxuaW1wb3J0IHsgSFRNTEVUcmVlSXRlbUVsZW1lbnQgfSBmcm9tIFwiLi9UcmVlSXRlbVwiO1xyXG5pbXBvcnQgeyBIVE1MRVRyZWVJdGVtR3JvdXBFbGVtZW50IH0gZnJvbSBcIi4vVHJlZUl0ZW1Hcm91cFwiO1xyXG5pbXBvcnQgXCIuL1RyZWVJdGVtXCI7XHJcbmltcG9ydCBcIi4vVHJlZUl0ZW1Hcm91cFwiO1xyXG5leHBvcnQgeyBIVE1MRVRyZWVFbGVtZW50IH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG5sZXQgSFRNTEVUcmVlRWxlbWVudEJhc2UgPSBjbGFzcyBIVE1MRVRyZWVFbGVtZW50QmFzZSBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgIGl0ZW1zO1xyXG4gICAgZ2V0IGFjdGl2ZUl0ZW0oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcImUtdHJlZWl0ZW1bYWN0aXZlXVwiKTtcclxuICAgIH1cclxuICAgIGdldCBkcm9wVGFyZ2V0SXRlbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiZS10cmVlaXRlbVtkcm9wdGFyZ2V0XVwiKTtcclxuICAgIH1cclxuICAgICNvblNlbGVjdGlvbjtcclxuICAgICNoYXNTZWxlY3Rpb25DaGFuZ2VkO1xyXG4gICAgI3dhbGtlcjtcclxuICAgIHN0YXRpYyB7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUgPSBlbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUuY29udGVudC5hcHBlbmQoZWxlbWVudChcInNsb3RcIikpO1xyXG4gICAgICAgIHN0eWxlID0gLypjc3MqLyBgXHJcbiAgICAgICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdCg6Zm9jdXMpIHtcclxuICAgICAgICAgICAgICAgIG91dGxpbmU6IDFweCBzb2xpZCB2YXIoLS10aGVtZS1mb2N1c2VkLWl0ZW0tb3V0bGluZS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SfSk7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lLW9mZnNldDogLTFweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuI3dhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIodGhpcywgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQsIHRoaXMuI25vZGVGaWx0ZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy4jb25TZWxlY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLiNoYXNTZWxlY3Rpb25DaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJlLXRyZWVpdGVtXCIpO1xyXG4gICAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgICAgIGNvbnN0IGFkb3B0ZWRTdHlsZXNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcclxuICAgICAgICBhZG9wdGVkU3R5bGVzaGVldC5yZXBsYWNlKHN0eWxlKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFthZG9wdGVkU3R5bGVzaGVldF07XHJcbiAgICAgICAgc2hhZG93Um9vdC5hcHBlbmQoc2hhZG93VGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuI2hhbmRsZUNsaWNrRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgdGhpcy4jaGFuZGxlQ29udGV4dE1lbnVFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCB0aGlzLiNoYW5kbGVEYmxDbGlja0V2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLiNoYW5kbGVNb3VzZURvd25FdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW5kXCIsIHRoaXMuI2hhbmRsZURyYWdFbmRFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW50ZXJcIiwgdGhpcy4jaGFuZGxlRHJhZ0VudGVyRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2xlYXZlXCIsIHRoaXMuI2hhbmRsZURyYWdMZWF2ZUV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIHRoaXMuI2hhbmRsZURyYWdPdmVyRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCB0aGlzLiNoYW5kbGVEcm9wRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgdGhpcy4jaGFuZGxlRm9jdXNFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsIHRoaXMuI2hhbmRsZUZvY3VzSW5FdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCB0aGlzLiNoYW5kbGVGb2N1c091dEV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy4jaGFuZGxlS2V5RG93bkV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInNlbGVjdFwiLCB0aGlzLiNoYW5kbGVTZWxlY3RFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFiSW5kZXggfSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy50YWJJbmRleCA9IHRhYkluZGV4O1xyXG4gICAgfVxyXG4gICAgc2VsZWN0ZWRJdGVtcygpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW1zID0gW107XHJcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHdhbGtlci5yb290O1xyXG4gICAgICAgIGxldCBpdGVtID0gdGhpcy5maXJzdEl0ZW0oKTtcclxuICAgICAgICB3aGlsZSAoaXRlbSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGl0ZW0gPSB0aGlzLiNuZXh0SXRlbShpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkSXRlbXM7XHJcbiAgICB9XHJcbiAgICBiZWdpblNlbGVjdGlvbigpIHtcclxuICAgICAgICB0aGlzLiNvblNlbGVjdGlvbiA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBlbmRTZWxlY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy4jb25TZWxlY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy4jaGFzU2VsZWN0aW9uQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwic2VsZWN0aW9uY2hhbmdlXCIsIHsgYnViYmxlczogdHJ1ZSB9KSk7XHJcbiAgICAgICAgICAgIHRoaXMuI2hhc1NlbGVjdGlvbkNoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjbm9kZUZpbHRlcihub2RlKSB7XHJcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MRVRyZWVJdGVtRWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTm9kZUZpbHRlci5GSUxURVJfQUNDRVBUO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxFVHJlZUl0ZW1Hcm91cEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX1NLSVA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBOb2RlRmlsdGVyLkZJTFRFUl9SRUpFQ1Q7XHJcbiAgICB9XHJcbiAgICAjZ2V0SXRlbXNSYW5nZShmcm9tLCB0bykge1xyXG4gICAgICAgIGlmIChmcm9tID09IHRvKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbZnJvbV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gZnJvbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0byk7XHJcbiAgICAgICAgaWYgKHBvc2l0aW9uICYgTm9kZS5ET0NVTUVOVF9QT1NJVElPTl9GT0xMT1dJTkcpIHtcclxuICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSBbZnJvbV07XHJcbiAgICAgICAgICAgIGxldCBuZXh0VmlzaWJsZUl0ZW0gPSB0aGlzLiNuZXh0SXRlbShmcm9tKTtcclxuICAgICAgICAgICAgd2hpbGUgKG5leHRWaXNpYmxlSXRlbSAmJiBuZXh0VmlzaWJsZUl0ZW0gIT09IHRvKSB7XHJcbiAgICAgICAgICAgICAgICByYW5nZS5wdXNoKG5leHRWaXNpYmxlSXRlbSk7XHJcbiAgICAgICAgICAgICAgICBuZXh0VmlzaWJsZUl0ZW0gPSB0aGlzLiNuZXh0SXRlbShuZXh0VmlzaWJsZUl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJhbmdlLnB1c2godG8pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmFuZ2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHBvc2l0aW9uICYgTm9kZS5ET0NVTUVOVF9QT1NJVElPTl9QUkVDRURJTkcpIHtcclxuICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSBbZnJvbV07XHJcbiAgICAgICAgICAgIGxldCBwcmV2aW91c1Zpc2libGVJdGVtID0gdGhpcy4jcHJldmlvdXNJdGVtKGZyb20pO1xyXG4gICAgICAgICAgICB3aGlsZSAocHJldmlvdXNWaXNpYmxlSXRlbSAmJiBwcmV2aW91c1Zpc2libGVJdGVtICE9PSB0bykge1xyXG4gICAgICAgICAgICAgICAgcmFuZ2UucHVzaChwcmV2aW91c1Zpc2libGVJdGVtKTtcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzVmlzaWJsZUl0ZW0gPSB0aGlzLiNwcmV2aW91c0l0ZW0ocHJldmlvdXNWaXNpYmxlSXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmFuZ2UucHVzaCh0byk7XHJcbiAgICAgICAgICAgIHJldHVybiByYW5nZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gICAgI3NldFNlbGVjdGlvbiguLi5pdGVtcykge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSB0aGlzLnNlbGVjdGVkSXRlbXMoKTtcclxuICAgICAgICB0aGlzLmJlZ2luU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgc2VsZWN0ZWRJdGVtcy5mb3JFYWNoKChzZWxlY3RlZEl0ZW1faSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWl0ZW1zLmluY2x1ZGVzKHNlbGVjdGVkSXRlbV9pKSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtX2kuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW1faSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb250YWlucyhpdGVtX2kpICYmICFpdGVtX2kuc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1faS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVuZFNlbGVjdGlvbigpO1xyXG4gICAgfVxyXG4gICAgI2FkZFRvU2VsZWN0aW9uKC4uLml0ZW1zKSB7XHJcbiAgICAgICAgdGhpcy5iZWdpblNlbGVjdGlvbigpO1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW1faSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWl0ZW1faS5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgaXRlbV9pLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZW5kU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcbiAgICAjcmVtb3ZlRnJvbVNlbGVjdGlvbiguLi5pdGVtcykge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSB0aGlzLnNlbGVjdGVkSXRlbXMoKTtcclxuICAgICAgICB0aGlzLmJlZ2luU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbV9pKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZEl0ZW1zLmluY2x1ZGVzKGl0ZW1faSkpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1faS5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbmRTZWxlY3Rpb24oKTtcclxuICAgIH1cclxuICAgICNjbGVhclNlbGVjdGlvbigpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW1zID0gdGhpcy5zZWxlY3RlZEl0ZW1zKCk7XHJcbiAgICAgICAgdGhpcy5iZWdpblNlbGVjdGlvbigpO1xyXG4gICAgICAgIHNlbGVjdGVkSXRlbXMuZm9yRWFjaCgoaXRlbV9pKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW1faS5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZW5kU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcbiAgICAjc2V0QWN0aXZlSXRlbShpdGVtKSB7XHJcbiAgICAgICAgY29uc3QgeyBhY3RpdmVJdGVtIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChhY3RpdmVJdGVtICE9PSBudWxsICYmIGFjdGl2ZUl0ZW0gIT09IGl0ZW0pIHtcclxuICAgICAgICAgICAgYWN0aXZlSXRlbS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgYWN0aXZlSXRlbS50YWJJbmRleCA9IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXRlbSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IGl0ZW07XHJcbiAgICAgICAgICAgIGl0ZW0uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgaXRlbS50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI3NldERyb3BUYXJnZXRJdGVtKGl0ZW0pIHtcclxuICAgICAgICBjb25zdCB7IGRyb3BUYXJnZXRJdGVtIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChkcm9wVGFyZ2V0SXRlbSAhPT0gbnVsbCAmJiBkcm9wVGFyZ2V0SXRlbSAhPT0gaXRlbSkge1xyXG4gICAgICAgICAgICBkcm9wVGFyZ2V0SXRlbS5kcm9wdGFyZ2V0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpdGVtICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJvcHRhcmdldCA9IHRydWU7XHJcbiAgICAgICAgICAgIGl0ZW0uZHJvcHRhcmdldCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRyb3B0YXJnZXQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmaXJzdEl0ZW0oKSB7XHJcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgIGNvbnN0IHsgcm9vdCB9ID0gd2Fsa2VyO1xyXG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHJvb3Q7XHJcbiAgICAgICAgcmV0dXJuIHdhbGtlci5maXJzdENoaWxkKCk7XHJcbiAgICB9XHJcbiAgICAjbGFzdEl0ZW0oKSB7XHJcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgIGNvbnN0IHsgcm9vdCB9ID0gd2Fsa2VyO1xyXG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHJvb3Q7XHJcbiAgICAgICAgcmV0dXJuIHdhbGtlci5sYXN0Q2hpbGQoKTtcclxuICAgIH1cclxuICAgICNwcmV2aW91c0l0ZW0oaXRlbSkge1xyXG4gICAgICAgIGNvbnN0IHdhbGtlciA9IHRoaXMuI3dhbGtlcjtcclxuICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBpdGVtO1xyXG4gICAgICAgIGNvbnN0IHByZXZpb3VzU2libGluZyA9IHdhbGtlci5wcmV2aW91c1NpYmxpbmcoKTtcclxuICAgICAgICByZXR1cm4gcHJldmlvdXNTaWJsaW5nID9cclxuICAgICAgICAgICAgdGhpcy4jZGVlcGVzdEl0ZW0ocHJldmlvdXNTaWJsaW5nKSA6XHJcbiAgICAgICAgICAgIHdhbGtlci5wYXJlbnROb2RlKCk7XHJcbiAgICB9XHJcbiAgICAjbmV4dEl0ZW0oaXRlbSkge1xyXG4gICAgICAgIGNvbnN0IHdhbGtlciA9IHRoaXMuI3dhbGtlcjtcclxuICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBpdGVtO1xyXG4gICAgICAgIGNvbnN0IHsgdHlwZSwgZXhwYW5kZWQgfSA9IGl0ZW07XHJcbiAgICAgICAgcmV0dXJuICh0eXBlID09PSBcImxlYWZcIiA/XHJcbiAgICAgICAgICAgIHdhbGtlci5uZXh0Tm9kZSgpIDpcclxuICAgICAgICAgICAgZXhwYW5kZWQgP1xyXG4gICAgICAgICAgICAgICAgd2Fsa2VyLm5leHROb2RlKCkgOlxyXG4gICAgICAgICAgICAgICAgd2Fsa2VyLm5leHRTaWJsaW5nKCkgPz9cclxuICAgICAgICAgICAgICAgICAgICAod2Fsa2VyLnBhcmVudE5vZGUoKSwgd2Fsa2VyLm5leHRTaWJsaW5nKCkpKTtcclxuICAgIH1cclxuICAgICNkZWVwZXN0SXRlbShpdGVtKSB7XHJcbiAgICAgICAgaWYgKGl0ZW0uZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgICAgICBjb25zdCBsYXN0SXRlbSA9IHdhbGtlci5sYXN0Q2hpbGQoKTtcclxuICAgICAgICAgICAgaWYgKGxhc3RJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4jZGVlcGVzdEl0ZW0obGFzdEl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZUNsaWNrRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCwgc2hpZnRLZXksIGN0cmxLZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEl0ZW0gPSB0YXJnZXQuY2xvc2VzdChcImUtdHJlZWl0ZW1cIik7XHJcbiAgICAgICAgaWYgKHRhcmdldEl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKCFzaGlmdEtleSAmJiAhY3RybEtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4jc2V0U2VsZWN0aW9uKHRhcmdldEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyB0eXBlIH0gPSB0YXJnZXRJdGVtO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJwYXJlbnRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEl0ZW0udG9nZ2xlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlQ29udGV4dE1lbnVFdmVudChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZURibENsaWNrRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICAgICNoYW5kbGVEcmFnRW5kRXZlbnQoKSB7XHJcbiAgICAgICAgdGhpcy4jc2V0RHJvcFRhcmdldEl0ZW0obnVsbCk7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlRHJhZ0VudGVyRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0SXRlbSA9IHRhcmdldC5jbG9zZXN0KFwiZS10cmVlaXRlbVwiKTtcclxuICAgICAgICBpZiAodGFyZ2V0SXRlbSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IHR5cGUgfSA9IHRhcmdldEl0ZW07XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09IFwicGFyZW50XCIpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldEl0ZW0udG9nZ2xlKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuI3NldERyb3BUYXJnZXRJdGVtKHRhcmdldEl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZURyYWdPdmVyRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZURyYWdMZWF2ZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyByZWxhdGVkVGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBpZiAocmVsYXRlZFRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50SXRlbSA9IHJlbGF0ZWRUYXJnZXQuY2xvc2VzdChcImUtdHJlZWl0ZW1cIik7XHJcbiAgICAgICAgICAgIGlmICghcGFyZW50SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJvb3ROb2RlID0gcmVsYXRlZFRhcmdldDtcclxuICAgICAgICAgICAgICAgIHdoaWxlICghKHJvb3ROb2RlIGluc3RhbmNlb2YgSFRNTEVUcmVlSXRlbUVsZW1lbnQgfHwgcm9vdE5vZGUgaW5zdGFuY2VvZiBEb2N1bWVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByb290Tm9kZSA9IHJvb3ROb2RlLmdldFJvb3ROb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3ROb2RlIGluc3RhbmNlb2YgU2hhZG93Um9vdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb290Tm9kZSA9IHJvb3ROb2RlLmhvc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHJvb3ROb2RlIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZXREcm9wVGFyZ2V0SXRlbShudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVEcm9wRXZlbnQoKSB7XHJcbiAgICAgICAgdGhpcy4jc2V0RHJvcFRhcmdldEl0ZW0obnVsbCk7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlS2V5RG93bkV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgYWN0aXZlSXRlbSB9ID0gdGhpcztcclxuICAgICAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiYVwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGN0cmxLZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKGN0cmxLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IGFjdGl2ZUl0ZW07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9ICh3YWxrZXIuY3VycmVudE5vZGUgPSB3YWxrZXIucGFyZW50Tm9kZSgpID8/IHRoaXMsIHdhbGtlci5maXJzdENoaWxkKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0SXRlbSA9ICh3YWxrZXIuY3VycmVudE5vZGUgPSB3YWxrZXIucGFyZW50Tm9kZSgpID8/IHRoaXMsIHdhbGtlci5sYXN0Q2hpbGQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdEl0ZW0gJiYgbGFzdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gdGhpcy4jZ2V0SXRlbXNSYW5nZShmaXJzdEl0ZW0sIHRoaXMuI2RlZXBlc3RJdGVtKGxhc3RJdGVtKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZXRTZWxlY3Rpb24oLi4ucmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjoge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbS5leHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVJdGVtLnRvZ2dsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2Fsa2VyID0gdGhpcy4jd2Fsa2VyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRJdGVtID0gd2Fsa2VyLnBhcmVudE5vZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEl0ZW0uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dSaWdodFwiOiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYWN0aXZlSXRlbS5leHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVJdGVtLnRvZ2dsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkFycm93VXBcIjoge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0l0ZW0gPSB0aGlzLiNwcmV2aW91c0l0ZW0oYWN0aXZlSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW0uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHNoaWZ0S2V5IH0gPSBldmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW0uc2VsZWN0ZWQgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3JlbW92ZUZyb21TZWxlY3Rpb24ocHJldmlvdXNJdGVtKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jYWRkVG9TZWxlY3Rpb24ocHJldmlvdXNJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IHRoaXMuZmlyc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdEl0ZW0uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkFycm93RG93blwiOiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRJdGVtID0gdGhpcy4jbmV4dEl0ZW0oYWN0aXZlSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJdGVtLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBzaGlmdEtleSB9ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEl0ZW0uc2VsZWN0ZWQgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3JlbW92ZUZyb21TZWxlY3Rpb24obmV4dEl0ZW0pIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNhZGRUb1NlbGVjdGlvbihuZXh0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0SXRlbSA9IHRoaXMuI2xhc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RJdGVtLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJIb21lXCI6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IHRoaXMuZmlyc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RJdGVtLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkVuZFwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0SXRlbSA9IHRoaXMuI2xhc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0SXRlbS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJFbnRlclwiOiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3NldFNlbGVjdGlvbihhY3RpdmVJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVJdGVtLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJFc2NhcGVcIjoge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4jY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuI3NldEFjdGl2ZUl0ZW0obnVsbCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZUZvY3VzRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHJlbGF0ZWRUYXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgYWN0aXZlSXRlbSB9ID0gdGhpcztcclxuICAgICAgICBpZiAoIXRoaXMuY29udGFpbnMocmVsYXRlZFRhcmdldCkpIHtcclxuICAgICAgICAgICAgKGFjdGl2ZUl0ZW0gPz8gdGhpcy5maXJzdEl0ZW0oKSk/LmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZUZvY3VzSW5FdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB0YXJnZXRJdGVtID0gdGFyZ2V0LmNsb3Nlc3QoXCJlLXRyZWVpdGVtXCIpO1xyXG4gICAgICAgIGlmICh0YXJnZXRJdGVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI3NldEFjdGl2ZUl0ZW0odGFyZ2V0SXRlbSk7XHJcbiAgICAgICAgICAgIHRoaXMudGFiSW5kZXggPSAtMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlRm9jdXNPdXRFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgcmVsYXRlZFRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgbG9zdEZvY3VzV2l0aGluID0gIXRoaXMuY29udGFpbnMocmVsYXRlZFRhcmdldCk7XHJcbiAgICAgICAgaWYgKGxvc3RGb2N1c1dpdGhpbikge1xyXG4gICAgICAgICAgICB0aGlzLnRhYkluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlTW91c2VEb3duRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHRhcmdldCwgY3RybEtleSwgc2hpZnRLZXksIGJ1dHRvbiB9ID0gZXZlbnQ7XHJcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxFVHJlZUl0ZW1FbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0ZWQgfSA9IHRhcmdldDtcclxuICAgICAgICAgICAgc3dpdGNoIChidXR0b24pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2hpZnRLZXkgJiYgIWN0cmxLZXkgJiYgIXNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZXRTZWxlY3Rpb24odGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjdHJsS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuYmx1cigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFzZWxlY3RlZCkgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI2FkZFRvU2VsZWN0aW9uKHRhcmdldCkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3JlbW92ZUZyb21TZWxlY3Rpb24odGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGFjdGl2ZUl0ZW0gfSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gdGhpcy4jZ2V0SXRlbXNSYW5nZShhY3RpdmVJdGVtLCB0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZXRTZWxlY3Rpb24oLi4ucmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZXRTZWxlY3Rpb24odGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlU2VsZWN0RXZlbnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuI29uU2VsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI2hhc1NlbGVjdGlvbkNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInNlbGVjdGlvbmNoYW5nZVwiLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSlcclxuXSwgSFRNTEVUcmVlRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImRyb3B0YXJnZXRcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KVxyXG5dLCBIVE1MRVRyZWVFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xyXG5IVE1MRVRyZWVFbGVtZW50QmFzZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgbmFtZTogXCJlLXRyZWVcIlxyXG4gICAgfSlcclxuXSwgSFRNTEVUcmVlRWxlbWVudEJhc2UpO1xyXG52YXIgSFRNTEVUcmVlRWxlbWVudCA9IEhUTUxFVHJlZUVsZW1lbnRCYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmVlLmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbmltcG9ydCB7IEN1c3RvbUVsZW1lbnQsIGVsZW1lbnQsIEF0dHJpYnV0ZVByb3BlcnR5LCBRdWVyeVByb3BlcnR5IH0gZnJvbSBcIi4uLy4uL0VsZW1lbnRcIjtcclxuZXhwb3J0IHsgSFRNTEVUcmVlSXRlbUVsZW1lbnQgfTtcclxuaW1wb3J0IHN0eWxlc2hlZXQgZnJvbSBcIi4uLy4uLy4uLy4uL2Nzcy9lbGVtZW50cy9jb250YWluZXJzL3RyZWVzL3RyZWVpdGVtLmNzc1wiO1xyXG5pbXBvcnQgeyB0aGVtZSB9IGZyb20gXCIuLi8uLi8uLi9zdHlsZXNoZWV0cy9UaGVtZVwiO1xyXG52YXIgc2hhZG93VGVtcGxhdGU7XHJcbnZhciBzdHlsZTtcclxubGV0IEhUTUxFVHJlZUl0ZW1FbGVtZW50QmFzZSA9IGNsYXNzIEhUTUxFVHJlZUl0ZW1FbGVtZW50QmFzZSBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgIHN0YXRpYyB7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUgPSBlbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUuY29udGVudC5hcHBlbmQoZWxlbWVudChcImRpdlwiLCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgIHBhcnQ6IFwiY29udGVudFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50KFwic3BhblwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0OiBcImFycm93XCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJzbG90XCIpXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KSwgZWxlbWVudChcInNsb3RcIiwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImdyb3VwXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICAgICAgY29uc3QgYWRvcHRlZFN0eWxlc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xyXG4gICAgICAgIGFkb3B0ZWRTdHlsZXNoZWV0LnJlcGxhY2Uoc3R5bGUpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW3RoZW1lLnN0eWxlc2hlZXQsIC4uLkFycmF5LmZyb20oc3R5bGVzaGVldCkubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbY291bnQsIHNvdXJjZV0gPSBpdGVtO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgICAgICAgICBzdHlsZXNoZWV0LnJlcGxhY2Uoc291cmNlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHlsZXNoZWV0O1xyXG4gICAgICAgICAgICB9KV07XHJcbiAgICAgICAgc2hhZG93Um9vdC5hcHBlbmQoc2hhZG93VGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgfVxyXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgY29uc3QgeyB0YWJJbmRleCB9ID0gdGhpcztcclxuICAgICAgICB0aGlzLnRhYkluZGV4ID0gdGFiSW5kZXg7XHJcbiAgICB9XHJcbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJleHBhbmRlZFwiOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwidG9nZ2xlXCIsIHsgYnViYmxlczogdHJ1ZSB9KSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwic2VsZWN0ZWRcIjoge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInNlbGVjdFwiLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcImxhYmVsXCI6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsUGFydCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiW3BhcnQ9bGFiZWxdXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhYmVsUGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsUGFydC50ZXh0Q29udGVudCA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcImxldmVsXCI6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHNbMl0uY3NzUnVsZXNbNV0uc3R5bGVNYXAuc2V0KFwicGFkZGluZy1sZWZ0XCIsIGAkezEyICogTnVtYmVyKG5ld1ZhbHVlKX1weGApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0b2dnbGUoZm9yY2UpIHtcclxuICAgICAgICBjb25zdCB7IGV4cGFuZGVkIH0gPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZXhwYW5kZWQgPSBmb3JjZSA/PyAhZXhwYW5kZWQ7XHJcbiAgICB9XHJcbn07XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSlcclxuXSwgSFRNTEVUcmVlSXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJuYW1lXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBOdW1iZXIgfSlcclxuXSwgSFRNTEVUcmVlSXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJwb3NpbnNldFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nLCBvYnNlcnZlZDogdHJ1ZSB9KVxyXG5dLCBIVE1MRVRyZWVJdGVtRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImxhYmVsXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBvYnNlcnZlZDogdHJ1ZSB9KVxyXG5dLCBIVE1MRVRyZWVJdGVtRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImV4cGFuZGVkXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pXHJcbl0sIEhUTUxFVHJlZUl0ZW1FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiZHJvcHRhcmdldFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KVxyXG5dLCBIVE1MRVRyZWVJdGVtRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImFjdGl2ZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgb2JzZXJ2ZWQ6IHRydWUgfSlcclxuXSwgSFRNTEVUcmVlSXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJzZWxlY3RlZFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogTnVtYmVyLCBvYnNlcnZlZDogdHJ1ZSB9KVxyXG5dLCBIVE1MRVRyZWVJdGVtRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImxldmVsXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHRWYWx1ZTogXCJsZWFmXCIgfSlcclxuXSwgSFRNTEVUcmVlSXRlbUVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgUXVlcnlQcm9wZXJ0eSh7IHNlbGVjdG9yOiBcIjpzY29wZSA+IGUtdHJlZWl0ZW1ncm91cFtzbG90PWdyb3VwXVwiIH0pXHJcbl0sIEhUTUxFVHJlZUl0ZW1FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiZ3JvdXBcIiwgdm9pZCAwKTtcclxuSFRNTEVUcmVlSXRlbUVsZW1lbnRCYXNlID0gX19kZWNvcmF0ZShbXHJcbiAgICBDdXN0b21FbGVtZW50KHtcclxuICAgICAgICBuYW1lOiBcImUtdHJlZWl0ZW1cIlxyXG4gICAgfSlcclxuXSwgSFRNTEVUcmVlSXRlbUVsZW1lbnRCYXNlKTtcclxudmFyIEhUTUxFVHJlZUl0ZW1FbGVtZW50ID0gSFRNTEVUcmVlSXRlbUVsZW1lbnRCYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmVlSXRlbS5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG5pbXBvcnQgeyBDdXN0b21FbGVtZW50LCBlbGVtZW50IH0gZnJvbSBcIi4uLy4uL0VsZW1lbnRcIjtcclxuaW1wb3J0IFwiLi9UcmVlSXRlbVwiO1xyXG5leHBvcnQgeyBIVE1MRVRyZWVJdGVtR3JvdXBFbGVtZW50IH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG5sZXQgSFRNTEVUcmVlSXRlbUdyb3VwRWxlbWVudEJhc2UgPSBjbGFzcyBIVE1MRVRyZWVJdGVtR3JvdXBFbGVtZW50QmFzZSBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgIHN0YXRpYyB7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUgPSBlbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUuY29udGVudC5hcHBlbmQoZWxlbWVudChcInNsb3RcIikpO1xyXG4gICAgICAgIHN0eWxlID0gLypjc3MqLyBgXHJcbiAgICAgICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICAgICAgY29uc3QgYWRvcHRlZFN0eWxlc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xyXG4gICAgICAgIGFkb3B0ZWRTdHlsZXNoZWV0LnJlcGxhY2Uoc3R5bGUpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW2Fkb3B0ZWRTdHlsZXNoZWV0XTtcclxuICAgICAgICBzaGFkb3dSb290LmFwcGVuZChzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICB9XHJcbn07XHJcbkhUTUxFVHJlZUl0ZW1Hcm91cEVsZW1lbnRCYXNlID0gX19kZWNvcmF0ZShbXHJcbiAgICBDdXN0b21FbGVtZW50KHtcclxuICAgICAgICBuYW1lOiBcImUtdHJlZWl0ZW1ncm91cFwiXHJcbiAgICB9KVxyXG5dLCBIVE1MRVRyZWVJdGVtR3JvdXBFbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRVRyZWVJdGVtR3JvdXBFbGVtZW50ID0gSFRNTEVUcmVlSXRlbUdyb3VwRWxlbWVudEJhc2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyZWVJdGVtR3JvdXAuanMubWFwIiwiaW1wb3J0IHsgSFRNTEVUcmVlRWxlbWVudCB9IGZyb20gXCIuL1RyZWVcIjtcclxuaW1wb3J0IHsgSFRNTEVUcmVlSXRlbUVsZW1lbnQgfSBmcm9tIFwiLi9UcmVlSXRlbVwiO1xyXG5pbXBvcnQgeyBIVE1MRVRyZWVJdGVtR3JvdXBFbGVtZW50IH0gZnJvbSBcIi4vVHJlZUl0ZW1Hcm91cFwiO1xyXG5leHBvcnQgeyBIVE1MRVRyZWVFbGVtZW50IH07XHJcbmV4cG9ydCB7IEhUTUxFVHJlZUl0ZW1FbGVtZW50IH07XHJcbmV4cG9ydCB7IEhUTUxFVHJlZUl0ZW1Hcm91cEVsZW1lbnQgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgREVGQVVMVF9USEVNRV9TRUxFQ1RFRF9JVEVNX0NPTE9SIH0gZnJvbSBcIi4uLy4uLy4uL3N0eWxlc2hlZXRzL1RoZW1lXCI7XHJcbmltcG9ydCB7IEF0dHJpYnV0ZVByb3BlcnR5LCBDdXN0b21FbGVtZW50IH0gZnJvbSBcIi4uLy4uL0VsZW1lbnRcIjtcclxuZXhwb3J0IHsgSFRNTEVIZWlnaHRTYXNoRWxlbWVudCB9O1xyXG52YXIgc3R5bGU7XHJcbmxldCBIVE1MRUhlaWdodFNhc2hFbGVtZW50QmFzZSA9IGNsYXNzIEhUTUxFSGVpZ2h0U2FzaEVsZW1lbnRCYXNlIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgZ2V0IHRhcmdldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4jdGFyZ2V0O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHtcclxuICAgICAgICBzdHlsZSA9IC8qY3NzKi8gYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRoZW1lLXNlbGVjdGVkLWl0ZW0tY29sb3IsICR7REVGQVVMVF9USEVNRV9TRUxFQ1RFRF9JVEVNX0NPTE9SfSk7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLXByb3BlcnR5OiBvcGFjaXR5O1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbi1kZWxheTogMC4ycztcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDAuMnM7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1vdXQ7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMnB4O1xyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBucy1yZXNpemU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG4gICAgfVxyXG4gICAgI3RhcmdldDtcclxuICAgICNvbkNhcHR1cmU7XHJcbiAgICAjcXVldWVkUG9pbnRlckNhbGxiYWNrO1xyXG4gICAgI3BvaW50ZXJNb3ZlbWVudDtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy4jdGFyZ2V0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLiNxdWV1ZWRQb2ludGVyQ2FsbGJhY2sgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuI3BvaW50ZXJNb3ZlbWVudCA9IDA7XHJcbiAgICAgICAgdGhpcy4jb25DYXB0dXJlID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICAgICAgY29uc3QgYWRvcHRlZFN0eWxlc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xyXG4gICAgICAgIGFkb3B0ZWRTdHlsZXNoZWV0LnJlcGxhY2Uoc3R5bGUpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW2Fkb3B0ZWRTdHlsZXNoZWV0XTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCB0aGlzLiNoYW5kbGVQb2ludGVyRG93bkV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIHRoaXMuI2hhbmRsZVBvaW50ZXJNb3ZlRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHRoaXMuI2hhbmRsZVBvaW50ZXJVcEV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgI3BvaW50ZXJNb3ZlQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy4jdGFyZ2V0O1xyXG4gICAgICAgIGlmICh0YXJnZXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc3R5bGUgfSA9IHRhcmdldDtcclxuICAgICAgICAgICAgY29uc3QgeyBncm93ZGlyIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICBjb25zdCBtb3ZlbWVudFkgPSB0aGlzLiNwb2ludGVyTW92ZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHBhcnNlRmxvYXQodGFyZ2V0Q29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwiaGVpZ2h0XCIpKTtcclxuICAgICAgICAgICAgY29uc3QgbmV3SGVpZ2h0ID0gTWF0aC50cnVuYyhoZWlnaHQgKyAoZ3Jvd2RpciA9PSBcInRvcFwiID8gLTEgOiAxKSAqIG1vdmVtZW50WSk7XHJcbiAgICAgICAgICAgIHN0eWxlLnNldFByb3BlcnR5KFwiaGVpZ2h0XCIsIGAke25ld0hlaWdodH1weGApO1xyXG4gICAgICAgICAgICBjb25zdCBjb21wdXRlZE5ld0hlaWdodCA9IHBhcnNlRmxvYXQodGFyZ2V0Q29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwiaGVpZ2h0XCIpKTtcclxuICAgICAgICAgICAgc3R5bGUuc2V0UHJvcGVydHkoXCJoZWlnaHRcIiwgYCR7Y29tcHV0ZWROZXdIZWlnaHR9cHhgKTtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInJlc2l6ZVwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuI3F1ZXVlZFBvaW50ZXJDYWxsYmFjayA9IG51bGw7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlUG9pbnRlckRvd25FdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgcG9pbnRlcklkIH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB7IGNvbnRyb2xzIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHJvb3ROb2RlID0gdGhpcy5nZXRSb290Tm9kZSgpO1xyXG4gICAgICAgIHRoaXMuI3RhcmdldCA9IHJvb3ROb2RlLmdldEVsZW1lbnRCeUlkKGNvbnRyb2xzKTtcclxuICAgICAgICB0aGlzLnNldFBvaW50ZXJDYXB0dXJlKHBvaW50ZXJJZCk7XHJcbiAgICAgICAgdGhpcy4jb25DYXB0dXJlID0gdHJ1ZTtcclxuICAgIH1cclxuICAgICNoYW5kbGVQb2ludGVyTW92ZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuI29uQ2FwdHVyZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy4jcXVldWVkUG9pbnRlckNhbGxiYWNrID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuI3BvaW50ZXJNb3ZlbWVudCA9IGV2ZW50Lm1vdmVtZW50WTtcclxuICAgICAgICAgICAgICAgIHRoaXMuI3F1ZXVlZFBvaW50ZXJDYWxsYmFjayA9IHRoaXMuI3BvaW50ZXJNb3ZlQ2FsbGJhY2suYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLiNxdWV1ZWRQb2ludGVyQ2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4jcG9pbnRlck1vdmVtZW50ICs9IGV2ZW50Lm1vdmVtZW50WTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVQb2ludGVyVXBFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgcG9pbnRlcklkIH0gPSBldmVudDtcclxuICAgICAgICB0aGlzLnJlbGVhc2VQb2ludGVyQ2FwdHVyZShwb2ludGVySWQpO1xyXG4gICAgICAgIHRoaXMuI29uQ2FwdHVyZSA9IGZhbHNlO1xyXG4gICAgfVxyXG59O1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pXHJcbl0sIEhUTUxFSGVpZ2h0U2FzaEVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJjb250cm9sc1wiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0VmFsdWU6IFwidG9wXCIgfSlcclxuXSwgSFRNTEVIZWlnaHRTYXNoRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImdyb3dkaXJcIiwgdm9pZCAwKTtcclxuSFRNTEVIZWlnaHRTYXNoRWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS1oc2FzaFwiXHJcbiAgICB9KVxyXG5dLCBIVE1MRUhlaWdodFNhc2hFbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRUhlaWdodFNhc2hFbGVtZW50ID0gSFRNTEVIZWlnaHRTYXNoRWxlbWVudEJhc2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUhlaWdodFNhc2guanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgREVGQVVMVF9USEVNRV9TRUxFQ1RFRF9JVEVNX0NPTE9SIH0gZnJvbSBcIi4uLy4uLy4uL3N0eWxlc2hlZXRzL1RoZW1lXCI7XHJcbmltcG9ydCB7IEN1c3RvbUVsZW1lbnQsIEF0dHJpYnV0ZVByb3BlcnR5IH0gZnJvbSBcIi4uLy4uL0VsZW1lbnRcIjtcclxuZXhwb3J0IHsgSFRNTEVXaWR0aFNhc2hFbGVtZW50IH07XHJcbnZhciBzdHlsZTtcclxubGV0IEhUTUxFV2lkdGhTYXNoRWxlbWVudEJhc2UgPSBjbGFzcyBIVE1MRVdpZHRoU2FzaEVsZW1lbnRCYXNlIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgZ2V0IHRhcmdldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4jdGFyZ2V0O1xyXG4gICAgfVxyXG4gICAgI3RhcmdldDtcclxuICAgICNvbkNhcHR1cmU7XHJcbiAgICAjcXVldWVkUG9pbnRlckNhbGxiYWNrO1xyXG4gICAgI3BvaW50ZXJNb3ZlbWVudDtcclxuICAgIHN0YXRpYyB7XHJcbiAgICAgICAgc3R5bGUgPSAvKmNzcyovIGBcclxuICAgICAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10aGVtZS1zZWxlY3RlZC1pdGVtLWNvbG9yLCAke0RFRkFVTFRfVEhFTUVfU0VMRUNURURfSVRFTV9DT0xPUn0pO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbi1wcm9wZXJ0eTogb3BhY2l0eTtcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24tZGVsYXk6IDAuMnM7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAwLjJzO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2Utb3V0O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMnB4O1xyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBldy1yZXNpemU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLiN0YXJnZXQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuI3F1ZXVlZFBvaW50ZXJDYWxsYmFjayA9IG51bGw7XHJcbiAgICAgICAgdGhpcy4jcG9pbnRlck1vdmVtZW50ID0gMDtcclxuICAgICAgICB0aGlzLiNvbkNhcHR1cmUgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgICAgICBjb25zdCBhZG9wdGVkU3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgYWRvcHRlZFN0eWxlc2hlZXQucmVwbGFjZShzdHlsZSk7XHJcbiAgICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbYWRvcHRlZFN0eWxlc2hlZXRdO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHRoaXMuI2hhbmRsZVBvaW50ZXJEb3duRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy4jaGFuZGxlUG9pbnRlck1vdmVFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgdGhpcy4jaGFuZGxlUG9pbnRlclVwRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBzZXRXaWR0aCh3aWR0aCkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuI3RhcmdldDtcclxuICAgICAgICBpZiAodGFyZ2V0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgbWF4IH0gPSB0aGlzO1xyXG4gICAgICAgICAgICBjb25zdCB7IHN0eWxlIH0gPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgIHN0eWxlLnNldFByb3BlcnR5KFwid2lkdGhcIiwgYCR7d2lkdGh9cHhgKTtcclxuICAgICAgICAgICAgaWYgKG1heCkge1xyXG4gICAgICAgICAgICAgICAgc3R5bGUuc2V0UHJvcGVydHkoXCJtYXgtd2lkdGhcIiwgYCR7d2lkdGh9cHhgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNwb2ludGVyTW92ZUNhbGxiYWNrKCkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuI3RhcmdldDtcclxuICAgICAgICBpZiAodGFyZ2V0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldENvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpO1xyXG4gICAgICAgICAgICBjb25zdCB7IGdyb3dkaXIgfSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdmVtZW50WCA9IHRoaXMuI3BvaW50ZXJNb3ZlbWVudDtcclxuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBwYXJzZUZsb2F0KHRhcmdldENvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcIndpZHRoXCIpKTtcclxuICAgICAgICAgICAgY29uc3QgbmV3V2lkdGggPSB3aWR0aCArIChncm93ZGlyID09IFwicmlnaHRcIiA/IDEgOiAtMSkgKiBtb3ZlbWVudFg7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0V2lkdGgobmV3V2lkdGgpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicmVzaXplXCIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy4jcG9pbnRlck1vdmVtZW50ID0gMDtcclxuICAgICAgICB0aGlzLiNxdWV1ZWRQb2ludGVyQ2FsbGJhY2sgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZVBvaW50ZXJEb3duRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHBvaW50ZXJJZCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgeyBjb250cm9scyB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCByb290Tm9kZSA9IHRoaXMuZ2V0Um9vdE5vZGUoKTtcclxuICAgICAgICB0aGlzLiN0YXJnZXQgPSByb290Tm9kZS5nZXRFbGVtZW50QnlJZChjb250cm9scyk7XHJcbiAgICAgICAgdGhpcy5zZXRQb2ludGVyQ2FwdHVyZShwb2ludGVySWQpO1xyXG4gICAgICAgIHRoaXMuI29uQ2FwdHVyZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlUG9pbnRlck1vdmVFdmVudChldmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNvbkNhcHR1cmUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuI3F1ZXVlZFBvaW50ZXJDYWxsYmFjayA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiNxdWV1ZWRQb2ludGVyQ2FsbGJhY2sgPSB0aGlzLiNwb2ludGVyTW92ZUNhbGxiYWNrLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy4jcXVldWVkUG9pbnRlckNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLiNwb2ludGVyTW92ZW1lbnQgKz0gZXZlbnQubW92ZW1lbnRYO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVQb2ludGVyVXBFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgcG9pbnRlcklkIH0gPSBldmVudDtcclxuICAgICAgICB0aGlzLnJlbGVhc2VQb2ludGVyQ2FwdHVyZShwb2ludGVySWQpO1xyXG4gICAgICAgIHRoaXMuI29uQ2FwdHVyZSA9IGZhbHNlO1xyXG4gICAgfVxyXG59O1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nLCBvYnNlcnZlZDogdHJ1ZSB9KVxyXG5dLCBIVE1MRVdpZHRoU2FzaEVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJjb250cm9sc1wiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0VmFsdWU6IFwicmlnaHRcIiB9KVxyXG5dLCBIVE1MRVdpZHRoU2FzaEVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJncm93ZGlyXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pXHJcbl0sIEhUTUxFV2lkdGhTYXNoRWxlbWVudEJhc2UucHJvdG90eXBlLCBcIm1heFwiLCB2b2lkIDApO1xyXG5IVE1MRVdpZHRoU2FzaEVsZW1lbnRCYXNlID0gX19kZWNvcmF0ZShbXHJcbiAgICBDdXN0b21FbGVtZW50KHtcclxuICAgICAgICBuYW1lOiBcImUtd3Nhc2hcIlxyXG4gICAgfSlcclxuXSwgSFRNTEVXaWR0aFNhc2hFbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRVdpZHRoU2FzaEVsZW1lbnQgPSBIVE1MRVdpZHRoU2FzaEVsZW1lbnRCYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1XaWR0aFNhc2guanMubWFwIiwiaW1wb3J0IHsgSFRNTEVIZWlnaHRTYXNoRWxlbWVudCB9IGZyb20gXCIuL0hlaWdodFNhc2hcIjtcclxuaW1wb3J0IHsgSFRNTEVXaWR0aFNhc2hFbGVtZW50IH0gZnJvbSBcIi4vV2lkdGhTYXNoXCI7XHJcbmV4cG9ydCB7IEhUTUxFSGVpZ2h0U2FzaEVsZW1lbnQgfTtcclxuZXhwb3J0IHsgSFRNTEVXaWR0aFNhc2hFbGVtZW50IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbmltcG9ydCB7IERFRkFVTFRfVEhFTUVfSE9WRVJFRF9JVEVNX0NPTE9SLCBERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SLCBERUZBVUxUX1RIRU1FX1NFTEVDVEVEX0lURU1fQ09MT1IgfSBmcm9tIFwiLi4vLi4vLi4vc3R5bGVzaGVldHMvVGhlbWVcIjtcclxuaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCwgQXR0cmlidXRlUHJvcGVydHksIGVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vRWxlbWVudFwiO1xyXG5leHBvcnQgeyBIVE1MRU9wdGlvbkVsZW1lbnQgfTtcclxudmFyIHNoYWRvd1RlbXBsYXRlO1xyXG52YXIgc3R5bGU7XHJcbmxldCBIVE1MRU9wdGlvbkVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVPcHRpb25FbGVtZW50QmFzZSBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgIHN0YXRpYyB7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUgPSBlbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUuY29udGVudC5hcHBlbmQoZWxlbWVudChcInNwYW5cIiwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0OiBcImxhYmVsXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBzdHlsZSA9IC8qY3NzKi8gYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDIycHg7XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwIDEycHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KDpob3Zlcikge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGhlbWUtaG92ZXJlZC1pdGVtLWNvbG9yLCAke0RFRkFVTFRfVEhFTUVfSE9WRVJFRF9JVEVNX0NPTE9SfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDpob3N0KDpmb2N1cy13aXRoaW4pIHtcclxuICAgICAgICAgICAgICAgIG91dGxpbmU6IDFweCBzb2xpZCB2YXIoLS10aGVtZS1mb2N1c2VkLWl0ZW0tb3V0bGluZS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SfSk7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lLW9mZnNldDogLTFweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoW3NlbGVjdGVkXSkge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGhlbWUtc2VsZWN0ZWQtaXRlbS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX1NFTEVDVEVEX0lURU1fQ09MT1J9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoW2Rpc2FibGVkXSkge1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC4zODtcclxuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdCg6OmJlZm9yZSkge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMThweDtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMThweDtcclxuICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogNnB4O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIG1hc2stc2l6ZTogMThweCAxOHB4O1xyXG4gICAgICAgICAgICAgICAgLXdlYmtpdC1tYXNrLXNpemU6IDE4cHggMThweDtcclxuXHJcbiAgICAgICAgICAgICAgICBtYXNrLWltYWdlOiBub25lO1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogbm9uZTtcclxuICAgICAgICAgICAgICAgIC13ZWJraXQtbWFzay1pbWFnZTogbm9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGNvbnN0IGludGVybmFscyA9IHRoaXMuYXR0YWNoSW50ZXJuYWxzKCk7XHJcbiAgICAgICAgaW50ZXJuYWxzLnJvbGUgPSBcIm9wdGlvblwiO1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxzID0gaW50ZXJuYWxzO1xyXG4gICAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgICAgIGNvbnN0IGFkb3B0ZWRTdHlsZXNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcclxuICAgICAgICBhZG9wdGVkU3R5bGVzaGVldC5yZXBsYWNlKHN0eWxlKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFthZG9wdGVkU3R5bGVzaGVldF07XHJcbiAgICAgICAgc2hhZG93Um9vdC5hcHBlbmQoc2hhZG93VGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgfVxyXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgY29uc3QgeyB0YWJJbmRleCB9ID0gdGhpcztcclxuICAgICAgICB0aGlzLnRhYkluZGV4ID0gdGFiSW5kZXg7XHJcbiAgICB9XHJcbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJsYWJlbFwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHNoYWRvd1Jvb3QgfSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbFBhcnQgPSBzaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJbcGFydD1sYWJlbF1cIik7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFiZWxQYXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxQYXJ0LnRleHRDb250ZW50ID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwic2VsZWN0ZWRcIjoge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBpbnRlcm5hbHMsIHNlbGVjdGVkIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgaW50ZXJuYWxzLmFyaWFTZWxlY3RlZCA9IFN0cmluZyhzZWxlY3RlZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwic2VsZWN0XCIsIHsgYnViYmxlczogdHJ1ZSB9KSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KVxyXG5dLCBIVE1MRU9wdGlvbkVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJuYW1lXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSlcclxuXSwgSFRNTEVPcHRpb25FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZywgb2JzZXJ2ZWQ6IHRydWUgfSlcclxuXSwgSFRNTEVPcHRpb25FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwibGFiZWxcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSlcclxuXSwgSFRNTEVPcHRpb25FbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIG9ic2VydmVkOiB0cnVlIH0pXHJcbl0sIEhUTUxFT3B0aW9uRWxlbWVudEJhc2UucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIHZvaWQgMCk7XHJcbkhUTUxFT3B0aW9uRWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS1vcHRpb25cIlxyXG4gICAgfSlcclxuXSwgSFRNTEVPcHRpb25FbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRU9wdGlvbkVsZW1lbnQgPSBIVE1MRU9wdGlvbkVsZW1lbnRCYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1PcHRpb24uanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCwgZWxlbWVudCB9IGZyb20gXCIuLi8uLi9FbGVtZW50XCI7XHJcbmV4cG9ydCB7IEhUTUxFT3B0aW9uR3JvdXBFbGVtZW50IH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG5sZXQgSFRNTEVPcHRpb25Hcm91cEVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVPcHRpb25Hcm91cEVsZW1lbnRCYXNlIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgc3RhdGljIHtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZSA9IGVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmFwcGVuZChlbGVtZW50KFwic2xvdFwiKSk7XHJcbiAgICAgICAgc3R5bGUgPSAvKmNzcyovIGBcclxuICAgICAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgICAgICBzaGFkb3dSb290LmFwcGVuZChzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICB9XHJcbn07XHJcbkhUTUxFT3B0aW9uR3JvdXBFbGVtZW50QmFzZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgbmFtZTogXCJlLW9wdGlvbmdyb3VwXCJcclxuICAgIH0pXHJcbl0sIEhUTUxFT3B0aW9uR3JvdXBFbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRU9wdGlvbkdyb3VwRWxlbWVudCA9IEhUTUxFT3B0aW9uR3JvdXBFbGVtZW50QmFzZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T3B0aW9uR3JvdXAuanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgREVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fQ09MT1IsIERFRkFVTFRfVEhFTUVfRk9DVVNFRF9JVEVNX09VVExJTkVfQ09MT1IgfSBmcm9tIFwiLi4vLi4vLi4vc3R5bGVzaGVldHMvVGhlbWVcIjtcclxuaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCwgQXR0cmlidXRlUHJvcGVydHksIGVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vRWxlbWVudFwiO1xyXG5pbXBvcnQgeyBIVE1MRU9wdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi9PcHRpb25cIjtcclxuaW1wb3J0IHsgSFRNTEVPcHRpb25Hcm91cEVsZW1lbnQgfSBmcm9tIFwiLi9PcHRpb25Hcm91cFwiO1xyXG5leHBvcnQgeyBIVE1MRVNlbGVjdEVsZW1lbnQgfTtcclxudmFyIHNoYWRvd1RlbXBsYXRlO1xyXG52YXIgc3R5bGU7XHJcbnZhciBtdXRhdGlvbk9ic2VydmVyO1xyXG5sZXQgSFRNTEVTZWxlY3RFbGVtZW50QmFzZSA9IGNsYXNzIEhUTUxFU2VsZWN0RWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBpbnRlcm5hbHM7XHJcbiAgICBzdGF0aWMgZ2V0IGZvcm1Bc3NvY2lhdGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwiZS1vcHRpb25cIikpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFjdGl2ZU9wdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiZS1vcHRpb246Zm9jdXMtd2l0aGluXCIpID8/IG51bGw7XHJcbiAgICB9XHJcbiAgICBnZXQgc2VsZWN0ZWRPcHRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcImUtb3B0aW9uW3NlbGVjdGVkXVwiKSA/PyBudWxsO1xyXG4gICAgfVxyXG4gICAgI3dhbGtlcjtcclxuICAgICN3YXNFeHBhbmRlZE9uTW91c2VEb3duO1xyXG4gICAgc3RhdGljIHtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZSA9IGVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxuICAgICAgICBzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmFwcGVuZChlbGVtZW50KFwiZGl2XCIsIHtcclxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgcGFydDogXCJjb250ZW50XCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJvdXRwdXRcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydDogXCJ2YWx1ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH0pLCBlbGVtZW50KFwiZGl2XCIsIHtcclxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgcGFydDogXCJib3hcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjaGlsZHJlbjogZWxlbWVudChcInNsb3RcIilcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgc3R5bGUgPSAvKmNzcyovIGBcclxuICAgICAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMjBweDtcclxuICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGdyZXk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIDpob3N0KDpmb2N1cykge1xyXG4gICAgICAgICAgICAgICAgb3V0bGluZTogMXB4IHNvbGlkIHZhcigtLXRoZW1lLWZvY3VzZWQtaXRlbS1vdXRsaW5lLWNvbG9yLCAke0RFRkFVTFRfVEhFTUVfRk9DVVNFRF9JVEVNX09VVExJTkVfQ09MT1J9KTtcclxuICAgICAgICAgICAgICAgIG91dGxpbmUtb2Zmc2V0OiAtMXB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdCg6Zm9jdXMtd2l0aGluOm5vdCg6Zm9jdXMpKSB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10aGVtZS1mb2N1c2VkLWl0ZW0tY29sb3IsICR7REVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fQ09MT1J9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoW2Rpc2FibGVkXSkge1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC4zODtcclxuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBbcGFydD1cImNvbnRlbnRcIl0ge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwIDRweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgW3BhcnQ9XCJjb250ZW50XCJdOjphZnRlciB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMjBweDtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMjBweDtcclxuICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiBcIuKWvlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBbcGFydD1cInZhbHVlXCJdIHtcclxuICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogYXV0bztcclxuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBbcGFydD1cImJveFwiXSB7XHJcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAxO1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogNnB4IDA7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogbWF4LWNvbnRlbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLXdlYmtpdC1ib3gtc2hhZG93OiByZ2JhKDAsIDAsIDAsIDAuMjQpIDBweCAzcHggNnB4O1xyXG4gICAgICAgICAgICAgICAgLW1vei1ib3gtc2hhZG93OiByZ2JhKDAsIDAsIDAsIDAuMjQpIDBweCAzcHggNnB4O1xyXG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogcmdiYSgwLCAwLCAwLCAwLjI0KSAwcHggM3B4IDZweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoOm5vdChbZXhwYW5kZWRdKSkgW3BhcnQ9XCJib3hcIl0ge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDA7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDA7XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICAgICAgbXV0YXRpb25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnNMaXN0KSA9PiB7XHJcbiAgICAgICAgICAgIG11dGF0aW9uc0xpc3QuZm9yRWFjaCgobXV0YXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBtdXRhdGlvbjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdCA9IHRhcmdldDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0ZWRPcHRpb24sIHZhbHVlLCBvcHRpb25zIH0gPSBzZWxlY3Q7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkT3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uVG9TZWxlY3QgPSB2YWx1ZSA/IG9wdGlvbnMuZmluZChvcHRpb25faSA9PiBvcHRpb25faS52YWx1ZSA9PT0gdmFsdWUpIDogc2VsZWN0LiNmaXJzdE9wdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25Ub1NlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25Ub1NlbGVjdC5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3QuI3NldFNlbGVjdGVkT3B0aW9uKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGNvbnN0IGludGVybmFscyA9IHRoaXMuYXR0YWNoSW50ZXJuYWxzKCk7XHJcbiAgICAgICAgaW50ZXJuYWxzLnJvbGUgPSBcImNvbWJvYm94XCI7XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbHMgPSBpbnRlcm5hbHM7XHJcbiAgICAgICAgdGhpcy4jd2FzRXhwYW5kZWRPbk1vdXNlRG93biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuI3dhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIodGhpcywgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQsIHRoaXMuI3dhbGtlck5vZGVGaWx0ZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICAgICAgY29uc3QgYWRvcHRlZFN0eWxlc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xyXG4gICAgICAgIGFkb3B0ZWRTdHlsZXNoZWV0LnJlcGxhY2Uoc3R5bGUpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW2Fkb3B0ZWRTdHlsZXNoZWV0XTtcclxuICAgICAgICBzaGFkb3dSb290LmFwcGVuZChzaGFkb3dUZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy4jaGFuZGxlQ2xpY2tFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCB0aGlzLiNoYW5kbGVGb2N1c091dEV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLiNoYW5kbGVNb3VzZURvd25FdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgdGhpcy4jaGFuZGxlTW91c2VPdmVyRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLiNoYW5kbGVLZXlEb3duRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwic2VsZWN0XCIsIHRoaXMuI2hhbmRsZVNlbGVjdEV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIG11dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLCB7XHJcbiAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgICAgICAgICAgc3VidHJlZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgY29uc3QgeyBvcHRpb25zLCBzZWxlY3RlZE9wdGlvbiwgdmFsdWUgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyB0YWJJbmRleCB9ID0gdGhpcztcclxuICAgICAgICB0aGlzLnRhYkluZGV4ID0gdGFiSW5kZXg7XHJcbiAgICAgICAgY3VzdG9tRWxlbWVudHMudXBncmFkZSh0aGlzKTtcclxuICAgICAgICBjb25zdCBvcHRpb25Ub1NlbGVjdCA9IHNlbGVjdGVkT3B0aW9uID8/ICh2YWx1ZSA/IG9wdGlvbnMuZmluZChvcHRpb25faSA9PiBvcHRpb25faS52YWx1ZSA9PT0gdmFsdWUpIDogbnVsbCkgPz8gdGhpcy4jZmlyc3RPcHRpb24oKTtcclxuICAgICAgICBpZiAob3B0aW9uVG9TZWxlY3QpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvblRvU2VsZWN0ID09PSBzZWxlY3RlZE9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4jc2V0U2VsZWN0ZWRPcHRpb24oc2VsZWN0ZWRPcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4jc2VsZWN0T3B0aW9uKG9wdGlvblRvU2VsZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGV4cGFuZCgpIHtcclxuICAgICAgICBjb25zdCB7IGV4cGFuZGVkIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmICghZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuI3Bvc2l0aW9uQm94KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0ZWRPcHRpb24gfSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZE9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb24uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29sbGFwc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBleHBhbmRlZCB9ID0gdGhpcztcclxuICAgICAgICBpZiAoZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5leHBhbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdG9nZ2xlKGZvcmNlKSB7XHJcbiAgICAgICAgY29uc3QgeyBleHBhbmRlZCB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBleHBhbmQgPSBmb3JjZSA/PyAhZXhwYW5kZWQ7XHJcbiAgICAgICAgZXhwYW5kID8gdGhpcy5leHBhbmQoKSA6IHRoaXMuY29sbGFwc2UoKTtcclxuICAgIH1cclxuICAgICN2YWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJbcGFydD12YWx1ZV1cIik7XHJcbiAgICB9XHJcbiAgICAjYm94KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIltwYXJ0PWJveF1cIik7XHJcbiAgICB9XHJcbiAgICAjd2Fsa2VyTm9kZUZpbHRlcihub2RlKSB7XHJcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MRU9wdGlvbkVsZW1lbnQgJiYgIW5vZGUuZGlzYWJsZWQgJiYgIW5vZGUuaGlkZGVuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOb2RlRmlsdGVyLkZJTFRFUl9BQ0NFUFQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MRU9wdGlvbkdyb3VwRWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTm9kZUZpbHRlci5GSUxURVJfU0tJUDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX1JFSkVDVDtcclxuICAgIH1cclxuICAgICNmaXJzdE9wdGlvbigpIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gd2Fsa2VyLnJvb3Q7XHJcbiAgICAgICAgcmV0dXJuIHdhbGtlci5maXJzdENoaWxkKCk7XHJcbiAgICB9XHJcbiAgICAjbGFzdE9wdGlvbigpIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gd2Fsa2VyLnJvb3Q7XHJcbiAgICAgICAgcmV0dXJuIHdhbGtlci5sYXN0Q2hpbGQoKTtcclxuICAgIH1cclxuICAgICNwcmV2aW91c09wdGlvbihvcHRpb24pIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gb3B0aW9uO1xyXG4gICAgICAgIHJldHVybiB3YWxrZXIucHJldmlvdXNOb2RlKCk7XHJcbiAgICB9XHJcbiAgICAjbmV4dE9wdGlvbihvcHRpb24pIHtcclxuICAgICAgICBjb25zdCB3YWxrZXIgPSB0aGlzLiN3YWxrZXI7XHJcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gb3B0aW9uO1xyXG4gICAgICAgIHJldHVybiB3YWxrZXIubmV4dE5vZGUoKTtcclxuICAgIH1cclxuICAgICNzZWxlY3RPcHRpb24ob3B0aW9uKSB7XHJcbiAgICAgICAgY29uc3QgeyBzZWxlY3RlZE9wdGlvbiB9ID0gdGhpcztcclxuICAgICAgICBpZiAob3B0aW9uICE9PSBzZWxlY3RlZE9wdGlvbikge1xyXG4gICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNzZXRTZWxlY3RlZE9wdGlvbihvcHRpb24pIHtcclxuICAgICAgICBjb25zdCB7IGxhYmVsLCB2YWx1ZSB9ID0gb3B0aW9uID8/IHsgbGFiZWw6IFwiXCIsIHZhbHVlOiBcIlwiIH07XHJcbiAgICAgICAgY29uc3QgeyBpbnRlcm5hbHMgfSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy4jdmFsdWUoKS50ZXh0Q29udGVudCA9IGxhYmVsO1xyXG4gICAgICAgIGludGVybmFscy5zZXRGb3JtVmFsdWUodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgI3Bvc2l0aW9uQm94KCkge1xyXG4gICAgICAgIGNvbnN0IGJveCA9IHRoaXMuI2JveCgpO1xyXG4gICAgICAgIGNvbnN0IHsgb2Zmc2V0TGVmdCwgb2Zmc2V0VG9wIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBjb25zdCB7IHN0eWxlOiBib3hTdHlsZSB9ID0gYm94O1xyXG4gICAgICAgIGNvbnN0IHsgd2lkdGg6IGJveFdpZHRoLCBoZWlnaHQ6IGJveEhlaWdodCB9ID0gYm94LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IHsgY2xpZW50V2lkdGgsIGNsaWVudEhlaWdodCB9ID0gZG9jdW1lbnQuYm9keTtcclxuICAgICAgICBjb25zdCBvdmVyZmxvd1ggPSBvZmZzZXRMZWZ0ICsgd2lkdGggKyBib3hXaWR0aCAtIGNsaWVudFdpZHRoO1xyXG4gICAgICAgIGNvbnN0IG92ZXJmbG93WSA9IG9mZnNldFRvcCArIGJveEhlaWdodCAtIGNsaWVudEhlaWdodDtcclxuICAgICAgICBib3hTdHlsZS5zZXRQcm9wZXJ0eShcImxlZnRcIiwgYCR7b3ZlcmZsb3dYID4gMCA/XHJcbiAgICAgICAgICAgIHdpZHRoIC0gYm94V2lkdGggOlxyXG4gICAgICAgICAgICAwfXB4YCk7XHJcbiAgICAgICAgYm94U3R5bGUuc2V0UHJvcGVydHkoXCJ0b3BcIiwgYCR7b3ZlcmZsb3dZID4gMCA/XHJcbiAgICAgICAgICAgIC0oaGVpZ2h0IC0gMSkgOlxyXG4gICAgICAgICAgICAoaGVpZ2h0IC0gMSl9cHhgKTtcclxuICAgIH1cclxuICAgICNoYW5kbGVDbGlja0V2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgZXhwYW5kZWQgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3Qgd2FzRXhwYW5kZWRPbk1vdXNlRG93biA9IHRoaXMuI3dhc0V4cGFuZGVkT25Nb3VzZURvd247XHJcbiAgICAgICAgaWYgKCFleHBhbmRlZCAmJiAhd2FzRXhwYW5kZWRPbk1vdXNlRG93bikge1xyXG4gICAgICAgICAgICBjb25zdCB7IHNlbGVjdGVkT3B0aW9uIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLmV4cGFuZCgpO1xyXG4gICAgICAgICAgICAoc2VsZWN0ZWRPcHRpb24gPz8gdGhpcy4jZmlyc3RPcHRpb24oKSA/PyB0aGlzKS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbGxhcHNlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldE9wdGlvbiA9IHRhcmdldC5jbG9zZXN0KFwiZS1vcHRpb25cIik7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRPcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuI3NlbGVjdE9wdGlvbih0YXJnZXRPcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuI3dhc0V4cGFuZGVkT25Nb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICAgICNoYW5kbGVGb2N1c091dEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyByZWxhdGVkVGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCBsb3N0Rm9jdXNXaXRoaW4gPSAhdGhpcy5jb250YWlucyhyZWxhdGVkVGFyZ2V0KTtcclxuICAgICAgICBpZiAobG9zdEZvY3VzV2l0aGluIHx8IHRoaXMgPT09IHJlbGF0ZWRUYXJnZXQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVNb3VzZURvd25FdmVudCgpIHtcclxuICAgICAgICBjb25zdCB7IGV4cGFuZGVkIH0gPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuI3dhc0V4cGFuZGVkT25Nb3VzZURvd24gPSBleHBhbmRlZDtcclxuICAgIH1cclxuICAgICNoYW5kbGVNb3VzZU92ZXJFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB0YXJnZXRPcHRpb24gPSB0YXJnZXQuY2xvc2VzdChcImUtb3B0aW9uXCIpO1xyXG4gICAgICAgIGlmICh0YXJnZXRPcHRpb24pIHtcclxuICAgICAgICAgICAgdGFyZ2V0T3B0aW9uLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlS2V5RG93bkV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgZXhwYW5kZWQsIGFjdGl2ZU9wdGlvbiwgc2VsZWN0ZWRPcHRpb24gfSA9IHRoaXM7XHJcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuICAgICAgICAgICAgY2FzZSBcIkFycm93VXBcIjoge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNPcHRpb24gPSBhY3RpdmVPcHRpb24gP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNwcmV2aW91c09wdGlvbihhY3RpdmVPcHRpb24pIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jZmlyc3RPcHRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNPcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNPcHRpb24uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzT3B0aW9uID0gc2VsZWN0ZWRPcHRpb24gP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNwcmV2aW91c09wdGlvbihzZWxlY3RlZE9wdGlvbikgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNmaXJzdE9wdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c09wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZWxlY3RPcHRpb24ocHJldmlvdXNPcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkFycm93RG93blwiOiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0T3B0aW9uID0gYWN0aXZlT3B0aW9uID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jbmV4dE9wdGlvbihhY3RpdmVPcHRpb24pIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jbGFzdE9wdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0T3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRPcHRpb24uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRPcHRpb24gPSBzZWxlY3RlZE9wdGlvbiA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI25leHRPcHRpb24oc2VsZWN0ZWRPcHRpb24pIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jbGFzdE9wdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0T3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3NlbGVjdE9wdGlvbihuZXh0T3B0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJIb21lXCI6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0T3B0aW9uID0gdGhpcy4jZmlyc3RPcHRpb24oKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdE9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdE9wdGlvbi5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZWxlY3RPcHRpb24oZmlyc3RPcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIkVuZFwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0T3B0aW9uID0gdGhpcy4jbGFzdE9wdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RPcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE9wdGlvbi5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNzZWxlY3RPcHRpb24obGFzdE9wdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiRW50ZXJcIjpcclxuICAgICAgICAgICAgY2FzZSBcIiBcIjoge1xyXG4gICAgICAgICAgICAgICAgKGFjdGl2ZU9wdGlvbiA/PyB0aGlzKS5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiRXNjYXBlXCI6IHtcclxuICAgICAgICAgICAgICAgIGlmIChleHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBsZW5ndGg6IGtleUxlbmd0aCB9ID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleUxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5Q29kZSA9IGtleS5jaGFyQ29kZUF0KDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgb3B0aW9ucyB9ID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVJbmRleCA9IGFjdGl2ZU9wdGlvbiA/IG9wdGlvbnMuaW5kZXhPZihhY3RpdmVPcHRpb24pIDogLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdPcHRpb24gPSBvcHRpb25zLmZpbmQoKG9wdGlvbl9pLCBpKSA9PiBvcHRpb25faS5sYWJlbC50b0xvd2VyQ2FzZSgpLmNoYXJDb2RlQXQoMCkgPT0ga2V5Q29kZSAmJiBpID4gYWN0aXZlSW5kZXgpID8/IG9wdGlvbnMuZmluZCgob3B0aW9uX2kpID0+IG9wdGlvbl9pLmxhYmVsLnRvTG93ZXJDYXNlKCkuY2hhckNvZGVBdCgwKSA9PSBrZXlDb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdPcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hpbmdPcHRpb24uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZVNlbGVjdEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHRhcmdldE9wdGlvbiA9IHRhcmdldC5jbG9zZXN0KFwiZS1vcHRpb25cIik7XHJcbiAgICAgICAgaWYgKHRhcmdldE9wdGlvbikge1xyXG4gICAgICAgICAgICBjb25zdCB7IHNlbGVjdGVkIH0gPSB0YXJnZXRPcHRpb247XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBvcHRpb25zIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5mb3JFYWNoKChvcHRpb25faSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25faSAhPT0gdGFyZ2V0T3B0aW9uICYmIG9wdGlvbl9pLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbl9pLnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiNzZXRTZWxlY3RlZE9wdGlvbih0YXJnZXRPcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBzZWxlY3RlZE9wdGlvbiB9ID0gdGhpcztcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZE9wdGlvbiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0T3B0aW9uID0gdGhpcy4jZmlyc3RPcHRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RPcHRpb24gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jc2V0U2VsZWN0ZWRPcHRpb24oZmlyc3RPcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KVxyXG5dLCBIVE1MRVNlbGVjdEVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJuYW1lXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIG9ic2VydmVkOiB0cnVlIH0pXHJcbl0sIEhUTUxFU2VsZWN0RWxlbWVudEJhc2UucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHRWYWx1ZTogXCJzZWxlY3RcIiwgb2JzZXJ2ZWQ6IHRydWUgfSlcclxuXSwgSFRNTEVTZWxlY3RFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KVxyXG5dLCBIVE1MRVNlbGVjdEVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJleHBhbmRlZFwiLCB2b2lkIDApO1xyXG5IVE1MRVNlbGVjdEVsZW1lbnRCYXNlID0gX19kZWNvcmF0ZShbXHJcbiAgICBDdXN0b21FbGVtZW50KHtcclxuICAgICAgICBuYW1lOiBcImUtc2VsZWN0XCJcclxuICAgIH0pXHJcbl0sIEhUTUxFU2VsZWN0RWxlbWVudEJhc2UpO1xyXG52YXIgSFRNTEVTZWxlY3RFbGVtZW50ID0gSFRNTEVTZWxlY3RFbGVtZW50QmFzZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2VsZWN0LmpzLm1hcCIsImltcG9ydCB7IEhUTUxFU2VsZWN0RWxlbWVudCB9IGZyb20gXCIuL1NlbGVjdFwiO1xyXG5pbXBvcnQgeyBIVE1MRU9wdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi9PcHRpb25cIjtcclxuaW1wb3J0IHsgSFRNTEVPcHRpb25Hcm91cEVsZW1lbnQgfSBmcm9tIFwiLi9PcHRpb25Hcm91cFwiO1xyXG5leHBvcnQgeyBIVE1MRVNlbGVjdEVsZW1lbnQgfTtcclxuZXhwb3J0IHsgSFRNTEVPcHRpb25FbGVtZW50IH07XHJcbmV4cG9ydCB7IEhUTUxFT3B0aW9uR3JvdXBFbGVtZW50IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbmltcG9ydCB7IERFRkFVTFRfVEhFTUVfU0VMRUNURURfSVRFTV9DT0xPUiB9IGZyb20gXCIuLi8uLi9zdHlsZXNoZWV0cy9UaGVtZVwiO1xyXG5pbXBvcnQgeyBDdXN0b21FbGVtZW50LCBBdHRyaWJ1dGVQcm9wZXJ0eSB9IGZyb20gXCIuLi9FbGVtZW50XCI7XHJcbmV4cG9ydCB7IEhUTUxFSGFuZGxlRWxlbWVudCB9O1xyXG52YXIgc3R5bGU7XHJcbmxldCBIVE1MRUhhbmRsZUVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVIYW5kbGVFbGVtZW50QmFzZSBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgICN0YXJnZXQ7XHJcbiAgICAjb25DYXB0dXJlO1xyXG4gICAgc3RhdGljIHtcclxuICAgICAgICBzdHlsZSA9IC8qY3NzKi8gYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDI0cHg7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEycHg7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRoZW1lLXNlbGVjdGVkLWl0ZW0tY29sb3IsICR7REVGQVVMVF9USEVNRV9TRUxFQ1RFRF9JVEVNX0NPTE9SfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLXdlYmtpdC1tYXNrLWltYWdlOiB1cmwoXCIvYXNzZXRzL2RvdHMucG5nXCIpO1xyXG4gICAgICAgICAgICAgICAgbWFzay1pbWFnZTogdXJsKFwiL2Fzc2V0cy9kb3RzLnBuZ1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAtd2Via2l0LW1hc2stcmVwZWF0OiByZXBlYXQ7XHJcbiAgICAgICAgICAgICAgICBtYXNrLXJlcGVhdDogcmVwZWF0O1xyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBtb3ZlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICAgICAgY29uc3QgYWRvcHRlZFN0eWxlc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xyXG4gICAgICAgIGFkb3B0ZWRTdHlsZXNoZWV0LnJlcGxhY2Uoc3R5bGUpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW2Fkb3B0ZWRTdHlsZXNoZWV0XTtcclxuICAgICAgICB0aGlzLiN0YXJnZXQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuI29uQ2FwdHVyZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHRoaXMuI2hhbmRsZVBvaW50ZXJEb3duRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy4jaGFuZGxlUG9pbnRlck1vdmVFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgdGhpcy4jaGFuZGxlUG9pbnRlclVwRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJjb250cm9sc1wiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGNvbnRyb2xzIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy4jdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udHJvbHMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlUG9pbnRlclVwRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHBvaW50ZXJJZCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgdGhpcy5yZWxlYXNlUG9pbnRlckNhcHR1cmUocG9pbnRlcklkKTtcclxuICAgICAgICB0aGlzLiNvbkNhcHR1cmUgPSBmYWxzZTtcclxuICAgIH1cclxuICAgICNoYW5kbGVQb2ludGVyRG93bkV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyBwb2ludGVySWQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgY29udHJvbHMgfSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy4jdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udHJvbHMpO1xyXG4gICAgICAgIHRoaXMuc2V0UG9pbnRlckNhcHR1cmUocG9pbnRlcklkKTtcclxuICAgICAgICB0aGlzLiNvbkNhcHR1cmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZVBvaW50ZXJNb3ZlRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy4jb25DYXB0dXJlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuI3RhcmdldDtcclxuICAgICAgICAgICAgaWYgKHRhcmdldCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IG1vdmVtZW50WCwgbW92ZW1lbnRZIH0gPSBldmVudDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgd2lkdGg6IHJlY3RXaWR0aCwgaGVpZ2h0OiByZWN0SGVpZ2h0IH0gPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRlckVsZW1lbnQgPSB0YXJnZXQucGFyZW50RWxlbWVudCA/PyBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBsZWZ0OiBvdXRlclJlY3RMZWZ0LCByaWdodDogb3V0ZXJSZWN0UmlnaHQsIHRvcDogb3V0ZXJSZWN0VG9wLCBib3R0b206IG91dGVyUmVjdEJvdHRvbSB9ID0gb3V0ZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVmdCA9IHBhcnNlRmxvYXQodGFyZ2V0Q29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwibGVmdFwiKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdMZWZ0ID0gTWF0aC5tYXgob3V0ZXJSZWN0TGVmdCwgTWF0aC5taW4oTWF0aC50cnVuYyhsZWZ0ICsgbW92ZW1lbnRYKSwgb3V0ZXJSZWN0UmlnaHQgLSByZWN0V2lkdGgpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvcCA9IHBhcnNlRmxvYXQodGFyZ2V0Q29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwidG9wXCIpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RvcCA9IE1hdGgubWF4KG91dGVyUmVjdFRvcCwgTWF0aC5taW4oTWF0aC50cnVuYyh0b3AgKyBtb3ZlbWVudFkpLCBvdXRlclJlY3RCb3R0b20gLSByZWN0SGVpZ2h0KSk7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUuc2V0UHJvcGVydHkoXCJsZWZ0XCIsIGAke25ld0xlZnR9cHhgKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5zdHlsZS5zZXRQcm9wZXJ0eShcInRvcFwiLCBgJHtuZXdUb3B9cHhgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJtb3ZlXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZywgb2JzZXJ2ZWQ6IHRydWUgfSlcclxuXSwgSFRNTEVIYW5kbGVFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwiY29udHJvbHNcIiwgdm9pZCAwKTtcclxuSFRNTEVIYW5kbGVFbGVtZW50QmFzZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgbmFtZTogXCJlLWhhbmRsZVwiXHJcbiAgICB9KVxyXG5dLCBIVE1MRUhhbmRsZUVsZW1lbnRCYXNlKTtcclxudmFyIEhUTUxFSGFuZGxlRWxlbWVudCA9IEhUTUxFSGFuZGxlRWxlbWVudEJhc2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUhhbmRsZS5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG5pbXBvcnQgeyBDdXN0b21FbGVtZW50LCBBdHRyaWJ1dGVQcm9wZXJ0eSB9IGZyb20gXCIuLi9FbGVtZW50XCI7XHJcbmV4cG9ydCB7IEhUTUxFSW1wb3J0RWxlbWVudCB9O1xyXG5sZXQgSFRNTEVJbXBvcnRFbGVtZW50QmFzZSA9IGNsYXNzIEhUTUxFSW1wb3J0RWxlbWVudEJhc2UgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgICAgICBjb25zdCB7IHNyYyB9ID0gdGhpcztcclxuICAgICAgICBpZiAoc3JjKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI2ltcG9ydFJlcXVlc3Qoc3JjKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyAjaW1wb3J0UmVxdWVzdChzcmMpIHtcclxuICAgICAgICB0aGlzLm91dGVySFRNTCA9IGF3YWl0IGZldGNoKHNyYykudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImxvYWRcIiwgeyBidWJibGVzOiB0cnVlIH0pKTtcclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KVxyXG5dLCBIVE1MRUltcG9ydEVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJzcmNcIiwgdm9pZCAwKTtcclxuSFRNTEVJbXBvcnRFbGVtZW50QmFzZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgbmFtZTogXCJlLWltcG9ydFwiXHJcbiAgICB9KVxyXG5dLCBIVE1MRUltcG9ydEVsZW1lbnRCYXNlKTtcclxudmFyIEhUTUxFSW1wb3J0RWxlbWVudCA9IEhUTUxFSW1wb3J0RWxlbWVudEJhc2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltcG9ydC5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG5pbXBvcnQgeyBERUZBVUxUX1RIRU1FX1NFTEVDVEVEX0lURU1fQ09MT1IgfSBmcm9tIFwiLi4vLi4vc3R5bGVzaGVldHMvVGhlbWVcIjtcclxuaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCwgQXR0cmlidXRlUHJvcGVydHksIGVsZW1lbnQgfSBmcm9tIFwiLi4vRWxlbWVudFwiO1xyXG5leHBvcnQgeyBIVE1MRUxvYWRlckVsZW1lbnQgfTtcclxudmFyIGJhclNoYWRvd1RlbXBsYXRlO1xyXG52YXIgc3Bpbm5lclNoYWRvd1RlbXBsYXRlO1xyXG52YXIgc3R5bGU7XHJcbmxldCBIVE1MRUxvYWRlckVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVMb2FkZXJFbGVtZW50QmFzZSBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgIHN0YXRpYyB7XHJcbiAgICAgICAgYmFyU2hhZG93VGVtcGxhdGUgPSBlbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbiAgICAgICAgYmFyU2hhZG93VGVtcGxhdGUuY29udGVudC5hcHBlbmQoZWxlbWVudChcImRpdlwiLCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgIHBhcnQ6IFwiYmFyXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJkaXZcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydDogXCJzbGlkZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudChcImRpdlwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydDogXCJjdXJzb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgc3Bpbm5lclNoYWRvd1RlbXBsYXRlID0gZWxlbWVudChcInRlbXBsYXRlXCIpO1xyXG4gICAgICAgIHNwaW5uZXJTaGFkb3dUZW1wbGF0ZS5jb250ZW50LmFwcGVuZChlbGVtZW50KFwiZGl2XCIsIHtcclxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgcGFydDogXCJzcGlubmVyXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBzdHlsZSA9IC8qY3NzKi8gYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIDpob3N0KDppcyg6bm90KFt0eXBlXSksIFt0eXBlPVwiYmFyXCJdKSkge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgZ2FpbnNib3JvO1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIFtwYXJ0PVwiYmFyXCJdIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDZweDtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDg2cHg7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZXNtb2tlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIFtwYXJ0PVwic2xpZGVyXCJdIHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi1uYW1lOiBzbGlkZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgW3BhcnQ9XCJzbGlkZXJcIl0sXHJcbiAgICAgICAgICAgIFtwYXJ0PVwiY3Vyc29yXCJdIHtcclxuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICAgICAgICAgIHdpbGwtY2hhbmdlOiB0cmFuc2Zvcm07XHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb24tZHVyYXRpb246IDFzO1xyXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogbGluZWFyO1xyXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogaW5maW5pdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgW3BhcnQ9XCJjdXJzb3JcIl0ge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMzJweDtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRoZW1lLWFjdGl2YXRlZC1pdGVtLWNvbG9yLCAke0RFRkFVTFRfVEhFTUVfU0VMRUNURURfSVRFTV9DT0xPUn0pO1xyXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLW5hbWU6IGN1cnNvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdChbdHlwZT1cInNwaW5uZXJcIl0pIHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAyMHB4O1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyMHB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIFtwYXJ0PVwic3Bpbm5lclwiXSB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMThweDtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMThweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBbcGFydD1cInNwaW5uZXJcIl06OmFmdGVyIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMnB4O1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMnB4O1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLXdpZHRoOiA0cHg7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudCB2YXIoLS10aGVtZS1hY3RpdmF0ZWQtaXRlbS1jb2xvciwgJHtERUZBVUxUX1RIRU1FX1NFTEVDVEVEX0lURU1fQ09MT1J9KTtcclxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogc3BpbiAxLjJzIGxpbmVhciBpbmZpbml0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBAa2V5ZnJhbWVzIHNsaWRlciB7XHJcbiAgICAgICAgICAgICAgICAwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDAlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDEwMCUge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBAa2V5ZnJhbWVzIGN1cnNvciB7XHJcbiAgICAgICAgICAgICAgICAwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0xMDAlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDEwMCUge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBAa2V5ZnJhbWVzIHNwaW4ge1xyXG4gICAgICAgICAgICAgICAgMCUge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgMTAwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgICAgIGNvbnN0IGFkb3B0ZWRTdHlsZXNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcclxuICAgICAgICBhZG9wdGVkU3R5bGVzaGVldC5yZXBsYWNlKHN0eWxlKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFthZG9wdGVkU3R5bGVzaGVldF07XHJcbiAgICAgICAgc2hhZG93Um9vdC5yZXBsYWNlQ2hpbGRyZW4oYmFyU2hhZG93VGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgfVxyXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xyXG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwidHlwZVwiOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiN1cGRhdGVUZW1wbGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjdXBkYXRlVGVtcGxhdGUoKSB7XHJcbiAgICAgICAgY29uc3QgeyB0eXBlLCBzaGFkb3dSb290IH0gPSB0aGlzO1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwic3Bpbm5lclwiOiB7XHJcbiAgICAgICAgICAgICAgICBzaGFkb3dSb290LnJlcGxhY2VDaGlsZHJlbihzcGlubmVyU2hhZG93VGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcImJhclwiOiB7XHJcbiAgICAgICAgICAgICAgICBzaGFkb3dSb290LnJlcGxhY2VDaGlsZHJlbihiYXJTaGFkb3dUZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IFN0cmluZywgZGVmYXVsdFZhbHVlOiBcImJhclwiLCBvYnNlcnZlZDogdHJ1ZSB9KVxyXG5dLCBIVE1MRUxvYWRlckVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XHJcbkhUTUxFTG9hZGVyRWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS1sb2FkZXJcIlxyXG4gICAgfSlcclxuXSwgSFRNTEVMb2FkZXJFbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRUxvYWRlckVsZW1lbnQgPSBIVE1MRUxvYWRlckVsZW1lbnRCYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Mb2FkZXIuanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCB9IGZyb20gXCIuLi9FbGVtZW50XCI7XHJcbmV4cG9ydCB7IEhUTUxFU2VwYXJhdG9yRWxlbWVudCB9O1xyXG52YXIgc3R5bGU7XHJcbmxldCBIVE1MRVNlcGFyYXRvckVsZW1lbnRCYXNlID0gY2xhc3MgSFRNTEVTZXBhcmF0b3JFbGVtZW50QmFzZSBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgICNpbnRlcm5hbHM7XHJcbiAgICBzdGF0aWMge1xyXG4gICAgICAgIHN0eWxlID0gLypjc3MqLyBgXHJcbiAgICAgICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDAgMTBweCAyN3B4O1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIGxpZ2h0Z3JleTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgICAgIGNvbnN0IGFkb3B0ZWRTdHlsZXNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcclxuICAgICAgICBhZG9wdGVkU3R5bGVzaGVldC5yZXBsYWNlKHN0eWxlKTtcclxuICAgICAgICBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFthZG9wdGVkU3R5bGVzaGVldF07XHJcbiAgICAgICAgdGhpcy4jaW50ZXJuYWxzID0gdGhpcy5hdHRhY2hJbnRlcm5hbHMoKTtcclxuICAgICAgICB0aGlzLiNpbnRlcm5hbHMucm9sZSA9IFwic2VwYXJhdG9yXCI7XHJcbiAgICB9XHJcbn07XHJcbkhUTUxFU2VwYXJhdG9yRWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS1zZXBhcmF0b3JcIlxyXG4gICAgfSlcclxuXSwgSFRNTEVTZXBhcmF0b3JFbGVtZW50QmFzZSk7XHJcbnZhciBIVE1MRVNlcGFyYXRvckVsZW1lbnQgPSBIVE1MRVNlcGFyYXRvckVsZW1lbnRCYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TZXBhcmF0b3IuanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCwgQXR0cmlidXRlUHJvcGVydHksIGVsZW1lbnQgfSBmcm9tIFwiLi4vRWxlbWVudFwiO1xyXG5leHBvcnQgeyBIVE1MRVRvb2xUaXBFbGVtZW50IH07XHJcbnZhciBzaGFkb3dUZW1wbGF0ZTtcclxudmFyIHN0eWxlO1xyXG52YXIgSElERV9ERUxBWV9NUyA9IDEwMDtcclxudmFyIFNIT1dfREVMQVlfTVMgPSAyMDA7XHJcbnZhciBBTklNQVRJT05fRFVSQVRJT04gPSAxMDA7XHJcbmxldCBIVE1MRVRvb2xUaXBFbGVtZW50QmFzZSA9IGNsYXNzIEhUTUxFVG9vbFRpcEVsZW1lbnRCYXNlIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgZ2V0IHRhcmdldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4jdGFyZ2V0O1xyXG4gICAgfVxyXG4gICAgI3RhcmdldDtcclxuICAgICN0YXJnZXRMaXN0ZW5lck9iamVjdDtcclxuICAgICNkb2N1bWVudExpc3RlbmVyT2JqZWN0O1xyXG4gICAgI3RvZ2dsZUFuaW1hdGlvbjtcclxuICAgIHN0YXRpYyB7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUgPSBlbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbiAgICAgICAgc2hhZG93VGVtcGxhdGUuY29udGVudC5hcHBlbmQoZWxlbWVudChcImRpdlwiLCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgIHBhcnQ6IFwiY29udGFpbmVyXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJzcGFuXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQ6IFwiYXJyb3dcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgZWxlbWVudChcInNsb3RcIilcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBzdHlsZSA9IC8qY3NzKi8gYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAxO1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogNHB4O1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xyXG4gICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XHJcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoW2hpZGRlbl0pIHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIDpob3N0KDpub3QoW3Zpc2libGVdKSkge1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgW3BhcnQ9XCJhcnJvd1wiXSB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAxO1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDRweDtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogNHB4O1xyXG4gICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItd2lkdGg6IDAgMXB4IDFweCAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdCg6aXMoOm5vdChbcG9zaXRpb25dKSwgW3Bvc2l0aW9uPVwidG9wXCJdKSkgW3BhcnQ9XCJhcnJvd1wiXSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtMnB4LCAtMnB4KSByb3RhdGUoNDVkZWcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdCg6aXMoW3Bvc2l0aW9uPVwiYm90dG9tXCJdKSkgW3BhcnQ9XCJhcnJvd1wiXSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtMnB4LCAtMnB4KSByb3RhdGUoMjI1ZGVnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgOmhvc3QoOmlzKFtwb3NpdGlvbj1cImxlZnRcIl0pKSBbcGFydD1cImFycm93XCJdIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC0ycHgsIC0ycHgpIHJvdGF0ZSgzMTVkZWcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA6aG9zdCg6aXMoW3Bvc2l0aW9uPVwicmlnaHRcIl0pKSBbcGFydD1cImFycm93XCJdIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC0ycHgsIC0ycHgpIHJvdGF0ZSgxMzVkZWcpO1xyXG4gICAgICAgICAgICB9ICAgICAgICBcclxuICAgICAgICBgO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgICAgICBjb25zdCBhZG9wdGVkU3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgYWRvcHRlZFN0eWxlc2hlZXQucmVwbGFjZShzdHlsZSk7XHJcbiAgICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbYWRvcHRlZFN0eWxlc2hlZXRdO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYXBwZW5kKHNoYWRvd1RlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgICAgICB0aGlzLiN0YXJnZXQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuI3RvZ2dsZUFuaW1hdGlvbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy4jdGFyZ2V0TGlzdGVuZXJPYmplY3QgPSAoZnVuY3Rpb24gKHRvb2x0aXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB0eXBlIH0gPSBldmVudDtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm1vdXNlZW50ZXJcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC4jaGFuZGxlVGFyZ2V0TW91c2VFbnRlckV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibW91c2VsZWF2ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwLiNoYW5kbGVUYXJnZXRNb3VzZUxlYXZlRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuI2RvY3VtZW50TGlzdGVuZXJPYmplY3QgPSAoZnVuY3Rpb24gKHRvb2x0aXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB0eXBlIH0gPSBldmVudDtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImtleWRvd25cIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcC4jaGFuZGxlRG9jdW1lbnRLZXlEb3duRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSkodGhpcyk7XHJcbiAgICB9XHJcbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgICAgICB0aGlzLiNzZXRUYXJnZXQoKTtcclxuICAgIH1cclxuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcclxuICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImZvclwiOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiNzZXRUYXJnZXQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI3NldFRhcmdldCgpIHtcclxuICAgICAgICBjb25zdCB7IGh0bWxGb3IgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGh0bWxGb3IpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm9vdE5vZGUgPSB0aGlzLmdldFJvb3ROb2RlKCk7XHJcbiAgICAgICAgICAgIGlmIChyb290Tm9kZSBpbnN0YW5jZW9mIERvY3VtZW50IHx8IHJvb3ROb2RlIGluc3RhbmNlb2YgU2hhZG93Um9vdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gcm9vdE5vZGUuZ2V0RWxlbWVudEJ5SWQoaHRtbEZvcik7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkVGFyZ2V0ID0gdGhpcy4jdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldExpc3RlbmVyT2JqZWN0ID0gdGhpcy4jdGFyZ2V0TGlzdGVuZXJPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9sZFRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgdGFyZ2V0TGlzdGVuZXJPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgdGFyZ2V0TGlzdGVuZXJPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgdGFyZ2V0TGlzdGVuZXJPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCB0YXJnZXRMaXN0ZW5lck9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLiN0YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy4jcG9zaXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzaG93KG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCB7IGltbWVkaWF0ZSA9IGZhbHNlIH0gPSBvcHRpb25zID8/IHt9O1xyXG4gICAgICAgIGxldCB0b2dnbGVBbmltYXRpb24gPSB0aGlzLiN0b2dnbGVBbmltYXRpb247XHJcbiAgICAgICAgaWYgKHRvZ2dsZUFuaW1hdGlvbiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGlkIH0gPSB0b2dnbGVBbmltYXRpb247XHJcbiAgICAgICAgICAgIGlmIChpZCA9PT0gXCJoaWRlXCIpIHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZUFuaW1hdGlvbi5jYW5jZWwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICghaW1tZWRpYXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLnZpc2libGUpIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgdG9nZ2xlQW5pbWF0aW9uID0gdGhpcy5hbmltYXRlKFtcclxuICAgICAgICAgICAgICAgIHsgb3BhY2l0eTogMCB9LFxyXG4gICAgICAgICAgICAgICAgeyBvcGFjaXR5OiAxIH1cclxuICAgICAgICAgICAgXSwge1xyXG4gICAgICAgICAgICAgICAgaWQ6IFwic2hvd1wiLFxyXG4gICAgICAgICAgICAgICAgZGVsYXk6IGltbWVkaWF0ZSA/IDAgOiBTSE9XX0RFTEFZX01TLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IGltbWVkaWF0ZSA/IDAgOiBBTklNQVRJT05fRFVSQVRJT05cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZmluaXNoZWQgfSA9IHRvZ2dsZUFuaW1hdGlvbjtcclxuICAgICAgICAgICAgZmluaXNoZWQudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChfID0+IHZvaWQgMCk7XHJcbiAgICAgICAgICAgIHRoaXMuI3RvZ2dsZUFuaW1hdGlvbiA9IHRvZ2dsZUFuaW1hdGlvbjtcclxuICAgICAgICAgICAgdGhpcy4jcG9zaXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuI3RvZ2dsZUFuaW1hdGlvbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaGlkZShvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgeyBpbW1lZGlhdGUgPSBmYWxzZSB9ID0gb3B0aW9ucyA/PyB7fTtcclxuICAgICAgICBsZXQgdG9nZ2xlQW5pbWF0aW9uID0gdGhpcy4jdG9nZ2xlQW5pbWF0aW9uO1xyXG4gICAgICAgIGlmICh0b2dnbGVBbmltYXRpb24gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBpZCB9ID0gdG9nZ2xlQW5pbWF0aW9uO1xyXG4gICAgICAgICAgICBpZiAoaWQgPT09IFwic2hvd1wiKSB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVBbmltYXRpb24uY2FuY2VsKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoIWltbWVkaWF0ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnZpc2libGUpIHtcclxuICAgICAgICAgICAgdG9nZ2xlQW5pbWF0aW9uID0gdGhpcy5hbmltYXRlKFtcclxuICAgICAgICAgICAgICAgIHsgb3BhY2l0eTogMSB9LFxyXG4gICAgICAgICAgICAgICAgeyBvcGFjaXR5OiAwIH1cclxuICAgICAgICAgICAgXSwge1xyXG4gICAgICAgICAgICAgICAgaWQ6IFwiaGlkZVwiLFxyXG4gICAgICAgICAgICAgICAgZGVsYXk6IGltbWVkaWF0ZSA/IDAgOiBISURFX0RFTEFZX01TLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IGltbWVkaWF0ZSA/IDAgOiBBTklNQVRJT05fRFVSQVRJT05cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZmluaXNoZWQgfSA9IHRvZ2dsZUFuaW1hdGlvbjtcclxuICAgICAgICAgICAgZmluaXNoZWQudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goXyA9PiB2b2lkIDApO1xyXG4gICAgICAgICAgICB0aGlzLiN0b2dnbGVBbmltYXRpb24gPSB0b2dnbGVBbmltYXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLiN0b2dnbGVBbmltYXRpb24gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNhcnJvdygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJbcGFydD1hcnJvd11cIik7XHJcbiAgICB9XHJcbiAgICAjcG9zaXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy4jdGFyZ2V0O1xyXG4gICAgICAgIGlmICh0YXJnZXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3QgeyB0b3A6IHRhcmdldFRvcCwgYm90dG9tOiB0YXJnZXRCb3R0b20sIGxlZnQ6IHRhcmdldExlZnQsIHJpZ2h0OiB0YXJnZXRSaWdodCB9ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoOiB0b29sdGlwV2lkdGgsIGhlaWdodDogdG9vbHRpcEhlaWdodCB9ID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgY29uc3QgdG9vbHRpcEhhbGZXaWR0aCA9IHRvb2x0aXBXaWR0aCAvIDI7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvb2x0aXBIYWxmSGVpZ2h0ID0gdG9vbHRpcEhlaWdodCAvIDI7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldENlbnRlciA9ICh0YXJnZXRSaWdodCArIHRhcmdldExlZnQpIC8gMjtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0TWlkZGxlID0gKHRhcmdldEJvdHRvbSArIHRhcmdldFRvcCkgLyAyO1xyXG4gICAgICAgICAgICBjb25zdCB7IHBvc2l0aW9uLCBzdHlsZTogdG9vbHRpcFN0eWxlIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICBjb25zdCBhcnJvdyA9IHRoaXMuI2Fycm93KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc3R5bGU6IGFycm93U3R5bGUgfSA9IGFycm93O1xyXG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoOiBhcnJvd1dpZHRoLCBoZWlnaHQ6IGFycm93SGVpZ2h0IH0gPSBhcnJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgY29uc3QgYXJyb3dIYWxmV2lkdGggPSBhcnJvd1dpZHRoIC8gMjtcclxuICAgICAgICAgICAgY29uc3QgYXJyb3dIYWxmSGVpZ2h0ID0gYXJyb3dIZWlnaHQgLyAyO1xyXG4gICAgICAgICAgICBjb25zdCB7IGNsaWVudFdpZHRoIH0gPSBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwidG9wXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwU3R5bGUuc2V0UHJvcGVydHkoXCJ0b3BcIiwgYCR7dGFyZ2V0VG9wIC0gdG9vbHRpcEhlaWdodCAtIGFycm93SGFsZkhlaWdodH1weGApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBTdHlsZS5zZXRQcm9wZXJ0eShcImxlZnRcIiwgYCR7TWF0aC5tYXgoMCwgTWF0aC5taW4odGFyZ2V0Q2VudGVyIC0gdG9vbHRpcEhhbGZXaWR0aCwgY2xpZW50V2lkdGggLSB0b29sdGlwV2lkdGgpKX1weGApO1xyXG4gICAgICAgICAgICAgICAgICAgIGFycm93U3R5bGUuc2V0UHJvcGVydHkoXCJ0b3BcIiwgYCR7dGFyZ2V0VG9wIC0gYXJyb3dIYWxmSGVpZ2h0fXB4YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dTdHlsZS5zZXRQcm9wZXJ0eShcImxlZnRcIiwgYCR7dGFyZ2V0Q2VudGVyfXB4YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiYm90dG9tXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwU3R5bGUuc2V0UHJvcGVydHkoXCJ0b3BcIiwgYCR7dGFyZ2V0Qm90dG9tICsgYXJyb3dIYWxmSGVpZ2h0fXB4YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcFN0eWxlLnNldFByb3BlcnR5KFwibGVmdFwiLCBgJHtNYXRoLm1heCgwLCBNYXRoLm1pbih0YXJnZXRDZW50ZXIgLSB0b29sdGlwSGFsZldpZHRoLCBjbGllbnRXaWR0aCAtIHRvb2x0aXBXaWR0aCkpfXB4YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dTdHlsZS5zZXRQcm9wZXJ0eShcInRvcFwiLCBgJHt0YXJnZXRCb3R0b20gKyBhcnJvd0hhbGZIZWlnaHR9cHhgKTtcclxuICAgICAgICAgICAgICAgICAgICBhcnJvd1N0eWxlLnNldFByb3BlcnR5KFwibGVmdFwiLCBgJHt0YXJnZXRDZW50ZXJ9cHhgKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgXCJsZWZ0XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwU3R5bGUuc2V0UHJvcGVydHkoXCJ0b3BcIiwgYCR7dGFyZ2V0TWlkZGxlIC0gdG9vbHRpcEhhbGZIZWlnaHR9cHhgKTtcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwU3R5bGUuc2V0UHJvcGVydHkoXCJsZWZ0XCIsIGAke3RhcmdldExlZnQgLSB0b29sdGlwV2lkdGggLSBhcnJvd0hhbGZXaWR0aH1weGApO1xyXG4gICAgICAgICAgICAgICAgICAgIGFycm93U3R5bGUuc2V0UHJvcGVydHkoXCJ0b3BcIiwgYCR7dGFyZ2V0TWlkZGxlfXB4YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dTdHlsZS5zZXRQcm9wZXJ0eShcImxlZnRcIiwgYCR7dGFyZ2V0TGVmdCAtIGFycm93SGFsZldpZHRofXB4YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwicmlnaHRcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBTdHlsZS5zZXRQcm9wZXJ0eShcInRvcFwiLCBgJHt0YXJnZXRNaWRkbGUgLSB0b29sdGlwSGFsZkhlaWdodH1weGApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBTdHlsZS5zZXRQcm9wZXJ0eShcImxlZnRcIiwgYCR7dGFyZ2V0UmlnaHQgKyBhcnJvd0hhbGZXaWR0aH1weGApO1xyXG4gICAgICAgICAgICAgICAgICAgIGFycm93U3R5bGUuc2V0UHJvcGVydHkoXCJ0b3BcIiwgYCR7dGFyZ2V0TWlkZGxlfXB4YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dTdHlsZS5zZXRQcm9wZXJ0eShcImxlZnRcIiwgYCR7dGFyZ2V0UmlnaHQgKyBhcnJvd0hhbGZXaWR0aH1weGApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZVRhcmdldE1vdXNlRW50ZXJFdmVudCgpIHtcclxuICAgICAgICB0aGlzLnNob3coKTtcclxuICAgICAgICBjb25zdCB0b2dnbGVBbmltYXRpb24gPSB0aGlzLiN0b2dnbGVBbmltYXRpb247XHJcbiAgICAgICAgaWYgKHRvZ2dsZUFuaW1hdGlvbikge1xyXG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudExpc3RlbmVyT2JqZWN0ID0gdGhpcy4jZG9jdW1lbnRMaXN0ZW5lck9iamVjdDtcclxuICAgICAgICAgICAgY29uc3QgeyBmaW5pc2hlZCB9ID0gdG9nZ2xlQW5pbWF0aW9uO1xyXG4gICAgICAgICAgICBmaW5pc2hlZC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGRvY3VtZW50TGlzdGVuZXJPYmplY3QpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChfID0+IHZvaWQgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZVRhcmdldE1vdXNlTGVhdmVFdmVudCgpIHtcclxuICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICBjb25zdCB0b2dnbGVBbmltYXRpb24gPSB0aGlzLiN0b2dnbGVBbmltYXRpb247XHJcbiAgICAgICAgaWYgKHRvZ2dsZUFuaW1hdGlvbikge1xyXG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudExpc3RlbmVyT2JqZWN0ID0gdGhpcy4jZG9jdW1lbnRMaXN0ZW5lck9iamVjdDtcclxuICAgICAgICAgICAgY29uc3QgeyBmaW5pc2hlZCB9ID0gdG9nZ2xlQW5pbWF0aW9uO1xyXG4gICAgICAgICAgICBmaW5pc2hlZC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGRvY3VtZW50TGlzdGVuZXJPYmplY3QpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChfID0+IHZvaWQgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZURvY3VtZW50S2V5RG93bkV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJFc2NhcGVcIjoge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbW1lZGlhdGU6IHRydWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIG9ic2VydmVkOiB0cnVlLCBuYW1lOiBcImZvclwiIH0pXHJcbl0sIEhUTUxFVG9vbFRpcEVsZW1lbnRCYXNlLnByb3RvdHlwZSwgXCJodG1sRm9yXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgQXR0cmlidXRlUHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHRWYWx1ZTogXCJ0b3BcIiB9KVxyXG5dLCBIVE1MRVRvb2xUaXBFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBBdHRyaWJ1dGVQcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSlcclxuXSwgSFRNTEVUb29sVGlwRWxlbWVudEJhc2UucHJvdG90eXBlLCBcInZpc2libGVcIiwgdm9pZCAwKTtcclxuSFRNTEVUb29sVGlwRWxlbWVudEJhc2UgPSBfX2RlY29yYXRlKFtcclxuICAgIEN1c3RvbUVsZW1lbnQoe1xyXG4gICAgICAgIG5hbWU6IFwiZS10b29sdGlwXCJcclxuICAgIH0pXHJcbl0sIEhUTUxFVG9vbFRpcEVsZW1lbnRCYXNlKTtcclxudmFyIEhUTUxFVG9vbFRpcEVsZW1lbnQgPSBIVE1MRVRvb2xUaXBFbGVtZW50QmFzZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VG9vbFRpcC5qcy5tYXAiLCJpbXBvcnQgeyBIVE1MRUhhbmRsZUVsZW1lbnQgfSBmcm9tIFwiLi9IYW5kbGVcIjtcclxuaW1wb3J0IHsgSFRNTEVJbXBvcnRFbGVtZW50IH0gZnJvbSBcIi4vSW1wb3J0XCI7XHJcbmltcG9ydCB7IEhUTUxFTG9hZGVyRWxlbWVudCB9IGZyb20gXCIuL0xvYWRlclwiO1xyXG5pbXBvcnQgeyBIVE1MRVNlcGFyYXRvckVsZW1lbnQgfSBmcm9tIFwiLi9TZXBhcmF0b3JcIjtcclxuaW1wb3J0IHsgSFRNTEVUb29sVGlwRWxlbWVudCB9IGZyb20gXCIuL1Rvb2xUaXBcIjtcclxuZXhwb3J0IHsgSFRNTEVIYW5kbGVFbGVtZW50IH07XHJcbmV4cG9ydCB7IEhUTUxFSW1wb3J0RWxlbWVudCB9O1xyXG5leHBvcnQgeyBIVE1MRUxvYWRlckVsZW1lbnQgfTtcclxuZXhwb3J0IHsgSFRNTEVTZXBhcmF0b3JFbGVtZW50IH07XHJcbmV4cG9ydCB7IEhUTUxFVG9vbFRpcEVsZW1lbnQgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiZXhwb3J0IHsgTW9kZWxDaGFuZ2VSZWNvcmQgfTtcclxuZXhwb3J0IHsgTW9kZWxFdmVudCB9O1xyXG5leHBvcnQgeyBNb2RlbE5vZGUgfTtcclxuZXhwb3J0IHsgTW9kZWxPYmplY3QgfTtcclxuZXhwb3J0IHsgUmVhY3RpdmVQcm9wZXJ0eSB9O1xyXG5leHBvcnQgeyBNb2RlbExpc3QgfTtcclxuZXhwb3J0IHsgTW9kZWxDaGFuZ2VPYnNlcnZlciB9O1xyXG5jbGFzcyBNb2RlbENoYW5nZVJlY29yZEJhc2Uge1xyXG4gICAgdGFyZ2V0O1xyXG4gICAgY2hhbmdlVHlwZTtcclxuICAgIHByb3BlcnR5TmFtZTtcclxuICAgIG9sZFZhbHVlO1xyXG4gICAgbmV3VmFsdWU7XHJcbiAgICByZW1vdmVkSW5kZXg7XHJcbiAgICByZW1vdmVkSXRlbXM7XHJcbiAgICBpbnNlcnRlZEluZGV4O1xyXG4gICAgaW5zZXJ0ZWRJdGVtcztcclxuICAgIHNvcnRlZEluZGljZXM7XHJcbiAgICBjb25zdHJ1Y3Rvcihpbml0KSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSBpbml0LnRhcmdldDtcclxuICAgICAgICB0aGlzLmNoYW5nZVR5cGUgPSBpbml0LmNoYW5nZVR5cGU7XHJcbiAgICAgICAgdGhpcy5wcm9wZXJ0eU5hbWUgPSBpbml0LnByb3BlcnR5TmFtZSA/PyBudWxsO1xyXG4gICAgICAgIHRoaXMub2xkVmFsdWUgPSBpbml0Lm9sZFZhbHVlID8/IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLm5ld1ZhbHVlID0gaW5pdC5uZXdWYWx1ZSA/PyB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVkSW5kZXggPSBpbml0LnJlbW92ZWRJbmRleCA/PyAwO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlZEl0ZW1zID0gbmV3IE1vZGVsTm9kZXNMaXN0KGluaXQucmVtb3ZlZEl0ZW1zID8/IFtdKTtcclxuICAgICAgICB0aGlzLmluc2VydGVkSW5kZXggPSBpbml0Lmluc2VydGVkSW5kZXggPz8gMDtcclxuICAgICAgICB0aGlzLmluc2VydGVkSXRlbXMgPSBuZXcgTW9kZWxOb2Rlc0xpc3QoaW5pdC5pbnNlcnRlZEl0ZW1zID8/IFtdKTtcclxuICAgICAgICB0aGlzLnNvcnRlZEluZGljZXMgPSBpbml0LnNvcnRlZEluZGljZXMgPz8gW107XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0IFBST1BFUlRZX0NIQU5HRSgpIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBnZXQgTElTVF9SRU1PVkUoKSB7XHJcbiAgICAgICAgcmV0dXJuIDI7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0IExJU1RfSU5TRVJUKCkge1xyXG4gICAgICAgIHJldHVybiAzO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGdldCBMSVNUX1NPUlQoKSB7XHJcbiAgICAgICAgcmV0dXJuIDQ7XHJcbiAgICB9XHJcbiAgICBnZXQgUFJPUEVSVFlfQ0hBTkdFKCkge1xyXG4gICAgICAgIHJldHVybiBNb2RlbENoYW5nZVJlY29yZEJhc2UuUFJPUEVSVFlfQ0hBTkdFO1xyXG4gICAgfVxyXG4gICAgZ2V0IExJU1RfUkVNT1ZFKCkge1xyXG4gICAgICAgIHJldHVybiBNb2RlbENoYW5nZVJlY29yZEJhc2UuTElTVF9SRU1PVkU7XHJcbiAgICB9XHJcbiAgICBnZXQgTElTVF9JTlNFUlQoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1vZGVsQ2hhbmdlUmVjb3JkQmFzZS5MSVNUX0lOU0VSVDtcclxuICAgIH1cclxuICAgIGdldCBMSVNUX1NPUlQoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1vZGVsQ2hhbmdlUmVjb3JkQmFzZS5MSVNUX1NPUlQ7XHJcbiAgICB9XHJcbn1cclxudmFyIE1vZGVsQ2hhbmdlUmVjb3JkID0gTW9kZWxDaGFuZ2VSZWNvcmRCYXNlO1xyXG5jbGFzcyBNb2RlbE5vZGVzTGlzdEJhc2Uge1xyXG4gICAgI2l0ZW1zO1xyXG4gICAgY29uc3RydWN0b3IoaXRlbXMpIHtcclxuICAgICAgICB0aGlzLiNpdGVtcyA9IGl0ZW1zLnNsaWNlKCk7XHJcbiAgICB9XHJcbiAgICBnZXQgbGVuZ3RoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiNpdGVtcy5sZW5ndGg7XHJcbiAgICB9XHJcbiAgICBpdGVtKGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2l0ZW1zW2luZGV4XSA/PyBudWxsO1xyXG4gICAgfVxyXG4gICAgdmFsdWVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiNpdGVtcy52YWx1ZXMoKTtcclxuICAgIH1cclxufVxyXG52YXIgTW9kZWxOb2Rlc0xpc3QgPSBNb2RlbE5vZGVzTGlzdEJhc2U7XHJcbmNsYXNzIE1vZGVsRXZlbnRCYXNlIHtcclxuICAgIHR5cGU7XHJcbiAgICAjY3VycmVudFRhcmdldDtcclxuICAgICN0YXJnZXQ7XHJcbiAgICBjb25zdHJ1Y3Rvcih0eXBlKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLiNjdXJyZW50VGFyZ2V0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLiN0YXJnZXQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgZ2V0IGN1cnJlbnRUYXJnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRUYXJnZXQ7XHJcbiAgICB9XHJcbiAgICBnZXQgdGFyZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiN0YXJnZXQ7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgTW9kZWxFdmVudFRhcmdldEFjY2Vzc29yID0gbmV3IGNsYXNzIE1vZGVsRXZlbnRUYXJnZXRBY2Nlc3NvciB7XHJcbiAgICAgICAgc2V0Q3VycmVudFRhcmdldChldmVudCwgY3VycmVudFRhcmdldCkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBNb2RlbEV2ZW50QmFzZSkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuI2N1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldFRhcmdldChldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIE1vZGVsRXZlbnRCYXNlKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC4jdGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG52YXIgTW9kZWxFdmVudFRhcmdldEFjY2Vzc29yID0gTW9kZWxFdmVudEJhc2UuTW9kZWxFdmVudFRhcmdldEFjY2Vzc29yO1xyXG5kZWxldGUgTW9kZWxFdmVudEJhc2UuTW9kZWxFdmVudFRhcmdldEFjY2Vzc29yO1xyXG52YXIgTW9kZWxFdmVudCA9IE1vZGVsRXZlbnRCYXNlO1xyXG5jbGFzcyBNb2RlbEV2ZW50VGFyZ2V0QmFzZSB7XHJcbiAgICAjY2FsbGJhY2tzO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy4jY2FsbGJhY2tzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgcmVjZWl2ZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0eXBlIH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLiNjYWxsYmFja3MuZ2V0KHR5cGUpO1xyXG4gICAgICAgIE1vZGVsRXZlbnRUYXJnZXRBY2Nlc3Nvci5zZXRDdXJyZW50VGFyZ2V0KGV2ZW50LCB0aGlzKTtcclxuICAgICAgICBpZiAoY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFja19pKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFja19pKGV2ZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjaykge1xyXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMuI2NhbGxiYWNrcy5nZXQodHlwZSk7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICBjYWxsYmFja3MucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLiNjYWxsYmFja3Muc2V0KHR5cGUsIFtjYWxsYmFja10pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgY2FsbGJhY2spIHtcclxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLiNjYWxsYmFja3MuZ2V0KHR5cGUpO1xyXG4gICAgICAgIGlmIChjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tJbmRleCA9IGNhbGxiYWNrcy5maW5kSW5kZXgoY2FsbGJhY2tfaSA9PiBjYWxsYmFja19pID09IGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrSW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzLnNwbGljZShjYWxsYmFja0luZGV4LCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiNjYWxsYmFja3MuZGVsZXRlKHR5cGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGlzcGF0Y2hFdmVudChldmVudCkge1xyXG4gICAgICAgIE1vZGVsRXZlbnRUYXJnZXRBY2Nlc3Nvci5zZXRUYXJnZXQoZXZlbnQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZUV2ZW50KGV2ZW50KTtcclxuICAgIH1cclxufVxyXG52YXIgTW9kZWxFdmVudFRhcmdldCA9IE1vZGVsRXZlbnRUYXJnZXRCYXNlO1xyXG5jbGFzcyBNb2RlbE5vZGVCYXNlIGV4dGVuZHMgTW9kZWxFdmVudFRhcmdldEJhc2Uge1xyXG4gICAgI3BhcmVudE5vZGU7XHJcbiAgICAjcmVjb3JkcztcclxuICAgICNpc1JlY29yZGluZztcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy4jcGFyZW50Tm9kZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy4jcmVjb3JkcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuI2lzUmVjb3JkaW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBnZXQgcGFyZW50Tm9kZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4jcGFyZW50Tm9kZTtcclxuICAgIH1cclxuICAgIHNldFBhcmVudChwYXJlbnROb2RlKSB7XHJcbiAgICAgICAgaWYgKHBhcmVudE5vZGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgbGV0IGlzQ3ljbGljUmVmZXJlbmNlID0gcGFyZW50Tm9kZSA9PSB0aGlzO1xyXG4gICAgICAgICAgICBsZXQgeyBwYXJlbnROb2RlOiBhbmNlc3Rvck5vZGUgfSA9IHBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgIHdoaWxlICghaXNDeWNsaWNSZWZlcmVuY2UgJiYgYW5jZXN0b3JOb2RlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAoeyBwYXJlbnROb2RlOiBhbmNlc3Rvck5vZGUgfSA9IGFuY2VzdG9yTm9kZSk7XHJcbiAgICAgICAgICAgICAgICBpc0N5Y2xpY1JlZmVyZW5jZSA9IGFuY2VzdG9yTm9kZSA9PSB0aGlzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaXNDeWNsaWNSZWZlcmVuY2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuI3BhcmVudE5vZGUgPSBwYXJlbnROb2RlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBzZXQgcGFyZW50IG9uIE1vZGVsTm9kZTogY2lyY3VsYXIgcmVmZXJlbmNlIGRldGVjdGVkIGluIHRoZSBoaWVyYXJjaHkuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLiNwYXJlbnROb2RlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBiZWdpbkNoYW5nZXMoKSB7XHJcbiAgICAgICAgdGhpcy4jaXNSZWNvcmRpbmcgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZW5kQ2hhbmdlcygpIHtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1vZGVsRXZlbnQoXCJtb2RlbGNoYW5nZVwiKSk7XHJcbiAgICAgICAgdGhpcy4jcmVjb3Jkcy5zcGxpY2UoMCk7XHJcbiAgICAgICAgdGhpcy4jaXNSZWNvcmRpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGdldFJlY29yZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI3JlY29yZHMuc2xpY2UoKTtcclxuICAgIH1cclxuICAgIHJlY2VpdmVFdmVudChldmVudCkge1xyXG4gICAgICAgIHN1cGVyLnJlY2VpdmVFdmVudChldmVudCk7XHJcbiAgICAgICAgY29uc3QgeyBwYXJlbnROb2RlIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChwYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgIHBhcmVudE5vZGUucmVjZWl2ZUV2ZW50KGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjdHJpZ2dlckNoYW5nZShwcm9wZXJ0eSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgY29uc3QgcmVjb3JkcyA9IHRoaXMuI3JlY29yZHM7XHJcbiAgICAgICAgY29uc3QgcmVjb3JkID0gbmV3IE1vZGVsQ2hhbmdlUmVjb3JkKHtcclxuICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlOiBNb2RlbENoYW5nZVJlY29yZC5QUk9QRVJUWV9DSEFOR0UsXHJcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZTogcHJvcGVydHksXHJcbiAgICAgICAgICAgIG9sZFZhbHVlLCBuZXdWYWx1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlY29yZHMucHVzaChyZWNvcmQpO1xyXG4gICAgICAgIGlmICghdGhpcy4jaXNSZWNvcmRpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBNb2RlbEV2ZW50KFwibW9kZWxjaGFuZ2VcIikpO1xyXG4gICAgICAgICAgICByZWNvcmRzLnNwbGljZSgwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlUmVjb3JkKHJlY29yZCkge1xyXG4gICAgICAgIHRoaXMuI3JlY29yZHMucHVzaChyZWNvcmQpO1xyXG4gICAgICAgIGlmICghdGhpcy4jaXNSZWNvcmRpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBNb2RlbEV2ZW50KFwibW9kZWxjaGFuZ2VcIikpO1xyXG4gICAgICAgICAgICB0aGlzLiNyZWNvcmRzLnNwbGljZSgwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgTW9kZWxOb2RlUmVjb3Jkc0FjY2Vzc29yID0gbmV3IGNsYXNzIE1vZGVsTm9kZVJlY29yZHNBY2Nlc3NvciB7XHJcbiAgICAgICAgdHJpZ2dlckNoYW5nZShub2RlLCBwcm9wZXJ0eSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgTW9kZWxOb2RlQmFzZSkge1xyXG4gICAgICAgICAgICAgICAgbm9kZS4jdHJpZ2dlckNoYW5nZShwcm9wZXJ0eSwgb2xkVmFsdWUsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBoYW5kbGVSZWNvcmQobm9kZSwgcmVjb3JkKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgTW9kZWxOb2RlQmFzZSkge1xyXG4gICAgICAgICAgICAgICAgbm9kZS4jaGFuZGxlUmVjb3JkKHJlY29yZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbnZhciBNb2RlbE5vZGVSZWNvcmRzQWNjZXNzb3IgPSBNb2RlbE5vZGVCYXNlLk1vZGVsTm9kZVJlY29yZHNBY2Nlc3NvcjtcclxuZGVsZXRlIE1vZGVsTm9kZUJhc2UuTW9kZWxOb2RlUmVjb3Jkc0FjY2Vzc29yO1xyXG52YXIgTW9kZWxOb2RlID0gTW9kZWxOb2RlQmFzZTtcclxuY29uc3QgUmVhY3RpdmVQcm9wZXJ0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiAodGFyZ2V0LCBwcm9wZXJ0eSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgY29uc3RydWN0b3IgfSA9IHRhcmdldDtcclxuICAgICAgICBjb25zdCB7IHByb3RvdHlwZSB9ID0gY29uc3RydWN0b3I7XHJcbiAgICAgICAgY29uc3Qgc2V0dGVyID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9sZFZhbHVlID0gTW9kZWxSZWFjdGl2ZVByb3BlcnRpZXNBY2Nlc3Nvci5nZXRQcm9wZXJ0eSh0aGlzLCBwcm9wZXJ0eSk7XHJcbiAgICAgICAgICAgIE1vZGVsUmVhY3RpdmVQcm9wZXJ0aWVzQWNjZXNzb3Iuc2V0UHJvcGVydHkodGhpcywgcHJvcGVydHksIHZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgTW9kZWxOb2RlUmVjb3Jkc0FjY2Vzc29yLnRyaWdnZXJDaGFuZ2UodGhpcywgcHJvcGVydHksIG9sZFZhbHVlLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBnZXR0ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNb2RlbFJlYWN0aXZlUHJvcGVydGllc0FjY2Vzc29yLmdldFByb3BlcnR5KHRoaXMsIHByb3BlcnR5KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90b3R5cGUsIHByb3BlcnR5LCB7XHJcbiAgICAgICAgICAgIHNldDogc2V0dGVyLFxyXG4gICAgICAgICAgICBnZXQ6IGdldHRlcixcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufTtcclxuY2xhc3MgTW9kZWxPYmplY3RCYXNlIGV4dGVuZHMgTW9kZWxOb2RlQmFzZSB7XHJcbiAgICAjcHJvcGVydGllcztcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy4jcHJvcGVydGllcyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBNb2RlbFJlYWN0aXZlUHJvcGVydGllc0FjY2Vzc29yID0gbmV3IGNsYXNzIE1vZGVsUmVhY3RpdmVQcm9wZXJ0aWVzQWNjZXNzb3Ige1xyXG4gICAgICAgIHNldFByb3BlcnR5KG5vZGUsIHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIE1vZGVsT2JqZWN0QmFzZSkge1xyXG4gICAgICAgICAgICAgICAgbm9kZS4jcHJvcGVydGllcy5zZXQocHJvcGVydHksIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBnZXRQcm9wZXJ0eShub2RlLCBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIE1vZGVsT2JqZWN0QmFzZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUuI3Byb3BlcnRpZXMuZ2V0KHByb3BlcnR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxudmFyIE1vZGVsUmVhY3RpdmVQcm9wZXJ0aWVzQWNjZXNzb3IgPSBNb2RlbE9iamVjdEJhc2UuTW9kZWxSZWFjdGl2ZVByb3BlcnRpZXNBY2Nlc3NvcjtcclxuZGVsZXRlIE1vZGVsT2JqZWN0QmFzZS5Nb2RlbFJlYWN0aXZlUHJvcGVydGllc0FjY2Vzc29yO1xyXG52YXIgTW9kZWxPYmplY3QgPSBNb2RlbE9iamVjdEJhc2U7XHJcbmNsYXNzIE1vZGVsTGlzdEJhc2UgZXh0ZW5kcyBNb2RlbE5vZGVCYXNlIHtcclxuICAgICNpdGVtcztcclxuICAgIGNvbnN0cnVjdG9yKGl0ZW1zKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLiNpdGVtcyA9IGl0ZW1zPy5zbGljZSgpID8/IFtdO1xyXG4gICAgfVxyXG4gICAgc2V0UGFyZW50KHBhcmVudE5vZGUpIHtcclxuICAgICAgICBzdXBlci5zZXRQYXJlbnQocGFyZW50Tm9kZSk7XHJcbiAgICAgICAgdGhpcy4jaXRlbXMuZm9yRWFjaCgoaXRlbV9pKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW1faS5zZXRQYXJlbnQocGFyZW50Tm9kZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBnZXQgbGVuZ3RoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiNpdGVtcy5sZW5ndGg7XHJcbiAgICB9XHJcbiAgICBnZXQoaW5kZXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4jaXRlbXNbaW5kZXhdID8/IG51bGw7XHJcbiAgICB9XHJcbiAgICBpbmRleChpdGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2l0ZW1zLmluZGV4T2YoaXRlbSk7XHJcbiAgICB9XHJcbiAgICB2YWx1ZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2l0ZW1zLnZhbHVlcygpO1xyXG4gICAgfVxyXG4gICAgc29ydChjb21wYXJlRnVuY3Rpb24pIHtcclxuICAgICAgICBjb25zdCBpdGVtcyA9IHRoaXMuI2l0ZW1zO1xyXG4gICAgICAgIGNvbnN0IGluZGV4ZWRJdGVtcyA9IGl0ZW1zLm1hcCgoaXRlbV9pLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtOiBpdGVtX2ksXHJcbiAgICAgICAgICAgICAgICBpbmRleDogaVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGluZGV4ZWRJdGVtcy5zb3J0KChpbmRleGVkSXRlbV9hLCBpbmRleGVkSXRlbV9iKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb21wYXJlRnVuY3Rpb24oaW5kZXhlZEl0ZW1fYS5pdGVtLCBpbmRleGVkSXRlbV9iLml0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuI2l0ZW1zID0gaW5kZXhlZEl0ZW1zLm1hcChpbmRleGVkSXRlbV9pID0+IGluZGV4ZWRJdGVtX2kuaXRlbSk7XHJcbiAgICAgICAgY29uc3QgcmVjb3JkID0gbmV3IE1vZGVsQ2hhbmdlUmVjb3JkKHtcclxuICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLFxyXG4gICAgICAgICAgICBjaGFuZ2VUeXBlOiBNb2RlbENoYW5nZVJlY29yZC5MSVNUX1NPUlQsXHJcbiAgICAgICAgICAgIHNvcnRlZEluZGljZXM6IGluZGV4ZWRJdGVtcy5tYXAoaW5kZXhlZEl0ZW1faSA9PiBpbmRleGVkSXRlbV9pLmluZGV4KVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE1vZGVsTm9kZVJlY29yZHNBY2Nlc3Nvci5oYW5kbGVSZWNvcmQodGhpcywgcmVjb3JkKTtcclxuICAgIH1cclxuICAgIHByZXBlbmQoLi4uaXRlbXMpIHtcclxuICAgICAgICBjb25zdCBfaXRlbXMgPSB0aGlzLiNpdGVtcztcclxuICAgICAgICBjb25zdCB7IHBhcmVudE5vZGUgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtX2kgPT4ge1xyXG4gICAgICAgICAgICAgICAgaXRlbV9pLnNldFBhcmVudChwYXJlbnROb2RlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9pdGVtcy5zcGxpY2UoMCwgMCwgLi4uaXRlbXMpO1xyXG4gICAgICAgIGNvbnN0IHJlY29yZCA9IG5ldyBNb2RlbENoYW5nZVJlY29yZCh7XHJcbiAgICAgICAgICAgIHRhcmdldDogdGhpcyxcclxuICAgICAgICAgICAgY2hhbmdlVHlwZTogTW9kZWxDaGFuZ2VSZWNvcmQuTElTVF9JTlNFUlQsXHJcbiAgICAgICAgICAgIGluc2VydGVkSW5kZXg6IDAsXHJcbiAgICAgICAgICAgIGluc2VydGVkSXRlbXM6IGl0ZW1zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgTW9kZWxOb2RlUmVjb3Jkc0FjY2Vzc29yLmhhbmRsZVJlY29yZCh0aGlzLCByZWNvcmQpO1xyXG4gICAgfVxyXG4gICAgYXBwZW5kKC4uLml0ZW1zKSB7XHJcbiAgICAgICAgY29uc3QgX2l0ZW1zID0gdGhpcy4jaXRlbXM7XHJcbiAgICAgICAgY29uc3QgeyBsZW5ndGggfSA9IF9pdGVtcztcclxuICAgICAgICBjb25zdCB7IHBhcmVudE5vZGUgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtX2kgPT4ge1xyXG4gICAgICAgICAgICAgICAgaXRlbV9pLnNldFBhcmVudChwYXJlbnROb2RlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9pdGVtcy5wdXNoKC4uLml0ZW1zKTtcclxuICAgICAgICBjb25zdCByZWNvcmQgPSBuZXcgTW9kZWxDaGFuZ2VSZWNvcmQoe1xyXG4gICAgICAgICAgICB0YXJnZXQ6IHRoaXMsXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGU6IE1vZGVsQ2hhbmdlUmVjb3JkLkxJU1RfSU5TRVJULFxyXG4gICAgICAgICAgICBpbnNlcnRlZEluZGV4OiBsZW5ndGgsXHJcbiAgICAgICAgICAgIGluc2VydGVkSXRlbXM6IGl0ZW1zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgTW9kZWxOb2RlUmVjb3Jkc0FjY2Vzc29yLmhhbmRsZVJlY29yZCh0aGlzLCByZWNvcmQpO1xyXG4gICAgfVxyXG4gICAgaW5zZXJ0KGluZGV4LCAuLi5pdGVtcykge1xyXG4gICAgICAgIGNvbnN0IF9pdGVtcyA9IHRoaXMuI2l0ZW1zO1xyXG4gICAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBfaXRlbXM7XHJcbiAgICAgICAgY29uc3QgcG9zaXRpdmVJbmRleCA9IE1hdGguYWJzKGluZGV4KTtcclxuICAgICAgICBpZiAocG9zaXRpdmVJbmRleCA8PSBsZW5ndGgpIHtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgcGFyZW50Tm9kZSB9ID0gdGhpcztcclxuICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbV9pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtX2kuc2V0UGFyZW50KHBhcmVudE5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfaXRlbXMuc3BsaWNlKGluZGV4LCAwLCAuLi5pdGVtcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfaXRlbXMucHVzaCguLi5pdGVtcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGxlbmd0aCAtIGluZGV4O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBwYXJlbnROb2RlIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW1faSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1faS5zZXRQYXJlbnQocGFyZW50Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfaXRlbXMuc3BsaWNlKGluZGV4LCAwLCAuLi5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgcmVjb3JkID0gbmV3IE1vZGVsQ2hhbmdlUmVjb3JkKHtcclxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcyxcclxuICAgICAgICAgICAgICAgIGNoYW5nZVR5cGU6IE1vZGVsQ2hhbmdlUmVjb3JkLkxJU1RfSU5TRVJULFxyXG4gICAgICAgICAgICAgICAgaW5zZXJ0ZWRJbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgICAgICBpbnNlcnRlZEl0ZW1zOiBpdGVtcy5zbGljZSgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBNb2RlbE5vZGVSZWNvcmRzQWNjZXNzb3IuaGFuZGxlUmVjb3JkKHRoaXMsIHJlY29yZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVtb3ZlKGl0ZW0pIHtcclxuICAgICAgICBjb25zdCBfaXRlbXMgPSB0aGlzLiNpdGVtcztcclxuICAgICAgICBjb25zdCBpbmRleCA9IF9pdGVtcy5pbmRleE9mKGl0ZW0pO1xyXG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBfaXRlbXMuc3BsaWNlKGluZGV4LCAxKVswXTtcclxuICAgICAgICAgICAgY29uc3QgeyBwYXJlbnROb2RlIH0gPSB0aGlzO1xyXG4gICAgICAgICAgICBpZiAocGFyZW50Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRQYXJlbnQobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgcmVjb3JkID0gbmV3IE1vZGVsQ2hhbmdlUmVjb3JkKHtcclxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcyxcclxuICAgICAgICAgICAgICAgIGNoYW5nZVR5cGU6IE1vZGVsQ2hhbmdlUmVjb3JkLkxJU1RfUkVNT1ZFLFxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlZEluZGV4OiBpbmRleCxcclxuICAgICAgICAgICAgICAgIHJlbW92ZWRJdGVtczogW2l0ZW1dXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBNb2RlbE5vZGVSZWNvcmRzQWNjZXNzb3IuaGFuZGxlUmVjb3JkKHRoaXMsIHJlY29yZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLiNpdGVtcztcclxuICAgICAgICBjb25zdCB7IGxlbmd0aCB9ID0gaXRlbXM7XHJcbiAgICAgICAgaWYgKGxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgcmVtb3ZlZEl0ZW1zID0gaXRlbXMuc3BsaWNlKDApO1xyXG4gICAgICAgICAgICBjb25zdCB7IHBhcmVudE5vZGUgfSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVkSXRlbXMuZm9yRWFjaCgocmVtb3ZlZEl0ZW1faSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZWRJdGVtX2kuc2V0UGFyZW50KG51bGwpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgcmVjb3JkID0gbmV3IE1vZGVsQ2hhbmdlUmVjb3JkKHtcclxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcyxcclxuICAgICAgICAgICAgICAgIGNoYW5nZVR5cGU6IE1vZGVsQ2hhbmdlUmVjb3JkLkxJU1RfUkVNT1ZFLFxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlZEluZGV4OiAwLFxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlZEl0ZW1zOiByZW1vdmVkSXRlbXNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE1vZGVsTm9kZVJlY29yZHNBY2Nlc3Nvci5oYW5kbGVSZWNvcmQodGhpcywgcmVjb3JkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuO1xyXG52YXIgTW9kZWxMaXN0ID0gTW9kZWxMaXN0QmFzZTtcclxuY2xhc3MgTW9kZWxDaGFuZ2VPYnNlcnZlckJhc2Uge1xyXG4gICAgI2NhbGxiYWNrO1xyXG4gICAgI3JlY29yZHM7XHJcbiAgICAjZGlzY29ubmVjdGVkO1xyXG4gICAgI3JlZmVyZW5jZXM7XHJcbiAgICBjb25zdHJ1Y3RvcihjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuI2NhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy4jcmVjb3JkcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuI2Rpc2Nvbm5lY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuI3JlZmVyZW5jZXMgPSBuZXcgV2Vha01hcCgpO1xyXG4gICAgfVxyXG4gICAgb2JzZXJ2ZShub2RlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy4jZGlzY29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlcyA9IHRoaXMuI3JlZmVyZW5jZXM7XHJcbiAgICAgICAgbGV0IHJlZmVyZW5jZSA9IHJlZmVyZW5jZXMuZ2V0KG5vZGUpO1xyXG4gICAgICAgIGlmICghcmVmZXJlbmNlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gdGhpcy4jaGFuZGxlTW9kZWxFdmVudC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb2RlbGNoYW5nZVwiLCBsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIHJlZmVyZW5jZSA9IHsgbGlzdGVuZXIsIG9wdGlvbnMgfTtcclxuICAgICAgICAgICAgcmVmZXJlbmNlcy5zZXQobm9kZSwgcmVmZXJlbmNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlZmVyZW5jZXMuc2V0KG5vZGUsIHJlZmVyZW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdW5vYnNlcnZlKG5vZGUpIHtcclxuICAgICAgICBjb25zdCByZWZlcmVuY2VzID0gdGhpcy4jcmVmZXJlbmNlcztcclxuICAgICAgICBsZXQgcmVmZXJlbmNlID0gcmVmZXJlbmNlcy5nZXQobm9kZSk7XHJcbiAgICAgICAgaWYgKHJlZmVyZW5jZSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGxpc3RlbmVyIH0gPSByZWZlcmVuY2U7XHJcbiAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vZGVsY2hhbmdlXCIsIGxpc3RlbmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkaXNjb25uZWN0KCkge1xyXG4gICAgICAgIHRoaXMuI3JlY29yZHMuc3BsaWNlKDApO1xyXG4gICAgICAgIHRoaXMuI2Rpc2Nvbm5lY3RlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICAjdHJpZ2dlcigpIHtcclxuICAgICAgICBjb25zdCByZWNvcmRzID0gdGhpcy4jcmVjb3Jkcy5zcGxpY2UoMCk7XHJcbiAgICAgICAgaWYgKHJlY29yZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLiNjYWxsYmFjayhyZWNvcmRzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlTW9kZWxFdmVudChldmVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy4jZGlzY29ubmVjdGVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgdGFyZ2V0LCBjdXJyZW50VGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICAgICAgY29uc3QgcmVmZXJlbmNlID0gdGhpcy4jcmVmZXJlbmNlcy5nZXQoY3VycmVudFRhcmdldCk7XHJcbiAgICAgICAgICAgIGlmIChyZWZlcmVuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgb3B0aW9ucyB9ID0gcmVmZXJlbmNlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBwcm9wZXJ0aWVzLCBwcm9wZXJ0aWVzRmlsdGVyLCBjaGlsZExpc3QsIHN1YnRyZWUgfSA9IG9wdGlvbnM7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3VidHJlZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzICYmIHRhcmdldCBpbnN0YW5jZW9mIE1vZGVsTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc0ZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jcmVjb3Jkcy5wdXNoKC4uLnRhcmdldC5nZXRSZWNvcmRzKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHJlY29yZF9pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHByb3BlcnR5TmFtZSB9ID0gcmVjb3JkX2k7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb3BlcnRpZXNGaWx0ZXIuaW5jbHVkZXMocHJvcGVydHlOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3JlY29yZHMucHVzaCguLi50YXJnZXQuZ2V0UmVjb3JkcygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiN0cmlnZ2VyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNoaWxkTGlzdCAmJiB0YXJnZXQgaW5zdGFuY2VvZiBNb2RlbExpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jcmVjb3Jkcy5wdXNoKC4uLnRhcmdldC5nZXRSZWNvcmRzKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiN0cmlnZ2VyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0ID09IGN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcyAmJiB0YXJnZXQgaW5zdGFuY2VvZiBNb2RlbE5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNGaWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3JlY29yZHMucHVzaCguLi50YXJnZXQuZ2V0UmVjb3JkcygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihyZWNvcmRfaSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBwcm9wZXJ0eU5hbWUgfSA9IHJlY29yZF9pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0aWVzRmlsdGVyLmluY2x1ZGVzKHByb3BlcnR5TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNyZWNvcmRzLnB1c2goLi4udGFyZ2V0LmdldFJlY29yZHMoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jdHJpZ2dlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGlsZExpc3QgJiYgdGFyZ2V0IGluc3RhbmNlb2YgTW9kZWxMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3JlY29yZHMucHVzaCguLi50YXJnZXQuZ2V0UmVjb3JkcygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jdHJpZ2dlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG52YXIgTW9kZWxDaGFuZ2VPYnNlcnZlciA9IE1vZGVsQ2hhbmdlT2JzZXJ2ZXJCYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Nb2RlbC5qcy5tYXAiLCJpbXBvcnQgeyBERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SLCBERUZBVUxUX1RIRU1FX1NFTEVDVEVEX0lURU1fQ09MT1IsIERFRkFVTFRfVEhFTUVfSE9WRVJFRF9JVEVNX0NPTE9SLCBERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9DT0xPUiB9IGZyb20gXCIuL1RoZW1lXCI7XHJcbmV4cG9ydCB7IHJlc2V0U3R5bGVzaGVldCB9O1xyXG5jb25zdCByZXNldFN0eWxlc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xyXG5yZXNldFN0eWxlc2hlZXQucmVwbGFjZSgvKmNzcyovIGBcclxuICAgIFxyXG4gICAgaHRtbC5mdWxsc2NyZWVuLFxyXG4gICAgaHRtbC5mdWxsc2NyZWVuID4gYm9keSB7XHJcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgfVxyXG5cclxuICAgIGRpYWxvZyB7XHJcbiAgICAgICAgb3ZlcmZsb3c6IHZpc2libGU7XHJcbiAgICB9XHJcblxyXG4gICAgYm9keSB7XHJcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xyXG4gICAgICAgIG1hcmdpbjogMDtcclxuICAgIH1cclxuXHJcbiAgICA6OmJhY2tkcm9wIHtcclxuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDEyMCwgMTIwLCAxMjAsIDAuMik7XHJcbiAgICB9XHJcblxyXG4gICAgOjpzZWxlY3Rpb24ge1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7REVGQVVMVF9USEVNRV9TRUxFQ1RFRF9JVEVNX0NPTE9SfTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaW5wdXQsXHJcbiAgICBvdXRwdXQsXHJcbiAgICBidXR0b24sXHJcbiAgICBzZWxlY3QsXHJcbiAgICB0ZXh0YXJlYSB7XHJcbiAgICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xyXG4gICAgICAgIGZvbnQtc2l6ZTogaW5oZXJpdDtcclxuICAgICAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcclxuICAgIH1cclxuXHJcbiAgICBkaWFsb2cge1xyXG4gICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICB9XHJcblxyXG4gICAgaW5wdXQge1xyXG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGdyZXk7XHJcbiAgICB9XHJcblxyXG4gICAgbGVnZW5kIHtcclxuICAgICAgICBwYWRkaW5nOiAwIDZweDtcclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3QsXHJcbiAgICBwcm9ncmVzcyB7XHJcbiAgICAgICAgaGVpZ2h0OiAyMnB4O1xyXG4gICAgfVxyXG5cclxuICAgIGlucHV0IHtcclxuICAgICAgICBoZWlnaHQ6IDE4cHg7XHJcbiAgICB9XHJcblxyXG4gICAgaW5wdXQ6aXMoW3R5cGU9XCJyYWRpb1wiXSwgW3R5cGU9XCJjaGVja2JveFwiXSkge1xyXG4gICAgICAgIHdpZHRoOiAxOHB4OyBcclxuICAgIH1cclxuXHJcbiAgICBpbnB1dFt0eXBlPVwiY29sb3JcIiBpXSB7XHJcbiAgICAgICAgYm9yZGVyOiBub25lO1xyXG4gICAgICAgIHBhZGRpbmc6IDA7XHJcbiAgICB9XHJcblxyXG4gICAgOjotd2Via2l0LWNvbG9yLXN3YXRjaCB7XHJcbiAgICAgICAgYm9yZGVyOiBub25lO1xyXG4gICAgfVxyXG5cclxuICAgIDo6LXdlYmtpdC1jb2xvci1zd2F0Y2gtd3JhcHBlciB7XHJcbiAgICAgICAgcGFkZGluZzogMDtcclxuICAgIH1cclxuXHJcbiAgICA6Oi13ZWJraXQtc2VhcmNoLWNhbmNlbC1idXR0b24ge1xyXG4gICAgICAgIGFwcGVhcmFuY2U6IG5vbmU7XHJcbiAgICB9XHJcblxyXG4gICAgZGlhbG9nLFxyXG4gICAgZmllbGRzZXQge1xyXG4gICAgICAgIHBhZGRpbmc6IDhweDtcclxuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBsaWdodGdyZXk7XHJcbiAgICB9XHJcblxyXG4gICAgYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0ge1xyXG4gICAgICAgIGJvcmRlci13aWR0aDogMnB4O1xyXG4gICAgfVxyXG5cclxuICAgIGJ1dHRvbjpob3ZlciB7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGhlbWUtaG92ZXJlZC1pdGVtLWNvbG9yLCAke0RFRkFVTFRfVEhFTUVfSE9WRVJFRF9JVEVNX0NPTE9SfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYnV0dG9uOm5vdChbYXJpYS1wcmVzc2VkXSk6Zm9jdXMsXHJcbiAgICBidXR0b25bYXJpYS1wcmVzc2VkPVwidHJ1ZVwiXSB7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGhlbWUtZm9jdXNlZC1pdGVtLWNvbG9yLCAke0RFRkFVTFRfVEhFTUVfRk9DVVNFRF9JVEVNX0NPTE9SfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYnV0dG9uIHtcclxuICAgICAgICBoZWlnaHQ6IDE4cHg7XHJcbiAgICAgICAgYXBwZWFyYW5jZTogbm9uZTtcclxuICAgICAgICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXRoZW1lLWZvY3VzZWQtaXRlbS1vdXRsaW5lLWNvbG9yLCAke0RFRkFVTFRfVEhFTUVfRk9DVVNFRF9JVEVNX09VVExJTkVfQ09MT1J9KTtcclxuICAgIH1cclxuXHJcbiAgICB0YWJsZSB7XHJcbiAgICAgICAgYm9yZGVyLXNwYWNpbmc6IDA7XHJcbiAgICB9XHJcblxyXG4gICAgdWwge1xyXG4gICAgICAgIHBhZGRpbmc6IDA7XHJcbiAgICAgICAgbWFyZ2luOiAwO1xyXG4gICAgfVxyXG5gKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVzZXQuanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IERFRkFVTFRfVEhFTUVfQVJST1dfUklHSFRfSU1BR0UgZnJvbSBcIi4uLy4uL2Fzc2V0cy9hcnJvd19yaWdodF9GSUxMMF93Z2h0NDAwX0dSQUQwX29wc3o0OC5zdmdcIjtcclxuaW1wb3J0IERFRkFVTFRfVEhFTUVfQVJST1dfRFJPUERPV05fSU1BR0UgZnJvbSBcIi4uLy4uL2Fzc2V0cy9hcnJvd19kcm9wX2Rvd25fRklMTDBfd2dodDQwMF9HUkFEMF9vcHN6NDguc3ZnXCI7XHJcbmltcG9ydCBERUZBVUxUX1RIRU1FX0FSUk9XX0RST1BVUF9JTUFHRSBmcm9tIFwiLi4vLi4vYXNzZXRzL2Fycm93X2Ryb3BfdXBfRklMTDBfd2dodDQwMF9HUkFEMF9vcHN6NDguc3ZnXCI7XHJcbmltcG9ydCBERUZBVUxUX1RIRU1FX0NIRUNLRURfSU1BR0UgZnJvbSBcIi4uLy4uL2Fzc2V0cy9kb25lX0ZJTEwwX3dnaHQ0MDBfR1JBRDBfb3BzejQ4LnN2Z1wiO1xyXG5pbXBvcnQgb3BlblNhbnNUdGYgZnJvbSBcIi4uLy4uL2Fzc2V0cy9mb250cy9PcGVuX1NhbnMvT3BlblNhbnMtVmFyaWFibGVGb250X3dkdGgsd2dodC50dGZcIjtcclxuaW1wb3J0IHsgTW9kZWxPYmplY3QsIFJlYWN0aXZlUHJvcGVydHkgfSBmcm9tIFwiLi4vbW9kZWxzL01vZGVsXCI7XHJcbmV4cG9ydCB7IHRoZW1lIH07XHJcbmV4cG9ydCB7IERFRkFVTFRfVEhFTUVfSE9WRVJFRF9JVEVNX0NPTE9SIH07XHJcbmV4cG9ydCB7IERFRkFVTFRfVEhFTUVfRk9DVVNFRF9JVEVNX0NPTE9SIH07XHJcbmV4cG9ydCB7IERFRkFVTFRfVEhFTUVfRk9DVVNFRF9JVEVNX09VVExJTkVfQ09MT1IgfTtcclxuZXhwb3J0IHsgREVGQVVMVF9USEVNRV9TRUxFQ1RFRF9JVEVNX0NPTE9SIH07XHJcbmV4cG9ydCB7IERFRkFVTFRfVEhFTUVfQUNUSVZBVEVEX0lURU1fQ09MT1IgfTtcclxuZXhwb3J0IHsgREVGQVVMVF9USEVNRV9EUk9QVEFSR0VUX0lURU1fQ09MT1IgfTtcclxuZXhwb3J0IHsgREVGQVVMVF9USEVNRV9BUlJPV19SSUdIVF9JTUFHRSB9O1xyXG5leHBvcnQgeyBERUZBVUxUX1RIRU1FX0FSUk9XX0RST1BET1dOX0lNQUdFIH07XHJcbmV4cG9ydCB7IERFRkFVTFRfVEhFTUVfQVJST1dfRFJPUFVQX0lNQUdFIH07XHJcbmV4cG9ydCB7IERFRkFVTFRfVEhFTUVfQ0hFQ0tFRF9JTUFHRSB9O1xyXG5jb25zdCBERUZBVUxUX1RIRU1FX1RJTlQgPSAyMDM7XHJcbmNvbnN0IERFRkFVTFRfVEhFTUVfQUNDRU5UX0NPTE9SID0gYGhzbCh2YXIoLS10aGVtZS10aW50LCAke0RFRkFVTFRfVEhFTUVfVElOVH0pLCA5MiUsIDUwJSwgNTAlKWA7XHJcbmNvbnN0IERFRkFVTFRfVEhFTUVfSE9WRVJFRF9JVEVNX0NPTE9SID0gYGhzbCh2YXIoLS10aGVtZS10aW50LCAke0RFRkFVTFRfVEhFTUVfVElOVH0pLCA5MiUsIDgwJSwgNTAlKWA7XHJcbmNvbnN0IERFRkFVTFRfVEhFTUVfRk9DVVNFRF9JVEVNX0NPTE9SID0gYGhzbCh2YXIoLS10aGVtZS10aW50LCAke0RFRkFVTFRfVEhFTUVfVElOVH0pLCA5MiUsIDUwJSwgNTAlKWA7XHJcbmNvbnN0IERFRkFVTFRfVEhFTUVfRk9DVVNFRF9JVEVNX09VVExJTkVfQ09MT1IgPSBgaHNsKHZhcigtLXRoZW1lLXRpbnQsICR7REVGQVVMVF9USEVNRV9USU5UfSksIDkyJSwgNTAlKWA7XHJcbmNvbnN0IERFRkFVTFRfVEhFTUVfU0VMRUNURURfSVRFTV9DT0xPUiA9IGBoc2wodmFyKC0tdGhlbWUtdGludCwgJHtERUZBVUxUX1RIRU1FX1RJTlR9KSwgOTIlLCA3NSUsIDc1JSlgO1xyXG5jb25zdCBERUZBVUxUX1RIRU1FX0FDVElWQVRFRF9JVEVNX0NPTE9SID0gYGhzbCh2YXIoLS10aGVtZS10aW50LCAke0RFRkFVTFRfVEhFTUVfVElOVH0pLCA5MiUsIDUwJSwgNTAlKWA7XHJcbmNvbnN0IERFRkFVTFRfVEhFTUVfRFJPUFRBUkdFVF9JVEVNX0NPTE9SID0gYGhzbCh2YXIoLS10aGVtZS10aW50LCAke0RFRkFVTFRfVEhFTUVfVElOVH0pLCA5MiUsIDUwJSwgNTAlKWA7XHJcbmNsYXNzIFRoZW1lIGV4dGVuZHMgTW9kZWxPYmplY3Qge1xyXG4gICAgc3R5bGVzaGVldDtcclxuICAgIGltYWdlcygpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE1hcChbXHJcbiAgICAgICAgICAgIFtcImNoZWNrZWRJbWFnZVwiLCB0aGlzLmNoZWNrZWRJbWFnZV0sXHJcbiAgICAgICAgICAgIFtcImFycm93UmlnaHRJbWFnZVwiLCB0aGlzLmFycm93UmlnaHRJbWFnZV0sXHJcbiAgICAgICAgICAgIFtcImFycm93RHJvcERvd25JbWFnZVwiLCB0aGlzLmFycm93RHJvcERvd25JbWFnZV0sXHJcbiAgICAgICAgICAgIFtcImFycm93RHJvcFVwSW1hZ2VcIiwgdGhpcy5hcnJvd0Ryb3BVcEltYWdlXSxcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zdHlsZXNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcclxuICAgICAgICB0aGlzLnN0eWxlc2hlZXQucmVwbGFjZSgvKmNzcyovIGBcclxuICAgICAgICAgICAgOnJvb3Qge1xyXG4gICAgICAgICAgICAgICAgLS10aGVtZS1hY2NlbnQtY29sb3I6ICR7REVGQVVMVF9USEVNRV9BQ0NFTlRfQ09MT1J9O1xyXG4gICAgICAgICAgICAgICAgLS10aGVtZS1ob3ZlcmVkLWl0ZW0tY29sb3I6ICR7REVGQVVMVF9USEVNRV9IT1ZFUkVEX0lURU1fQ09MT1J9O1xyXG4gICAgICAgICAgICAgICAgLS10aGVtZS1mb2N1c2VkLWl0ZW0tY29sb3I6ICR7REVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fQ09MT1J9O1xyXG4gICAgICAgICAgICAgICAgLS10aGVtZS1mb2N1c2VkLWl0ZW0tb3V0bGluZS1jb2xvcjogJHtERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SfTtcclxuICAgICAgICAgICAgICAgIC0tdGhlbWUtc2VsZWN0ZWQtaXRlbS1jb2xvcjogJHtERUZBVUxUX1RIRU1FX1NFTEVDVEVEX0lURU1fQ09MT1J9O1xyXG4gICAgICAgICAgICAgICAgLS10aGVtZS1hY3RpdmF0ZWQtaXRlbS1jb2xvcjogJHtERUZBVUxUX1RIRU1FX0FDVElWQVRFRF9JVEVNX0NPTE9SfTtcclxuICAgICAgICAgICAgICAgIC0tdGhlbWUtZHJvcHRhcmdldC1pdGVtLWNvbG9yOiAke0RFRkFVTFRfVEhFTUVfRFJPUFRBUkdFVF9JVEVNX0NPTE9SfTtcclxuXHJcbiAgICAgICAgICAgICAgICAtLXRoZW1lLXRpbnQ6ICR7REVGQVVMVF9USEVNRV9USU5UfTtcclxuICAgICAgICAgICAgICAgIC0tdGhlbWUtYXJyb3ctcmlnaHQtaW1hZ2U6IHVybCgke0RFRkFVTFRfVEhFTUVfQVJST1dfUklHSFRfSU1BR0V9KTtcclxuICAgICAgICAgICAgICAgIC0tdGhlbWUtYXJyb3ctZHJvcGRvd24taW1hZ2U6IHVybCgke0RFRkFVTFRfVEhFTUVfQVJST1dfRFJPUERPV05fSU1BR0V9KTtcclxuICAgICAgICAgICAgICAgIC0tdGhlbWUtYXJyb3ctZHJvcHVwLWltYWdlOiB1cmwoJHtERUZBVUxUX1RIRU1FX0FSUk9XX0RST1BVUF9JTUFHRX0pO1xyXG4gICAgICAgICAgICAgICAgLS10aGVtZS1jaGVja2VkLWltYWdlOiB1cmwoJHtERUZBVUxUX1RIRU1FX0FSUk9XX0RST1BET1dOX0lNQUdFfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLS10aGVtZS1hcnJvdy1jb2xvcjogdmFyKC0tZm9udC1jb2xvcik7XHJcbiAgICAgICAgICAgICAgICAtLXRoZW1lLWFycm93LWljb24tY29sbGFwc2VkOiB2YXIoLS1hcnJvdy1yaWdodCk7XHJcbiAgICAgICAgICAgICAgICAtLXRoZW1lLWFycm93LWljb24tZXhwYW5kZWQ6IHZhcigtLWFycm93LWRyb3Bkb3duKTtcclxuXHJcbiAgICAgICAgICAgICAgICAtLXRoZW1lLXNvcnRvcmRlci1pbmRpY2F0b3ItY29sb3I6IHZhcigtLWZvbnQtY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgLS10aGVtZS1zb3J0b3JkZXItaW5kaWNhdG9yLWFzY2VuZGluZzogdmFyKC0tYXJyb3ctZHJvcHVwKTtcclxuICAgICAgICAgICAgICAgIC0tdGhlbWUtc29ydG9yZGVyLWluZGljYXRvci1kZXNjZW5kaW5nOiB2YXIoLS1hcnJvdy1kcm9wZG93bik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIEBmb250LWZhY2Uge1xyXG4gICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IFwiT3BlbiBTYW5zXCI7XHJcbiAgICAgICAgICAgICAgICBzcmM6IHVybCgke29wZW5TYW5zVHRmfSkgZm9ybWF0KFwidHJ1ZXR5cGVcIilcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgOnJvb3Qge1xyXG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IFwiT3BlbiBTYW5zXCI7XHJcbiAgICAgICAgICAgICAgICBhY2NlbnQtY29sb3I6IHZhcigtLXRoZW1lLWFjY2VudC1jb2xvcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIDo6c2VsZWN0aW9uIHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRoZW1lLXNlbGVjdGVkLWl0ZW0tY29sb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYCk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwibW9kZWxjaGFuZ2VcIiwgdGhpcy4jaGFuZGxlTW9kZWxDaGFuZ2VFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLnRpbnQgPSBERUZBVUxUX1RIRU1FX1RJTlQ7XHJcbiAgICAgICAgdGhpcy5hcnJvd1JpZ2h0SW1hZ2UgPSBERUZBVUxUX1RIRU1FX0FSUk9XX1JJR0hUX0lNQUdFO1xyXG4gICAgICAgIHRoaXMuYXJyb3dEcm9wRG93bkltYWdlID0gREVGQVVMVF9USEVNRV9BUlJPV19EUk9QRE9XTl9JTUFHRTtcclxuICAgICAgICB0aGlzLmFycm93RHJvcFVwSW1hZ2UgPSBERUZBVUxUX1RIRU1FX0FSUk9XX0RST1BVUF9JTUFHRTtcclxuICAgICAgICB0aGlzLmNoZWNrZWRJbWFnZSA9IERFRkFVTFRfVEhFTUVfQVJST1dfRFJPUERPV05fSU1BR0U7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlTW9kZWxDaGFuZ2VFdmVudCgpIHtcclxuICAgICAgICBjb25zdCB7IHN0eWxlc2hlZXQgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgdmFyaWFibGVzTWFwID0gc3R5bGVzaGVldC5jc3NSdWxlc1swXS5zdHlsZU1hcDtcclxuICAgICAgICBjb25zdCByZWNvcmRzID0gdGhpcy5nZXRSZWNvcmRzKCk7XHJcbiAgICAgICAgcmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBwcm9wZXJ0eU5hbWUsIG5ld1ZhbHVlIH0gPSByZWNvcmQ7XHJcbiAgICAgICAgICAgIHN3aXRjaCAocHJvcGVydHlOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwidGludFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzTWFwLnNldChcIi0tdGhlbWUtdGludFwiLCBTdHJpbmcobmV3VmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgXCJjaGVja2VkSW1hZ2VcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlc01hcC5zZXQoXCItLXRoZW1lLWNoZWNrZWQtaW1hZ2VcIiwgYHVybCgke1N0cmluZyhuZXdWYWx1ZSl9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBcImFycm93UmlnaHRJbWFnZVwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzTWFwLnNldChcIi0tdGhlbWUtYXJyb3ctcmlnaHQtaW1hZ2VcIiwgYHVybCgke1N0cmluZyhuZXdWYWx1ZSl9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBcImFycm93RHJvcERvd25cIjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlc01hcC5zZXQoXCItLXRoZW1lLWFycm93LWRyb3Bkb3duLWltYWdlXCIsIGB1cmwoJHtTdHJpbmcobmV3VmFsdWUpfSlgKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJvd0Ryb3BVcFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzTWFwLnNldChcIi0tdGhlbWUtYXJyb3ctZHJvcHVwLWltYWdlXCIsIGB1cmwoJHtTdHJpbmcobmV3VmFsdWUpfSlgKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgUmVhY3RpdmVQcm9wZXJ0eSgpXHJcbl0sIFRoZW1lLnByb3RvdHlwZSwgXCJ0aW50XCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgUmVhY3RpdmVQcm9wZXJ0eSgpXHJcbl0sIFRoZW1lLnByb3RvdHlwZSwgXCJjaGVja2VkSW1hZ2VcIiwgdm9pZCAwKTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICBSZWFjdGl2ZVByb3BlcnR5KClcclxuXSwgVGhlbWUucHJvdG90eXBlLCBcImFycm93UmlnaHRJbWFnZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIFJlYWN0aXZlUHJvcGVydHkoKVxyXG5dLCBUaGVtZS5wcm90b3R5cGUsIFwiYXJyb3dEcm9wRG93bkltYWdlXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgUmVhY3RpdmVQcm9wZXJ0eSgpXHJcbl0sIFRoZW1lLnByb3RvdHlwZSwgXCJhcnJvd0Ryb3BVcEltYWdlXCIsIHZvaWQgMCk7XHJcbmNvbnN0IHRoZW1lID0gbmV3IFRoZW1lKCk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRoZW1lLmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn07XHJcbmltcG9ydCB7IGVsZW1lbnQsIHJlYWN0aXZlQ2hpbGRFbGVtZW50cywgQ3VzdG9tRWxlbWVudCwgZnJhZ21lbnQsIHJlYWN0aXZlRWxlbWVudCB9IGZyb20gXCIuLi9lbGVtZW50cy9FbGVtZW50XCI7XHJcbmltcG9ydCB7IE1vZGVsTGlzdCwgTW9kZWxPYmplY3QsIFJlYWN0aXZlUHJvcGVydHkgfSBmcm9tIFwiLi4vbW9kZWxzL01vZGVsXCI7XHJcbmltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi9WaWV3XCI7XHJcbmltcG9ydCB7IHJlc2V0U3R5bGVzaGVldCB9IGZyb20gXCIuLi9zdHlsZXNoZWV0cy9SZXNldFwiO1xyXG5leHBvcnQgeyBHcmlkTW9kZWwgfTtcclxuZXhwb3J0IHsgR3JpZFJvd01vZGVsIH07XHJcbmV4cG9ydCB7IEdyaWRDb2x1bW5Nb2RlbCB9O1xyXG5leHBvcnQgeyBHcmlkVmlldyB9O1xyXG5pbXBvcnQgXCIuLi9lbGVtZW50cy9jb250cm9scy9zYXNoZXNcIjtcclxuaW1wb3J0IFwiLi4vZWxlbWVudHMvY29udGFpbmVycy9ncmlkXCI7XHJcbmltcG9ydCBcIi4uL2VsZW1lbnRzL2NvbnRhaW5lcnMvbWVudXNcIjtcclxuaW1wb3J0IHsgREVGQVVMVF9USEVNRV9BUlJPV19EUk9QRE9XTl9JTUFHRSwgREVGQVVMVF9USEVNRV9BUlJPV19EUk9QVVBfSU1BR0UgfSBmcm9tIFwiLi4vc3R5bGVzaGVldHMvVGhlbWVcIjtcclxuY2xhc3MgR3JpZE1vZGVsIGV4dGVuZHMgTW9kZWxPYmplY3Qge1xyXG4gICAgcm93cztcclxuICAgIGNvbHVtbnM7XHJcbiAgICBjb25zdHJ1Y3Rvcihpbml0KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBjb25zdCB7IHJvd3M6IGluaXRSb3dzID0gW10sIGNvbHVtbnM6IGluaXRDb2x1bW5zID0gW10gfSA9IGluaXQgPz8ge307XHJcbiAgICAgICAgY29uc3Qgcm93cyA9IG5ldyBNb2RlbExpc3QoaW5pdFJvd3MpO1xyXG4gICAgICAgIHJvd3Muc2V0UGFyZW50KHRoaXMpO1xyXG4gICAgICAgIHRoaXMucm93cyA9IHJvd3M7XHJcbiAgICAgICAgY29uc3QgY29sdW1ucyA9IG5ldyBNb2RlbExpc3QoaW5pdENvbHVtbnMpO1xyXG4gICAgICAgIGNvbHVtbnMuc2V0UGFyZW50KHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY29sdW1ucyA9IGNvbHVtbnM7XHJcbiAgICB9XHJcbiAgICBnZXRDb2x1bW5CeU5hbWUobmFtZSkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY29sdW1ucy52YWx1ZXMoKSkuZmluZChjb2x1bW5faSA9PiBjb2x1bW5faS5uYW1lID09IG5hbWUpID8/IG51bGw7XHJcbiAgICB9XHJcbiAgICBzb3J0QnlDb2x1bW4oY29sdW1uLCBzb3J0T3JkZXIpIHtcclxuICAgICAgICBBcnJheS5mcm9tKHRoaXMuY29sdW1ucy52YWx1ZXMoKSkuZm9yRWFjaCgoY29sdW1uX2kpID0+IHtcclxuICAgICAgICAgICAgY29sdW1uX2kuc29ydG9yZGVyID0gY29sdW1uX2kgPT09IGNvbHVtbiA/IHNvcnRPcmRlciA6IHVuZGVmaW5lZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBzb3J0VGVzdCA9ICgoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgdHlwZSB9ID0gY29sdW1uO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgU3RyaW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChyb3dfMSwgcm93XzIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbF8xID0gU3RyaW5nKGNvbHVtbi5leHRyYWN0KHJvd18xKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxfMiA9IFN0cmluZyhjb2x1bW4uZXh0cmFjdChyb3dfMikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc29ydE9yZGVyICogY2VsbF8xLmxvY2FsZUNvbXBhcmUoY2VsbF8yKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAocm93XzEsIHJvd18yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxfMSA9IE51bWJlcihjb2x1bW4uZXh0cmFjdChyb3dfMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsXzIgPSBOdW1iZXIoY29sdW1uLmV4dHJhY3Qocm93XzIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguc2lnbihzb3J0T3JkZXIgKiAoY2VsbF8xIC0gY2VsbF8yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKCk7XHJcbiAgICAgICAgdGhpcy5yb3dzLnNvcnQoc29ydFRlc3QpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEdyaWRDb2x1bW5Nb2RlbCBleHRlbmRzIE1vZGVsT2JqZWN0IHtcclxuICAgIG5hbWU7XHJcbiAgICB0eXBlO1xyXG4gICAgbGFiZWw7XHJcbiAgICBleHRyYWN0O1xyXG4gICAgZmlsdGVycztcclxuICAgIHNvcnRvcmRlcjtcclxuICAgIGNvbnN0cnVjdG9yKGluaXQpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGNvbnN0IHsgbmFtZSwgdHlwZSwgbGFiZWwsIGV4dHJhY3QsIGZpbHRlcnMgPSBbXSB9ID0gaW5pdDtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5sYWJlbCA9IGxhYmVsO1xyXG4gICAgICAgIHRoaXMuZXh0cmFjdCA9IGV4dHJhY3Q7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJzID0gZmlsdGVycztcclxuICAgIH1cclxufVxyXG5fX2RlY29yYXRlKFtcclxuICAgIFJlYWN0aXZlUHJvcGVydHkoKVxyXG5dLCBHcmlkQ29sdW1uTW9kZWwucHJvdG90eXBlLCBcInNvcnRvcmRlclwiLCB2b2lkIDApO1xyXG5jbGFzcyBHcmlkUm93TW9kZWwgZXh0ZW5kcyBNb2RlbE9iamVjdCB7XHJcbiAgICBpZDtcclxuICAgIGNvbnN0cnVjdG9yKGluaXQpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGNvbnN0IHsgaWQgfSA9IGluaXQ7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgfVxyXG59XHJcbnZhciBzdHlsZTtcclxubGV0IEdyaWRWaWV3QmFzZSA9IGNsYXNzIEdyaWRWaWV3QmFzZSBleHRlbmRzIFZpZXcge1xyXG4gICAgI2NvbHVtbkRlbGVnYXRlO1xyXG4gICAgI2NlbGxEZWxlZ2F0ZTtcclxuICAgICNkaXNwbGF5RmlsdGVycztcclxuICAgIHN0YXRpYyB7XHJcbiAgICAgICAgc3R5bGUgPSAvKmNzcyovIGBcclxuICAgICAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGUtZ3JpZHJvd1toaWRkZW5dIHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGUtZ3JpZGNlbGxbdHlwZT1cImdyaWRjZWxsXCJdIHtcclxuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMDtcclxuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBjbGlwO1xyXG4gICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XHJcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlLWdyaWRjZWxsW3R5cGU9XCJjb2x1bW5oZWFkZXJcIl0ge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEyMHB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuZ3JpZGNlbGwtbGFiZWwsXHJcbiAgICAgICAgICAgIC5ncmlkaGVhZGVyLWxhYmVsIHtcclxuICAgICAgICAgICAgICAgIHBhZGRpbmctbGVmdDogNHB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuZ3JpZGNlbGwtY29udGVudCB7XHJcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogY2xpcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLmdyaWRoZWFkZXItY29udGVudCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuZ3JpZGhlYWRlci1sYWJlbCB7XHJcbiAgICAgICAgICAgICAgICBmbGV4OiAxIDEgMDtcclxuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBjbGlwO1xyXG4gICAgICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XHJcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlLXRyZWVpdGVtOjpwYXJ0KGFycm93KSB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMThweDtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMThweDtcclxuICAgICAgICAgICAgICAgIG1hcmdpbjogMXB4IDRweCAxcHggMXB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuZ3JpZGhlYWRlci1zb3J0LWluZGljYXRvciB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMThweDtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMThweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLmdyaWRoZWFkZXItc29ydC1pbmRpY2F0b3I6OmJlZm9yZSB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMThweDtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMThweDtcclxuICAgICAgICAgICAgICAgIG1hcmdpbjogMXB4O1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBtYXNrLXNpemU6IDE4cHggMThweDtcclxuICAgICAgICAgICAgICAgIC13ZWJraXQtbWFzay1zaXplOiAxOHB4IDE4cHg7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBub25lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlLWdyaWRjZWxsW3R5cGU9XCJjb2x1bW5oZWFkZXJcIl06bm90KFtkYXRhLXNvcnRvcmRlcl0pIC5ncmlkaGVhZGVyLXNvcnQtaW5kaWNhdG9yOjpiZWZvcmUge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdW5zZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGUtZ3JpZGNlbGxbdHlwZT1cImNvbHVtbmhlYWRlclwiXVtkYXRhLXNvcnRvcmRlcj1cIjFcIl0gLmdyaWRoZWFkZXItc29ydC1pbmRpY2F0b3I6OmJlZm9yZSB7XHJcbiAgICAgICAgICAgICAgICAtd2Via2l0LW1hc2staW1hZ2U6IHZhcigtLXRoZW1lLWFycm93LWRyb3B1cC1pbWFnZSwgdXJsKCR7REVGQVVMVF9USEVNRV9BUlJPV19EUk9QVVBfSU1BR0V9KSk7XHJcbiAgICAgICAgICAgICAgICBtYXNrLWltYWdlOiB2YXIoLS10aGVtZS1hcnJvdy1kcm9wdXAtaW1hZ2UsIHVybCgke0RFRkFVTFRfVEhFTUVfQVJST1dfRFJPUFVQX0lNQUdFfSkpO1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGUtZ3JpZGNlbGxbdHlwZT1cImNvbHVtbmhlYWRlclwiXVtkYXRhLXNvcnRvcmRlcj1cIi0xXCJdIC5ncmlkaGVhZGVyLXNvcnQtaW5kaWNhdG9yOjpiZWZvcmUge1xyXG4gICAgICAgICAgICAgICAgLXdlYmtpdC1tYXNrLWltYWdlOiB2YXIoLS10aGVtZS1hcnJvdy1kcm9wZG93bi1pbWFnZSwgdXJsKCR7REVGQVVMVF9USEVNRV9BUlJPV19EUk9QRE9XTl9JTUFHRX0pKTtcclxuICAgICAgICAgICAgICAgIG1hc2staW1hZ2U6IHZhcigtLXRoZW1lLWFycm93LWRyb3Bkb3duLWltYWdlLCB1cmwoJHtERUZBVUxUX1RIRU1FX0FSUk9XX0RST1BET1dOX0lNQUdFfSkpO1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IobW9kZWwpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuI2Rpc3BsYXlGaWx0ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy4jY2VsbERlbGVnYXRlID1cclxuICAgICAgICAgICAgKHJvdywgY29sdW1uKSA9PiBlbGVtZW50KFwibGFiZWxcIiwge1xyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IGNvbHVtbi5leHRyYWN0KHJvdylcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy4jY29sdW1uRGVsZWdhdGUgPVxyXG4gICAgICAgICAgICAoY29sdW1uKSA9PiBlbGVtZW50KFwibGFiZWxcIiwge1xyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IGNvbHVtbi5sYWJlbFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgICAgICBjb25zdCBhZG9wdGVkU3R5bGVzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgICAgYWRvcHRlZFN0eWxlc2hlZXQucmVwbGFjZShzdHlsZSk7XHJcbiAgICAgICAgc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbYWRvcHRlZFN0eWxlc2hlZXQsIHJlc2V0U3R5bGVzaGVldF07XHJcbiAgICAgICAgdGhpcy5zZXRNb2RlbChtb2RlbCA/PyBuZXcgR3JpZE1vZGVsKCkpO1xyXG4gICAgfVxyXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xyXG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwicmVzaXphYmxlXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJzb3J0YWJsZVwiOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgZ3JpZEVsZW1lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiZS1ncmlkXCIpO1xyXG4gICAgfVxyXG4gICAgc2V0Q29sdW1uRGVsZWdhdGUoZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLiNjb2x1bW5EZWxlZ2F0ZSA9IGRlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgc2V0Q2VsbERlbGVnYXRlKGRlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy4jY2VsbERlbGVnYXRlID0gZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBnZXRSb3dFbGVtZW50KHJvdykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihgZS1ncmlkID4gZS1ncmlkYm9keSA+IGUtZ3JpZHJvd1tkYXRhLWluZGV4PScke3Jvdy5pZH0nXWApO1xyXG4gICAgfVxyXG4gICAgZ2V0Q29sdW1uSGVhZGVyRWxlbWVudChjb2x1bW4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoYGUtZ3JpZCA+IGUtZ3JpZGhlYWQgPiBlLWdyaWRjZWxsW2lkPSR7Y29sdW1uLm5hbWV9XWApO1xyXG4gICAgfVxyXG4gICAgZ2V0Q29sdW1uQ2VsbHNFbGVtZW50cyhjb2x1bW4pIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvckFsbChgZS1ncmlkID4gZS1ncmlkYm9keSA+IGUtZ3JpZHJvdyA+IGUtZ3JpZGNlbGxbaGVhZGVyc349JHtjb2x1bW4ubmFtZX1dYCkpO1xyXG4gICAgfVxyXG4gICAgcmVuZGVyU2hhZG93KCkge1xyXG4gICAgICAgIGNvbnN0IHsgbW9kZWwgfSA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50KGVsZW1lbnQoXCJlLWdyaWRcIiwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICB0YWJpbmRleDogMCxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGJ5OiBcInJvd1wiLFxyXG4gICAgICAgICAgICAgICAgbXVsdGlzZWN0YWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudChcImUtZ3JpZGhlYWRcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiByZWFjdGl2ZUNoaWxkRWxlbWVudHMobW9kZWwuY29sdW1ucywgY29sdW1uID0+IHRoaXMuI3JlbmRlckdyaWRDb2x1bW5IZWFkZXJDZWxsKGNvbHVtbikpLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0bWVudTogdGhpcy4jaGFuZGxlSGVhZENvbnRleHRNZW51RXZlbnQuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuI2hhbmRsZUhlYWRDbGlja0V2ZW50LmJpbmQodGhpcylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLWdyaWRib2R5XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogcmVhY3RpdmVDaGlsZEVsZW1lbnRzKG1vZGVsLnJvd3MsIHJvdyA9PiB0aGlzLiNyZW5kZXJHcmlkQm9keVJvdyhyb3cpKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuICAgIGZpbHRlcihyb3cpIHtcclxuICAgICAgICBjb25zdCBkaXNwbGF5RmlsdGVycyA9IHRoaXMuI2Rpc3BsYXlGaWx0ZXJzO1xyXG4gICAgICAgIHJldHVybiAoZGlzcGxheUZpbHRlcnMubGVuZ3RoID4gMCA/IGRpc3BsYXlGaWx0ZXJzLnNvbWUoZmlsdGVyX2kgPT4gZmlsdGVyX2kuZmlsdGVyKHJvdykpIDogdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBhZGREaXNwbGF5RmlsdGVyKGZpbHRlcikge1xyXG4gICAgICAgIGNvbnN0IHsgbW9kZWwsIGdyaWRFbGVtZW50IH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHsgcm93cyB9ID0gbW9kZWw7XHJcbiAgICAgICAgY29uc3QgZGlzcGxheUZpbHRlcnMgPSB0aGlzLiNkaXNwbGF5RmlsdGVycztcclxuICAgICAgICBpZiAoIWRpc3BsYXlGaWx0ZXJzLmluY2x1ZGVzKGZpbHRlcikpIHtcclxuICAgICAgICAgICAgZGlzcGxheUZpbHRlcnMucHVzaChmaWx0ZXIpO1xyXG4gICAgICAgICAgICBBcnJheS5mcm9tKHJvd3MudmFsdWVzKCkpLmZvckVhY2goKHJvd19pKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3dFbGVtZW50ID0gdGhpcy5nZXRSb3dFbGVtZW50KHJvd19pKTtcclxuICAgICAgICAgICAgICAgIGlmIChyb3dFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93RWxlbWVudC5oaWRkZW4gPSAhdGhpcy5maWx0ZXIocm93X2kpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ3JpZEVsZW1lbnQuY2xlYXJTZWxlY3Rpb24oKTtcclxuICAgIH1cclxuICAgIHJlbW92ZURpc3BsYXlGaWx0ZXIoZmlsdGVyKSB7XHJcbiAgICAgICAgY29uc3QgeyBtb2RlbCwgZ3JpZEVsZW1lbnQgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyByb3dzIH0gPSBtb2RlbDtcclxuICAgICAgICBjb25zdCBkaXNwbGF5RmlsdGVycyA9IHRoaXMuI2Rpc3BsYXlGaWx0ZXJzO1xyXG4gICAgICAgIGNvbnN0IGZpbHRlckluZGV4ID0gZGlzcGxheUZpbHRlcnMuaW5kZXhPZihmaWx0ZXIpO1xyXG4gICAgICAgIGlmIChmaWx0ZXJJbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIGRpc3BsYXlGaWx0ZXJzLnNwbGljZShmaWx0ZXJJbmRleCwgMSk7XHJcbiAgICAgICAgICAgIEFycmF5LmZyb20ocm93cy52YWx1ZXMoKSkuZm9yRWFjaCgocm93X2kpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd0VsZW1lbnQgPSB0aGlzLmdldFJvd0VsZW1lbnQocm93X2kpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvd0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByb3dFbGVtZW50LmhpZGRlbiA9ICF0aGlzLmZpbHRlcihyb3dfaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBncmlkRWxlbWVudC5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlQWxsRGlzcGxheUZpbHRlcnMoKSB7XHJcbiAgICAgICAgY29uc3QgeyBtb2RlbCwgZ3JpZEVsZW1lbnQgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyByb3dzIH0gPSBtb2RlbDtcclxuICAgICAgICBjb25zdCBkaXNwbGF5RmlsdGVycyA9IHRoaXMuI2Rpc3BsYXlGaWx0ZXJzO1xyXG4gICAgICAgIGRpc3BsYXlGaWx0ZXJzLnNwbGljZSgwLCBkaXNwbGF5RmlsdGVycy5sZW5ndGgpO1xyXG4gICAgICAgIEFycmF5LmZyb20ocm93cy52YWx1ZXMoKSkuZm9yRWFjaCgocm93X2kpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgcm93RWxlbWVudCA9IHRoaXMuZ2V0Um93RWxlbWVudChyb3dfaSk7XHJcbiAgICAgICAgICAgIGlmIChyb3dFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICByb3dFbGVtZW50LmhpZGRlbiA9ICF0aGlzLmZpbHRlcihyb3dfaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBncmlkRWxlbWVudC5jbGVhclNlbGVjdGlvbigpO1xyXG4gICAgfVxyXG4gICAgI3JlbmRlckdyaWRDb2x1bW5IZWFkZXJDZWxsKGNvbHVtbikge1xyXG4gICAgICAgIGNvbnN0IGdyaWRDb2x1bW5FbGVtZW50ID0gcmVhY3RpdmVFbGVtZW50KGNvbHVtbiwgZWxlbWVudChcImUtZ3JpZGNlbGxcIiwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImNvbHVtbmhlYWRlclwiLFxyXG4gICAgICAgICAgICAgICAgaWQ6IGNvbHVtbi5uYW1lXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50KFwic3BhblwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogXCJncmlkaGVhZGVyLWNvbnRlbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudChcInNwYW5cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImdyaWRoZWFkZXItbGFiZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiB0aGlzLiNjb2x1bW5EZWxlZ2F0ZShjb2x1bW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwic3BhblwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiZ3JpZGhlYWRlci1zb3J0LWluZGljYXRvclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwiZS13c2FzaFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbHM6IGNvbHVtbi5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH0pLCBbXCJzb3J0b3JkZXJcIl0sIChjZWxsLCBwcm9wZXJ0eSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAocHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzb3J0b3JkZXJcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YXNldCB9ID0gY2VsbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5ld1ZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQuc29ydG9yZGVyID0gbmV3VmFsdWUudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBkYXRhc2V0LnNvcnRvcmRlcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZ3JpZENvbHVtbkVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICAjcmVuZGVyR3JpZEJvZHlSb3cocm93KSB7XHJcbiAgICAgICAgY29uc3QgeyBtb2RlbCB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBncmlkUm93RWxlbWVudCA9IGVsZW1lbnQoXCJlLWdyaWRyb3dcIiwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICB0YWJpbmRleDogLTFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGF0YXNldDoge1xyXG4gICAgICAgICAgICAgICAgaW5kZXg6IHJvdy5pZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjaGlsZHJlbjogcmVhY3RpdmVDaGlsZEVsZW1lbnRzKG1vZGVsLmNvbHVtbnMsIGNvbHVtbiA9PiB0aGlzLiNyZW5kZXJHcmlkRGF0YUNlbGwocm93LCBjb2x1bW4pKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBncmlkUm93RWxlbWVudDtcclxuICAgIH1cclxuICAgICNyZW5kZXJHcmlkRGF0YUNlbGwocm93LCBjb2x1bW4pIHtcclxuICAgICAgICBjb25zdCBncmlkQ2VsbEVsZW1lbnQgPSBlbGVtZW50KFwiZS1ncmlkY2VsbFwiLCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiZ3JpZGNlbGxcIixcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvbHVtbi5uYW1lXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNoaWxkcmVuOiBlbGVtZW50KFwic3BhblwiLCB7XHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiZ3JpZGNlbGwtY29udGVudFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwic3BhblwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImdyaWRjZWxsLWxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IHRoaXMuI2NlbGxEZWxlZ2F0ZShyb3csIGNvbHVtbilcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBncmlkQ2VsbEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlSGVhZENvbnRleHRNZW51RXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IGNsaWVudFgsIGNsaWVudFksIGN1cnJlbnRUYXJnZXQsIHRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgeyBncmlkRWxlbWVudCB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCB0YXJnZXRIZWFkID0gY3VycmVudFRhcmdldDtcclxuICAgICAgICBjb25zdCB0YXJnZXRIZWFkZXIgPSB0YXJnZXQuY2xvc2VzdChcImUtZ3JpZGNlbGxcIik7XHJcbiAgICAgICAgY29uc3QgeyBtb2RlbCB9ID0gdGhpcztcclxuICAgICAgICBpZiAodGFyZ2V0SGVhZGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbiA9IG1vZGVsLmdldENvbHVtbkJ5TmFtZSh0YXJnZXRIZWFkZXIuaWQpO1xyXG4gICAgICAgICAgICBjb25zdCB7IHNvcnRvcmRlciwgZmlsdGVycyB9ID0gY29sdW1uO1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0TWVudSA9IGVsZW1lbnQoXCJlLW1lbnVcIiwge1xyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHR1YWw6IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLW1lbnVpdGVtXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFwiUmVzaXplIEF1dG9cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJSZXNpemUgYXV0b1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sdW1uSGVhZGVyRWxlbWVudCA9IHRoaXMuZ2V0Q29sdW1uSGVhZGVyRWxlbWVudChjb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2x1bW5IZWFkZXJFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc3R5bGUgfSA9IGNvbHVtbkhlYWRlckVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVscyA9IHRoaXMuZ2V0Q29sdW1uQ2VsbHNFbGVtZW50cyhjb2x1bW4pLm1hcChjZWxsX2kgPT4gY2VsbF9pLnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZGNlbGwtbGFiZWxcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXhXaWR0aCA9IGxhYmVscy5yZWR1Y2UoKG1heFdpZHRoLCBsYWJlbCkgPT4gTWF0aC5tYXgobWF4V2lkdGgsIGxhYmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLnNldFByb3BlcnR5KFwid2lkdGhcIiwgYCR7bWF4V2lkdGh9cHhgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZEVsZW1lbnQuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLW1lbnVpdGVtXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFwiUmVzaXplIFRvIERlZmF1bHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJSZXNpemUgdG8gRGVmYXVsdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sdW1uSGVhZGVyRWxlbWVudCA9IHRoaXMuZ2V0Q29sdW1uSGVhZGVyRWxlbWVudChjb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2x1bW5IZWFkZXJFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc3R5bGUgfSA9IGNvbHVtbkhlYWRlckVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLnJlbW92ZVByb3BlcnR5KFwid2lkdGhcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwiZS1tZW51aXRlbVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3VibWVudVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFwiU29ydFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJTb3J0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwiZS1tZW51XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsb3Q6IFwibWVudVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwiZS1tZW51aXRlbVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJyYWRpb1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic29ydFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIjFcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCJBc2NlbmRpbmdcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBzb3J0b3JkZXIgPT09IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJBc2NlbmRpbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudChcImUtbWVudWl0ZW1cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicmFkaW9cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInNvcnRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCItMVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIkRlc2NlbmRpbmdcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBzb3J0b3JkZXIgPT09IC0xXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiRGVzY2VuZGluZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SXRlbSA9IHRhcmdldC5jbG9zZXN0KFwiZS1tZW51aXRlbVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwuc29ydEJ5Q29sdW1uKGNvbHVtbiwgTnVtYmVyKHRhcmdldEl0ZW0udmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudChcImUtbWVudWl0ZW1cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN1Ym1lbnVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIkZpbHRlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkZpbHRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudChcImUtbWVudVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbG90OiBcIm1lbnVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IGZpbHRlcnMubWFwKGZpbHRlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbmFtZSB9ID0gZmlsdGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudChcImUtbWVudWl0ZW1cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY2hlY2tib3hcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiB0aGlzLiNkaXNwbGF5RmlsdGVycy5pbmNsdWRlcyhmaWx0ZXIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBuYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IG5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY29uY2F0KGVsZW1lbnQoXCJlLW1lbnVpdGVtXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJidXR0b25cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIlJlbW92ZSBmaWx0ZXJzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiUmVtb3ZlIGZpbHRlcnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SXRlbSA9IHRhcmdldC5jbG9zZXN0KFwiZS1tZW51aXRlbVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBjaGVja2VkLCBsYWJlbCB9ID0gdGFyZ2V0SXRlbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSBmaWx0ZXJzLmZpbmQoZmlsdGVyID0+IGZpbHRlci5uYW1lID09PSBsYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGREaXNwbGF5RmlsdGVyKGZpbHRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZURpc3BsYXlGaWx0ZXIoZmlsdGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBbGxEaXNwbGF5RmlsdGVycygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRhcmdldEhlYWQuYXBwZW5kKGNvbnRleHRNZW51KTtcclxuICAgICAgICAgICAgY29udGV4dE1lbnUucG9zaXRpb25Db250ZXh0dWFsKGNsaWVudFgsIGNsaWVudFkpO1xyXG4gICAgICAgICAgICBjb250ZXh0TWVudS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZUhlYWRDbGlja0V2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHRhcmdldElzSGVhZGVyQ29udGVudCA9IHRhcmdldC5tYXRjaGVzKFwiZS1ncmlkY2VsbFt0eXBlPWNvbHVtbmhlYWRlcl0gOnNjb3BlOm5vdChlLXdzYXNoKVwiKTtcclxuICAgICAgICBpZiAodGFyZ2V0SXNIZWFkZXJDb250ZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEhlYWRlciA9IHRhcmdldC5jbG9zZXN0KFwiZS1ncmlkY2VsbFwiKTtcclxuICAgICAgICAgICAgY29uc3QgeyBtb2RlbCB9ID0gdGhpcztcclxuICAgICAgICAgICAgY29uc3QgeyBjb2x1bW5zIH0gPSBtb2RlbDtcclxuICAgICAgICAgICAgaWYgKHRhcmdldEhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q29sdW1uID0gQXJyYXkuZnJvbShjb2x1bW5zLnZhbHVlcygpKS5maW5kKGNvbHVtbl9pID0+IGNvbHVtbl9pLm5hbWUgPT0gdGFyZ2V0SGVhZGVyLmlkKTtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRDb2x1bW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHNvcnRvcmRlciA9IC0xIH0gPSB0YXJnZXRDb2x1bW47XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuc29ydEJ5Q29sdW1uKHRhcmdldENvbHVtbiwgLXNvcnRvcmRlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbkdyaWRWaWV3QmFzZSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgQ3VzdG9tRWxlbWVudCh7XHJcbiAgICAgICAgbmFtZTogXCJlLWdyaWR2aWV3XCJcclxuICAgIH0pXHJcbl0sIEdyaWRWaWV3QmFzZSk7XHJcbnZhciBHcmlkVmlldyA9IEdyaWRWaWV3QmFzZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R3JpZFZpZXcuanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgQXR0cmlidXRlUHJvcGVydHksIEN1c3RvbUVsZW1lbnQsIGVsZW1lbnQsIGZyYWdtZW50LCByZWFjdGl2ZUNoaWxkRWxlbWVudHMsIHJlYWN0aXZlRWxlbWVudCB9IGZyb20gXCIuLi9lbGVtZW50cy9FbGVtZW50XCI7XHJcbmltcG9ydCB7IE1vZGVsTGlzdCwgTW9kZWxPYmplY3QsIFJlYWN0aXZlUHJvcGVydHkgfSBmcm9tIFwiLi4vbW9kZWxzL01vZGVsXCI7XHJcbmltcG9ydCB7IHJlc2V0U3R5bGVzaGVldCB9IGZyb20gXCIuLi9zdHlsZXNoZWV0cy9SZXNldFwiO1xyXG5pbXBvcnQgeyBERUZBVUxUX1RIRU1FX0ZPQ1VTRURfSVRFTV9PVVRMSU5FX0NPTE9SIH0gZnJvbSBcIi4uL3N0eWxlc2hlZXRzL1RoZW1lXCI7XHJcbmltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi9WaWV3XCI7XHJcbmltcG9ydCBcIi4uL2VsZW1lbnRzL2NvbnRhaW5lcnMvdHJlZXNcIjtcclxuZXhwb3J0IHsgVHJlZUl0ZW1Nb2RlbExpc3QgfTtcclxuZXhwb3J0IHsgVHJlZU1vZGVsIH07XHJcbmV4cG9ydCB7IFRyZWVJdGVtTW9kZWwgfTtcclxuZXhwb3J0IHsgVHJlZVZpZXcgfTtcclxuY2xhc3MgVHJlZU1vZGVsIGV4dGVuZHMgTW9kZWxPYmplY3Qge1xyXG4gICAgaXRlbXM7XHJcbiAgICBjaGlsZEl0ZW1zO1xyXG4gICAgc29ydEZ1bmN0aW9uO1xyXG4gICAgY29uc3RydWN0b3IoaW5pdCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgY29uc3QgeyBpdGVtcyA9IFtdLCBzb3J0RnVuY3Rpb24gfSA9IGluaXQgPz8ge307XHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbV9pLCBpKSA9PiBpdGVtX2kuaW5kZXggPSBpKTtcclxuICAgICAgICBjb25zdCBjaGlsZEl0ZW1zID0gbmV3IE1vZGVsTGlzdChpdGVtcyk7XHJcbiAgICAgICAgY2hpbGRJdGVtcy5zZXRQYXJlbnQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5jaGlsZEl0ZW1zID0gY2hpbGRJdGVtcztcclxuICAgICAgICB0aGlzLml0ZW1zID0gbmV3IE1vZGVsTGlzdCh0aGlzLnN1YnRyZWVJdGVtcygpKTtcclxuICAgICAgICB0aGlzLnNvcnRGdW5jdGlvbiA9IHNvcnRGdW5jdGlvbiA/P1xyXG4gICAgICAgICAgICBmdW5jdGlvbiAoaXRlbV9hLCBpdGVtX2IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtX2EuaWQubG9jYWxlQ29tcGFyZShpdGVtX2IuaWQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vZGVsY2hhbmdlXCIsIHRoaXMuI2hhbmRsZU1vZGVsQ2hhbmdlRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlTW9kZWxDaGFuZ2VFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB7IGl0ZW1zLCBzb3J0RnVuY3Rpb24sIHN1YnRyZWVJdGVtcyB9ID0gdGhpcztcclxuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgTW9kZWxMaXN0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlY29yZHMgPSB0YXJnZXQuZ2V0UmVjb3JkcygpO1xyXG4gICAgICAgICAgICByZWNvcmRzLmZvckVhY2goKHJlY29yZF9pKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGluc2VydGVkSXRlbXMsIHJlbW92ZWRJdGVtcyB9ID0gcmVjb3JkX2k7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmbGF0dGVuZWRJbnNlcnRlZEl0ZW1zID0gQXJyYXkuZnJvbShpbnNlcnRlZEl0ZW1zLnZhbHVlcygpKS5mbGF0TWFwKGluc2VydGVkSXRlbV9pID0+IEFycmF5Lm9mKGluc2VydGVkSXRlbV9pLCAuLi5zdWJ0cmVlSXRlbXMuY2FsbChpbnNlcnRlZEl0ZW1faSkpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZsYXR0ZW5lZFJlbW92ZWRJdGVtcyA9IEFycmF5LmZyb20ocmVtb3ZlZEl0ZW1zLnZhbHVlcygpKS5mbGF0TWFwKHJlbW92ZWRJdGVtX2kgPT4gQXJyYXkub2YocmVtb3ZlZEl0ZW1faSwgLi4uc3VidHJlZUl0ZW1zLmNhbGwocmVtb3ZlZEl0ZW1faSkpKTtcclxuICAgICAgICAgICAgICAgIGl0ZW1zLmJlZ2luQ2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgaXRlbXMuYXBwZW5kKC4uLmZsYXR0ZW5lZEluc2VydGVkSXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgZmxhdHRlbmVkUmVtb3ZlZEl0ZW1zLmZvckVhY2goKHJlbW92ZWRJdGVtX2kpID0+IGl0ZW1zLnJlbW92ZShyZW1vdmVkSXRlbV9pKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc29ydEZ1bmN0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnNvcnQoc29ydEZ1bmN0aW9uKTtcclxuICAgICAgICAgICAgICAgIGl0ZW1zLmVuZENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIEFycmF5LmZyb20odGFyZ2V0LnZhbHVlcygpKS5mb3JFYWNoKChpdGVtX2ksIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW1faS5pbmRleCA9IGk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN1YnRyZWVJdGVtcygpIHtcclxuICAgICAgICBjb25zdCB7IGNoaWxkSXRlbXMgfSA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oY2hpbGRJdGVtcy52YWx1ZXMoKSkuZmxhdE1hcCh0cmVlSXRlbV9pID0+IEFycmF5Lm9mKHRyZWVJdGVtX2ksIC4uLnRyZWVJdGVtX2kuc3VidHJlZUl0ZW1zKCkpKTtcclxuICAgIH1cclxuICAgIGdldEl0ZW1CeVVyaSh1cmkpIHtcclxuICAgICAgICBjb25zdCB7IGNoaWxkSXRlbXMgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyBsZW5ndGg6IGl0ZW1zQ291bnQgfSA9IGNoaWxkSXRlbXM7XHJcbiAgICAgICAgY29uc3QgeyBsZW5ndGg6IHVyaUxlbmd0aCB9ID0gdXJpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXNDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1faSA9IGNoaWxkSXRlbXMuZ2V0KGkpO1xyXG4gICAgICAgICAgICBjb25zdCB7IHVyaTogaXRlbVVyaSB9ID0gaXRlbV9pO1xyXG4gICAgICAgICAgICBjb25zdCB7IGxlbmd0aDogaXRlbVVyaUxlbmd0aCB9ID0gaXRlbVVyaTtcclxuICAgICAgICAgICAgaWYgKHVyaS5zdGFydHNXaXRoKGl0ZW1VcmkpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbVVyaUxlbmd0aCA9PT0gdXJpTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1faTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBUcmVlTW9kZWwucHJvdG90eXBlLmdldEl0ZW1CeVVyaS5jYWxsKGl0ZW1faSwgdXJpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG5jbGFzcyBUcmVlSXRlbU1vZGVsTGlzdCB7XHJcbiAgICBpdGVtcztcclxuICAgIGNvbnN0cnVjdG9yKGl0ZW1zKSB7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvdW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zLmxlbmd0aDtcclxuICAgIH1cclxuICAgIHJlbW92ZSgpIHtcclxuICAgICAgICBjb25zdCB7IGl0ZW1zIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHJlbW92ZWRJdGVtc0dyb3VwcyA9IGl0ZW1zLnJlZHVjZSgobWFwLCBpdGVtX2kpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBwYXJlbnROb2RlIH0gPSBpdGVtX2k7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnROb2RlIGluc3RhbmNlb2YgVHJlZUl0ZW1Nb2RlbCB8fCBwYXJlbnROb2RlIGluc3RhbmNlb2YgVHJlZU1vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGNoaWxkSXRlbXMgfSA9IHBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBncm91cCA9IG1hcC5nZXQoY2hpbGRJdGVtcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXApXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAucHVzaChpdGVtX2kpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5zZXQoY2hpbGRJdGVtcywgW2l0ZW1faV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtYXA7XHJcbiAgICAgICAgfSwgbmV3IE1hcCgpKTtcclxuICAgICAgICBBcnJheS5mcm9tKHJlbW92ZWRJdGVtc0dyb3Vwcy5lbnRyaWVzKCkpLmZvckVhY2goKFtsaXN0X2ksIGNoaWxkcmVuX2ldKSA9PiB7XHJcbiAgICAgICAgICAgIGxpc3RfaS5iZWdpbkNoYW5nZXMoKTtcclxuICAgICAgICAgICAgY2hpbGRyZW5faS5mb3JFYWNoKChjaGlsZF9pKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsaXN0X2kucmVtb3ZlKGNoaWxkX2kpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGlzdF9pLmVuZENoYW5nZXMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBUcmVlSXRlbU1vZGVsIGV4dGVuZHMgTW9kZWxPYmplY3Qge1xyXG4gICAgY2hpbGRJdGVtcztcclxuICAgIGlkO1xyXG4gICAgdHlwZTtcclxuICAgIGluZGV4O1xyXG4gICAgZ2V0IGxldmVsKCkge1xyXG4gICAgICAgIGNvbnN0IHsgcGFyZW50Tm9kZSB9ID0gdGhpcztcclxuICAgICAgICBpZiAocGFyZW50Tm9kZSBpbnN0YW5jZW9mIFRyZWVJdGVtTW9kZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcmVudE5vZGUubGV2ZWwgKyAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IHVyaSgpIHtcclxuICAgICAgICBjb25zdCB7IHBhcmVudE5vZGUsIGlkIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChwYXJlbnROb2RlIGluc3RhbmNlb2YgVHJlZUl0ZW1Nb2RlbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYCR7cGFyZW50Tm9kZS51cml9JHtpZH0vYDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGAke2lkfS9gO1xyXG4gICAgfVxyXG4gICAgZ2V0IHBhcmVudEl0ZW0oKSB7XHJcbiAgICAgICAgY29uc3QgeyBwYXJlbnROb2RlIH0gPSB0aGlzO1xyXG4gICAgICAgIGlmIChwYXJlbnROb2RlIGluc3RhbmNlb2YgVHJlZUl0ZW1Nb2RlbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyZW50Tm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3Rvcihpbml0KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBjb25zdCB7IGlkLCB0eXBlLCBpdGVtcyA9IFtdIH0gPSBpbml0O1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW1faSwgaSkgPT4gaXRlbV9pLmluZGV4ID0gaSk7XHJcbiAgICAgICAgY29uc3QgY2hpbGRJdGVtcyA9IG5ldyBNb2RlbExpc3QoaXRlbXMpO1xyXG4gICAgICAgIGNoaWxkSXRlbXMuc2V0UGFyZW50KHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcclxuICAgICAgICB0aGlzLmNoaWxkSXRlbXMgPSBjaGlsZEl0ZW1zO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5pbmRleCA9IC0xO1xyXG4gICAgfVxyXG4gICAgc3VidHJlZUl0ZW1zKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY2hpbGRJdGVtcyB9ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShjaGlsZEl0ZW1zLnZhbHVlcygpKS5mbGF0TWFwKHRyZWVJdGVtX2kgPT4gQXJyYXkub2YodHJlZUl0ZW1faSwgLi4udHJlZUl0ZW1faS5zdWJ0cmVlSXRlbXMoKSkpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgcGFyZW50Tm9kZSB9ID0gdGhpcztcclxuICAgICAgICBpZiAocGFyZW50Tm9kZSBpbnN0YW5jZW9mIFRyZWVJdGVtTW9kZWwgfHwgcGFyZW50Tm9kZSBpbnN0YW5jZW9mIFRyZWVNb2RlbCkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGNoaWxkSXRlbXMgfSA9IHBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZEl0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZEl0ZW1zLnJlbW92ZSh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5fX2RlY29yYXRlKFtcclxuICAgIFJlYWN0aXZlUHJvcGVydHkoKVxyXG5dLCBUcmVlSXRlbU1vZGVsLnByb3RvdHlwZSwgXCJpZFwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIFJlYWN0aXZlUHJvcGVydHkoKVxyXG5dLCBUcmVlSXRlbU1vZGVsLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XHJcbl9fZGVjb3JhdGUoW1xyXG4gICAgUmVhY3RpdmVQcm9wZXJ0eSgpXHJcbl0sIFRyZWVJdGVtTW9kZWwucHJvdG90eXBlLCBcImluZGV4XCIsIHZvaWQgMCk7XHJcbnZhciBzdHlsZTtcclxubGV0IFRyZWVWaWV3QmFzZSA9IGNsYXNzIFRyZWVWaWV3QmFzZSBleHRlbmRzIFZpZXcge1xyXG4gICAgI2RyYWdJbWFnZXM7XHJcbiAgICBzdGF0aWMge1xyXG4gICAgICAgIHN0eWxlID0gLypjc3MqLyBgXHJcbiAgICAgICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAub2Zmc2NyZWVuIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgIHRvcDogMDtcclxuICAgICAgICAgICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwMCUpO1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLmRyYWdpbWFnZSB7XHJcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAxcHg7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lOiAxcHggc29saWQgdmFyKC0tdGhlbWUtZm9jdXNlZC1pdGVtLW91dGxpbmUtY29sb3IsICR7REVGQVVMVF9USEVNRV9GT0NVU0VEX0lURU1fT1VUTElORV9DT0xPUn0pO1xyXG4gICAgICAgICAgICAgICAgb3V0bGluZS1vZmZzZXQ6IC0xcHg7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7IFxyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMnB4IDRweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3Rvcihtb2RlbCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy4jZHJhZ0ltYWdlcyA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgICAgICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICAgICAgY29uc3QgYWRvcHRlZFN0eWxlc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xyXG4gICAgICAgIGFkb3B0ZWRTdHlsZXNoZWV0LnJlcGxhY2Uoc3R5bGUpO1xyXG4gICAgICAgIHNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzID0gW2Fkb3B0ZWRTdHlsZXNoZWV0LCByZXNldFN0eWxlc2hlZXRdO1xyXG4gICAgICAgIHRoaXMuc2V0TW9kZWwobW9kZWwgPz8gbmV3IFRyZWVNb2RlbCgpKTtcclxuICAgIH1cclxuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcclxuICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImRyYWdnYWJsZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHRyZWVFbGVtZW50IH0gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyZWVFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkuZnJvbSh0cmVlRWxlbWVudC5pdGVtcykuZm9yRWFjaChpdGVtX2kgPT4gaXRlbV9pLmRyYWdnYWJsZSA9IG5ld1ZhbHVlICE9PSBudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IHRyZWVFbGVtZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcImUtdHJlZVwiKTtcclxuICAgIH1cclxuICAgIHRyZWVJdGVtRWxlbWVudChpdGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKGBlLXRyZWVpdGVtW3VyaT0ke2l0ZW0udXJpfV1gKTtcclxuICAgIH1cclxuICAgICNnZXRUcmVlSXRlbUVsZW1lbnRVcmkoaXRlbSkge1xyXG4gICAgICAgIGxldCB1cmkgPSBcIlwiO1xyXG4gICAgICAgIGxldCBjbG9zZXN0SXRlbSA9IGl0ZW07XHJcbiAgICAgICAgd2hpbGUgKGNsb3Nlc3RJdGVtICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YXNldCwgcGFyZW50RWxlbWVudCB9ID0gY2xvc2VzdEl0ZW07XHJcbiAgICAgICAgICAgIHVyaSA9IGAke2RhdGFzZXQuaWR9L2AgKyB1cmk7XHJcbiAgICAgICAgICAgIGNsb3Nlc3RJdGVtID0gcGFyZW50RWxlbWVudD8uY2xvc2VzdChcImUtdHJlZWl0ZW1cIikgPz8gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVyaTtcclxuICAgIH1cclxuICAgIHRyZWVJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tb2RlbC5nZXRJdGVtQnlVcmkodGhpcy4jZ2V0VHJlZUl0ZW1FbGVtZW50VXJpKGVsZW1lbnQpKTtcclxuICAgIH1cclxuICAgIHJlbmRlclNoYWRvdygpIHtcclxuICAgICAgICBjb25zdCB7IG1vZGVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHRyZWVFbGVtZW50ID0gZWxlbWVudChcImUtdHJlZVwiLCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgIHRhYmluZGV4OiAwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjaGlsZHJlbjogcmVhY3RpdmVDaGlsZEVsZW1lbnRzKG1vZGVsLmNoaWxkSXRlbXMsIGl0ZW0gPT4gdGhpcy4jcmVuZGVyVHJlZUl0ZW0oaXRlbSkpLFxyXG4gICAgICAgICAgICBsaXN0ZW5lcnM6IHtcclxuICAgICAgICAgICAgICAgIGRyYWdzdGFydDogdGhpcy4jaGFuZGxlRHJhZ1N0YXJ0RXZlbnQuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIGRyb3A6IHRoaXMuI2hhbmRsZURyb3BFdmVudC5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgY29udGV4dG1lbnU6IHRoaXMuI2hhbmRsZUNvbnRleHRNZW51RXZlbnQuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIGZvY3VzOiB0aGlzLiNoYW5kbGVGb2N1c0V2ZW50LmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgICAgICBmb2N1c2luOiB0aGlzLiNoYW5kbGVGb2N1c0luRXZlbnQuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIGZvY3Vzb3V0OiB0aGlzLiNoYW5kbGVGb2N1c091dEV2ZW50LmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZnJhZ21lbnQodHJlZUVsZW1lbnQsIGVsZW1lbnQoXCJkaXZcIiwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICBjbGFzczogXCJvZmZzY3JlZW5cIixcclxuICAgICAgICAgICAgICAgIGhpZGRlbjogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjaGlsZHJlbjogcmVhY3RpdmVDaGlsZEVsZW1lbnRzKG1vZGVsLml0ZW1zLCBpdGVtID0+IHRoaXMuI3JlbmRlclRyZWVJdGVtRHJhZ0ltYWdlKGl0ZW0pKVxyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuICAgIGl0ZW1Db250ZW50RGVsZWdhdGUoaXRlbSkge1xyXG4gICAgICAgIHJldHVybiByZWFjdGl2ZUVsZW1lbnQoaXRlbSwgZWxlbWVudChcInNwYW5cIiksIFtcIm5hbWVcIl0sIChsYWJlbCwgcHJvcGVydHksIG9sZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaXRlbVRvb2xiYXJEZWxlZ2F0ZShpdGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBpdGVtTWVudURlbGVnYXRlKCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgc2VsZWN0ZWRJdGVtcygpIHtcclxuICAgICAgICBjb25zdCB7IHRyZWVFbGVtZW50IH0gPSB0aGlzO1xyXG4gICAgICAgIGlmICh0cmVlRWxlbWVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEVsZW1lbnRzID0gdHJlZUVsZW1lbnQuc2VsZWN0ZWRJdGVtcygpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRFbGVtZW50cy5tYXAoaXRlbV9pID0+IHRoaXMudHJlZUl0ZW0oaXRlbV9pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIGFjdGl2ZUl0ZW0oKSB7XHJcbiAgICAgICAgY29uc3QgeyB0cmVlRWxlbWVudCB9ID0gdGhpcztcclxuICAgICAgICBpZiAodHJlZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBhY3RpdmVJdGVtIH0gPSB0cmVlRWxlbWVudDtcclxuICAgICAgICAgICAgcmV0dXJuIGFjdGl2ZUl0ZW0gP1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmVlSXRlbShhY3RpdmVJdGVtKSA6XHJcbiAgICAgICAgICAgICAgICBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgICNnZXREcmFnSW1hZ2UobW9kZWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZHJhZ0ltYWdlcy5nZXQobW9kZWwpPy5kZXJlZigpID8/IG51bGw7XHJcbiAgICB9XHJcbiAgICAjcmVuZGVyVHJlZUl0ZW0oaXRlbSkge1xyXG4gICAgICAgIGNvbnN0IHsgZHJhZ2dhYmxlIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHsgaW5kZXgsIGxldmVsLCBpZCB9ID0gaXRlbTtcclxuICAgICAgICBjb25zdCB0b29sYmFyID0gdGhpcy5pdGVtVG9vbGJhckRlbGVnYXRlKGl0ZW0pO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLml0ZW1Db250ZW50RGVsZWdhdGUoaXRlbSk7XHJcbiAgICAgICAgY29uc3QgdHJlZUl0ZW1FbGVtZW50ID0gcmVhY3RpdmVFbGVtZW50KGl0ZW0sIGVsZW1lbnQoXCJlLXRyZWVpdGVtXCIsIHtcclxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBTdHJpbmcoZHJhZ2dhYmxlKSxcclxuICAgICAgICAgICAgICAgIHBvc2luc2V0OiBpbmRleCxcclxuICAgICAgICAgICAgICAgIGxldmVsOiBsZXZlbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkYXRhc2V0OiB7XHJcbiAgICAgICAgICAgICAgICBpZDogaWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgIC4uLihjb250ZW50ID8gW2NvbnRlbnRdIDogW10pLFxyXG4gICAgICAgICAgICAgICAgLi4uKHRvb2xiYXIgPyBbdG9vbGJhcl0gOiBbXSlcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH0pLCBbXCJpbmRleFwiLCBcImlkXCIsIFwidHlwZVwiXSwgKHRyZWVpdGVtLCBwcm9wZXJ0eU5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHByb3BlcnR5TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImluZGV4XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlaXRlbS5wb3NpbnNldCA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBcImlkXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGFzZXQgfSA9IHRyZWVpdGVtO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFzZXQuaWQgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0eXBlXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlaXRlbS50eXBlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicGFyZW50XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyZWVpdGVtLmFwcGVuZChlbGVtZW50KFwiZS10cmVlaXRlbWdyb3VwXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsb3Q6IFwiZ3JvdXBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IHJlYWN0aXZlQ2hpbGRFbGVtZW50cyhpdGVtLmNoaWxkSXRlbXMsIGl0ZW0gPT4gdGhpcy4jcmVuZGVyVHJlZUl0ZW0oaXRlbSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibGVhZlwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGdyb3VwIH0gPSB0cmVlaXRlbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChncm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdHJlZUl0ZW1FbGVtZW50O1xyXG4gICAgfVxyXG4gICAgI3JlbmRlclRyZWVJdGVtRHJhZ0ltYWdlKGl0ZW0pIHtcclxuICAgICAgICBjb25zdCBkcmFnSW1hZ2VFbGVtZW50ID0gcmVhY3RpdmVFbGVtZW50KGl0ZW0sIGVsZW1lbnQoXCJzcGFuXCIsIHtcclxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgY2xhc3M6IFwiZHJhZ2ltYWdlXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLCBbXCJuYW1lXCJdLCAoc3BhbiwgcHJvcGVydHksIG9sZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gbmV3VmFsdWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy4jZHJhZ0ltYWdlcy5zZXQoaXRlbSwgbmV3IFdlYWtSZWYoZHJhZ0ltYWdlRWxlbWVudCkpO1xyXG4gICAgICAgIHJldHVybiBkcmFnSW1hZ2VFbGVtZW50O1xyXG4gICAgfVxyXG4gICAgI2hhbmRsZURyYWdTdGFydEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyBjdXJyZW50VGFyZ2V0LCB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHRhcmdldFRyZWUgPSBjdXJyZW50VGFyZ2V0O1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEl0ZW0gPSB0YXJnZXQuY2xvc2VzdChcImUtdHJlZWl0ZW1cIik7XHJcbiAgICAgICAgY29uc3QgeyBtb2RlbCB9ID0gdGhpcztcclxuICAgICAgICBpZiAodGFyZ2V0SXRlbSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGRhdGFUcmFuc2ZlciB9ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkRWxlbWVudHMgPSB0YXJnZXRUcmVlLnNlbGVjdGVkSXRlbXMoKTtcclxuICAgICAgICAgICAgY29uc3QgeyBsZW5ndGg6IHNlbGVjdGVkQ291bnQgfSA9IHNlbGVjdGVkRWxlbWVudHM7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZENvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRVcmlzID0gc2VsZWN0ZWRFbGVtZW50c1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoZWxlbWVudF9pID0+IHRoaXMuI2dldFRyZWVJdGVtRWxlbWVudFVyaShlbGVtZW50X2kpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKHVyaV9pLCBfLCB1cmlzKSA9PiAhdXJpcy5zb21lKHVyaV9qID0+IHVyaV9pLnN0YXJ0c1dpdGgoYCR7dXJpX2p9L2ApKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZFVyaXNTdHJpbmcgPSBzZWxlY3RlZFVyaXMuam9pbihcIlxcblwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RVcmkgPSBzZWxlY3RlZFVyaXNbc2VsZWN0ZWRVcmlzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdEl0ZW0gPSBtb2RlbC5nZXRJdGVtQnlVcmkobGFzdFVyaSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdEl0ZW0gJiYgZGF0YVRyYW5zZmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSBcIm1vdmVcIjtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHJhbnNmZXIuc2V0RGF0YShcInRleHQvcGxhaW5cIiwgc2VsZWN0ZWRVcmlzU3RyaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmFnSW1hZ2UgPSB0aGlzLiNnZXREcmFnSW1hZ2UobGFzdEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkcmFnSW1hZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShkcmFnSW1hZ2UsIC0xNiwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZURyb3BFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgY3VycmVudFRhcmdldCwgdGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB0YXJnZXRUcmVlID0gY3VycmVudFRhcmdldDtcclxuICAgICAgICBjb25zdCB0YXJnZXRJdGVtID0gdGFyZ2V0LmNsb3Nlc3QoXCJlLXRyZWVpdGVtXCIpO1xyXG4gICAgICAgIGNvbnN0IHsgbW9kZWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgeyBzb3J0RnVuY3Rpb24gfSA9IG1vZGVsO1xyXG4gICAgICAgIGlmICh0YXJnZXRJdGVtKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YVRyYW5zZmVyIH0gPSBldmVudDtcclxuICAgICAgICAgICAgaWYgKGRhdGFUcmFuc2Zlcikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VXJpID0gdGhpcy4jZ2V0VHJlZUl0ZW1FbGVtZW50VXJpKHRhcmdldEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SXRlbU1vZGVsID0gbW9kZWwuZ2V0SXRlbUJ5VXJpKHRhcmdldFVyaSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2ZlcmVkVXJpcyA9IGRhdGFUcmFuc2Zlci5nZXREYXRhKFwidGV4dC9wbGFpblwiKS5zcGxpdChcIlxcblwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldElzV2l0aGluID0gdHJhbnNmZXJlZFVyaXMuc29tZSh1cmlfaSA9PiB0YXJnZXRVcmkuc3RhcnRzV2l0aChgJHt1cmlfaX0vYCkgfHwgdXJpX2kgPT09IHRhcmdldFVyaSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldElzV2l0aGluKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhbnNmZXJlZEl0ZW1zID0gKHRyYW5zZmVyZWRVcmlzLm1hcCh1cmlfaSA9PiBtb2RlbC5nZXRJdGVtQnlVcmkodXJpX2kpKS5maWx0ZXIoaXRlbV9pID0+IGl0ZW1faSAhPT0gbnVsbCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdHlwZTogdGFyZ2V0VHlwZSwgcGFyZW50SXRlbTogdGFyZ2V0UGFyZW50SXRlbSB9ID0gdGFyZ2V0SXRlbU1vZGVsO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgY2hpbGRJdGVtczogdGFyZ2V0TGlzdCB9ID0gdGFyZ2V0VHlwZSA9PT0gXCJwYXJlbnRcIiA/IHRhcmdldEl0ZW1Nb2RlbCA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFBhcmVudEl0ZW0gPyB0YXJnZXRQYXJlbnRJdGVtIDogbW9kZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SXRlbXMgPSBBcnJheS5mcm9tKHRhcmdldExpc3QudmFsdWVzKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEl0ZW1zLmZvckVhY2goKGl0ZW1faSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzYW1lTGFiZWxJbmRleCA9IHRyYW5zZmVyZWRJdGVtcy5maW5kSW5kZXgoaXRlbV9qID0+IGl0ZW1fai5pZCA9PT0gaXRlbV9pLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNhbWVMYWJlbEluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvUmVwbGFjZSA9IGNvbmZpcm0oYFJlcGxhY2UgJHtpdGVtX2kuaWR9P2ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvUmVwbGFjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldExpc3QucmVtb3ZlKGl0ZW1faSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlcmVkSXRlbXMuY29weVdpdGhpbihzYW1lTGFiZWxJbmRleCwgc2FtZUxhYmVsSW5kZXggKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlcmVkSXRlbXMubGVuZ3RoLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2ZlcmVkSXRlbXNNb2RlbExpc3QgPSBuZXcgVHJlZUl0ZW1Nb2RlbExpc3QodHJhbnNmZXJlZEl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlcmVkSXRlbXNNb2RlbExpc3QucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvcnRGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRMaXN0LmJlZ2luQ2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRMaXN0LmFwcGVuZCguLi50cmFuc2ZlcmVkSXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRMaXN0LnNvcnQoc29ydEZ1bmN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TGlzdC5lbmRDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRMaXN0Lmluc2VydCh0YXJnZXRJdGVtLnBvc2luc2V0LCAuLi50cmFuc2ZlcmVkSXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdFbGVtZW50cyA9IHRhcmdldFRyZWUucXVlcnlTZWxlY3RvckFsbChgZS10cmVlaXRlbTppcygke3RyYW5zZmVyZWRJdGVtcy5tYXAoaXRlbV9pID0+IGBbZGF0YS11cmk9XCIke2l0ZW1faS51cml9XCJdYCkuam9pbihcIixcIil9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFRyZWUuYmVnaW5TZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdFbGVtZW50cy5mb3JFYWNoKGVsZW1lbnRfaSA9PiBlbGVtZW50X2kuc2VsZWN0ZWQgPSB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRUcmVlLmVuZFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZUNvbnRleHRNZW51RXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IGNsaWVudFgsIGNsaWVudFksIGN1cnJlbnRUYXJnZXQsIHRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0VHJlZSA9IGN1cnJlbnRUYXJnZXQ7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0SXRlbSA9IHRhcmdldC5jbG9zZXN0KFwiZS10cmVlaXRlbVwiKTtcclxuICAgICAgICBpZiAodGFyZ2V0SXRlbSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0TWVudSA9IHRoaXMuaXRlbU1lbnVEZWxlZ2F0ZSgpO1xyXG4gICAgICAgICAgICBpZiAoY29udGV4dE1lbnUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHRNZW51LmNvbnRleHR1YWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dE1lbnUuYWRkRXZlbnRMaXN0ZW5lcihcImNsb3NlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJdGVtLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0VHJlZS5hcHBlbmQoY29udGV4dE1lbnUpO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dE1lbnUucG9zaXRpb25Db250ZXh0dWFsKGNsaWVudFgsIGNsaWVudFkpO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dE1lbnUuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcbiAgICAjaGFuZGxlRm9jdXNFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgY3VycmVudFRhcmdldCwgcmVsYXRlZFRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0VHJlZSA9IGN1cnJlbnRUYXJnZXQ7XHJcbiAgICAgICAgaWYgKHJlbGF0ZWRUYXJnZXQgIT09IG51bGwgJiYgIXRoaXMuY29udGFpbnMocmVsYXRlZFRhcmdldCkpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVsYXRlZFBvc2l0aW9uID0gcmVsYXRlZFRhcmdldC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzKTtcclxuICAgICAgICAgICAgaWYgKCEocmVsYXRlZFBvc2l0aW9uICYgTm9kZS5ET0NVTUVOVF9QT1NJVElPTl9ESVNDT05ORUNURUQpICYmIChyZWxhdGVkUG9zaXRpb24gJiBOb2RlLkRPQ1VNRU5UX1BPU0lUSU9OX1BSRUNFRElORykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgYWN0aXZlSXRlbSB9ID0gdGFyZ2V0VHJlZTtcclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbVRvb2xiYXIgPSBhY3RpdmVJdGVtLnF1ZXJ5U2VsZWN0b3IoXCJlLXRvb2xiYXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1Ub29sYmFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1Ub29sYmFyLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgI2hhbmRsZUZvY3VzSW5FdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcclxuICAgICAgICBjb25zdCB0YXJnZXRJdGVtID0gdGFyZ2V0LmNsb3Nlc3QoXCJlLXRyZWVpdGVtXCIpO1xyXG4gICAgICAgIGlmICh0YXJnZXRJdGVtKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1Ub29sYmFyID0gdGFyZ2V0SXRlbS5xdWVyeVNlbGVjdG9yKFwiZS10b29sYmFyXCIpO1xyXG4gICAgICAgICAgICBpZiAoaXRlbVRvb2xiYXIpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1Ub29sYmFyLnRhYkluZGV4ID0gaXRlbVRvb2xiYXIuY29udGFpbnModGFyZ2V0KSA/IC0xIDogMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICNoYW5kbGVGb2N1c091dEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEl0ZW0gPSB0YXJnZXQuY2xvc2VzdChcImUtdHJlZWl0ZW1cIik7XHJcbiAgICAgICAgaWYgKHRhcmdldEl0ZW0pIHtcclxuICAgICAgICAgICAgY29uc3QgaXRlbVRvb2xiYXIgPSB0YXJnZXRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCJlLXRvb2xiYXJcIik7XHJcbiAgICAgICAgICAgIGlmIChpdGVtVG9vbGJhcikge1xyXG4gICAgICAgICAgICAgICAgaXRlbVRvb2xiYXIudGFiSW5kZXggPSBpdGVtVG9vbGJhci5jb250YWlucyh0YXJnZXQpID8gMCA6IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5fX2RlY29yYXRlKFtcclxuICAgIEF0dHJpYnV0ZVByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgb2JzZXJ2ZWQ6IHRydWUgfSlcclxuXSwgVHJlZVZpZXdCYXNlLnByb3RvdHlwZSwgXCJkcmFnZ2FibGVcIiwgdm9pZCAwKTtcclxuVHJlZVZpZXdCYXNlID0gX19kZWNvcmF0ZShbXHJcbiAgICBDdXN0b21FbGVtZW50KHtcclxuICAgICAgICBuYW1lOiBcImUtdHJlZXZpZXdcIlxyXG4gICAgfSlcclxuXSwgVHJlZVZpZXdCYXNlKTtcclxudmFyIFRyZWVWaWV3ID0gVHJlZVZpZXdCYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmVlVmlldy5qcy5tYXAiLCJleHBvcnQgeyBWaWV3IH07XHJcbmNsYXNzIFZpZXdCYXNlIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgI21vZGVsO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLiNtb2RlbCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBnZXQgbW9kZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI21vZGVsO1xyXG4gICAgfVxyXG4gICAgc2V0TW9kZWwobW9kZWwpIHtcclxuICAgICAgICBpZiAobW9kZWwgIT09IHRoaXMuI21vZGVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI21vZGVsID0gbW9kZWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVuZGVyTGlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcmVuZGVyU2hhZG93KCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB7IHNoYWRvd1Jvb3QgfSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHNoYWRvd1Jvb3QgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hhZG93ID0gdGhpcy5yZW5kZXJTaGFkb3coKTtcclxuICAgICAgICAgICAgaWYgKHNoYWRvdykge1xyXG4gICAgICAgICAgICAgICAgc2hhZG93Um9vdC5yZXBsYWNlQ2hpbGRyZW4oc2hhZG93KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsaWdodCA9IHRoaXMucmVuZGVyTGlnaHQoKTtcclxuICAgICAgICBpZiAobGlnaHQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXBsYWNlQ2hpbGRyZW4obGlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG52YXIgVmlldyA9IFZpZXdCYXNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1WaWV3LmpzLm1hcCIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmYgPSB7fTtcbi8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbi8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5lID0gKGNodW5rSWQpID0+IHtcblx0cmV0dXJuIFByb21pc2UuYWxsKE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uZikucmVkdWNlKChwcm9taXNlcywga2V5KSA9PiB7XG5cdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5mW2tleV0oY2h1bmtJZCwgcHJvbWlzZXMpO1xuXHRcdHJldHVybiBwcm9taXNlcztcblx0fSwgW10pKTtcbn07IiwiLy8gVGhpcyBmdW5jdGlvbiBhbGxvdyB0byByZWZlcmVuY2UgYXN5bmMgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnUgPSAoY2h1bmtJZCkgPT4ge1xuXHQvLyByZXR1cm4gdXJsIGZvciBmaWxlbmFtZXMgYmFzZWQgb24gdGVtcGxhdGVcblx0cmV0dXJuIFwiXCIgKyBjaHVua0lkICsgXCIubWFpbi5qc1wiO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJ2YXIgaW5Qcm9ncmVzcyA9IHt9O1xudmFyIGRhdGFXZWJwYWNrUHJlZml4ID0gXCJtYWluOlwiO1xuLy8gbG9hZFNjcmlwdCBmdW5jdGlvbiB0byBsb2FkIGEgc2NyaXB0IHZpYSBzY3JpcHQgdGFnXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmwgPSAodXJsLCBkb25lLCBrZXksIGNodW5rSWQpID0+IHtcblx0aWYoaW5Qcm9ncmVzc1t1cmxdKSB7IGluUHJvZ3Jlc3NbdXJsXS5wdXNoKGRvbmUpOyByZXR1cm47IH1cblx0dmFyIHNjcmlwdCwgbmVlZEF0dGFjaDtcblx0aWYoa2V5ICE9PSB1bmRlZmluZWQpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzY3JpcHRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgcyA9IHNjcmlwdHNbaV07XG5cdFx0XHRpZihzLmdldEF0dHJpYnV0ZShcInNyY1wiKSA9PSB1cmwgfHwgcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXdlYnBhY2tcIikgPT0gZGF0YVdlYnBhY2tQcmVmaXggKyBrZXkpIHsgc2NyaXB0ID0gczsgYnJlYWs7IH1cblx0XHR9XG5cdH1cblx0aWYoIXNjcmlwdCkge1xuXHRcdG5lZWRBdHRhY2ggPSB0cnVlO1xuXHRcdHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXG5cdFx0c2NyaXB0LmNoYXJzZXQgPSAndXRmLTgnO1xuXHRcdHNjcmlwdC50aW1lb3V0ID0gMTIwO1xuXHRcdGlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKSB7XG5cdFx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgX193ZWJwYWNrX3JlcXVpcmVfXy5uYyk7XG5cdFx0fVxuXHRcdHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXdlYnBhY2tcIiwgZGF0YVdlYnBhY2tQcmVmaXggKyBrZXkpO1xuXHRcdHNjcmlwdC5zcmMgPSB1cmw7XG5cdH1cblx0aW5Qcm9ncmVzc1t1cmxdID0gW2RvbmVdO1xuXHR2YXIgb25TY3JpcHRDb21wbGV0ZSA9IChwcmV2LCBldmVudCkgPT4ge1xuXHRcdC8vIGF2b2lkIG1lbSBsZWFrcyBpbiBJRS5cblx0XHRzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBudWxsO1xuXHRcdGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0XHR2YXIgZG9uZUZucyA9IGluUHJvZ3Jlc3NbdXJsXTtcblx0XHRkZWxldGUgaW5Qcm9ncmVzc1t1cmxdO1xuXHRcdHNjcmlwdC5wYXJlbnROb2RlICYmIHNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cdFx0ZG9uZUZucyAmJiBkb25lRm5zLmZvckVhY2goKGZuKSA9PiAoZm4oZXZlbnQpKSk7XG5cdFx0aWYocHJldikgcmV0dXJuIHByZXYoZXZlbnQpO1xuXHR9XG5cdDtcblx0dmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCB1bmRlZmluZWQsIHsgdHlwZTogJ3RpbWVvdXQnLCB0YXJnZXQ6IHNjcmlwdCB9KSwgMTIwMDAwKTtcblx0c2NyaXB0Lm9uZXJyb3IgPSBvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgc2NyaXB0Lm9uZXJyb3IpO1xuXHRzY3JpcHQub25sb2FkID0gb25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHNjcmlwdC5vbmxvYWQpO1xuXHRuZWVkQXR0YWNoICYmIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbn07IiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmIgPSBkb2N1bWVudC5iYXNlVVJJIHx8IHNlbGYubG9jYXRpb24uaHJlZjtcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHRcIm1haW5cIjogMFxufTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5mLmogPSAoY2h1bmtJZCwgcHJvbWlzZXMpID0+IHtcblx0XHQvLyBKU09OUCBjaHVuayBsb2FkaW5nIGZvciBqYXZhc2NyaXB0XG5cdFx0dmFyIGluc3RhbGxlZENodW5rRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpID8gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdIDogdW5kZWZpbmVkO1xuXHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSAhPT0gMCkgeyAvLyAwIG1lYW5zIFwiYWxyZWFkeSBpbnN0YWxsZWRcIi5cblxuXHRcdFx0Ly8gYSBQcm9taXNlIG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cblx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuXHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZih0cnVlKSB7IC8vIGFsbCBjaHVua3MgaGF2ZSBKU1xuXHRcdFx0XHRcdC8vIHNldHVwIFByb21pc2UgaW4gY2h1bmsgY2FjaGVcblx0XHRcdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IChpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbcmVzb2x2ZSwgcmVqZWN0XSkpO1xuXHRcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdID0gcHJvbWlzZSk7XG5cblx0XHRcdFx0XHQvLyBzdGFydCBjaHVuayBsb2FkaW5nXG5cdFx0XHRcdFx0dmFyIHVybCA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIF9fd2VicGFja19yZXF1aXJlX18udShjaHVua0lkKTtcblx0XHRcdFx0XHQvLyBjcmVhdGUgZXJyb3IgYmVmb3JlIHN0YWNrIHVud291bmQgdG8gZ2V0IHVzZWZ1bCBzdGFja3RyYWNlIGxhdGVyXG5cdFx0XHRcdFx0dmFyIGVycm9yID0gbmV3IEVycm9yKCk7XG5cdFx0XHRcdFx0dmFyIGxvYWRpbmdFbmRlZCA9IChldmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkpIHtcblx0XHRcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuXHRcdFx0XHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGVycm9yVHlwZSA9IGV2ZW50ICYmIChldmVudC50eXBlID09PSAnbG9hZCcgPyAnbWlzc2luZycgOiBldmVudC50eXBlKTtcblx0XHRcdFx0XHRcdFx0XHR2YXIgcmVhbFNyYyA9IGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuc3JjO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLm1lc3NhZ2UgPSAnTG9hZGluZyBjaHVuayAnICsgY2h1bmtJZCArICcgZmFpbGVkLlxcbignICsgZXJyb3JUeXBlICsgJzogJyArIHJlYWxTcmMgKyAnKSc7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IubmFtZSA9ICdDaHVua0xvYWRFcnJvcic7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IudHlwZSA9IGVycm9yVHlwZTtcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5yZXF1ZXN0ID0gcmVhbFNyYztcblx0XHRcdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGFbMV0oZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmwodXJsLCBsb2FkaW5nRW5kZWQsIFwiY2h1bmstXCIgKyBjaHVua0lkLCBjaHVua0lkKTtcblx0XHRcdFx0fSBlbHNlIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdFx0XHR9XG5cdFx0fVxufTtcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuLy8gbm8gb24gY2h1bmtzIGxvYWRlZFxuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoKGlkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMCkpKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdH1cblxufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua21haW5cIl0gPSBzZWxmW1wid2VicGFja0NodW5rbWFpblwiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiaW1wb3J0IHsgZWxlbWVudCB9IGZyb20gXCJlZGl0b3IvbGliL2VsZW1lbnRzL0VsZW1lbnRcIjtcclxuaW1wb3J0IHsgR3JpZENvbHVtbk1vZGVsLCBHcmlkTW9kZWwsIEdyaWRSb3dNb2RlbCB9IGZyb20gXCJlZGl0b3IvbGliL3ZpZXdzL0dyaWRWaWV3XCI7XHJcbmltcG9ydCB7IFRyZWVNb2RlbCB9IGZyb20gXCJlZGl0b3IvbGliL3ZpZXdzL1RyZWVWaWV3XCI7XHJcblxyXG5pbXBvcnQgeyB0aGVtZSB9IGZyb20gXCJlZGl0b3IvbGliL3N0eWxlc2hlZXRzL1RoZW1lXCI7XHJcblxyXG5pbXBvcnQgeyBNeVRyZWVJdGVtTW9kZWwsIE15VHJlZVZpZXcgfSBmcm9tIFwiLi9zcmMvTXlUcmVlVmlld1wiO1xyXG5pbXBvcnQgeyBNeUdyaWRSb3dNb2RlbCwgTXlHcmlkVmlldyB9IGZyb20gXCIuL3NyYy9NeUdyaWRWaWV3XCI7XHJcblxyXG5pbXBvcnQgXCJlZGl0b3IvbGliL2VsZW1lbnRzL2NvbnRhaW5lcnMvbGlzdHNcIjtcclxuaW1wb3J0IFwiZWRpdG9yL2xpYi9lbGVtZW50cy9jb250YWluZXJzL3RhYnNcIjtcclxuaW1wb3J0IFwiZWRpdG9yL2xpYi9lbGVtZW50cy9jb250YWluZXJzL21lbnVzXCI7XHJcbmltcG9ydCBcImVkaXRvci9saWIvZWxlbWVudHMvY29udGFpbmVycy9zdGF0dXNcIjtcclxuaW1wb3J0IFwiZWRpdG9yL2xpYi9lbGVtZW50cy9jb250cm9scy9zZWxlY3RcIjtcclxuaW1wb3J0IFwiZWRpdG9yL2xpYi9lbGVtZW50cy9taXNjXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFpbigpIHtcclxuICAgIGRvY3VtZW50LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFt0aGVtZS5zdHlsZXNoZWV0XTtcclxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kKFxyXG4gICAgICAgIC4uLk9iamVjdC52YWx1ZXModGhlbWUuaW1hZ2VzKCkpLm1hcChcclxuICAgICAgICAgICAgKGltZykgPT4gZWxlbWVudChcImxpbmtcIiwge1xyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbDogXCJwcmVsb2FkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYXM6IFwiaW1hZ2VcIixcclxuICAgICAgICAgICAgICAgICAgICBocmVmOiBpbWcsXHJcbiAgICAgICAgICAgICAgICAgICAgY3Jvc3NvcmlnaW46IFwiYW5vbnltb3VzXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBjb25zdCBncmlkVmlldyA9IG5ldyBNeUdyaWRWaWV3KCk7XHJcbiAgICBncmlkVmlldy5zZXRNb2RlbChcclxuICAgICAgICBuZXcgR3JpZE1vZGVsKHtcclxuICAgICAgICAgICAgY29sdW1uczogW1xyXG4gICAgICAgICAgICAgICAgbmV3IEdyaWRDb2x1bW5Nb2RlbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJuYW1lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIk5vbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3Q6IChyb3cpID0+ICg8TXlHcmlkUm93TW9kZWw+cm93KS5uYW1lXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIG5ldyBHcmlkQ29sdW1uTW9kZWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiY29sb3JcIixcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFwiQ291bGV1clwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3Q6IChyb3cpID0+ICg8TXlHcmlkUm93TW9kZWw+cm93KS5jb2xvclxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBuZXcgR3JpZENvbHVtbk1vZGVsKHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcImFnZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCJBZ2VcIixcclxuICAgICAgICAgICAgICAgICAgICBleHRyYWN0OiAocm93KSA9PiBTdHJpbmcoKDxNeUdyaWRSb3dNb2RlbD5yb3cpLmFnZSksXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyczogW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJNaW5vcnNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiAocm93KSA9PiAoPE15R3JpZFJvd01vZGVsPnJvdykuYWdlIDwgMThcclxuICAgICAgICAgICAgICAgICAgICB9LHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJNYWpvcnNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiAocm93KSA9PiAoPE15R3JpZFJvd01vZGVsPnJvdykuYWdlID49IDE4XHJcbiAgICAgICAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIHJvd3M6IFtcclxuICAgICAgICAgICAgICAgIG5ldyBNeUdyaWRSb3dNb2RlbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJMb3Vpc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGFnZTogMTMsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiYmxldVwiXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIG5ldyBNeUdyaWRSb3dNb2RlbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJNYXJpbmVcIixcclxuICAgICAgICAgICAgICAgICAgICBhZ2U6IDIxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcImJsZXVcIlxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBuZXcgTXlHcmlkUm93TW9kZWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiSmVhbi1DaHJpc3RvcGhlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYWdlOiAzMixcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCJyb3VnZVwiXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIG5ldyBNeUdyaWRSb3dNb2RlbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBbm5lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYWdlOiA1NCxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCJqYXVuZVwiXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIG5ldyBNeUdyaWRSb3dNb2RlbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJDbGF1ZGVcIixcclxuICAgICAgICAgICAgICAgICAgICBhZ2U6IDYxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIm5vaXJcIlxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBuZXcgTXlHcmlkUm93TW9kZWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiA2LFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiQmVub8OudFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGFnZTogMzgsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwidmVydFwiXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSlcclxuICAgICk7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChncmlkVmlldyk7XHJcbiAgICBncmlkVmlldy5yZW5kZXIoKTtcclxuXHJcbiAgICBjb25zdCB0cmVlTW9kZWwgPSBuZXcgVHJlZU1vZGVsKHtcclxuICAgICAgICBpdGVtczogW1xyXG4gICAgICAgICAgICBuZXcgTXlUcmVlSXRlbU1vZGVsKHtcclxuICAgICAgICAgICAgICAgIGlkOiBcIlRJIDBcIixcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwicGFyZW50XCIsXHJcbiAgICAgICAgICAgICAgICBpdGVtczogW1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBNeVRyZWVJdGVtTW9kZWwoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJUSSAxQVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInBhcmVudFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE15VHJlZUl0ZW1Nb2RlbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJsZWFmXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiVEkgMUFYXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE15VHJlZUl0ZW1Nb2RlbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicGFyZW50XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcIlRJIDFCXCJcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbmV3IE15VHJlZUl0ZW1Nb2RlbCh7XHJcbiAgICAgICAgICAgICAgICBpZDogXCJUSSAxXCIsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcInBhcmVudFwiLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6IFtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTXlUcmVlSXRlbU1vZGVsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiVEkgMUFcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJwYXJlbnRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBNeVRyZWVJdGVtTW9kZWwoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibGVhZlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcIlRJIDFBWFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBNeVRyZWVJdGVtTW9kZWwoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInBhcmVudFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJUSSAxQlwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG5ldyBNeVRyZWVJdGVtTW9kZWwoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJsZWFmXCIsXHJcbiAgICAgICAgICAgICAgICBpZDogXCJUSSAyXCJcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIG5ldyBNeVRyZWVJdGVtTW9kZWwoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJsZWFmXCIsXHJcbiAgICAgICAgICAgICAgICBpZDogXCJUSSAzXCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICBdXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCB0cmVlVmlldyA9IG5ldyBNeVRyZWVWaWV3KCk7XHJcbiAgICB0cmVlVmlldy5kcmFnZ2FibGUgPSB0cnVlO1xyXG4gICAgdHJlZVZpZXcuc2V0TW9kZWwodHJlZU1vZGVsKTtcclxuICAgIHRyZWVWaWV3LnJlbmRlcigpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmQodHJlZVZpZXcpO1xyXG5cclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKFxyXG4gICAgICAgIC4uLltcclxuICAgICAgICAgICAgXCJidWlsdGluc1wiLFxyXG4gICAgICAgICAgICBcInRhYmxpc3RcIixcclxuICAgICAgICAgICAgXCJzZWxlY3RcIixcclxuICAgICAgICAgICAgXCJzYXNoXCIsXHJcbiAgICAgICAgICAgIFwibG9hZGVyc1wiLFxyXG4gICAgICAgICAgICBcInRyZWVcIixcclxuICAgICAgICAgICAgXCJtZW51c1wiLFxyXG4gICAgICAgICAgICBcImxpc3RcIixcclxuICAgICAgICAgICAgXCJzdGF0dXNcIlxyXG4gICAgICAgIF0ubWFwKGV4YW1wbGUgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudChcImRldGFpbHNcIiwge1xyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50KFwic3VtbWFyeVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBgJHtleGFtcGxlfS5odG1sYFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQoXCJlLWltcG9ydFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogYGV4YW1wbGUvJHtleGFtcGxlfS5odG1sYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==